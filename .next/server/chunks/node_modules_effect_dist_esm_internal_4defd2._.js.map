{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"file":"effect.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/effect.ts"],"sourcesContent":["/** @internal */\nexport type OP_ASYNC = typeof OP_ASYNC\n\n/** @internal */\nexport const OP_ASYNC = \"Async\" as const\n\n/** @internal */\nexport type OP_COMMIT = typeof OP_COMMIT\n\n/** @internal */\nexport const OP_COMMIT = \"Commit\" as const\n\n/** @internal */\nexport type OP_FAILURE = typeof OP_FAILURE\n\n/** @internal */\nexport const OP_FAILURE = \"Failure\" as const\n\n/** @internal */\nexport type OP_ON_FAILURE = typeof OP_ON_FAILURE\n\n/** @internal */\nexport const OP_ON_FAILURE = \"OnFailure\" as const\n\n/** @internal */\nexport type OP_ON_SUCCESS = typeof OP_ON_SUCCESS\n\n/** @internal */\nexport const OP_ON_SUCCESS = \"OnSuccess\" as const\n\n/** @internal */\nexport type OP_ON_SUCCESS_AND_FAILURE = typeof OP_ON_SUCCESS_AND_FAILURE\n\n/** @internal */\nexport const OP_ON_SUCCESS_AND_FAILURE = \"OnSuccessAndFailure\" as const\n\n/** @internal */\nexport type OP_SUCCESS = typeof OP_SUCCESS\n\n/** @internal */\nexport const OP_SUCCESS = \"Success\" as const\n\n/** @internal */\nexport type OP_SYNC = typeof OP_SYNC\n\n/** @internal */\nexport const OP_SYNC = \"Sync\" as const\n\n/** @internal */\nexport const OP_TAG = \"Tag\" as const\n\n/** @internal */\nexport type OP_TAG = typeof OP_TAG\n\n/** @internal */\nexport type OP_UPDATE_RUNTIME_FLAGS = typeof OP_UPDATE_RUNTIME_FLAGS\n\n/** @internal */\nexport const OP_UPDATE_RUNTIME_FLAGS = \"UpdateRuntimeFlags\" as const\n\n/** @internal */\nexport type OP_WHILE = typeof OP_WHILE\n\n/** @internal */\nexport const OP_WHILE = \"While\" as const\n\n/** @internal */\nexport type OP_ITERATOR = typeof OP_ITERATOR\n\n/** @internal */\nexport const OP_ITERATOR = \"Iterator\" as const\n\n/** @internal */\nexport type OP_WITH_RUNTIME = typeof OP_WITH_RUNTIME\n\n/** @internal */\nexport const OP_WITH_RUNTIME = \"WithRuntime\" as const\n\n/** @internal */\nexport type OP_YIELD = typeof OP_YIELD\n\n/** @internal */\nexport const OP_YIELD = \"Yield\" as const\n\n/** @internal */\nexport type OP_REVERT_FLAGS = typeof OP_REVERT_FLAGS\n\n/** @internal */\nexport const OP_REVERT_FLAGS = \"RevertFlags\" as const\n"],"names":["OP_ASYNC","OP_COMMIT","OP_FAILURE","OP_ON_FAILURE","OP_ON_SUCCESS","OP_ON_SUCCESS_AND_FAILURE","OP_SUCCESS","OP_SYNC","OP_TAG","OP_UPDATE_RUNTIME_FLAGS","OP_WHILE","OP_ITERATOR","OP_WITH_RUNTIME","OP_YIELD","OP_REVERT_FLAGS"],"mappings":"AAGA,cAAA;;;;;;;;;;;;;;;;;AACO,MAAMA,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,SAAS,GAAG,QAAiB;AAMnC,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,aAAa,GAAG,WAAoB;AAM1C,MAAMC,aAAa,GAAG,WAAoB;AAM1C,MAAMC,yBAAyB,GAAG,qBAA8B;AAMhE,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,OAAO,GAAG,MAAe;AAG/B,MAAMC,MAAM,GAAG,KAAc;AAS7B,MAAMC,uBAAuB,GAAG,oBAA6B;AAM7D,MAAMC,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,eAAe,GAAG,aAAsB;AAM9C,MAAMC,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,eAAe,GAAG,aAAsB","ignoreList":[0]}},
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"file":"cause.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/cause.ts"],"sourcesContent":["/** @internal */\nexport const OP_DIE = \"Die\" as const\n\n/** @internal */\nexport type OP_DIE = typeof OP_DIE\n\n/** @internal */\nexport const OP_EMPTY = \"Empty\" as const\n\n/** @internal */\nexport type OP_EMPTY = typeof OP_EMPTY\n\n/** @internal */\nexport const OP_FAIL = \"Fail\" as const\n\n/** @internal */\nexport type OP_FAIL = typeof OP_FAIL\n\n/** @internal */\nexport const OP_INTERRUPT = \"Interrupt\" as const\n\n/** @internal */\nexport type OP_INTERRUPT = typeof OP_INTERRUPT\n\n/** @internal */\nexport const OP_PARALLEL = \"Parallel\" as const\n\n/** @internal */\nexport type OP_PARALLEL = typeof OP_PARALLEL\n\n/** @internal */\nexport const OP_SEQUENTIAL = \"Sequential\" as const\n\n/** @internal */\nexport type OP_SEQUENTIAL = typeof OP_SEQUENTIAL\n"],"names":["OP_DIE","OP_EMPTY","OP_FAIL","OP_INTERRUPT","OP_PARALLEL","OP_SEQUENTIAL"],"mappings":"AAAA,cAAA;;;;;;;;AACO,MAAMA,MAAM,GAAG,KAAc;AAM7B,MAAMC,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,YAAY,GAAG,WAAoB;AAMzC,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,aAAa,GAAG,YAAqB","ignoreList":[0]}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"file":"deferred.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/deferred.ts"],"sourcesContent":["/** @internal */\nexport const OP_STATE_PENDING = \"Pending\" as const\n\n/** @internal */\nexport type OP_STATE_PENDING = typeof OP_STATE_PENDING\n\n/** @internal */\nexport const OP_STATE_DONE = \"Done\" as const\n\n/** @internal */\nexport type OP_STATE_DONE = typeof OP_STATE_DONE\n"],"names":["OP_STATE_PENDING","OP_STATE_DONE"],"mappings":"AAAA,cAAA;;;;AACO,MAAMA,gBAAgB,GAAG,SAAkB;AAM3C,MAAMC,aAAa,GAAG,MAAe","ignoreList":[0]}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 77, "column": 0}, "map": {"version":3,"file":"configError.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/configError.ts"],"sourcesContent":["/** @internal */\nexport type OP_AND = typeof OP_AND\n\n/** @internal */\nexport const OP_AND = \"And\" as const\n\n/** @internal */\nexport type OP_OR = typeof OP_OR\n\n/** @internal */\nexport const OP_OR = \"Or\" as const\n\n/** @internal */\nexport type OP_INVALID_DATA = typeof OP_INVALID_DATA\n\n/** @internal */\nexport const OP_INVALID_DATA = \"InvalidData\" as const\n\n/** @internal */\nexport type OP_MISSING_DATA = typeof OP_MISSING_DATA\n\n/** @internal */\nexport const OP_MISSING_DATA = \"MissingData\" as const\n\n/** @internal */\nexport type OP_SOURCE_UNAVAILABLE = typeof OP_SOURCE_UNAVAILABLE\n\n/** @internal */\nexport const OP_SOURCE_UNAVAILABLE = \"SourceUnavailable\" as const\n\n/** @internal */\nexport type OP_UNSUPPORTED = typeof OP_UNSUPPORTED\n\n/** @internal */\nexport const OP_UNSUPPORTED = \"Unsupported\" as const\n"],"names":["OP_AND","OP_OR","OP_INVALID_DATA","OP_MISSING_DATA","OP_SOURCE_UNAVAILABLE","OP_UNSUPPORTED"],"mappings":"AAGA,cAAA;;;;;;;;AACO,MAAMA,MAAM,GAAG,KAAc;AAM7B,MAAMC,KAAK,GAAG,IAAa;AAM3B,MAAMC,eAAe,GAAG,aAAsB;AAM9C,MAAMC,eAAe,GAAG,aAAsB;AAM9C,MAAMC,qBAAqB,GAAG,mBAA4B;AAM1D,MAAMC,cAAc,GAAG,aAAsB","ignoreList":[0]}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 97, "column": 0}, "map": {"version":3,"file":"config.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/config.ts"],"sourcesContent":["/** @internal */\nexport type OP_CONSTANT = typeof OP_CONSTANT\n\n/** @internal */\nexport const OP_CONSTANT = \"Constant\" as const\n\n/** @internal */\nexport type OP_FAIL = typeof OP_FAIL\n\n/** @internal */\nexport const OP_FAIL = \"Fail\" as const\n\n/** @internal */\nexport type OP_FALLBACK = typeof OP_FALLBACK\n\n/** @internal */\nexport const OP_FALLBACK = \"Fallback\" as const\n\n/** @internal */\nexport type OP_DESCRIBED = typeof OP_DESCRIBED\n\n/** @internal */\nexport const OP_DESCRIBED = \"Described\" as const\n\n/** @internal */\nexport type OP_LAZY = typeof OP_LAZY\n\n/** @internal */\nexport const OP_LAZY = \"Lazy\" as const\n\n/** @internal */\nexport type OP_MAP_OR_FAIL = typeof OP_MAP_OR_FAIL\n\n/** @internal */\nexport const OP_MAP_OR_FAIL = \"MapOrFail\" as const\n\n/** @internal */\nexport type OP_NESTED = typeof OP_NESTED\n\n/** @internal */\nexport const OP_NESTED = \"Nested\" as const\n\n/** @internal */\nexport type OP_PRIMITIVE = typeof OP_PRIMITIVE\n\n/** @internal */\nexport const OP_PRIMITIVE = \"Primitive\" as const\n\n/** @internal */\nexport type OP_SEQUENCE = typeof OP_SEQUENCE\n\n/** @internal */\nexport const OP_SEQUENCE = \"Sequence\" as const\n\n/** @internal */\nexport type OP_HASHMAP = typeof OP_HASHMAP\n\n/** @internal */\nexport const OP_HASHMAP = \"HashMap\" as const\n\n/** @internal */\nexport type OP_ZIP_WITH = typeof OP_ZIP_WITH\n\n/** @internal */\nexport const OP_ZIP_WITH = \"ZipWith\" as const\n"],"names":["OP_CONSTANT","OP_FAIL","OP_FALLBACK","OP_DESCRIBED","OP_LAZY","OP_MAP_OR_FAIL","OP_NESTED","OP_PRIMITIVE","OP_SEQUENCE","OP_HASHMAP","OP_ZIP_WITH"],"mappings":"AAGA,cAAA;;;;;;;;;;;;;AACO,MAAMA,WAAW,GAAG,UAAmB;AAMvC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,YAAY,GAAG,WAAoB;AAMzC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,cAAc,GAAG,WAAoB;AAM3C,MAAMC,SAAS,GAAG,QAAiB;AAMnC,MAAMC,YAAY,GAAG,WAAoB;AAMzC,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,WAAW,GAAG,SAAkB","ignoreList":[0]}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"file":"layer.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/layer.ts"],"sourcesContent":["/** @internal */\nexport const OP_EXTEND_SCOPE = \"ExtendScope\" as const\n\n/** @internal */\nexport type OP_EXTEND_SCOPE = typeof OP_EXTEND_SCOPE\n\n/** @internal */\nexport const OP_FOLD = \"Fold\" as const\n\n/** @internal */\nexport type OP_FOLD = typeof OP_FOLD\n\n/** @internal */\nexport const OP_FRESH = \"Fresh\" as const\n\n/** @internal */\nexport type OP_FRESH = typeof OP_FRESH\n\n/** @internal */\nexport const OP_FROM_EFFECT = \"FromEffect\" as const\n\n/** @internal */\nexport type OP_FROM_EFFECT = typeof OP_FROM_EFFECT\n\n/** @internal */\nexport const OP_SCOPED = \"Scoped\" as const\n\n/** @internal */\nexport type OP_SCOPED = typeof OP_SCOPED\n\n/** @internal */\nexport const OP_SUSPEND = \"Suspend\" as const\n\n/** @internal */\nexport type OP_SUSPEND = typeof OP_SUSPEND\n\n/** @internal */\nexport const OP_PROVIDE = \"Provide\" as const\n\n/** @internal */\nexport type OP_PROVIDE = typeof OP_PROVIDE\n\n/** @internal */\nexport const OP_PROVIDE_MERGE = \"ProvideMerge\" as const\n\n/** @internal */\nexport type OP_PROVIDE_MERGE = typeof OP_PROVIDE_MERGE\n\n/** @internal */\nexport const OP_ZIP_WITH = \"ZipWith\" as const\n\n/** @internal */\nexport type OP_ZIP_WITH = typeof OP_ZIP_WITH\n"],"names":["OP_EXTEND_SCOPE","OP_FOLD","OP_FRESH","OP_FROM_EFFECT","OP_SCOPED","OP_SUSPEND","OP_PROVIDE","OP_PROVIDE_MERGE","OP_ZIP_WITH"],"mappings":"AAAA,cAAA;;;;;;;;;;;AACO,MAAMA,eAAe,GAAG,aAAsB;AAM9C,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,cAAc,GAAG,YAAqB;AAM5C,MAAMC,SAAS,GAAG,QAAiB;AAMnC,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,gBAAgB,GAAG,cAAuB;AAMhD,MAAMC,WAAW,GAAG,SAAkB","ignoreList":[0]}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"file":"channel.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channel.ts"],"sourcesContent":["/** @internal */\nexport const OP_BRACKET_OUT = \"BracketOut\" as const\n\n/** @internal */\nexport type OP_BRACKET_OUT = typeof OP_BRACKET_OUT\n\n/** @internal */\nexport const OP_BRIDGE = \"Bridge\" as const\n\n/** @internal */\nexport type OP_BRIDGE = typeof OP_BRIDGE\n\n/** @internal */\nexport const OP_CONCAT_ALL = \"ConcatAll\" as const\n\n/** @internal */\nexport type OP_CONCAT_ALL = typeof OP_CONCAT_ALL\n\n/** @internal */\nexport const OP_EMIT = \"Emit\" as const\n\n/** @internal */\nexport type OP_EMIT = typeof OP_EMIT\n\n/** @internal */\nexport const OP_ENSURING = \"Ensuring\" as const\n\n/** @internal */\nexport type OP_ENSURING = typeof OP_ENSURING\n\n/** @internal */\nexport const OP_FAIL = \"Fail\" as const\n\n/** @internal */\nexport type OP_FAIL = typeof OP_FAIL\n\n/** @internal */\nexport const OP_FOLD = \"Fold\" as const\n\n/** @internal */\nexport type OP_FOLD = typeof OP_FOLD\n\n/** @internal */\nexport const OP_FROM_EFFECT = \"FromEffect\" as const\n\n/** @internal */\nexport type OP_FROM_EFFECT = typeof OP_FROM_EFFECT\n\n/** @internal */\nexport const OP_PIPE_TO = \"PipeTo\" as const\n\n/** @internal */\nexport type OP_PIPE_TO = typeof OP_PIPE_TO\n\n/** @internal */\nexport const OP_PROVIDE = \"Provide\" as const\n\n/** @internal */\nexport type OP_PROVIDE = typeof OP_PROVIDE\n\n/** @internal */\nexport const OP_READ = \"Read\" as const\n\n/** @internal */\nexport type OP_READ = typeof OP_READ\n\n/** @internal */\nexport const OP_SUCCEED = \"Succeed\" as const\n\n/** @internal */\nexport type OP_SUCCEED = typeof OP_SUCCEED\n\n/** @internal */\nexport const OP_SUCCEED_NOW = \"SucceedNow\" as const\n\n/** @internal */\nexport type OP_SUCCEED_NOW = typeof OP_SUCCEED_NOW\n\n/** @internal */\nexport const OP_SUSPEND = \"Suspend\" as const\n\n/** @internal */\nexport type OP_SUSPEND = typeof OP_SUSPEND\n"],"names":["OP_BRACKET_OUT","OP_BRIDGE","OP_CONCAT_ALL","OP_EMIT","OP_ENSURING","OP_FAIL","OP_FOLD","OP_FROM_EFFECT","OP_PIPE_TO","OP_PROVIDE","OP_READ","OP_SUCCEED","OP_SUCCEED_NOW","OP_SUSPEND"],"mappings":"AAAA,cAAA;;;;;;;;;;;;;;;;AACO,MAAMA,cAAc,GAAG,YAAqB;AAM5C,MAAMC,SAAS,GAAG,QAAiB;AAMnC,MAAMC,aAAa,GAAG,WAAoB;AAM1C,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,cAAc,GAAG,YAAqB;AAM5C,MAAMC,UAAU,GAAG,QAAiB;AAMpC,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,cAAc,GAAG,YAAqB;AAM5C,MAAMC,UAAU,GAAG,SAAkB","ignoreList":[0]}},
    {"offset": {"line": 183, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"file":"continuation.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/continuation.ts"],"sourcesContent":["/** @internal */\nexport const OP_CONTINUATION_K = \"ContinuationK\" as const\n\n/** @internal */\nexport type OP_CONTINUATION_K = typeof OP_CONTINUATION_K\n\n/** @internal */\nexport const OP_CONTINUATION_FINALIZER = \"ContinuationFinalizer\" as const\n\n/** @internal */\nexport type OP_CONTINUATION_FINALIZER = typeof OP_CONTINUATION_FINALIZER\n"],"names":["OP_CONTINUATION_K","OP_CONTINUATION_FINALIZER"],"mappings":"AAAA,cAAA;;;;AACO,MAAMA,iBAAiB,GAAG,eAAwB;AAMlD,MAAMC,yBAAyB,GAAG,uBAAgC","ignoreList":[0]}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 201, "column": 0}, "map": {"version":3,"file":"channelUpstreamPullStrategy.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelUpstreamPullStrategy.ts"],"sourcesContent":["/** @internal */\nexport const OP_PULL_AFTER_NEXT = \"PullAfterNext\" as const\n\n/** @internal */\nexport type OP_PULL_AFTER_NEXT = typeof OP_PULL_AFTER_NEXT\n\n/** @internal */\nexport const OP_PULL_AFTER_ALL_ENQUEUED = \"PullAfterAllEnqueued\" as const\n\n/** @internal */\nexport type OP_PULL_AFTER_ALL_ENQUEUED = typeof OP_PULL_AFTER_ALL_ENQUEUED\n"],"names":["OP_PULL_AFTER_NEXT","OP_PULL_AFTER_ALL_ENQUEUED"],"mappings":"AAAA,cAAA;;;;AACO,MAAMA,kBAAkB,GAAG,eAAwB;AAMnD,MAAMC,0BAA0B,GAAG,sBAA+B","ignoreList":[0]}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 213, "column": 0}, "map": {"version":3,"file":"channelChildExecutorDecision.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelChildExecutorDecision.ts"],"sourcesContent":["/** @internal */\nexport const OP_CONTINUE = \"Continue\" as const\n\n/** @internal */\nexport type OP_CONTINUE = typeof OP_CONTINUE\n\n/** @internal */\nexport const OP_CLOSE = \"Close\" as const\n\n/** @internal */\nexport type OP_CLOSE = typeof OP_CLOSE\n\n/** @internal */\nexport const OP_YIELD = \"Yield\" as const\n\n/** @internal */\nexport type OP_YIELD = typeof OP_YIELD\n"],"names":["OP_CONTINUE","OP_CLOSE","OP_YIELD"],"mappings":"AAAA,cAAA;;;;;AACO,MAAMA,WAAW,GAAG,UAAmB;AAMvC,MAAMC,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,QAAQ,GAAG,OAAgB","ignoreList":[0]}},
    {"offset": {"line": 221, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"file":"channelMergeDecision.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelMergeDecision.ts"],"sourcesContent":["/** @internal */\nexport const OP_DONE = \"Done\" as const\n\n/** @internal */\nexport type OP_DONE = typeof OP_DONE\n\n/** @internal */\nexport const OP_AWAIT = \"Await\" as const\n\n/** @internal */\nexport type OP_AWAIT = typeof OP_AWAIT\n"],"names":["OP_DONE","OP_AWAIT"],"mappings":"AAAA,cAAA;;;;AACO,MAAMA,OAAO,GAAG,MAAe;AAM/B,MAAMC,QAAQ,GAAG,OAAgB","ignoreList":[0]}},
    {"offset": {"line": 233, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 239, "column": 0}, "map": {"version":3,"file":"channelMergeStrategy.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelMergeStrategy.ts"],"sourcesContent":["/** @internal */\nexport const OP_BACK_PRESSURE = \"BackPressure\" as const\n\n/** @internal */\nexport type OP_BACK_PRESSURE = typeof OP_BACK_PRESSURE\n\n/** @internal */\nexport const OP_BUFFER_SLIDING = \"BufferSliding\" as const\n\n/** @internal */\nexport type OP_BUFFER_SLIDING = typeof OP_BUFFER_SLIDING\n"],"names":["OP_BACK_PRESSURE","OP_BUFFER_SLIDING"],"mappings":"AAAA,cAAA;;;;AACO,MAAMA,gBAAgB,GAAG,cAAuB;AAMhD,MAAMC,iBAAiB,GAAG,eAAwB","ignoreList":[0]}},
    {"offset": {"line": 245, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 251, "column": 0}, "map": {"version":3,"file":"channelMergeState.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelMergeState.ts"],"sourcesContent":["/** @internal */\nexport const OP_BOTH_RUNNING = \"BothRunning\" as const\n\n/** @internal */\nexport type OP_BOTH_RUNNING = typeof OP_BOTH_RUNNING\n\n/** @internal */\nexport const OP_LEFT_DONE = \"LeftDone\" as const\n\n/** @internal */\nexport type OP_LEFT_DONE = typeof OP_LEFT_DONE\n\n/** @internal */\nexport const OP_RIGHT_DONE = \"RightDone\" as const\n\n/** @internal */\nexport type OP_RIGHT_DONE = typeof OP_RIGHT_DONE\n"],"names":["OP_BOTH_RUNNING","OP_LEFT_DONE","OP_RIGHT_DONE"],"mappings":"AAAA,cAAA;;;;;AACO,MAAMA,eAAe,GAAG,aAAsB;AAM9C,MAAMC,YAAY,GAAG,UAAmB;AAMxC,MAAMC,aAAa,GAAG,WAAoB","ignoreList":[0]}},
    {"offset": {"line": 259, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 265, "column": 0}, "map": {"version":3,"file":"channelState.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelState.ts"],"sourcesContent":["/** @internal */\nexport const OP_DONE = \"Done\" as const\n\n/** @internal */\nexport type OP_DONE = typeof OP_DONE\n\n/** @internal */\nexport const OP_EMIT = \"Emit\" as const\n\n/** @internal */\nexport type OP_EMIT = typeof OP_EMIT\n\n/** @internal */\nexport const OP_FROM_EFFECT = \"FromEffect\" as const\n\n/** @internal */\nexport type OP_FROM_EFFECT = typeof OP_FROM_EFFECT\n\n/** @internal */\nexport const OP_READ = \"Read\" as const\n\n/** @internal */\nexport type OP_READ = typeof OP_READ\n"],"names":["OP_DONE","OP_EMIT","OP_FROM_EFFECT","OP_READ"],"mappings":"AAAA,cAAA;;;;;;AACO,MAAMA,OAAO,GAAG,MAAe;AAM/B,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,cAAc,GAAG,YAAqB;AAM5C,MAAMC,OAAO,GAAG,MAAe","ignoreList":[0]}},
    {"offset": {"line": 275, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 281, "column": 0}, "map": {"version":3,"file":"channelUpstreamPullRequest.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/channelUpstreamPullRequest.ts"],"sourcesContent":["/** @internal */\nexport const OP_PULLED = \"Pulled\" as const\n\n/** @internal */\nexport type OP_PULLED = typeof OP_PULLED\n\n/** @internal */\nexport const OP_NO_UPSTREAM = \"NoUpstream\" as const\n\n/** @internal */\nexport type OP_NO_UPSTREAM = typeof OP_NO_UPSTREAM\n"],"names":["OP_PULLED","OP_NO_UPSTREAM"],"mappings":"AAAA,cAAA;;;;AACO,MAAMA,SAAS,GAAG,QAAiB;AAMnC,MAAMC,cAAc,GAAG,YAAqB","ignoreList":[0]}},
    {"offset": {"line": 287, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 293, "column": 0}, "map": {"version":3,"file":"streamHaltStrategy.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/opCodes/streamHaltStrategy.ts"],"sourcesContent":["/** @internal */\nexport const OP_LEFT = \"Left\" as const\n\n/** @internal */\nexport type OP_LEFT = typeof OP_LEFT\n\n/** @internal */\nexport const OP_RIGHT = \"Right\" as const\n\n/** @internal */\nexport type OP_RIGHT = typeof OP_RIGHT\n\n/** @internal */\nexport const OP_BOTH = \"Both\" as const\n\n/** @internal */\nexport type OP_BOTH = typeof OP_BOTH\n\n/** @internal */\nexport const OP_EITHER = \"Either\" as const\n\n/** @internal */\nexport type OP_EITHER = typeof OP_EITHER\n"],"names":["OP_LEFT","OP_RIGHT","OP_BOTH","OP_EITHER"],"mappings":"AAAA,cAAA;;;;;;AACO,MAAMA,OAAO,GAAG,MAAe;AAM/B,MAAMC,QAAQ,GAAG,OAAgB;AAMjC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,SAAS,GAAG,QAAiB","ignoreList":[0]}},
    {"offset": {"line": 303, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 309, "column": 0}, "map": {"version":3,"file":"version.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/version.ts"],"sourcesContent":["let moduleVersion = \"3.11.5\"\n\nexport const getCurrentVersion = () => moduleVersion\n\nexport const setCurrentVersion = (version: string) => {\n  moduleVersion = version\n}\n"],"names":["moduleVersion","getCurrentVersion","setCurrentVersion","version"],"mappings":";;;;AAAA,IAAIA,aAAa,GAAG,QAAQ;AAErB,MAAMC,iBAAiB,GAAGA,CAAA,GAAMD,aAAa;AAE7C,MAAME,iBAAiB,IAAIC,OAAe,IAAI;IACnDH,aAAa,GAAGG,OAAO;AACzB,CAAC","ignoreList":[0]}},
    {"offset": {"line": 318, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 324, "column": 0}, "map": {"version":3,"file":"errors.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/errors.ts"],"sourcesContent":["/**\n * @since 2.0.0\n */\n\n/** @internal */\nexport const getBugErrorMessage = (message: string) =>\n  `BUG: ${message} - please report an issue at https://github.com/Effect-TS/effect/issues`\n"],"names":["getBugErrorMessage","message"],"mappings":"AAAA;;IAIA,cAAA;;;AACO,MAAMA,kBAAkB,IAAIC,OAAe,GAChD,CAAA,KAAA,EAAQA,OAAO,CAAA,uEAAA,CAAyE","ignoreList":[0]}},
    {"offset": {"line": 330, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 336, "column": 0}, "map": {"version":3,"file":"effectable.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/effectable.ts"],"sourcesContent":["import type * as Channel from \"../Channel.js\"\nimport type * as Effect from \"../Effect.js\"\nimport type * as Effectable from \"../Effectable.js\"\nimport * as Equal from \"../Equal.js\"\nimport * as Hash from \"../Hash.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport type * as Sink from \"../Sink.js\"\nimport type * as Stream from \"../Stream.js\"\nimport { SingleShotGen, YieldWrap } from \"../Utils.js\"\nimport * as OpCodes from \"./opCodes/effect.js\"\nimport * as version from \"./version.js\"\n\n/** @internal */\nexport const EffectTypeId: Effect.EffectTypeId = Symbol.for(\"effect/Effect\") as Effect.EffectTypeId\n\n/** @internal */\nexport const StreamTypeId: Stream.StreamTypeId = Symbol.for(\"effect/Stream\") as Stream.StreamTypeId\n\n/** @internal */\nexport const SinkTypeId: Sink.SinkTypeId = Symbol.for(\"effect/Sink\") as Sink.SinkTypeId\n\n/** @internal */\nexport const ChannelTypeId: Channel.ChannelTypeId = Symbol.for(\"effect/Channel\") as Channel.ChannelTypeId\n\n/** @internal */\nexport const effectVariance = {\n  /* c8 ignore next */\n  _R: (_: never) => _,\n  /* c8 ignore next */\n  _E: (_: never) => _,\n  /* c8 ignore next */\n  _A: (_: never) => _,\n\n  _V: version.getCurrentVersion()\n}\n\nconst sinkVariance = {\n  /* c8 ignore next */\n  _A: (_: never) => _,\n  /* c8 ignore next */\n  _In: (_: unknown) => _,\n  /* c8 ignore next */\n  _L: (_: never) => _,\n  /* c8 ignore next */\n  _E: (_: never) => _,\n  /* c8 ignore next */\n  _R: (_: never) => _\n}\n\nconst channelVariance = {\n  /* c8 ignore next */\n  _Env: (_: never) => _,\n  /* c8 ignore next */\n  _InErr: (_: unknown) => _,\n  /* c8 ignore next */\n  _InElem: (_: unknown) => _,\n  /* c8 ignore next */\n  _InDone: (_: unknown) => _,\n  /* c8 ignore next */\n  _OutErr: (_: never) => _,\n  /* c8 ignore next */\n  _OutElem: (_: never) => _,\n  /* c8 ignore next */\n  _OutDone: (_: never) => _\n}\n\n/** @internal */\nexport const EffectPrototype: Effect.Effect<never> & Equal.Equal = {\n  [EffectTypeId]: effectVariance,\n  [StreamTypeId]: effectVariance,\n  [SinkTypeId]: sinkVariance,\n  [ChannelTypeId]: channelVariance,\n  [Equal.symbol](that: any) {\n    return this === that\n  },\n  [Hash.symbol]() {\n    return Hash.cached(this, Hash.random(this))\n  },\n  [Symbol.iterator]() {\n    return new SingleShotGen(new YieldWrap(this)) as any\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const StructuralPrototype: Equal.Equal = {\n  [Hash.symbol]() {\n    return Hash.cached(this, Hash.structure(this))\n  },\n  [Equal.symbol](this: Equal.Equal, that: Equal.Equal) {\n    const selfKeys = Object.keys(this)\n    const thatKeys = Object.keys(that as object)\n    if (selfKeys.length !== thatKeys.length) {\n      return false\n    }\n    for (const key of selfKeys) {\n      if (!(key in (that as object) && Equal.equals((this as any)[key], (that as any)[key]))) {\n        return false\n      }\n    }\n    return true\n  }\n}\n\n/** @internal */\nexport const CommitPrototype: Effect.Effect<never> = {\n  ...EffectPrototype,\n  _op: OpCodes.OP_COMMIT\n} as any\n\n/** @internal */\nexport const StructuralCommitPrototype: Effect.Effect<never> = {\n  ...CommitPrototype,\n  ...StructuralPrototype\n} as any\n\n/** @internal */\nexport const Base: Effectable.CommitPrimitive = (function() {\n  function Base() {}\n  Base.prototype = CommitPrototype\n  return Base as any\n})()\n\n/** @internal */\nexport const StructuralBase: Effectable.CommitPrimitive = (function() {\n  function Base() {}\n  Base.prototype = StructuralCommitPrototype\n  return Base as any\n})()\n"],"names":["Equal","Hash","pipeArguments","SingleShotGen","YieldWrap","OpCodes","version","EffectTypeId","Symbol","for","StreamTypeId","SinkTypeId","ChannelTypeId","effectVariance","_R","_","_E","_A","_V","getCurrentVersion","sinkVariance","_In","_L","channelVariance","_Env","_InErr","_InElem","_InDone","_OutErr","_OutElem","_OutDone","EffectPrototype","symbol","that","cached","random","iterator","pipe","arguments","StructuralPrototype","structure","selfKeys","Object","keys","thatKeys","length","key","equals","CommitPrototype","_op","OP_COMMIT","StructuralCommitPrototype","Base","prototype","StructuralBase"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 441, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 447, "column": 0}, "map": {"version":3,"file":"singleShotGen.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/singleShotGen.ts"],"sourcesContent":["/** @internal */\nexport class SingleShotGen<T, A> implements Generator<T, A> {\n  called = false\n\n  constructor(readonly self: T) {\n  }\n\n  next(a: A): IteratorResult<T, A> {\n    return this.called ?\n      ({\n        value: a,\n        done: true\n      }) :\n      (this.called = true,\n        ({\n          value: this.self,\n          done: false\n        }))\n  }\n\n  return(a: A): IteratorResult<T, A> {\n    return ({\n      value: a,\n      done: true\n    })\n  }\n\n  throw(e: unknown): IteratorResult<T, A> {\n    throw e\n  }\n\n  [Symbol.iterator](): Generator<T, A> {\n    return new SingleShotGen<T, A>(this.self)\n  }\n}\n"],"names":["SingleShotGen","self","called","constructor","next","a","value","done","return","throw","e","Symbol","iterator"],"mappings":"AAAA,cAAA;;;AACM,MAAOA,aAAa;IAGHC,IAAA,CAAA;IAFrBC,MAAM,GAAG,KAAK,CAAA;IAEdC,YAAqBF,IAAO,CAAA;QAAP,IAAA,CAAAA,IAAI,GAAJA,IAAI;IACzB;IAEAG,IAAIA,CAACC,CAAI,EAAA;QACP,OAAO,IAAI,CAACH,MAAM,GACf;YACCI,KAAK,EAAED,CAAC;YACRE,IAAI,EAAE;SACP,GAAA,CACA,IAAI,CAACL,MAAM,GAAG,IAAI,EAChB;YACCI,KAAK,EAAE,IAAI,CAACL,IAAI;YAChBM,IAAI,EAAE;SACN,CAAC;IACT;IAEAC,MAAMA,CAACH,CAAI,EAAA;QACT,OAAQ;YACNC,KAAK,EAAED,CAAC;YACRE,IAAI,EAAE;SACP;IACH;IAEAE,KAAKA,CAACC,CAAU,EAAA;QACd,MAAMA,CAAC;IACT;IAEA,CAACC,MAAM,CAACC,QAAQ,CAAA,GAAC;QACf,OAAO,IAAIZ,aAAa,CAAO,IAAI,CAACC,IAAI,CAAC;IAC3C","ignoreList":[0]}},
    {"offset": {"line": 478, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 484, "column": 0}, "map": {"version":3,"file":"option.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/option.ts"],"sourcesContent":["/**\n * @since 2.0.0\n */\n\nimport * as Equal from \"../Equal.js\"\nimport * as Hash from \"../Hash.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport type * as Option from \"../Option.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport { EffectPrototype } from \"./effectable.js\"\n\nconst TypeId: Option.TypeId = Symbol.for(\"effect/Option\") as Option.TypeId\n\nconst CommonProto = {\n  ...EffectPrototype,\n  [TypeId]: {\n    _A: (_: never) => _\n  },\n  [NodeInspectSymbol]<A>(this: Option.Option<A>) {\n    return this.toJSON()\n  },\n  toString<A>(this: Option.Option<A>) {\n    return format(this.toJSON())\n  }\n}\n\nconst SomeProto = Object.assign(Object.create(CommonProto), {\n  _tag: \"Some\",\n  _op: \"Some\",\n  [Equal.symbol]<A>(this: Option.Some<A>, that: unknown): boolean {\n    return isOption(that) && isSome(that) && Equal.equals(this.value, that.value)\n  },\n  [Hash.symbol]<A>(this: Option.Some<A>) {\n    return Hash.cached(this, Hash.combine(Hash.hash(this._tag))(Hash.hash(this.value)))\n  },\n  toJSON<A>(this: Option.Some<A>) {\n    return {\n      _id: \"Option\",\n      _tag: this._tag,\n      value: toJSON(this.value)\n    }\n  }\n})\n\nconst NoneHash = Hash.hash(\"None\")\nconst NoneProto = Object.assign(Object.create(CommonProto), {\n  _tag: \"None\",\n  _op: \"None\",\n  [Equal.symbol]<A>(this: Option.None<A>, that: unknown): boolean {\n    return isOption(that) && isNone(that)\n  },\n  [Hash.symbol]<A>(this: Option.None<A>) {\n    return NoneHash\n  },\n  toJSON<A>(this: Option.None<A>) {\n    return {\n      _id: \"Option\",\n      _tag: this._tag\n    }\n  }\n})\n\n/** @internal */\nexport const isOption = (input: unknown): input is Option.Option<unknown> => hasProperty(input, TypeId)\n\n/** @internal */\nexport const isNone = <A>(fa: Option.Option<A>): fa is Option.None<A> => fa._tag === \"None\"\n\n/** @internal */\nexport const isSome = <A>(fa: Option.Option<A>): fa is Option.Some<A> => fa._tag === \"Some\"\n\n/** @internal */\nexport const none: Option.Option<never> = Object.create(NoneProto)\n\n/** @internal */\nexport const some = <A>(value: A): Option.Option<A> => {\n  const a = Object.create(SomeProto)\n  a.value = value\n  return a\n}\n"],"names":["Equal","Hash","format","NodeInspectSymbol","toJSON","hasProperty","EffectPrototype","TypeId","Symbol","for","CommonProto","_A","_","toString","SomeProto","Object","assign","create","_tag","_op","symbol","that","isOption","isSome","equals","value","cached","combine","hash","_id","NoneHash","NoneProto","isNone","input","fa","none","some","a"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 565, "column": 0}, "map": {"version":3,"file":"either.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/either.ts"],"sourcesContent":["/**\n * @since 2.0.0\n */\n\nimport type * as Either from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport { dual } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport type { Option } from \"../Option.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport { EffectPrototype } from \"./effectable.js\"\nimport * as option from \"./option.js\"\n\n/**\n * @internal\n */\nexport const TypeId: Either.TypeId = Symbol.for(\"effect/Either\") as Either.TypeId\n\nconst CommonProto = {\n  ...EffectPrototype,\n  [TypeId]: {\n    _R: (_: never) => _\n  },\n  [NodeInspectSymbol]<L, R>(this: Either.Either<R, L>) {\n    return this.toJSON()\n  },\n  toString<L, R>(this: Either.Left<L, R>) {\n    return format(this.toJSON())\n  }\n}\n\nconst RightProto = Object.assign(Object.create(CommonProto), {\n  _tag: \"Right\",\n  _op: \"Right\",\n  [Equal.symbol]<L, R>(this: Either.Right<L, R>, that: unknown): boolean {\n    return isEither(that) && isRight(that) && Equal.equals(this.right, that.right)\n  },\n  [Hash.symbol]<L, R>(this: Either.Right<L, R>) {\n    return Hash.combine(Hash.hash(this._tag))(Hash.hash(this.right))\n  },\n  toJSON<L, R>(this: Either.Right<L, R>) {\n    return {\n      _id: \"Either\",\n      _tag: this._tag,\n      right: toJSON(this.right)\n    }\n  }\n})\n\nconst LeftProto = Object.assign(Object.create(CommonProto), {\n  _tag: \"Left\",\n  _op: \"Left\",\n  [Equal.symbol]<L, R>(this: Either.Left<L, R>, that: unknown): boolean {\n    return isEither(that) && isLeft(that) && Equal.equals(this.left, that.left)\n  },\n  [Hash.symbol]<L, R>(this: Either.Left<L, R>) {\n    return Hash.combine(Hash.hash(this._tag))(Hash.hash(this.left))\n  },\n  toJSON<E, A>(this: Either.Left<E, A>) {\n    return {\n      _id: \"Either\",\n      _tag: this._tag,\n      left: toJSON(this.left)\n    }\n  }\n})\n\n/** @internal */\nexport const isEither = (input: unknown): input is Either.Either<unknown, unknown> => hasProperty(input, TypeId)\n\n/** @internal */\nexport const isLeft = <R, L>(ma: Either.Either<R, L>): ma is Either.Left<L, R> => ma._tag === \"Left\"\n\n/** @internal */\nexport const isRight = <R, L>(ma: Either.Either<R, L>): ma is Either.Right<L, R> => ma._tag === \"Right\"\n\n/** @internal */\nexport const left = <L>(left: L): Either.Either<never, L> => {\n  const a = Object.create(LeftProto)\n  a.left = left\n  return a\n}\n\n/** @internal */\nexport const right = <R>(right: R): Either.Either<R> => {\n  const a = Object.create(RightProto)\n  a.right = right\n  return a\n}\n\n/** @internal */\nexport const getLeft = <R, L>(\n  self: Either.Either<R, L>\n): Option<L> => (isRight(self) ? option.none : option.some(self.left))\n\n/** @internal */\nexport const getRight = <R, L>(\n  self: Either.Either<R, L>\n): Option<R> => (isLeft(self) ? option.none : option.some(self.right))\n\n/** @internal */\nexport const fromOption: {\n  <L>(onNone: () => L): <R>(self: Option<R>) => Either.Either<R, L>\n  <R, L>(self: Option<R>, onNone: () => L): Either.Either<R, L>\n} = dual(\n  2,\n  <R, L>(self: Option<R>, onNone: () => L): Either.Either<R, L> =>\n    option.isNone(self) ? left(onNone()) : right(self.value)\n)\n"],"names":["Equal","dual","Hash","format","NodeInspectSymbol","toJSON","hasProperty","EffectPrototype","option","TypeId","Symbol","for","CommonProto","_R","_","toString","RightProto","Object","assign","create","_tag","_op","symbol","that","isEither","isRight","equals","right","combine","hash","_id","LeftProto","isLeft","left","input","ma","a","getLeft","self","none","some","getRight","fromOption","onNone","isNone","value"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 655, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 661, "column": 0}, "map": {"version":3,"file":"doNotation.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/doNotation.ts"],"sourcesContent":["import type { NoInfer } from \"effect/Types\"\nimport { dual } from \"../Function.js\"\nimport type { Kind, TypeLambda } from \"../HKT.js\"\n\ntype Map<F extends TypeLambda> = {\n  <A, B>(f: (a: A) => B): <R, O, E>(self: Kind<F, R, O, E, A>) => Kind<F, R, O, E, B>\n  <R, O, E, A, B>(self: Kind<F, R, O, E, A>, f: (a: A) => B): Kind<F, R, O, E, B>\n}\n\ntype FlatMap<F extends TypeLambda> = {\n  <A, R2, O2, E2, B>(\n    f: (a: A) => Kind<F, R2, O2, E2, B>\n  ): <R1, O1, E1>(self: Kind<F, R1, O1, E1, A>) => Kind<F, R1 & R2, O1 | O2, E1 | E2, B>\n  <R1, O1, E1, A, R2, O2, E2, B>(\n    self: Kind<F, R1, O1, E1, A>,\n    f: (a: A) => Kind<F, R2, O2, E2, B>\n  ): Kind<F, R1 & R2, O1 | O2, E1 | E2, B>\n}\n\n/** @internal */\nexport const let_ = <F extends TypeLambda>(\n  map: Map<F>\n): {\n  <N extends string, A extends object, B>(\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => B\n  ): <R, O, E>(\n    self: Kind<F, R, O, E, A>\n  ) => Kind<F, R, O, E, { [K in keyof A | N]: K extends keyof A ? A[K] : B }>\n  <R, O, E, A extends object, N extends string, B>(\n    self: Kind<F, R, O, E, A>,\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => B\n  ): Kind<F, R, O, E, { [K in keyof A | N]: K extends keyof A ? A[K] : B }>\n} =>\n  dual(3, <R, O, E, A extends object, N extends string, B>(\n    self: Kind<F, R, O, E, A>,\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => B\n  ): Kind<F, R, O, E, { [K in keyof A | N]: K extends keyof A ? A[K] : B }> =>\n    map(self, (a) => Object.assign({}, a, { [name]: f(a) }) as any))\n\n/** @internal */\nexport const bindTo = <F extends TypeLambda>(map: Map<F>): {\n  <N extends string>(\n    name: N\n  ): <R, O, E, A>(self: Kind<F, R, O, E, A>) => Kind<F, R, O, E, { [K in N]: A }>\n  <R, O, E, A, N extends string>(\n    self: Kind<F, R, O, E, A>,\n    name: N\n  ): Kind<F, R, O, E, { [K in N]: A }>\n} =>\n  dual(2, <R, O, E, A, N extends string>(\n    self: Kind<F, R, O, E, A>,\n    name: N\n  ): Kind<F, R, O, E, { [K in N]: A }> => map(self, (a) => ({ [name]: a } as { [K in N]: A })))\n\n/** @internal */\nexport const bind = <F extends TypeLambda>(map: Map<F>, flatMap: FlatMap<F>): {\n  <N extends string, A extends object, R2, O2, E2, B>(\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => Kind<F, R2, O2, E2, B>\n  ): <R1, O1, E1>(\n    self: Kind<F, R1, O1, E1, A>\n  ) => Kind<F, R1 & R2, O1 | O2, E1 | E2, { [K in keyof A | N]: K extends keyof A ? A[K] : B }>\n  <R1, O1, E1, A extends object, N extends string, R2, O2, E2, B>(\n    self: Kind<F, R1, O1, E1, A>,\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => Kind<F, R2, O2, E2, B>\n  ): Kind<F, R1 & R2, O1 | O2, E1 | E2, { [K in keyof A | N]: K extends keyof A ? A[K] : B }>\n} =>\n  dual(3, <R1, O1, E1, A, N extends string, R2, O2, E2, B>(\n    self: Kind<F, R1, O1, E1, A>,\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => Kind<F, R2, O2, E2, B>\n  ): Kind<F, R1 & R2, O1 | O2, E1 | E2, { [K in keyof A | N]: K extends keyof A ? A[K] : B }> =>\n    flatMap(self, (a) =>\n      map(f(a), (b) => Object.assign({}, a, { [name]: b }) as { [K in keyof A | N]: K extends keyof A ? A[K] : B })))\n"],"names":["dual","let_","map","self","name","f","a","Object","assign","bindTo","bind","flatMap","b"],"mappings":";;;;;AACA,SAASA,IAAI,QAAQ,gBAAgB;;AAmB9B,MAAMC,IAAI,IACfC,GAAW,2JAcXF,OAAAA,AAAI,EAAC,CAAC,EAAE,CACNG,IAAyB,EACzBC,IAAyB,EACzBC,CAAuB,GAEvBH,GAAG,CAACC,IAAI,GAAGG,CAAC,GAAKC,MAAM,CAACC,MAAM,CAAC,CAAA,CAAE,EAAEF,CAAC,EAAE;gBAAE,CAACF,IAAI,CAAA,EAAGC,CAAC,CAACC,CAAC;YAAC,CAAE,CAAQ,CAAC,CAAC;AAG7D,MAAMG,MAAM,IAA0BP,GAAW,2JAStDF,OAAAA,AAAI,EAAC,CAAC,EAAE,CACNG,IAAyB,EACzBC,IAAO,GAC+BF,GAAG,CAACC,IAAI,EAAGG,CAAC,IAAA,CAAM;gBAAE,CAACF,IAAI,CAAA,EAAGE;YAAC,CAAsB,EAAC,CAAC;AAGxF,MAAMI,IAAI,GAAGA,CAAuBR,GAAW,EAAES,OAAmB,2JAazEX,OAAAA,AAAI,EAAC,CAAC,EAAE,CACNG,IAA4B,EAC5BC,IAAyB,EACzBC,CAA4C,GAE5CM,OAAO,CAACR,IAAI,GAAGG,CAAC,GACdJ,GAAG,CAACG,CAAC,CAACC,CAAC,CAAC,GAAGM,CAAC,GAAKL,MAAM,CAACC,MAAM,CAAC,CAAA,CAAE,EAAEF,CAAC,EAAE;oBAAE,CAACF,IAAI,CAAA,EAAGQ;gBAAC,CAAE,CAAyD,CAAC,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 677, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 683, "column": 0}, "map": {"version":3,"file":"array.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/array.ts"],"sourcesContent":["/**\n * @since 2.0.0\n */\n\nimport type { NonEmptyArray } from \"../Array.js\"\n\n/** @internal */\nexport const isNonEmptyArray = <A>(self: ReadonlyArray<A>): self is NonEmptyArray<A> => self.length > 0\n"],"names":["isNonEmptyArray","self","length"],"mappings":"AAAA;;IAMA,cAAA;;;AACO,MAAMA,eAAe,IAAOC,IAAsB,GAA+BA,IAAI,CAACC,MAAM,GAAG,CAAC","ignoreList":[0]}},
    {"offset": {"line": 689, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 695, "column": 0}, "map": {"version":3,"file":"array.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashMap/array.ts"],"sourcesContent":["/** @internal */\nexport function arrayUpdate<A>(mutate: boolean, at: number, v: A, arr: Array<A>) {\n  let out = arr\n  if (!mutate) {\n    const len = arr.length\n    out = new Array(len)\n    for (let i = 0; i < len; ++i) out[i] = arr[i]!\n  }\n  out[at] = v\n  return out\n}\n\n/** @internal */\nexport function arraySpliceOut<A>(mutate: boolean, at: number, arr: Array<A>) {\n  const newLen = arr.length - 1\n  let i = 0\n  let g = 0\n  let out = arr\n  if (mutate) {\n    i = g = at\n  } else {\n    out = new Array(newLen)\n    while (i < at) out[g++] = arr[i++]!\n  }\n  ;++i\n  while (i <= newLen) out[g++] = arr[i++]!\n  if (mutate) {\n    out.length = newLen\n  }\n  return out\n}\n\n/** @internal */\nexport function arraySpliceIn<A>(mutate: boolean, at: number, v: A, arr: Array<A>) {\n  const len = arr.length\n  if (mutate) {\n    let i = len\n    while (i >= at) arr[i--] = arr[i]!\n    arr[at] = v\n    return arr\n  }\n  let i = 0,\n    g = 0\n  const out = new Array<A>(len + 1)\n  while (i < at) out[g++] = arr[i++]!\n  out[at] = v\n  while (i < len) out[++g] = arr[i++]!\n  return out\n}\n"],"names":["arrayUpdate","mutate","at","v","arr","out","len","length","Array","i","arraySpliceOut","newLen","g","arraySpliceIn"],"mappings":"AAAA,cAAA;;;;;AACM,SAAUA,WAAWA,CAAIC,MAAe,EAAEC,EAAU,EAAEC,CAAI,EAAEC,GAAa;IAC7E,IAAIC,GAAG,GAAGD,GAAG;IACb,IAAI,CAACH,MAAM,EAAE;QACX,MAAMK,GAAG,GAAGF,GAAG,CAACG,MAAM;QACtBF,GAAG,GAAG,IAAIG,KAAK,CAACF,GAAG,CAAC;QACpB,IAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,GAAG,EAAE,EAAEG,CAAC,CAAEJ,GAAG,CAACI,CAAC,CAAC,GAAGL,GAAG,CAACK,CAAC,CAAE;IAChD;IACAJ,GAAG,CAACH,EAAE,CAAC,GAAGC,CAAC;IACX,OAAOE,GAAG;AACZ;AAGM,SAAUK,cAAcA,CAAIT,MAAe,EAAEC,EAAU,EAAEE,GAAa;IAC1E,MAAMO,MAAM,GAAGP,GAAG,CAACG,MAAM,GAAG,CAAC;IAC7B,IAAIE,CAAC,GAAG,CAAC;IACT,IAAIG,CAAC,GAAG,CAAC;IACT,IAAIP,GAAG,GAAGD,GAAG;IACb,IAAIH,MAAM,EAAE;QACVQ,CAAC,GAAGG,CAAC,GAAGV,EAAE;IACZ,CAAC,MAAM;QACLG,GAAG,GAAG,IAAIG,KAAK,CAACG,MAAM,CAAC;QACvB,MAAOF,CAAC,GAAGP,EAAE,CAAEG,GAAG,CAACO,CAAC,EAAE,CAAC,GAAGR,GAAG,CAACK,CAAC,EAAE,CAAE;IACrC;;IACC,EAAEA,CAAC;IACJ,MAAOA,CAAC,IAAIE,MAAM,CAAEN,GAAG,CAACO,CAAC,EAAE,CAAC,GAAGR,GAAG,CAACK,CAAC,EAAE,CAAE;IACxC,IAAIR,MAAM,EAAE;QACVI,GAAG,CAACE,MAAM,GAAGI,MAAM;IACrB;IACA,OAAON,GAAG;AACZ;AAGM,SAAUQ,aAAaA,CAAIZ,MAAe,EAAEC,EAAU,EAAEC,CAAI,EAAEC,GAAa;IAC/E,MAAME,GAAG,GAAGF,GAAG,CAACG,MAAM;IACtB,IAAIN,MAAM,EAAE;QACV,IAAIQ,CAAC,GAAGH,GAAG;QACX,MAAOG,CAAC,IAAIP,EAAE,CAAEE,GAAG,CAACK,CAAC,EAAE,CAAC,GAAGL,GAAG,CAACK,CAAC,CAAE;QAClCL,GAAG,CAACF,EAAE,CAAC,GAAGC,CAAC;QACX,OAAOC,GAAG;IACZ;IACA,IAAIK,CAAC,GAAG,CAAC,EACPG,CAAC,GAAG,CAAC;IACP,MAAMP,GAAG,GAAG,IAAIG,KAAK,CAAIF,GAAG,GAAG,CAAC,CAAC;IACjC,MAAOG,CAAC,GAAGP,EAAE,CAAEG,GAAG,CAACO,CAAC,EAAE,CAAC,GAAGR,GAAG,CAACK,CAAC,EAAE,CAAE;IACnCJ,GAAG,CAACH,EAAE,CAAC,GAAGC,CAAC;IACX,MAAOM,CAAC,GAAGH,GAAG,CAAED,GAAG,CAAC,EAAEO,CAAC,CAAC,GAAGR,GAAG,CAACK,CAAC,EAAE,CAAE;IACpC,OAAOJ,GAAG;AACZ","ignoreList":[0]}},
    {"offset": {"line": 744, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 750, "column": 0}, "map": {"version":3,"file":"config.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashMap/config.ts"],"sourcesContent":["/** @internal */\nexport const SIZE = 5\n\n/** @internal */\nexport const BUCKET_SIZE = Math.pow(2, SIZE)\n\n/** @internal */\nexport const MASK = BUCKET_SIZE - 1\n\n/** @internal */\nexport const MAX_INDEX_NODE = BUCKET_SIZE / 2\n\n/** @internal */\nexport const MIN_ARRAY_NODE = BUCKET_SIZE / 4\n"],"names":["SIZE","BUCKET_SIZE","Math","pow","MASK","MAX_INDEX_NODE","MIN_ARRAY_NODE"],"mappings":"AAAA,cAAA;;;;;;;AACO,MAAMA,IAAI,GAAG,CAAC;AAGd,MAAMC,WAAW,GAAA,WAAA,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEH,IAAI,CAAC;AAGrC,MAAMI,IAAI,GAAGH,WAAW,GAAG,CAAC;AAG5B,MAAMI,cAAc,GAAGJ,WAAW,GAAG,CAAC;AAGtC,MAAMK,cAAc,GAAGL,WAAW,GAAG,CAAC","ignoreList":[0]}},
    {"offset": {"line": 762, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 768, "column": 0}, "map": {"version":3,"file":"bitwise.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashMap/bitwise.ts"],"sourcesContent":["import { MASK } from \"./config.js\"\n\n/**\n * Hamming weight.\n *\n * Taken from: http://jsperf.com/hamming-weight\n *\n * @internal\n */\nexport function popcount(x: number) {\n  x -= (x >> 1) & 0x55555555\n  x = (x & 0x33333333) + ((x >> 2) & 0x33333333)\n  x = (x + (x >> 4)) & 0x0f0f0f0f\n  x += x >> 8\n  x += x >> 16\n  return x & 0x7f\n}\n\n/** @internal */\nexport function hashFragment(shift: number, h: number) {\n  return (h >>> shift) & MASK\n}\n\n/** @internal */\nexport function toBitmap(x: number) {\n  return 1 << x\n}\n\n/** @internal */\nexport function fromBitmap(bitmap: number, bit: number) {\n  return popcount(bitmap & (bit - 1))\n}\n"],"names":["MASK","popcount","x","hashFragment","shift","h","toBitmap","fromBitmap","bitmap","bit"],"mappings":";;;;;;AAAA,SAASA,IAAI,QAAQ,aAAa;;AAS5B,SAAUC,QAAQA,CAACC,CAAS;IAChCA,CAAC,IAAKA,CAAC,IAAI,CAAC,GAAI,UAAU;IAC1BA,CAAC,GAAG,CAACA,CAAC,GAAG,UAAU,IAAA,CAAMA,CAAC,IAAI,CAAC,GAAI,UAAU,CAAC;IAC9CA,CAAC,GAAIA,CAAC,GAAA,CAAIA,CAAC,IAAI,CAAC,CAAC,GAAI,UAAU;IAC/BA,CAAC,IAAIA,CAAC,IAAI,CAAC;IACXA,CAAC,IAAIA,CAAC,IAAI,EAAE;IACZ,OAAOA,CAAC,GAAG,IAAI;AACjB;AAGM,SAAUC,YAAYA,CAACC,KAAa,EAAEC,CAAS;IACnD,OAAQA,CAAC,KAAKD,KAAK,4KAAIJ,OAAI;AAC7B;AAGM,SAAUM,QAAQA,CAACJ,CAAS;IAChC,OAAO,CAAC,IAAIA,CAAC;AACf;AAGM,SAAUK,UAAUA,CAACC,MAAc,EAAEC,GAAW;IACpD,OAAOR,QAAQ,CAACO,MAAM,GAAIC,GAAG,GAAG,CAAE,CAAC;AACrC","ignoreList":[0]}},
    {"offset": {"line": 793, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 799, "column": 0}, "map": {"version":3,"file":"node.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashMap/node.ts"],"sourcesContent":["import { equals } from \"../../Equal.js\"\nimport type { HashMap } from \"../../HashMap.js\"\nimport * as O from \"../../Option.js\"\nimport { isTagged } from \"../../Predicate.js\"\nimport * as Stack from \"../stack.js\"\nimport { arraySpliceIn, arraySpliceOut, arrayUpdate } from \"./array.js\"\nimport { fromBitmap, hashFragment, toBitmap } from \"./bitwise.js\"\nimport { MAX_INDEX_NODE, MIN_ARRAY_NODE, SIZE } from \"./config.js\"\n\n/** @internal */\nexport type Node<K, V> =\n  | EmptyNode<K, V>\n  | LeafNode<K, V>\n  | CollisionNode<K, V>\n  | IndexedNode<K, V>\n  | ArrayNode<K, V>\n\n/** @internal */\nexport interface SizeRef {\n  value: number // mutable by design\n}\n\n/** @internal */\nexport class EmptyNode<out K, out V> {\n  readonly _tag = \"EmptyNode\"\n\n  modify(\n    edit: number,\n    _shift: number,\n    f: HashMap.UpdateFn<V>,\n    hash: number,\n    key: K,\n    size: SizeRef\n  ): Node<K, V> {\n    const v = f(O.none())\n    if (O.isNone(v)) return new EmptyNode()\n    ;++size.value\n    return new LeafNode(edit, hash, key, v)\n  }\n}\n\n/** @internal */\nexport function isEmptyNode(a: unknown): a is EmptyNode<unknown, unknown> {\n  return isTagged(a, \"EmptyNode\")\n}\n\n/** @internal */\nexport function isLeafNode<K, V>(\n  node: Node<K, V>\n): node is EmptyNode<K, V> | LeafNode<K, V> | CollisionNode<K, V> {\n  return isEmptyNode(node) || node._tag === \"LeafNode\" || node._tag === \"CollisionNode\"\n}\n\n/** @internal */\nexport function canEditNode<K, V>(node: Node<K, V>, edit: number): boolean {\n  return isEmptyNode(node) ? false : edit === node.edit\n}\n\n/** @internal */\nexport class LeafNode<out K, out V> {\n  readonly _tag = \"LeafNode\"\n\n  constructor(\n    readonly edit: number,\n    readonly hash: number,\n    readonly key: K,\n    public value: O.Option<V>\n  ) {}\n\n  modify(\n    edit: number,\n    shift: number,\n    f: HashMap.UpdateFn<V>,\n    hash: number,\n    key: K,\n    size: SizeRef\n  ): Node<K, V> {\n    if (equals(key, this.key)) {\n      const v = f(this.value)\n      if (v === this.value) return this\n      else if (O.isNone(v)) {\n        ;--size.value\n        return new EmptyNode()\n      }\n      if (canEditNode(this, edit)) {\n        this.value = v\n        return this\n      }\n      return new LeafNode(edit, hash, key, v)\n    }\n    const v = f(O.none())\n    if (O.isNone(v)) return this\n    ;++size.value\n    return mergeLeaves(\n      edit,\n      shift,\n      this.hash,\n      this,\n      hash,\n      new LeafNode(edit, hash, key, v)\n    )\n  }\n}\n\n/** @internal */\nexport class CollisionNode<out K, out V> {\n  readonly _tag = \"CollisionNode\"\n\n  constructor(\n    readonly edit: number,\n    readonly hash: number,\n    readonly children: Array<Node<K, V>>\n  ) {}\n\n  modify(\n    edit: number,\n    shift: number,\n    f: HashMap.UpdateFn<V>,\n    hash: number,\n    key: K,\n    size: SizeRef\n  ): Node<K, V> {\n    if (hash === this.hash) {\n      const canEdit = canEditNode(this, edit)\n      const list = this.updateCollisionList(\n        canEdit,\n        edit,\n        this.hash,\n        this.children,\n        f,\n        key,\n        size\n      )\n      if (list === this.children) return this\n\n      return list.length > 1 ? new CollisionNode(edit, this.hash, list) : list[0]! // collapse single element collision list\n    }\n    const v = f(O.none())\n    if (O.isNone(v)) return this\n    ;++size.value\n    return mergeLeaves(\n      edit,\n      shift,\n      this.hash,\n      this,\n      hash,\n      new LeafNode(edit, hash, key, v)\n    )\n  }\n\n  updateCollisionList(\n    mutate: boolean,\n    edit: number,\n    hash: number,\n    list: Array<Node<K, V>>,\n    f: HashMap.UpdateFn<V>,\n    key: K,\n    size: SizeRef\n  ) {\n    const len = list.length\n    for (let i = 0; i < len; ++i) {\n      const child = list[i]!\n      if (\"key\" in child && equals(key, child.key)) {\n        const value = child.value\n        const newValue = f(value)\n        if (newValue === value) return list\n        if (O.isNone(newValue)) {\n          ;--size.value\n          return arraySpliceOut(mutate, i, list)\n        }\n        return arrayUpdate(mutate, i, new LeafNode(edit, hash, key, newValue), list)\n      }\n    }\n\n    const newValue = f(O.none())\n    if (O.isNone(newValue)) return list\n    ;++size.value\n    return arrayUpdate(mutate, len, new LeafNode(edit, hash, key, newValue), list)\n  }\n}\n\n/** @internal */\nexport class IndexedNode<out K, out V> {\n  readonly _tag = \"IndexedNode\"\n\n  constructor(\n    readonly edit: number,\n    public mask: number,\n    public children: Array<Node<K, V>>\n  ) {}\n\n  modify(\n    edit: number,\n    shift: number,\n    f: HashMap.UpdateFn<V>,\n    hash: number,\n    key: K,\n    size: SizeRef\n  ): Node<K, V> {\n    const mask = this.mask\n    const children = this.children\n    const frag = hashFragment(shift, hash)\n    const bit = toBitmap(frag)\n    const indx = fromBitmap(mask, bit)\n    const exists = mask & bit\n    const canEdit = canEditNode(this, edit)\n\n    if (!exists) {\n      const _newChild = new EmptyNode<K, V>().modify(edit, shift + SIZE, f, hash, key, size)\n      if (!_newChild) return this\n      return children.length >= MAX_INDEX_NODE ?\n        expand(edit, frag, _newChild, mask, children) :\n        new IndexedNode(edit, mask | bit, arraySpliceIn(canEdit, indx, _newChild, children))\n    }\n\n    const current = children[indx]!\n    const child = current.modify(edit, shift + SIZE, f, hash, key, size)\n\n    if (current === child) return this\n    let bitmap = mask\n    let newChildren\n    if (isEmptyNode(child)) {\n      // remove\n      bitmap &= ~bit\n      if (!bitmap) return new EmptyNode()\n      if (children.length <= 2 && isLeafNode(children[indx ^ 1]!)) {\n        return children[indx ^ 1]! // collapse\n      }\n\n      newChildren = arraySpliceOut(canEdit, indx, children)\n    } else {\n      // modify\n      newChildren = arrayUpdate(canEdit, indx, child, children)\n    }\n\n    if (canEdit) {\n      this.mask = bitmap\n      this.children = newChildren\n      return this\n    }\n\n    return new IndexedNode(edit, bitmap, newChildren)\n  }\n}\n\n/** @internal */\nexport class ArrayNode<out K, out V> {\n  readonly _tag = \"ArrayNode\"\n\n  constructor(\n    readonly edit: number,\n    public size: number,\n    public children: Array<Node<K, V>>\n  ) {}\n\n  modify(\n    edit: number,\n    shift: number,\n    f: HashMap.UpdateFn<V>,\n    hash: number,\n    key: K,\n    size: SizeRef\n  ): Node<K, V> {\n    let count = this.size\n    const children = this.children\n    const frag = hashFragment(shift, hash)\n    const child = children[frag]\n    const newChild = (child || new EmptyNode<K, V>()).modify(\n      edit,\n      shift + SIZE,\n      f,\n      hash,\n      key,\n      size\n    )\n\n    if (child === newChild) return this\n\n    const canEdit = canEditNode(this, edit)\n    let newChildren\n    if (isEmptyNode(child) && !isEmptyNode(newChild)) {\n      // add\n      ;++count\n      newChildren = arrayUpdate(canEdit, frag, newChild, children)\n    } else if (!isEmptyNode(child) && isEmptyNode(newChild)) {\n      // remove\n      ;--count\n      if (count <= MIN_ARRAY_NODE) {\n        return pack(edit, count, frag, children)\n      }\n      newChildren = arrayUpdate(canEdit, frag, new EmptyNode<K, V>(), children)\n    } else {\n      // modify\n      newChildren = arrayUpdate(canEdit, frag, newChild, children)\n    }\n\n    if (canEdit) {\n      this.size = count\n      this.children = newChildren\n      return this\n    }\n    return new ArrayNode(edit, count, newChildren)\n  }\n}\n\nfunction pack<K, V>(\n  edit: number,\n  count: number,\n  removed: number,\n  elements: Array<Node<K, V>>\n) {\n  const children = new Array<Node<K, V>>(count - 1)\n  let g = 0\n  let bitmap = 0\n  for (let i = 0, len = elements.length; i < len; ++i) {\n    if (i !== removed) {\n      const elem = elements[i]\n      if (elem && !isEmptyNode(elem)) {\n        children[g++] = elem\n        bitmap |= 1 << i\n      }\n    }\n  }\n  return new IndexedNode(edit, bitmap, children)\n}\n\nfunction expand<K, V>(\n  edit: number,\n  frag: number,\n  child: Node<K, V>,\n  bitmap: number,\n  subNodes: Array<Node<K, V>>\n) {\n  const arr = []\n  let bit = bitmap\n  let count = 0\n  for (let i = 0; bit; ++i) {\n    if (bit & 1) arr[i] = subNodes[count++]!\n    bit >>>= 1\n  }\n  arr[frag] = child\n  return new ArrayNode(edit, count + 1, arr)\n}\n\nfunction mergeLeavesInner<K, V>(\n  edit: number,\n  shift: number,\n  h1: number,\n  n1: Node<K, V>,\n  h2: number,\n  n2: Node<K, V>\n): Node<K, V> | ((child: Node<K, V>) => Node<K, V>) {\n  if (h1 === h2) return new CollisionNode(edit, h1, [n2, n1])\n  const subH1 = hashFragment(shift, h1)\n  const subH2 = hashFragment(shift, h2)\n\n  if (subH1 === subH2) {\n    return (child) => new IndexedNode(edit, toBitmap(subH1) | toBitmap(subH2), [child])\n  } else {\n    const children = subH1 < subH2 ? [n1, n2] : [n2, n1]\n    return new IndexedNode(edit, toBitmap(subH1) | toBitmap(subH2), children)\n  }\n}\n\nfunction mergeLeaves<K, V>(\n  edit: number,\n  shift: number,\n  h1: number,\n  n1: Node<K, V>,\n  h2: number,\n  n2: Node<K, V>\n): Node<K, V> {\n  let stack: Stack.Stack<(node: Node<K, V>) => Node<K, V>> | undefined = undefined\n  let currentShift = shift\n\n  while (true) {\n    const res = mergeLeavesInner(edit, currentShift, h1, n1, h2, n2)\n\n    if (typeof res === \"function\") {\n      stack = Stack.make(res, stack)\n      currentShift = currentShift + SIZE\n    } else {\n      let final = res\n      while (stack != null) {\n        final = stack.value(final)\n        stack = stack.previous\n      }\n      return final\n    }\n  }\n}\n"],"names":["equals","O","isTagged","Stack","arraySpliceIn","arraySpliceOut","arrayUpdate","fromBitmap","hashFragment","toBitmap","MAX_INDEX_NODE","MIN_ARRAY_NODE","SIZE","EmptyNode","_tag","modify","edit","_shift","f","hash","key","size","v","none","isNone","value","LeafNode","isEmptyNode","a","isLeafNode","node","canEditNode","constructor","shift","mergeLeaves","CollisionNode","children","canEdit","list","updateCollisionList","length","mutate","len","i","child","newValue","IndexedNode","mask","frag","bit","indx","exists","_newChild","expand","current","bitmap","newChildren","ArrayNode","count","newChild","pack","removed","elements","Array","g","elem","subNodes","arr","mergeLeavesInner","h1","n1","h2","n2","subH1","subH2","stack","undefined","currentShift","res","make","final","previous"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1076, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1082, "column": 0}, "map": {"version":3,"file":"keySet.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashMap/keySet.ts"],"sourcesContent":["import type { HashMap } from \"../../HashMap.js\"\nimport type { HashSet } from \"../../HashSet.js\"\nimport { makeImpl } from \"../hashSet.js\"\n\n/** @internal */\nexport function keySet<K, V>(self: HashMap<K, V>): HashSet<K> {\n  return makeImpl(self)\n}\n"],"names":["makeImpl","keySet","self"],"mappings":";;;AAEA,SAASA,QAAQ,QAAQ,eAAe;;AAGlC,SAAUC,MAAMA,CAAOC,IAAmB;IAC9C,0KAAOF,WAAAA,AAAQ,EAACE,IAAI,CAAC;AACvB","ignoreList":[0]}},
    {"offset": {"line": 1090, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"file":"stack.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stack.ts"],"sourcesContent":["/** @internal */\nexport interface Stack<out A> {\n  readonly value: A\n  readonly previous: Stack<A> | undefined\n}\n\nexport const make = <A>(value: A, previous?: Stack<A>): Stack<A> => ({\n  value,\n  previous\n})\n"],"names":["make","value","previous"],"mappings":";;;AAMO,MAAMA,IAAI,GAAGA,CAAIC,KAAQ,EAAEC,QAAmB,GAAA,CAAgB;QACnED,KAAK;QACLC;KACD,CAAC","ignoreList":[0]}},
    {"offset": {"line": 1103, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1109, "column": 0}, "map": {"version":3,"file":"hashMap.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashMap.ts"],"sourcesContent":["import * as Equal from \"../Equal.js\"\nimport * as Dual from \"../Function.js\"\nimport { identity, pipe } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport type * as HM from \"../HashMap.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type { NoInfer } from \"../Types.js\"\nimport { fromBitmap, hashFragment, toBitmap } from \"./hashMap/bitwise.js\"\nimport { SIZE } from \"./hashMap/config.js\"\nimport * as Node from \"./hashMap/node.js\"\n\nconst HashMapSymbolKey = \"effect/HashMap\"\n\n/** @internal */\nexport const HashMapTypeId: HM.TypeId = Symbol.for(HashMapSymbolKey) as HM.TypeId\n\ntype TraversalFn<K, V, A> = (k: K, v: V) => A\n\ntype Cont<K, V, A> =\n  | [\n    len: number,\n    children: Array<Node.Node<K, V>>,\n    i: number,\n    f: TraversalFn<K, V, A>,\n    cont: Cont<K, V, A>\n  ]\n  | undefined\n\ninterface VisitResult<K, V, A> {\n  value: A\n  cont: Cont<K, V, A>\n}\n\n/** @internal */\nexport interface HashMapImpl<out K, out V> extends HM.HashMap<K, V> {\n  _editable: boolean // mutable by design\n  _edit: number // mutable by design\n  _root: Node.Node<K, V> // mutable by design\n  _size: number // mutable by design\n}\n\nconst HashMapProto: HM.HashMap<unknown, unknown> = {\n  [HashMapTypeId]: HashMapTypeId,\n  [Symbol.iterator]<K, V>(this: HashMapImpl<K, V>): Iterator<[K, V]> {\n    return new HashMapIterator(this, (k, v) => [k, v])\n  },\n  [Hash.symbol](this: HM.HashMap<unknown, unknown>): number {\n    let hash = Hash.hash(HashMapSymbolKey)\n    for (const item of this) {\n      hash ^= pipe(Hash.hash(item[0]), Hash.combine(Hash.hash(item[1])))\n    }\n    return Hash.cached(this, hash)\n  },\n  [Equal.symbol]<K, V>(this: HashMapImpl<K, V>, that: unknown): boolean {\n    if (isHashMap(that)) {\n      if ((that as HashMapImpl<K, V>)._size !== this._size) {\n        return false\n      }\n      for (const item of this) {\n        const elem = pipe(\n          that as HM.HashMap<K, V>,\n          getHash(item[0], Hash.hash(item[0]))\n        )\n        if (Option.isNone(elem)) {\n          return false\n        } else {\n          if (!Equal.equals(item[1], elem.value)) {\n            return false\n          }\n        }\n      }\n      return true\n    }\n    return false\n  },\n  toString<K, V>(this: HashMapImpl<K, V>) {\n    return format(this.toJSON())\n  },\n  toJSON() {\n    return {\n      _id: \"HashMap\",\n      values: Array.from(this).map(toJSON)\n    }\n  },\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nconst makeImpl = <K, V>(\n  editable: boolean,\n  edit: number,\n  root: Node.Node<K, V>,\n  size: number\n): HashMapImpl<K, V> => {\n  const map = Object.create(HashMapProto)\n  map._editable = editable\n  map._edit = edit\n  map._root = root\n  map._size = size\n  return map\n}\n\nclass HashMapIterator<in out K, in out V, out T> implements IterableIterator<T> {\n  v: Option.Option<VisitResult<K, V, T>>\n\n  constructor(readonly map: HashMapImpl<K, V>, readonly f: TraversalFn<K, V, T>) {\n    this.v = visitLazy(this.map._root, this.f, undefined)\n  }\n\n  next(): IteratorResult<T> {\n    if (Option.isNone(this.v)) {\n      return { done: true, value: undefined }\n    }\n    const v0 = this.v.value\n    this.v = applyCont(v0.cont)\n    return { done: false, value: v0.value }\n  }\n\n  [Symbol.iterator](): IterableIterator<T> {\n    return new HashMapIterator(this.map, this.f)\n  }\n}\n\nconst applyCont = <K, V, A>(cont: Cont<K, V, A>): Option.Option<VisitResult<K, V, A>> =>\n  cont\n    ? visitLazyChildren(cont[0], cont[1], cont[2], cont[3], cont[4])\n    : Option.none()\n\nconst visitLazy = <K, V, A>(\n  node: Node.Node<K, V>,\n  f: TraversalFn<K, V, A>,\n  cont: Cont<K, V, A> = undefined\n): Option.Option<VisitResult<K, V, A>> => {\n  switch (node._tag) {\n    case \"LeafNode\": {\n      if (Option.isSome(node.value)) {\n        return Option.some({\n          value: f(node.key, node.value.value),\n          cont\n        })\n      }\n      return applyCont(cont)\n    }\n    case \"CollisionNode\":\n    case \"ArrayNode\":\n    case \"IndexedNode\": {\n      const children = node.children\n      return visitLazyChildren(children.length, children, 0, f, cont)\n    }\n    default: {\n      return applyCont(cont)\n    }\n  }\n}\n\nconst visitLazyChildren = <K, V, A>(\n  len: number,\n  children: Array<Node.Node<K, V>>,\n  i: number,\n  f: TraversalFn<K, V, A>,\n  cont: Cont<K, V, A>\n): Option.Option<VisitResult<K, V, A>> => {\n  while (i < len) {\n    const child = children[i++]\n    if (child && !Node.isEmptyNode(child)) {\n      return visitLazy(child, f, [len, children, i, f, cont])\n    }\n  }\n  return applyCont(cont)\n}\n\nconst _empty = makeImpl<never, never>(false, 0, new Node.EmptyNode(), 0)\n\n/** @internal */\nexport const empty = <K = never, V = never>(): HM.HashMap<K, V> => _empty\n\n/** @internal */\nexport const make = <Entries extends ReadonlyArray<readonly [any, any]>>(\n  ...entries: Entries\n): HM.HashMap<\n  Entries[number] extends readonly [infer K, any] ? K : never,\n  Entries[number] extends readonly [any, infer V] ? V : never\n> => fromIterable(entries)\n\n/** @internal */\nexport const fromIterable = <K, V>(entries: Iterable<readonly [K, V]>): HM.HashMap<K, V> => {\n  const map = beginMutation(empty<K, V>())\n  for (const entry of entries) {\n    set(map, entry[0], entry[1])\n  }\n  return endMutation(map)\n}\n\n/** @internal */\nexport const isHashMap: {\n  <K, V>(u: Iterable<readonly [K, V]>): u is HM.HashMap<K, V>\n  (u: unknown): u is HM.HashMap<unknown, unknown>\n} = (u: unknown): u is HM.HashMap<unknown, unknown> => hasProperty(u, HashMapTypeId)\n\n/** @internal */\nexport const isEmpty = <K, V>(self: HM.HashMap<K, V>): boolean =>\n  self && Node.isEmptyNode((self as HashMapImpl<K, V>)._root)\n\n/** @internal */\nexport const get = Dual.dual<\n  <K1>(key: K1) => <K, V>(self: HM.HashMap<K, V>) => Option.Option<V>,\n  <K, V, K1>(self: HM.HashMap<K, V>, key: K1) => Option.Option<V>\n>(2, (self, key) => getHash(self, key, Hash.hash(key)))\n\n/** @internal */\nexport const getHash = Dual.dual<\n  <K1>(key: K1, hash: number) => <K, V>(self: HM.HashMap<K, V>) => Option.Option<V>,\n  <K, V, K1>(self: HM.HashMap<K, V>, key: K1, hash: number) => Option.Option<V>\n>(3, <K, V, K1>(self: HM.HashMap<K, V>, key: K1, hash: number) => {\n  let node = (self as HashMapImpl<K, V>)._root\n  let shift = 0\n\n  while (true) {\n    switch (node._tag) {\n      case \"LeafNode\": {\n        return Equal.equals(key, node.key) ? node.value : Option.none()\n      }\n      case \"CollisionNode\": {\n        if (hash === node.hash) {\n          const children = node.children\n          for (let i = 0, len = children.length; i < len; ++i) {\n            const child = children[i]!\n            if (\"key\" in child && Equal.equals(key, child.key)) {\n              return child.value\n            }\n          }\n        }\n        return Option.none()\n      }\n      case \"IndexedNode\": {\n        const frag = hashFragment(shift, hash)\n        const bit = toBitmap(frag)\n        if (node.mask & bit) {\n          node = node.children[fromBitmap(node.mask, bit)]!\n          shift += SIZE\n          break\n        }\n        return Option.none()\n      }\n      case \"ArrayNode\": {\n        node = node.children[hashFragment(shift, hash)]!\n        if (node) {\n          shift += SIZE\n          break\n        }\n        return Option.none()\n      }\n      default:\n        return Option.none()\n    }\n  }\n})\n\n/** @internal */\nexport const unsafeGet = Dual.dual<\n  <K1>(key: K1) => <K, V>(self: HM.HashMap<K, V>) => V,\n  <K, V, K1>(self: HM.HashMap<K, V>, key: K1) => V\n>(2, (self, key) => {\n  const element = getHash(self, key, Hash.hash(key))\n  if (Option.isNone(element)) {\n    throw new Error(\"Expected map to contain key\")\n  }\n  return element.value\n})\n\n/** @internal */\nexport const has = Dual.dual<\n  <K1>(key: K1) => <K, V>(self: HM.HashMap<K, V>) => boolean,\n  <K, V, K1>(self: HM.HashMap<K, V>, key: K1) => boolean\n>(2, (self, key) => Option.isSome(getHash(self, key, Hash.hash(key))))\n\n/** @internal */\nexport const hasHash = Dual.dual<\n  <K1>(key: K1, hash: number) => <K, V>(self: HM.HashMap<K, V>) => boolean,\n  <K, V, K1>(self: HM.HashMap<K, V>, key: K1, hash: number) => boolean\n>(3, (self, key, hash) => Option.isSome(getHash(self, key, hash)))\n\n/** @internal */\nexport const set = Dual.dual<\n  <K, V>(key: K, value: V) => (self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, key: K, value: V) => HM.HashMap<K, V>\n>(3, (self, key, value) => modifyAt(self, key, () => Option.some(value)))\n\n/** @internal */\nexport const setTree = Dual.dual<\n  <K, V>(newRoot: Node.Node<K, V>, newSize: number) => (self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, newRoot: Node.Node<K, V>, newSize: number) => HM.HashMap<K, V>\n>(3, <K, V>(self: HM.HashMap<K, V>, newRoot: Node.Node<K, V>, newSize: number) => {\n  if ((self as HashMapImpl<K, V>)._editable) {\n    ;(self as HashMapImpl<K, V>)._root = newRoot\n    ;(self as HashMapImpl<K, V>)._size = newSize\n    return self\n  }\n  return newRoot === (self as HashMapImpl<K, V>)._root\n    ? self\n    : makeImpl(\n      (self as HashMapImpl<K, V>)._editable,\n      (self as HashMapImpl<K, V>)._edit,\n      newRoot,\n      newSize\n    )\n})\n\n/** @internal */\nexport const keys = <K, V>(self: HM.HashMap<K, V>): IterableIterator<K> =>\n  new HashMapIterator(self as HashMapImpl<K, V>, (key) => key)\n\n/** @internal */\nexport const values = <K, V>(self: HM.HashMap<K, V>): IterableIterator<V> =>\n  new HashMapIterator(self as HashMapImpl<K, V>, (_, value) => value)\n\n/** @internal */\nexport const entries = <K, V>(self: HM.HashMap<K, V>): IterableIterator<[K, V]> =>\n  new HashMapIterator(self as HashMapImpl<K, V>, (key, value) => [key, value])\n\n/** @internal */\nexport const size = <K, V>(self: HM.HashMap<K, V>): number => (self as HashMapImpl<K, V>)._size\n\n/** @internal */\nexport const beginMutation = <K, V>(self: HM.HashMap<K, V>): HM.HashMap<K, V> =>\n  makeImpl(\n    true,\n    (self as HashMapImpl<K, V>)._edit + 1,\n    (self as HashMapImpl<K, V>)._root,\n    (self as HashMapImpl<K, V>)._size\n  )\n\n/** @internal */\nexport const endMutation = <K, V>(self: HM.HashMap<K, V>): HM.HashMap<K, V> => {\n  ;(self as HashMapImpl<K, V>)._editable = false\n  return self\n}\n\n/** @internal */\nexport const mutate = Dual.dual<\n  <K, V>(f: (self: HM.HashMap<K, V>) => void) => (self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, f: (self: HM.HashMap<K, V>) => void) => HM.HashMap<K, V>\n>(2, (self, f) => {\n  const transient = beginMutation(self)\n  f(transient)\n  return endMutation(transient)\n})\n\n/** @internal */\nexport const modifyAt = Dual.dual<\n  <K, V>(key: K, f: HM.HashMap.UpdateFn<V>) => (self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, key: K, f: HM.HashMap.UpdateFn<V>) => HM.HashMap<K, V>\n>(3, (self, key, f) => modifyHash(self, key, Hash.hash(key), f))\n\n/** @internal */\nexport const modifyHash = Dual.dual<\n  <K, V>(key: K, hash: number, f: HM.HashMap.UpdateFn<V>) => (self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, key: K, hash: number, f: HM.HashMap.UpdateFn<V>) => HM.HashMap<K, V>\n>(4, <K, V>(self: HM.HashMap<K, V>, key: K, hash: number, f: HM.HashMap.UpdateFn<V>) => {\n  const size = { value: (self as HashMapImpl<K, V>)._size }\n  const newRoot = (self as HashMapImpl<K, V>)._root.modify(\n    (self as HashMapImpl<K, V>)._editable ?\n      (self as HashMapImpl<K, V>)._edit :\n      NaN,\n    0,\n    f,\n    hash,\n    key,\n    size\n  )\n  return pipe(self, setTree(newRoot, size.value))\n})\n\n/** @internal */\nexport const modify = Dual.dual<\n  <K, V>(key: K, f: (v: V) => V) => (self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, key: K, f: (v: V) => V) => HM.HashMap<K, V>\n>(3, (self, key, f) => modifyAt(self, key, Option.map(f)))\n\n/** @internal */\nexport const union = Dual.dual<\n  <K1, V1>(\n    that: HM.HashMap<K1, V1>\n  ) => <K0, V0>(self: HM.HashMap<K0, V0>) => HM.HashMap<K0 | K1, V0 | V1>,\n  <K0, V0, K1, V1>(\n    self: HM.HashMap<K0, V0>,\n    that: HM.HashMap<K1, V1>\n  ) => HM.HashMap<K0 | K1, V0 | V1>\n>(2, <K0, V0, K1, V1>(self: HM.HashMap<K0, V0>, that: HM.HashMap<K1, V1>) => {\n  const result: HM.HashMap<K0 | K1, V0 | V1> = beginMutation(self)\n  forEach(that, (v, k) => set(result, k, v))\n  return endMutation(result)\n})\n\n/** @internal */\nexport const remove = Dual.dual<\n  <K>(key: K) => <V>(self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, key: K) => HM.HashMap<K, V>\n>(2, (self, key) => modifyAt(self, key, Option.none))\n\n/** @internal */\nexport const removeMany = Dual.dual<\n  <K>(keys: Iterable<K>) => <V>(self: HM.HashMap<K, V>) => HM.HashMap<K, V>,\n  <K, V>(self: HM.HashMap<K, V>, keys: Iterable<K>) => HM.HashMap<K, V>\n>(2, (self, keys) =>\n  mutate(self, (map) => {\n    for (const key of keys) {\n      remove(key)(map)\n    }\n  }))\n\n/**\n * Maps over the entries of the `HashMap` using the specified function.\n *\n * @since 2.0.0\n * @category mapping\n */\nexport const map = Dual.dual<\n  <A, V, K>(f: (value: V, key: K) => A) => (self: HM.HashMap<K, V>) => HM.HashMap<K, A>,\n  <K, V, A>(self: HM.HashMap<K, V>, f: (value: V, key: K) => A) => HM.HashMap<K, A>\n>(2, (self, f) =>\n  reduce(\n    self,\n    empty(),\n    (map, value, key) => set(map, key, f(value, key))\n  ))\n\n/** @internal */\nexport const flatMap = Dual.dual<\n  <A, K, B>(\n    f: (value: A, key: K) => HM.HashMap<K, B>\n  ) => (self: HM.HashMap<K, A>) => HM.HashMap<K, B>,\n  <K, A, B>(self: HM.HashMap<K, A>, f: (value: A, key: K) => HM.HashMap<K, B>) => HM.HashMap<K, B>\n>(\n  2,\n  (self, f) =>\n    reduce(self, empty(), (zero, value, key) =>\n      mutate(\n        zero,\n        (map) => forEach(f(value, key), (value, key) => set(map, key, value))\n      ))\n)\n\n/** @internal */\nexport const forEach = Dual.dual<\n  <V, K>(f: (value: V, key: K) => void) => (self: HM.HashMap<K, V>) => void,\n  <V, K>(self: HM.HashMap<K, V>, f: (value: V, key: K) => void) => void\n>(2, (self, f) => reduce(self, void 0 as void, (_, value, key) => f(value, key)))\n\n/** @internal */\nexport const reduce = Dual.dual<\n  <Z, V, K>(zero: Z, f: (accumulator: Z, value: V, key: K) => Z) => (self: HM.HashMap<K, V>) => Z,\n  <Z, V, K>(self: HM.HashMap<K, V>, zero: Z, f: (accumulator: Z, value: V, key: K) => Z) => Z\n>(3, <Z, V, K>(self: HM.HashMap<K, V>, zero: Z, f: (accumulator: Z, value: V, key: K) => Z) => {\n  const root = (self as HashMapImpl<K, V>)._root\n  if (root._tag === \"LeafNode\") {\n    return Option.isSome(root.value) ? f(zero, root.value.value, root.key) : zero\n  }\n  if (root._tag === \"EmptyNode\") {\n    return zero\n  }\n  const toVisit = [root.children]\n  let children\n  while ((children = toVisit.pop())) {\n    for (let i = 0, len = children.length; i < len;) {\n      const child = children[i++]\n      if (child && !Node.isEmptyNode(child)) {\n        if (child._tag === \"LeafNode\") {\n          if (Option.isSome(child.value)) {\n            zero = f(zero, child.value.value, child.key)\n          }\n        } else {\n          toVisit.push(child.children)\n        }\n      }\n    }\n  }\n  return zero\n})\n\n/** @internal */\nexport const filter: {\n  <K, A, B extends A>(f: (a: NoInfer<A>, k: K) => a is B): (self: HM.HashMap<K, A>) => HM.HashMap<K, B>\n  <K, A>(f: (a: NoInfer<A>, k: K) => boolean): (self: HM.HashMap<K, A>) => HM.HashMap<K, A>\n  <K, A, B extends A>(self: HM.HashMap<K, A>, f: (a: A, k: K) => a is B): HM.HashMap<K, B>\n  <K, A>(self: HM.HashMap<K, A>, f: (a: A, k: K) => boolean): HM.HashMap<K, A>\n} = Dual.dual(\n  2,\n  <K, A>(self: HM.HashMap<K, A>, f: (a: A, k: K) => boolean): HM.HashMap<K, A> =>\n    mutate(empty(), (map) => {\n      for (const [k, a] of self) {\n        if (f(a, k)) {\n          set(map, k, a)\n        }\n      }\n    })\n)\n\n/** @internal */\nexport const compact = <K, A>(self: HM.HashMap<K, Option.Option<A>>) => filterMap(self, identity)\n\n/** @internal */\nexport const filterMap = Dual.dual<\n  <A, K, B>(\n    f: (value: A, key: K) => Option.Option<B>\n  ) => (self: HM.HashMap<K, A>) => HM.HashMap<K, B>,\n  <K, A, B>(self: HM.HashMap<K, A>, f: (value: A, key: K) => Option.Option<B>) => HM.HashMap<K, B>\n>(2, (self, f) =>\n  mutate(empty(), (map) => {\n    for (const [k, a] of self) {\n      const option = f(a, k)\n      if (Option.isSome(option)) {\n        set(map, k, option.value)\n      }\n    }\n  }))\n\n/** @internal */\nexport const findFirst: {\n  <K, A, B extends A>(predicate: (a: NoInfer<A>, k: K) => a is B): (self: HM.HashMap<K, A>) => Option.Option<[K, B]>\n  <K, A>(predicate: (a: NoInfer<A>, k: K) => boolean): (self: HM.HashMap<K, A>) => Option.Option<[K, A]>\n  <K, A, B extends A>(self: HM.HashMap<K, A>, predicate: (a: A, k: K) => a is B): Option.Option<[K, B]>\n  <K, A>(self: HM.HashMap<K, A>, predicate: (a: A, k: K) => boolean): Option.Option<[K, A]>\n} = Dual.dual(\n  2,\n  <K, A>(self: HM.HashMap<K, A>, predicate: (a: A, k: K) => boolean): Option.Option<[K, A]> => {\n    for (const ka of self) {\n      if (predicate(ka[1], ka[0])) {\n        return Option.some(ka)\n      }\n    }\n    return Option.none()\n  }\n)\n"],"names":["Equal","Dual","identity","pipe","Hash","format","NodeInspectSymbol","toJSON","Option","pipeArguments","hasProperty","fromBitmap","hashFragment","toBitmap","SIZE","Node","HashMapSymbolKey","HashMapTypeId","Symbol","for","HashMapProto","iterator","HashMapIterator","k","v","symbol","hash","item","combine","cached","that","isHashMap","_size","elem","getHash","isNone","equals","value","toString","_id","values","Array","from","map","arguments","makeImpl","editable","edit","root","size","Object","create","_editable","_edit","_root","f","constructor","visitLazy","undefined","next","done","v0","applyCont","cont","visitLazyChildren","none","node","_tag","isSome","some","key","children","length","len","i","child","isEmptyNode","_empty","EmptyNode","empty","make","entries","fromIterable","beginMutation","entry","set","endMutation","u","isEmpty","self","get","dual","shift","frag","bit","mask","unsafeGet","element","Error","has","hasHash","modifyAt","setTree","newRoot","newSize","keys","_","mutate","transient","modifyHash","modify","NaN","union","result","forEach","remove","removeMany","reduce","flatMap","zero","toVisit","pop","push","filter","a","compact","filterMap","option","findFirst","predicate","ka"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1466, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1472, "column": 0}, "map": {"version":3,"file":"hashSet.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/hashSet.ts"],"sourcesContent":["import * as Equal from \"../Equal.js\"\nimport { dual } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport type { HashMap } from \"../HashMap.js\"\nimport type * as HS from \"../HashSet.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport type { Predicate, Refinement } from \"../Predicate.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type { NoInfer } from \"../Types.js\"\nimport * as HM from \"./hashMap.js\"\n\nconst HashSetSymbolKey = \"effect/HashSet\"\n\n/** @internal */\nexport const HashSetTypeId: HS.TypeId = Symbol.for(HashSetSymbolKey) as HS.TypeId\n\n/** @internal */\nexport interface HashSetImpl<out A> extends HS.HashSet<A> {\n  readonly _keyMap: HashMap<A, unknown>\n}\n\nconst HashSetProto: Omit<HashSetImpl<unknown>, \"_keyMap\"> = {\n  [HashSetTypeId]: HashSetTypeId,\n  [Symbol.iterator]<A>(this: HashSetImpl<A>): Iterator<A> {\n    return HM.keys(this._keyMap)\n  },\n  [Hash.symbol]<A>(this: HashSetImpl<A>): number {\n    return Hash.cached(\n      this,\n      Hash.combine(Hash.hash(this._keyMap))(Hash.hash(HashSetSymbolKey))\n    )\n  },\n  [Equal.symbol]<A>(this: HashSetImpl<A>, that: unknown): boolean {\n    if (isHashSet(that)) {\n      return (\n        HM.size(this._keyMap) === HM.size((that as HashSetImpl<A>)._keyMap) &&\n        Equal.equals(this._keyMap, (that as HashSetImpl<A>)._keyMap)\n      )\n    }\n    return false\n  },\n  toString() {\n    return format(this.toJSON())\n  },\n  toJSON() {\n    return {\n      _id: \"HashSet\",\n      values: Array.from(this).map(toJSON)\n    }\n  },\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const makeImpl = <A>(keyMap: HashMap<A, unknown>): HashSetImpl<A> => {\n  const set = Object.create(HashSetProto)\n  set._keyMap = keyMap\n  return set\n}\n\n/** @internal */\nexport const isHashSet: {\n  <A>(u: Iterable<A>): u is HS.HashSet<A>\n  (u: unknown): u is HS.HashSet<unknown>\n} = (u: unknown): u is HS.HashSet<unknown> => hasProperty(u, HashSetTypeId)\n\nconst _empty = makeImpl<never>(HM.empty())\n\n/** @internal */\nexport const empty = <A = never>(): HS.HashSet<A> => _empty\n\n/** @internal */\nexport const fromIterable = <A>(elements: Iterable<A>): HS.HashSet<A> => {\n  const set = beginMutation(empty<A>())\n  for (const value of elements) {\n    add(set, value)\n  }\n  return endMutation(set)\n}\n\n/** @internal */\nexport const make = <As extends ReadonlyArray<any>>(...elements: As): HS.HashSet<As[number]> => {\n  const set = beginMutation(empty<As[number]>())\n  for (const value of elements) {\n    add(set, value)\n  }\n  return endMutation(set)\n}\n\n/** @internal */\nexport const has = dual<\n  <A>(value: A) => (self: HS.HashSet<A>) => boolean,\n  <A>(self: HS.HashSet<A>, value: A) => boolean\n>(2, <A>(self: HS.HashSet<A>, value: A) => HM.has((self as HashSetImpl<A>)._keyMap, value))\n\n/** @internal */\nexport const some = dual<\n  <A>(f: Predicate<A>) => (self: HS.HashSet<A>) => boolean,\n  <A>(self: HS.HashSet<A>, f: Predicate<A>) => boolean\n>(2, (self, f) => {\n  let found = false\n  for (const value of self) {\n    found = f(value)\n    if (found) {\n      break\n    }\n  }\n  return found\n})\n\n/** @internal */\nexport const every: {\n  <A, B extends A>(refinement: Refinement<NoInfer<A>, B>): (self: HS.HashSet<A>) => self is HS.HashSet<B>\n  <A>(predicate: Predicate<A>): (self: HS.HashSet<A>) => boolean\n  <A, B extends A>(self: HS.HashSet<A>, refinement: Refinement<A, B>): self is HS.HashSet<B>\n  <A>(self: HS.HashSet<A>, predicate: Predicate<A>): boolean\n} = dual(\n  2,\n  <A, B extends A>(self: HS.HashSet<A>, refinement: Refinement<A, B>): self is HS.HashSet<B> =>\n    !some(self, (a) => !refinement(a))\n)\n\n/** @internal */\nexport const isSubset = dual<\n  <A>(that: HS.HashSet<A>) => (self: HS.HashSet<A>) => boolean,\n  <A>(self: HS.HashSet<A>, that: HS.HashSet<A>) => boolean\n>(2, (self, that) => every(self, (value) => has(that, value)))\n\n/** @internal */\nexport const values = <A>(self: HS.HashSet<A>): IterableIterator<A> => HM.keys((self as HashSetImpl<A>)._keyMap)\n\n/** @internal */\nexport const size = <A>(self: HS.HashSet<A>): number => HM.size((self as HashSetImpl<A>)._keyMap)\n\n/** @internal */\nexport const beginMutation = <A>(self: HS.HashSet<A>): HS.HashSet<A> =>\n  makeImpl(HM.beginMutation((self as HashSetImpl<A>)._keyMap))\n\n/** @internal */\nexport const endMutation = <A>(self: HS.HashSet<A>): HS.HashSet<A> => {\n  ;((self as HashSetImpl<A>)._keyMap as HM.HashMapImpl<A, unknown>)._editable = false\n  return self\n}\n\n/** @internal */\nexport const mutate = dual<\n  <A>(f: (set: HS.HashSet<A>) => void) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, f: (set: HS.HashSet<A>) => void) => HS.HashSet<A>\n>(2, (self, f) => {\n  const transient = beginMutation(self)\n  f(transient)\n  return endMutation(transient)\n})\n\n/** @internal */\nexport const add = dual<\n  <A>(value: A) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, value: A) => HS.HashSet<A>\n>(\n  2,\n  <A>(self: HS.HashSet<A>, value: A) =>\n    ((self as HashSetImpl<A>)._keyMap as HM.HashMapImpl<A, unknown>)._editable\n      ? (HM.set(value as A, true as unknown)((self as HashSetImpl<A>)._keyMap), self)\n      : makeImpl(HM.set(value as A, true as unknown)((self as HashSetImpl<A>)._keyMap))\n)\n\n/** @internal */\nexport const remove = dual<\n  <A>(value: A) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, value: A) => HS.HashSet<A>\n>(\n  2,\n  <A>(self: HS.HashSet<A>, value: A) =>\n    (((self as HashSetImpl<A>)._keyMap) as HM.HashMapImpl<A, unknown>)._editable\n      ? (HM.remove(value)((self as HashSetImpl<A>)._keyMap), self)\n      : makeImpl(HM.remove(value)((self as HashSetImpl<A>)._keyMap))\n)\n\n/** @internal */\nexport const difference = dual<\n  <A>(that: Iterable<A>) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, that: Iterable<A>) => HS.HashSet<A>\n>(2, (self, that) =>\n  mutate(self, (set) => {\n    for (const value of that) {\n      remove(set, value)\n    }\n  }))\n\n/** @internal */\nexport const intersection = dual<\n  <A>(that: Iterable<A>) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, that: Iterable<A>) => HS.HashSet<A>\n>(2, (self, that) =>\n  mutate(empty(), (set) => {\n    for (const value of that) {\n      if (has(value)(self)) {\n        add(value)(set)\n      }\n    }\n  }))\n\n/** @internal */\nexport const union = dual<\n  <A>(that: Iterable<A>) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, that: Iterable<A>) => HS.HashSet<A>\n>(2, (self, that) =>\n  mutate(empty(), (set) => {\n    forEach(self, (value) => add(set, value))\n    for (const value of that) {\n      add(set, value)\n    }\n  }))\n\n/** @internal */\nexport const toggle = dual<\n  <A>(value: A) => (self: HS.HashSet<A>) => HS.HashSet<A>,\n  <A>(self: HS.HashSet<A>, value: A) => HS.HashSet<A>\n>(2, (self, value) => has(self, value) ? remove(self, value) : add(self, value))\n\n/** @internal */\nexport const map = dual<\n  <A, B>(f: (a: A) => B) => (self: HS.HashSet<A>) => HS.HashSet<B>,\n  <A, B>(self: HS.HashSet<A>, f: (a: A) => B) => HS.HashSet<B>\n>(2, (self, f) =>\n  mutate(empty(), (set) => {\n    forEach(self, (a) => {\n      const b = f(a)\n      if (!has(set, b)) {\n        add(set, b)\n      }\n    })\n  }))\n\n/** @internal */\nexport const flatMap = dual<\n  <A, B>(f: (a: A) => Iterable<B>) => (self: HS.HashSet<A>) => HS.HashSet<B>,\n  <A, B>(self: HS.HashSet<A>, f: (a: A) => Iterable<B>) => HS.HashSet<B>\n>(2, (self, f) =>\n  mutate(empty(), (set) => {\n    forEach(self, (a) => {\n      for (const b of f(a)) {\n        if (!has(set, b)) {\n          add(set, b)\n        }\n      }\n    })\n  }))\n\n/** @internal */\nexport const forEach = dual<\n  <A>(f: (value: A) => void) => (self: HS.HashSet<A>) => void,\n  <A>(self: HS.HashSet<A>, f: (value: A) => void) => void\n>(2, <A>(self: HS.HashSet<A>, f: (value: A) => void) =>\n  HM.forEach(\n    (self as HashSetImpl<A>)._keyMap,\n    (_, k) => f(k)\n  ))\n\n/** @internal */\nexport const reduce = dual<\n  <A, Z>(zero: Z, f: (accumulator: Z, value: A) => Z) => (self: HS.HashSet<A>) => Z,\n  <A, Z>(self: HS.HashSet<A>, zero: Z, f: (accumulator: Z, value: A) => Z) => Z\n>(3, <A, Z>(self: HS.HashSet<A>, zero: Z, f: (accumulator: Z, value: A) => Z) =>\n  HM.reduce(\n    (self as HashSetImpl<A>)._keyMap,\n    zero,\n    (z, _, a) => f(z, a)\n  ))\n\n/** @internal */\nexport const filter: {\n  <A, B extends A>(refinement: Refinement<NoInfer<A>, B>): (self: HS.HashSet<A>) => HS.HashSet<B>\n  <A>(predicate: Predicate<NoInfer<A>>): (self: HS.HashSet<A>) => HS.HashSet<A>\n  <A, B extends A>(self: HS.HashSet<A>, refinement: Refinement<A, B>): HS.HashSet<B>\n  <A>(self: HS.HashSet<A>, predicate: Predicate<A>): HS.HashSet<A>\n} = dual(2, <A>(self: HS.HashSet<A>, f: Predicate<A>) => {\n  return mutate(empty(), (set) => {\n    const iterator = values(self)\n    let next: IteratorResult<A, any>\n    while (!(next = iterator.next()).done) {\n      const value = next.value\n      if (f(value)) {\n        add(set, value)\n      }\n    }\n  })\n})\n\n/** @internal */\nexport const partition: {\n  <A, B extends A>(\n    refinement: Refinement<NoInfer<A>, B>\n  ): (self: HS.HashSet<A>) => [excluded: HS.HashSet<Exclude<A, B>>, satisfying: HS.HashSet<B>]\n  <A>(\n    predicate: Predicate<NoInfer<A>>\n  ): (self: HS.HashSet<A>) => [excluded: HS.HashSet<A>, satisfying: HS.HashSet<A>]\n  <A, B extends A>(\n    self: HS.HashSet<A>,\n    refinement: Refinement<A, B>\n  ): [excluded: HS.HashSet<Exclude<A, B>>, satisfying: HS.HashSet<B>]\n  <A>(self: HS.HashSet<A>, predicate: Predicate<A>): [excluded: HS.HashSet<A>, satisfying: HS.HashSet<A>]\n} = dual(2, <A>(self: HS.HashSet<A>, predicate: Predicate<A>): [excluded: HS.HashSet<A>, satisfying: HS.HashSet<A>] => {\n  const iterator = values(self)\n  let next: IteratorResult<A, any>\n  const right = beginMutation(empty<A>())\n  const left = beginMutation(empty<A>())\n  while (!(next = iterator.next()).done) {\n    const value = next.value\n    if (predicate(value)) {\n      add(right, value)\n    } else {\n      add(left, value)\n    }\n  }\n  return [endMutation(left), endMutation(right)]\n})\n"],"names":["Equal","dual","Hash","format","NodeInspectSymbol","toJSON","pipeArguments","hasProperty","HM","HashSetSymbolKey","HashSetTypeId","Symbol","for","HashSetProto","iterator","keys","_keyMap","symbol","cached","combine","hash","that","isHashSet","size","equals","toString","_id","values","Array","from","map","pipe","arguments","makeImpl","keyMap","set","Object","create","u","_empty","empty","fromIterable","elements","beginMutation","value","add","endMutation","make","has","self","some","f","found","every","refinement","a","isSubset","_editable","mutate","transient","remove","difference","intersection","union","forEach","toggle","b","flatMap","_","k","reduce","zero","z","filter","next","done","partition","predicate","right","left"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1665, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1671, "column": 0}, "map": {"version":3,"file":"cause.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/cause.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport type * as Cause from \"../Cause.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport * as Either from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport type * as FiberId from \"../FiberId.js\"\nimport { constFalse, constTrue, dual, identity, pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as Hash from \"../Hash.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport { NodeInspectSymbol, stringifyCircular, toJSON } from \"../Inspectable.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport type { Predicate, Refinement } from \"../Predicate.js\"\nimport { hasProperty, isFunction } from \"../Predicate.js\"\nimport type { AnySpan, Span } from \"../Tracer.js\"\nimport type { NoInfer } from \"../Types.js\"\nimport { getBugErrorMessage } from \"./errors.js\"\nimport * as OpCodes from \"./opCodes/cause.js\"\n\n// -----------------------------------------------------------------------------\n// Models\n// -----------------------------------------------------------------------------\n\n/** @internal */\nconst CauseSymbolKey = \"effect/Cause\"\n\n/** @internal */\nexport const CauseTypeId: Cause.CauseTypeId = Symbol.for(\n  CauseSymbolKey\n) as Cause.CauseTypeId\n\nconst variance = {\n  /* c8 ignore next */\n  _E: (_: never) => _\n}\n\n/** @internal */\nconst proto = {\n  [CauseTypeId]: variance,\n  [Hash.symbol](this: Cause.Cause<any>): number {\n    return pipe(\n      Hash.hash(CauseSymbolKey),\n      Hash.combine(Hash.hash(flattenCause(this))),\n      Hash.cached(this)\n    )\n  },\n  [Equal.symbol](this: Cause.Cause<any>, that: unknown): boolean {\n    return isCause(that) && causeEquals(this, that)\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  toJSON<E>(this: Cause.Cause<E>) {\n    switch (this._tag) {\n      case \"Empty\":\n        return { _id: \"Cause\", _tag: this._tag }\n      case \"Die\":\n        return { _id: \"Cause\", _tag: this._tag, defect: toJSON(this.defect) }\n      case \"Interrupt\":\n        return { _id: \"Cause\", _tag: this._tag, fiberId: this.fiberId.toJSON() }\n      case \"Fail\":\n        return { _id: \"Cause\", _tag: this._tag, failure: toJSON(this.error) }\n      case \"Sequential\":\n      case \"Parallel\":\n        return { _id: \"Cause\", _tag: this._tag, left: toJSON(this.left), right: toJSON(this.right) }\n    }\n  },\n  toString<E>(this: Cause.Cause<E>) {\n    return pretty(this)\n  },\n  [NodeInspectSymbol]<E>(this: Cause.Cause<E>) {\n    return this.toJSON()\n  }\n}\n\n// -----------------------------------------------------------------------------\n// Constructors\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const empty: Cause.Cause<never> = (() => {\n  const o = Object.create(proto)\n  o._tag = OpCodes.OP_EMPTY\n  return o\n})()\n\n/** @internal */\nexport const fail = <E>(error: E): Cause.Cause<E> => {\n  const o = Object.create(proto)\n  o._tag = OpCodes.OP_FAIL\n  o.error = error\n  return o\n}\n\n/** @internal */\nexport const die = (defect: unknown): Cause.Cause<never> => {\n  const o = Object.create(proto)\n  o._tag = OpCodes.OP_DIE\n  o.defect = defect\n  return o\n}\n\n/** @internal */\nexport const interrupt = (fiberId: FiberId.FiberId): Cause.Cause<never> => {\n  const o = Object.create(proto)\n  o._tag = OpCodes.OP_INTERRUPT\n  o.fiberId = fiberId\n  return o\n}\n\n/** @internal */\nexport const parallel = <E, E2>(left: Cause.Cause<E>, right: Cause.Cause<E2>): Cause.Cause<E | E2> => {\n  const o = Object.create(proto)\n  o._tag = OpCodes.OP_PARALLEL\n  o.left = left\n  o.right = right\n  return o\n}\n\n/** @internal */\nexport const sequential = <E, E2>(left: Cause.Cause<E>, right: Cause.Cause<E2>): Cause.Cause<E | E2> => {\n  const o = Object.create(proto)\n  o._tag = OpCodes.OP_SEQUENTIAL\n  o.left = left\n  o.right = right\n  return o\n}\n\n// -----------------------------------------------------------------------------\n// Refinements\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const isCause = (u: unknown): u is Cause.Cause<never> => hasProperty(u, CauseTypeId)\n\n/** @internal */\nexport const isEmptyType = <E>(self: Cause.Cause<E>): self is Cause.Empty => self._tag === OpCodes.OP_EMPTY\n\n/** @internal */\nexport const isFailType = <E>(self: Cause.Cause<E>): self is Cause.Fail<E> => self._tag === OpCodes.OP_FAIL\n\n/** @internal */\nexport const isDieType = <E>(self: Cause.Cause<E>): self is Cause.Die => self._tag === OpCodes.OP_DIE\n\n/** @internal */\nexport const isInterruptType = <E>(self: Cause.Cause<E>): self is Cause.Interrupt => self._tag === OpCodes.OP_INTERRUPT\n\n/** @internal */\nexport const isSequentialType = <E>(self: Cause.Cause<E>): self is Cause.Sequential<E> =>\n  self._tag === OpCodes.OP_SEQUENTIAL\n\n/** @internal */\nexport const isParallelType = <E>(self: Cause.Cause<E>): self is Cause.Parallel<E> => self._tag === OpCodes.OP_PARALLEL\n\n// -----------------------------------------------------------------------------\n// Getters\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const size = <E>(self: Cause.Cause<E>): number => reduceWithContext(self, void 0, SizeCauseReducer)\n\n/** @internal */\nexport const isEmpty = <E>(self: Cause.Cause<E>): boolean => {\n  if (self._tag === OpCodes.OP_EMPTY) {\n    return true\n  }\n  return reduce(self, true, (acc, cause) => {\n    switch (cause._tag) {\n      case OpCodes.OP_EMPTY: {\n        return Option.some(acc)\n      }\n      case OpCodes.OP_DIE:\n      case OpCodes.OP_FAIL:\n      case OpCodes.OP_INTERRUPT: {\n        return Option.some(false)\n      }\n      default: {\n        return Option.none()\n      }\n    }\n  })\n}\n\n/** @internal */\nexport const isFailure = <E>(self: Cause.Cause<E>): boolean => Option.isSome(failureOption(self))\n\n/** @internal */\nexport const isDie = <E>(self: Cause.Cause<E>): boolean => Option.isSome(dieOption(self))\n\n/** @internal */\nexport const isInterrupted = <E>(self: Cause.Cause<E>): boolean => Option.isSome(interruptOption(self))\n\n/** @internal */\nexport const isInterruptedOnly = <E>(self: Cause.Cause<E>): boolean =>\n  reduceWithContext(undefined, IsInterruptedOnlyCauseReducer)(self)\n\n/** @internal */\nexport const failures = <E>(self: Cause.Cause<E>): Chunk.Chunk<E> =>\n  Chunk.reverse(\n    reduce<Chunk.Chunk<E>, E>(\n      self,\n      Chunk.empty<E>(),\n      (list, cause) =>\n        cause._tag === OpCodes.OP_FAIL ?\n          Option.some(pipe(list, Chunk.prepend(cause.error))) :\n          Option.none()\n    )\n  )\n\n/** @internal */\nexport const defects = <E>(self: Cause.Cause<E>): Chunk.Chunk<unknown> =>\n  Chunk.reverse(\n    reduce<Chunk.Chunk<unknown>, E>(\n      self,\n      Chunk.empty<unknown>(),\n      (list, cause) =>\n        cause._tag === OpCodes.OP_DIE ?\n          Option.some(pipe(list, Chunk.prepend(cause.defect))) :\n          Option.none()\n    )\n  )\n\n/** @internal */\nexport const interruptors = <E>(self: Cause.Cause<E>): HashSet.HashSet<FiberId.FiberId> =>\n  reduce(self, HashSet.empty<FiberId.FiberId>(), (set, cause) =>\n    cause._tag === OpCodes.OP_INTERRUPT ?\n      Option.some(pipe(set, HashSet.add(cause.fiberId))) :\n      Option.none())\n\n/** @internal */\nexport const failureOption = <E>(self: Cause.Cause<E>): Option.Option<E> =>\n  find<E, E>(self, (cause) =>\n    cause._tag === OpCodes.OP_FAIL ?\n      Option.some(cause.error) :\n      Option.none())\n\n/** @internal */\nexport const failureOrCause = <E>(self: Cause.Cause<E>): Either.Either<Cause.Cause<never>, E> => {\n  const option = failureOption(self)\n  switch (option._tag) {\n    case \"None\": {\n      // no `E` inside this `Cause`, so it can be safely cast to `never`\n      return Either.right(self as Cause.Cause<never>)\n    }\n    case \"Some\": {\n      return Either.left(option.value)\n    }\n  }\n}\n\n/** @internal */\nexport const dieOption = <E>(self: Cause.Cause<E>): Option.Option<unknown> =>\n  find(self, (cause) =>\n    cause._tag === OpCodes.OP_DIE ?\n      Option.some(cause.defect) :\n      Option.none())\n\n/** @internal */\nexport const flipCauseOption = <E>(self: Cause.Cause<Option.Option<E>>): Option.Option<Cause.Cause<E>> =>\n  match(self, {\n    onEmpty: Option.some(empty),\n    onFail: (failureOption) => pipe(failureOption, Option.map(fail)),\n    onDie: (defect) => Option.some(die(defect)),\n    onInterrupt: (fiberId) => Option.some(interrupt(fiberId)),\n    onSequential: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(sequential(left.value, right.value))\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      return Option.none()\n    },\n    onParallel: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(parallel(left.value, right.value))\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      return Option.none()\n    }\n  })\n\n/** @internal */\nexport const interruptOption = <E>(self: Cause.Cause<E>): Option.Option<FiberId.FiberId> =>\n  find(self, (cause) =>\n    cause._tag === OpCodes.OP_INTERRUPT ?\n      Option.some(cause.fiberId) :\n      Option.none())\n\n/** @internal */\nexport const keepDefects = <E>(self: Cause.Cause<E>): Option.Option<Cause.Cause<never>> =>\n  match<Option.Option<Cause.Cause<never>>, E>(self, {\n    onEmpty: Option.none(),\n    onFail: () => Option.none(),\n    onDie: (defect) => Option.some(die(defect)),\n    onInterrupt: () => Option.none(),\n    onSequential: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(sequential(left.value, right.value))\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      return Option.none()\n    },\n    onParallel: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(parallel(left.value, right.value))\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      return Option.none()\n    }\n  })\n\n/** @internal */\nexport const keepDefectsAndElectFailures = <E>(self: Cause.Cause<E>): Option.Option<Cause.Cause<never>> =>\n  match<Option.Option<Cause.Cause<never>>, E>(self, {\n    onEmpty: Option.none(),\n    onFail: (failure) => Option.some(die(failure)),\n    onDie: (defect) => Option.some(die(defect)),\n    onInterrupt: () => Option.none(),\n    onSequential: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(sequential(left.value, right.value))\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      return Option.none()\n    },\n    onParallel: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(parallel(left.value, right.value))\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      return Option.none()\n    }\n  })\n\n/** @internal */\nexport const linearize = <E>(self: Cause.Cause<E>): HashSet.HashSet<Cause.Cause<E>> =>\n  match(self, {\n    onEmpty: HashSet.empty(),\n    onFail: (error) => HashSet.make(fail(error)),\n    onDie: (defect) => HashSet.make(die(defect)),\n    onInterrupt: (fiberId) => HashSet.make(interrupt(fiberId)),\n    onSequential: (leftSet, rightSet) =>\n      pipe(\n        leftSet,\n        HashSet.flatMap((leftCause) =>\n          pipe(\n            rightSet,\n            HashSet.map((rightCause) => sequential(leftCause, rightCause))\n          )\n        )\n      ),\n    onParallel: (leftSet, rightSet) =>\n      pipe(\n        leftSet,\n        HashSet.flatMap((leftCause) =>\n          pipe(\n            rightSet,\n            HashSet.map((rightCause) => parallel(leftCause, rightCause))\n          )\n        )\n      )\n  })\n\n/** @internal */\nexport const stripFailures = <E>(self: Cause.Cause<E>): Cause.Cause<never> =>\n  match(self, {\n    onEmpty: empty,\n    onFail: () => empty,\n    onDie: (defect) => die(defect),\n    onInterrupt: (fiberId) => interrupt(fiberId),\n    onSequential: sequential,\n    onParallel: parallel\n  })\n\n/** @internal */\nexport const electFailures = <E>(self: Cause.Cause<E>): Cause.Cause<never> =>\n  match(self, {\n    onEmpty: empty,\n    onFail: (failure) => die(failure),\n    onDie: (defect) => die(defect),\n    onInterrupt: (fiberId) => interrupt(fiberId),\n    onSequential: (left, right) => sequential(left, right),\n    onParallel: (left, right) => parallel(left, right)\n  })\n\n/** @internal */\nexport const stripSomeDefects = dual<\n  (pf: (defect: unknown) => Option.Option<unknown>) => <E>(self: Cause.Cause<E>) => Option.Option<Cause.Cause<E>>,\n  <E>(self: Cause.Cause<E>, pf: (defect: unknown) => Option.Option<unknown>) => Option.Option<Cause.Cause<E>>\n>(2, <E>(self: Cause.Cause<E>, pf: (defect: unknown) => Option.Option<unknown>) =>\n  match(self, {\n    onEmpty: Option.some(empty),\n    onFail: (error) => Option.some(fail(error)),\n    onDie: (defect) => {\n      const option = pf(defect)\n      return Option.isSome(option) ? Option.none() : Option.some(die(defect))\n    },\n    onInterrupt: (fiberId) => Option.some(interrupt(fiberId)),\n    onSequential: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(sequential(left.value, right.value))\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      return Option.none()\n    },\n    onParallel: (left, right) => {\n      if (Option.isSome(left) && Option.isSome(right)) {\n        return Option.some(parallel(left.value, right.value))\n      }\n      if (Option.isSome(left) && Option.isNone(right)) {\n        return Option.some(left.value)\n      }\n      if (Option.isNone(left) && Option.isSome(right)) {\n        return Option.some(right.value)\n      }\n      return Option.none()\n    }\n  }))\n\n// -----------------------------------------------------------------------------\n// Mapping\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const as = dual<\n  <E2>(error: E2) => <E>(self: Cause.Cause<E>) => Cause.Cause<E2>,\n  <E, E2>(self: Cause.Cause<E>, error: E2) => Cause.Cause<E2>\n>(2, (self, error) => map(self, () => error))\n\n/** @internal */\nexport const map = dual<\n  <E, E2>(f: (e: E) => E2) => (self: Cause.Cause<E>) => Cause.Cause<E2>,\n  <E, E2>(self: Cause.Cause<E>, f: (e: E) => E2) => Cause.Cause<E2>\n>(2, (self, f) => flatMap(self, (e) => fail(f(e))))\n\n// -----------------------------------------------------------------------------\n// Sequencing\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const flatMap = dual<\n  <E, E2>(f: (e: E) => Cause.Cause<E2>) => (self: Cause.Cause<E>) => Cause.Cause<E2>,\n  <E, E2>(self: Cause.Cause<E>, f: (e: E) => Cause.Cause<E2>) => Cause.Cause<E2>\n>(2, (self, f) =>\n  match(self, {\n    onEmpty: empty,\n    onFail: (error) => f(error),\n    onDie: (defect) => die(defect),\n    onInterrupt: (fiberId) => interrupt(fiberId),\n    onSequential: (left, right) => sequential(left, right),\n    onParallel: (left, right) => parallel(left, right)\n  }))\n\n/** @internal */\nexport const flatten = <E>(self: Cause.Cause<Cause.Cause<E>>): Cause.Cause<E> => flatMap(self, identity)\n\n/** @internal */\nexport const andThen: {\n  <E, E2>(f: (e: E) => Cause.Cause<E2>): (self: Cause.Cause<E>) => Cause.Cause<E2>\n  <E2>(f: Cause.Cause<E2>): <E>(self: Cause.Cause<E>) => Cause.Cause<E2>\n  <E, E2>(self: Cause.Cause<E>, f: (e: E) => Cause.Cause<E2>): Cause.Cause<E2>\n  <E, E2>(self: Cause.Cause<E>, f: Cause.Cause<E2>): Cause.Cause<E2>\n} = dual(\n  2,\n  <E, E2>(self: Cause.Cause<E>, f: ((e: E) => Cause.Cause<E2>) | Cause.Cause<E2>): Cause.Cause<E2> =>\n    isFunction(f) ? flatMap(self, f) : flatMap(self, () => f)\n)\n\n// -----------------------------------------------------------------------------\n// Equality\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const contains = dual<\n  <E2>(that: Cause.Cause<E2>) => <E>(self: Cause.Cause<E>) => boolean,\n  <E, E2>(self: Cause.Cause<E>, that: Cause.Cause<E2>) => boolean\n>(2, (self, that) => {\n  if (that._tag === OpCodes.OP_EMPTY || self === that) {\n    return true\n  }\n  return reduce(self, false, (accumulator, cause) => {\n    return Option.some(accumulator || causeEquals(cause, that))\n  })\n})\n\n/** @internal */\nconst causeEquals = (left: Cause.Cause<unknown>, right: Cause.Cause<unknown>): boolean => {\n  let leftStack: Chunk.Chunk<Cause.Cause<unknown>> = Chunk.of(left)\n  let rightStack: Chunk.Chunk<Cause.Cause<unknown>> = Chunk.of(right)\n  while (Chunk.isNonEmpty(leftStack) && Chunk.isNonEmpty(rightStack)) {\n    const [leftParallel, leftSequential] = pipe(\n      Chunk.headNonEmpty(leftStack),\n      reduce(\n        [HashSet.empty<unknown>(), Chunk.empty<Cause.Cause<unknown>>()] as const,\n        ([parallel, sequential], cause) => {\n          const [par, seq] = evaluateCause(cause)\n          return Option.some(\n            [\n              pipe(parallel, HashSet.union(par)),\n              pipe(sequential, Chunk.appendAll(seq))\n            ] as const\n          )\n        }\n      )\n    )\n    const [rightParallel, rightSequential] = pipe(\n      Chunk.headNonEmpty(rightStack),\n      reduce(\n        [HashSet.empty<unknown>(), Chunk.empty<Cause.Cause<unknown>>()] as const,\n        ([parallel, sequential], cause) => {\n          const [par, seq] = evaluateCause(cause)\n          return Option.some(\n            [\n              pipe(parallel, HashSet.union(par)),\n              pipe(sequential, Chunk.appendAll(seq))\n            ] as const\n          )\n        }\n      )\n    )\n    if (!Equal.equals(leftParallel, rightParallel)) {\n      return false\n    }\n    leftStack = leftSequential\n    rightStack = rightSequential\n  }\n  return true\n}\n\n// -----------------------------------------------------------------------------\n// Flattening\n// -----------------------------------------------------------------------------\n\n/**\n * Flattens a cause to a sequence of sets of causes, where each set represents\n * causes that fail in parallel and sequential sets represent causes that fail\n * after each other.\n *\n * @internal\n */\nconst flattenCause = (cause: Cause.Cause<unknown>): Chunk.Chunk<HashSet.HashSet<unknown>> => {\n  return flattenCauseLoop(Chunk.of(cause), Chunk.empty())\n}\n\n/** @internal */\nconst flattenCauseLoop = (\n  causes: Chunk.Chunk<Cause.Cause<unknown>>,\n  flattened: Chunk.Chunk<HashSet.HashSet<unknown>>\n): Chunk.Chunk<HashSet.HashSet<unknown>> => {\n  // eslint-disable-next-line no-constant-condition\n  while (1) {\n    const [parallel, sequential] = pipe(\n      causes,\n      Arr.reduce(\n        [HashSet.empty<unknown>(), Chunk.empty<Cause.Cause<unknown>>()] as const,\n        ([parallel, sequential], cause) => {\n          const [par, seq] = evaluateCause(cause)\n          return [\n            pipe(parallel, HashSet.union(par)),\n            pipe(sequential, Chunk.appendAll(seq))\n          ]\n        }\n      )\n    )\n    const updated = HashSet.size(parallel) > 0 ?\n      pipe(flattened, Chunk.prepend(parallel)) :\n      flattened\n    if (Chunk.isEmpty(sequential)) {\n      return Chunk.reverse(updated)\n    }\n    causes = sequential\n    flattened = updated\n  }\n  throw new Error(getBugErrorMessage(\"Cause.flattenCauseLoop\"))\n}\n\n// -----------------------------------------------------------------------------\n// Finding\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const find = dual<\n  <E, Z>(pf: (cause: Cause.Cause<E>) => Option.Option<Z>) => (self: Cause.Cause<E>) => Option.Option<Z>,\n  <E, Z>(self: Cause.Cause<E>, pf: (cause: Cause.Cause<E>) => Option.Option<Z>) => Option.Option<Z>\n>(2, <E, Z>(self: Cause.Cause<E>, pf: (cause: Cause.Cause<E>) => Option.Option<Z>) => {\n  const stack: Array<Cause.Cause<E>> = [self]\n  while (stack.length > 0) {\n    const item = stack.pop()!\n    const option = pf(item)\n    switch (option._tag) {\n      case \"None\": {\n        switch (item._tag) {\n          case OpCodes.OP_SEQUENTIAL:\n          case OpCodes.OP_PARALLEL: {\n            stack.push(item.right)\n            stack.push(item.left)\n            break\n          }\n        }\n        break\n      }\n      case \"Some\": {\n        return option\n      }\n    }\n  }\n  return Option.none()\n})\n\n// -----------------------------------------------------------------------------\n// Filtering\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const filter: {\n  <E, EB extends E>(\n    refinement: Refinement<Cause.Cause<NoInfer<E>>, Cause.Cause<EB>>\n  ): (self: Cause.Cause<E>) => Cause.Cause<EB>\n  <E>(predicate: Predicate<Cause.Cause<NoInfer<E>>>): (self: Cause.Cause<E>) => Cause.Cause<E>\n  <E, EB extends E>(self: Cause.Cause<E>, refinement: Refinement<Cause.Cause<E>, Cause.Cause<EB>>): Cause.Cause<EB>\n  <E>(self: Cause.Cause<E>, predicate: Predicate<Cause.Cause<E>>): Cause.Cause<E>\n} = dual(\n  2,\n  <E>(self: Cause.Cause<E>, predicate: Predicate<Cause.Cause<E>>): Cause.Cause<E> =>\n    reduceWithContext(self, void 0, FilterCauseReducer(predicate))\n)\n\n// -----------------------------------------------------------------------------\n// Evaluation\n// -----------------------------------------------------------------------------\n\n/**\n * Takes one step in evaluating a cause, returning a set of causes that fail\n * in parallel and a list of causes that fail sequentially after those causes.\n *\n * @internal\n */\nconst evaluateCause = (\n  self: Cause.Cause<unknown>\n): [HashSet.HashSet<unknown>, Chunk.Chunk<Cause.Cause<unknown>>] => {\n  let cause: Cause.Cause<unknown> | undefined = self\n  const stack: Array<Cause.Cause<unknown>> = []\n  let _parallel = HashSet.empty<unknown>()\n  let _sequential = Chunk.empty<Cause.Cause<unknown>>()\n  while (cause !== undefined) {\n    switch (cause._tag) {\n      case OpCodes.OP_EMPTY: {\n        if (stack.length === 0) {\n          return [_parallel, _sequential]\n        }\n        cause = stack.pop()\n        break\n      }\n      case OpCodes.OP_FAIL: {\n        _parallel = HashSet.add(_parallel, Chunk.make(cause._tag, cause.error))\n        if (stack.length === 0) {\n          return [_parallel, _sequential]\n        }\n        cause = stack.pop()\n        break\n      }\n      case OpCodes.OP_DIE: {\n        _parallel = HashSet.add(_parallel, Chunk.make(cause._tag, cause.defect))\n        if (stack.length === 0) {\n          return [_parallel, _sequential]\n        }\n        cause = stack.pop()\n        break\n      }\n      case OpCodes.OP_INTERRUPT: {\n        _parallel = HashSet.add(_parallel, Chunk.make(cause._tag, cause.fiberId as unknown))\n        if (stack.length === 0) {\n          return [_parallel, _sequential]\n        }\n        cause = stack.pop()\n        break\n      }\n      case OpCodes.OP_SEQUENTIAL: {\n        switch (cause.left._tag) {\n          case OpCodes.OP_EMPTY: {\n            cause = cause.right\n            break\n          }\n          case OpCodes.OP_SEQUENTIAL: {\n            cause = sequential(cause.left.left, sequential(cause.left.right, cause.right))\n            break\n          }\n          case OpCodes.OP_PARALLEL: {\n            cause = parallel(\n              sequential(cause.left.left, cause.right),\n              sequential(cause.left.right, cause.right)\n            )\n            break\n          }\n          default: {\n            _sequential = Chunk.prepend(_sequential, cause.right)\n            cause = cause.left\n            break\n          }\n        }\n        break\n      }\n      case OpCodes.OP_PARALLEL: {\n        stack.push(cause.right)\n        cause = cause.left\n        break\n      }\n    }\n  }\n  throw new Error(getBugErrorMessage(\"Cause.evaluateCauseLoop\"))\n}\n\n// -----------------------------------------------------------------------------\n// Reducing\n// -----------------------------------------------------------------------------\n\n/** @internal */\nconst SizeCauseReducer: Cause.CauseReducer<unknown, unknown, number> = {\n  emptyCase: () => 0,\n  failCase: () => 1,\n  dieCase: () => 1,\n  interruptCase: () => 1,\n  sequentialCase: (_, left, right) => left + right,\n  parallelCase: (_, left, right) => left + right\n}\n\n/** @internal */\nconst IsInterruptedOnlyCauseReducer: Cause.CauseReducer<unknown, unknown, boolean> = {\n  emptyCase: constTrue,\n  failCase: constFalse,\n  dieCase: constFalse,\n  interruptCase: constTrue,\n  sequentialCase: (_, left, right) => left && right,\n  parallelCase: (_, left, right) => left && right\n}\n\n/** @internal */\nconst FilterCauseReducer = <E>(\n  predicate: Predicate<Cause.Cause<E>>\n): Cause.CauseReducer<unknown, E, Cause.Cause<E>> => ({\n  emptyCase: () => empty,\n  failCase: (_, error) => fail(error),\n  dieCase: (_, defect) => die(defect),\n  interruptCase: (_, fiberId) => interrupt(fiberId),\n  sequentialCase: (_, left, right) => {\n    if (predicate(left)) {\n      if (predicate(right)) {\n        return sequential(left, right)\n      }\n      return left\n    }\n    if (predicate(right)) {\n      return right\n    }\n    return empty\n  },\n  parallelCase: (_, left, right) => {\n    if (predicate(left)) {\n      if (predicate(right)) {\n        return parallel(left, right)\n      }\n      return left\n    }\n    if (predicate(right)) {\n      return right\n    }\n    return empty\n  }\n})\n\n/** @internal */\ntype CauseCase = SequentialCase | ParallelCase\n\nconst OP_SEQUENTIAL_CASE = \"SequentialCase\"\n\nconst OP_PARALLEL_CASE = \"ParallelCase\"\n\n/** @internal */\ninterface SequentialCase {\n  readonly _tag: typeof OP_SEQUENTIAL_CASE\n}\n\n/** @internal */\ninterface ParallelCase {\n  readonly _tag: typeof OP_PARALLEL_CASE\n}\n\n/** @internal */\nexport const match = dual<\n  <Z, E>(\n    options: {\n      readonly onEmpty: Z\n      readonly onFail: (error: E) => Z\n      readonly onDie: (defect: unknown) => Z\n      readonly onInterrupt: (fiberId: FiberId.FiberId) => Z\n      readonly onSequential: (left: Z, right: Z) => Z\n      readonly onParallel: (left: Z, right: Z) => Z\n    }\n  ) => (self: Cause.Cause<E>) => Z,\n  <Z, E>(\n    self: Cause.Cause<E>,\n    options: {\n      readonly onEmpty: Z\n      readonly onFail: (error: E) => Z\n      readonly onDie: (defect: unknown) => Z\n      readonly onInterrupt: (fiberId: FiberId.FiberId) => Z\n      readonly onSequential: (left: Z, right: Z) => Z\n      readonly onParallel: (left: Z, right: Z) => Z\n    }\n  ) => Z\n>(2, (self, { onDie, onEmpty, onFail, onInterrupt, onParallel, onSequential }) => {\n  return reduceWithContext(self, void 0, {\n    emptyCase: () => onEmpty,\n    failCase: (_, error) => onFail(error),\n    dieCase: (_, defect) => onDie(defect),\n    interruptCase: (_, fiberId) => onInterrupt(fiberId),\n    sequentialCase: (_, left, right) => onSequential(left, right),\n    parallelCase: (_, left, right) => onParallel(left, right)\n  })\n})\n\n/** @internal */\nexport const reduce = dual<\n  <Z, E>(zero: Z, pf: (accumulator: Z, cause: Cause.Cause<E>) => Option.Option<Z>) => (self: Cause.Cause<E>) => Z,\n  <Z, E>(self: Cause.Cause<E>, zero: Z, pf: (accumulator: Z, cause: Cause.Cause<E>) => Option.Option<Z>) => Z\n>(3, <Z, E>(self: Cause.Cause<E>, zero: Z, pf: (accumulator: Z, cause: Cause.Cause<E>) => Option.Option<Z>) => {\n  let accumulator: Z = zero\n  let cause: Cause.Cause<E> | undefined = self\n  const causes: Array<Cause.Cause<E>> = []\n  while (cause !== undefined) {\n    const option = pf(accumulator, cause)\n    accumulator = Option.isSome(option) ? option.value : accumulator\n    switch (cause._tag) {\n      case OpCodes.OP_SEQUENTIAL: {\n        causes.push(cause.right)\n        cause = cause.left\n        break\n      }\n      case OpCodes.OP_PARALLEL: {\n        causes.push(cause.right)\n        cause = cause.left\n        break\n      }\n      default: {\n        cause = undefined\n        break\n      }\n    }\n    if (cause === undefined && causes.length > 0) {\n      cause = causes.pop()!\n    }\n  }\n  return accumulator\n})\n\n/** @internal */\nexport const reduceWithContext = dual<\n  <C, E, Z>(context: C, reducer: Cause.CauseReducer<C, E, Z>) => (self: Cause.Cause<E>) => Z,\n  <C, E, Z>(self: Cause.Cause<E>, context: C, reducer: Cause.CauseReducer<C, E, Z>) => Z\n>(3, <C, E, Z>(self: Cause.Cause<E>, context: C, reducer: Cause.CauseReducer<C, E, Z>) => {\n  const input: Array<Cause.Cause<E>> = [self]\n  const output: Array<Either.Either<Z, CauseCase>> = []\n  while (input.length > 0) {\n    const cause = input.pop()!\n    switch (cause._tag) {\n      case OpCodes.OP_EMPTY: {\n        output.push(Either.right(reducer.emptyCase(context)))\n        break\n      }\n      case OpCodes.OP_FAIL: {\n        output.push(Either.right(reducer.failCase(context, cause.error)))\n        break\n      }\n      case OpCodes.OP_DIE: {\n        output.push(Either.right(reducer.dieCase(context, cause.defect)))\n        break\n      }\n      case OpCodes.OP_INTERRUPT: {\n        output.push(Either.right(reducer.interruptCase(context, cause.fiberId)))\n        break\n      }\n      case OpCodes.OP_SEQUENTIAL: {\n        input.push(cause.right)\n        input.push(cause.left)\n        output.push(Either.left({ _tag: OP_SEQUENTIAL_CASE }))\n        break\n      }\n      case OpCodes.OP_PARALLEL: {\n        input.push(cause.right)\n        input.push(cause.left)\n        output.push(Either.left({ _tag: OP_PARALLEL_CASE }))\n        break\n      }\n    }\n  }\n  const accumulator: Array<Z> = []\n  while (output.length > 0) {\n    const either = output.pop()!\n    switch (either._tag) {\n      case \"Left\": {\n        switch (either.left._tag) {\n          case OP_SEQUENTIAL_CASE: {\n            const left = accumulator.pop()!\n            const right = accumulator.pop()!\n            const value = reducer.sequentialCase(context, left, right)\n            accumulator.push(value)\n            break\n          }\n          case OP_PARALLEL_CASE: {\n            const left = accumulator.pop()!\n            const right = accumulator.pop()!\n            const value = reducer.parallelCase(context, left, right)\n            accumulator.push(value)\n            break\n          }\n        }\n        break\n      }\n      case \"Right\": {\n        accumulator.push(either.right)\n        break\n      }\n    }\n  }\n  if (accumulator.length === 0) {\n    throw new Error(\n      \"BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues\"\n    )\n  }\n  return accumulator.pop()!\n})\n\n// -----------------------------------------------------------------------------\n// Pretty Printing\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const pretty = <E>(cause: Cause.Cause<E>, options?: {\n  readonly renderErrorCause?: boolean | undefined\n}): string => {\n  if (isInterruptedOnly(cause)) {\n    return \"All fibers interrupted without errors.\"\n  }\n  return prettyErrors<E>(cause).map(function(e) {\n    if (options?.renderErrorCause !== true || e.cause === undefined) {\n      return e.stack\n    }\n    return `${e.stack} {\\n${renderErrorCause(e.cause as PrettyError, \"  \")}\\n}`\n  }).join(\"\\n\")\n}\n\nconst renderErrorCause = (cause: PrettyError, prefix: string) => {\n  const lines = cause.stack!.split(\"\\n\")\n  let stack = `${prefix}[cause]: ${lines[0]}`\n  for (let i = 1, len = lines.length; i < len; i++) {\n    stack += `\\n${prefix}${lines[i]}`\n  }\n  if (cause.cause) {\n    stack += ` {\\n${renderErrorCause(cause.cause as PrettyError, `${prefix}  `)}\\n${prefix}}`\n  }\n  return stack\n}\n\nclass PrettyError extends globalThis.Error implements Cause.PrettyError {\n  span: undefined | Span = undefined\n  constructor(originalError: unknown) {\n    const originalErrorIsObject = typeof originalError === \"object\" && originalError !== null\n    const prevLimit = Error.stackTraceLimit\n    Error.stackTraceLimit = 1\n    super(\n      prettyErrorMessage(originalError),\n      originalErrorIsObject && \"cause\" in originalError && typeof originalError.cause !== \"undefined\"\n        ? { cause: new PrettyError(originalError.cause) }\n        : undefined\n    )\n    if (this.message === \"\") {\n      this.message = \"An error has occurred\"\n    }\n    Error.stackTraceLimit = prevLimit\n    this.name = originalError instanceof Error ? originalError.name : \"Error\"\n    if (originalErrorIsObject) {\n      if (spanSymbol in originalError) {\n        this.span = originalError[spanSymbol] as Span\n      }\n      Object.keys(originalError).forEach((key) => {\n        if (!(key in this)) {\n          // @ts-expect-error\n          this[key] = originalError[key]\n        }\n      })\n    }\n    this.stack = prettyErrorStack(\n      `${this.name}: ${this.message}`,\n      originalError instanceof Error && originalError.stack\n        ? originalError.stack\n        : \"\",\n      this.span\n    )\n  }\n}\n\n/**\n * A utility function for generating human-readable error messages from a generic error of type `unknown`.\n *\n * Rules:\n *\n * 1) If the input `u` is already a string, it's considered a message.\n * 2) If `u` is an Error instance with a message defined, it uses the message.\n * 3) If `u` has a user-defined `toString()` method, it uses that method.\n * 4) Otherwise, it uses `Inspectable.stringifyCircular` to produce a string representation and uses it as the error message,\n *   with \"Error\" added as a prefix.\n *\n * @internal\n */\nexport const prettyErrorMessage = (u: unknown): string => {\n  // 1)\n  if (typeof u === \"string\") {\n    return u\n  }\n  // 2)\n  if (typeof u === \"object\" && u !== null && u instanceof Error) {\n    return u.message\n  }\n  // 3)\n  try {\n    if (\n      hasProperty(u, \"toString\") &&\n      isFunction(u[\"toString\"]) &&\n      u[\"toString\"] !== Object.prototype.toString &&\n      u[\"toString\"] !== globalThis.Array.prototype.toString\n    ) {\n      return u[\"toString\"]()\n    }\n  } catch {\n    // something's off, rollback to json\n  }\n  // 4)\n  return stringifyCircular(u)\n}\n\nconst locationRegex = /\\((.*)\\)/\n\n/** @internal */\nexport const spanToTrace = globalValue(\"effect/Tracer/spanToTrace\", () => new WeakMap())\n\nconst prettyErrorStack = (message: string, stack: string, span?: Span | undefined): string => {\n  const out: Array<string> = [message]\n  const lines = stack.startsWith(message) ? stack.slice(message.length).split(\"\\n\") : stack.split(\"\\n\")\n\n  for (let i = 1; i < lines.length; i++) {\n    if (lines[i].includes(\"Generator.next\")) {\n      break\n    }\n    if (lines[i].includes(\"effect_internal_function\")) {\n      out.pop()\n      break\n    }\n    out.push(\n      lines[i]\n        .replace(/at .*effect_instruction_i.*\\((.*)\\)/, \"at $1\")\n        .replace(/EffectPrimitive\\.\\w+/, \"<anonymous>\")\n    )\n  }\n\n  if (span) {\n    let current: Span | AnySpan | undefined = span\n    let i = 0\n    while (current && current._tag === \"Span\" && i < 10) {\n      const stackFn = spanToTrace.get(current)\n      if (typeof stackFn === \"function\") {\n        const stack = stackFn()\n        if (typeof stack === \"string\") {\n          const locationMatch = stack.match(locationRegex)\n          const location = locationMatch ? locationMatch[1] : stack.replace(/^at /, \"\")\n          out.push(`    at ${current.name} (${location})`)\n        } else {\n          out.push(`    at ${current.name}`)\n        }\n      } else {\n        out.push(`    at ${current.name}`)\n      }\n      current = Option.getOrUndefined(current.parent)\n      i++\n    }\n  }\n\n  return out.join(\"\\n\")\n}\n\nconst spanSymbol = Symbol.for(\"effect/SpanAnnotation\")\n\n/** @internal */\nexport const prettyErrors = <E>(cause: Cause.Cause<E>): Array<PrettyError> =>\n  reduceWithContext(cause, void 0, {\n    emptyCase: (): Array<PrettyError> => [],\n    dieCase: (_, unknownError) => {\n      return [new PrettyError(unknownError)]\n    },\n    failCase: (_, error) => {\n      return [new PrettyError(error)]\n    },\n    interruptCase: () => [],\n    parallelCase: (_, l, r) => [...l, ...r],\n    sequentialCase: (_, l, r) => [...l, ...r]\n  })\n"],"names":["Arr","Chunk","Either","Equal","constFalse","constTrue","dual","identity","pipe","globalValue","Hash","HashSet","NodeInspectSymbol","stringifyCircular","toJSON","Option","pipeArguments","hasProperty","isFunction","getBugErrorMessage","OpCodes","CauseSymbolKey","CauseTypeId","Symbol","for","variance","_E","_","proto","symbol","hash","combine","flattenCause","cached","that","isCause","causeEquals","arguments","_tag","_id","defect","fiberId","failure","error","left","right","toString","pretty","empty","o","Object","create","OP_EMPTY","fail","OP_FAIL","die","OP_DIE","interrupt","OP_INTERRUPT","parallel","OP_PARALLEL","sequential","OP_SEQUENTIAL","u","isEmptyType","self","isFailType","isDieType","isInterruptType","isSequentialType","isParallelType","size","reduceWithContext","SizeCauseReducer","isEmpty","reduce","acc","cause","some","none","isFailure","isSome","failureOption","isDie","dieOption","isInterrupted","interruptOption","isInterruptedOnly","undefined","IsInterruptedOnlyCauseReducer","failures","reverse","list","prepend","defects","interruptors","set","add","find","failureOrCause","option","value","flipCauseOption","match","onEmpty","onFail","map","onDie","onInterrupt","onSequential","isNone","onParallel","keepDefects","keepDefectsAndElectFailures","linearize","make","leftSet","rightSet","flatMap","leftCause","rightCause","stripFailures","electFailures","stripSomeDefects","pf","as","f","e","flatten","andThen","contains","accumulator","leftStack","of","rightStack","isNonEmpty","leftParallel","leftSequential","headNonEmpty","par","seq","evaluateCause","union","appendAll","rightParallel","rightSequential","equals","flattenCauseLoop","causes","flattened","updated","Error","stack","length","item","pop","push","filter","predicate","FilterCauseReducer","_parallel","_sequential","emptyCase","failCase","dieCase","interruptCase","sequentialCase","parallelCase","OP_SEQUENTIAL_CASE","OP_PARALLEL_CASE","zero","context","reducer","input","output","either","options","prettyErrors","renderErrorCause","join","prefix","lines","split","i","len","PrettyError","globalThis","span","constructor","originalError","originalErrorIsObject","prevLimit","stackTraceLimit","prettyErrorMessage","message","name","spanSymbol","keys","forEach","key","prettyErrorStack","prototype","Array","locationRegex","spanToTrace","WeakMap","out","startsWith","slice","includes","replace","current","stackFn","get","locationMatch","location","getOrUndefined","parent","unknownError","l","r"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2577, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2583, "column": 0}, "map": {"version":3,"file":"fiberId.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiberId.ts"],"sourcesContent":["import * as Equal from \"../Equal.js\"\nimport type * as FiberId from \"../FiberId.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as Hash from \"../Hash.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport * as MutableRef from \"../MutableRef.js\"\nimport * as Option from \"../Option.js\"\nimport { hasProperty } from \"../Predicate.js\"\n\n/** @internal */\nconst FiberIdSymbolKey = \"effect/FiberId\"\n\n/** @internal */\nexport const FiberIdTypeId: FiberId.FiberIdTypeId = Symbol.for(\n  FiberIdSymbolKey\n) as FiberId.FiberIdTypeId\n\n/** @internal */\nconst OP_NONE = \"None\" as const\n\n/** @internal */\nexport type OP_NONE = typeof OP_NONE\n\n/** @internal */\nconst OP_RUNTIME = \"Runtime\" as const\n\n/** @internal */\nexport type OP_RUNTIME = typeof OP_RUNTIME\n\n/** @internal */\nconst OP_COMPOSITE = \"Composite\" as const\n\n/** @internal */\nexport type OP_COMPOSITE = typeof OP_COMPOSITE\n\nconst emptyHash = Hash.string(`${FiberIdSymbolKey}-${OP_NONE}`)\n\n/** @internal */\nclass None implements FiberId.None {\n  readonly [FiberIdTypeId]: FiberId.FiberIdTypeId = FiberIdTypeId\n  readonly _tag = OP_NONE\n  readonly id = -1\n  readonly startTimeMillis = -1;\n  [Hash.symbol](): number {\n    return emptyHash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isFiberId(that) && that._tag === OP_NONE\n  }\n  toString() {\n    return format(this.toJSON())\n  }\n  toJSON() {\n    return {\n      _id: \"FiberId\",\n      _tag: this._tag\n    }\n  }\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  }\n}\n\n/** @internal */\nclass Runtime implements FiberId.Runtime {\n  readonly [FiberIdTypeId]: FiberId.FiberIdTypeId = FiberIdTypeId\n  readonly _tag = OP_RUNTIME\n  constructor(\n    readonly id: number,\n    readonly startTimeMillis: number\n  ) {}\n  [Hash.symbol](): number {\n    return Hash.cached(this, Hash.string(`${FiberIdSymbolKey}-${this._tag}-${this.id}-${this.startTimeMillis}`))\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isFiberId(that) &&\n      that._tag === OP_RUNTIME &&\n      this.id === that.id &&\n      this.startTimeMillis === that.startTimeMillis\n  }\n  toString() {\n    return format(this.toJSON())\n  }\n  toJSON() {\n    return {\n      _id: \"FiberId\",\n      _tag: this._tag,\n      id: this.id,\n      startTimeMillis: this.startTimeMillis\n    }\n  }\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  }\n}\n\n/** @internal */\nclass Composite implements FiberId.Composite {\n  readonly [FiberIdTypeId]: FiberId.FiberIdTypeId = FiberIdTypeId\n  readonly _tag = OP_COMPOSITE\n  constructor(\n    readonly left: FiberId.FiberId,\n    readonly right: FiberId.FiberId\n  ) {\n  }\n  _hash: number | undefined;\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.string(`${FiberIdSymbolKey}-${this._tag}`),\n      Hash.combine(Hash.hash(this.left)),\n      Hash.combine(Hash.hash(this.right)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isFiberId(that) &&\n      that._tag === OP_COMPOSITE &&\n      Equal.equals(this.left, that.left) &&\n      Equal.equals(this.right, that.right)\n  }\n  toString() {\n    return format(this.toJSON())\n  }\n  toJSON() {\n    return {\n      _id: \"FiberId\",\n      _tag: this._tag,\n      left: toJSON(this.left),\n      right: toJSON(this.right)\n    }\n  }\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  }\n}\n\n/** @internal */\nexport const none: FiberId.None = new None()\n\n/** @internal */\nexport const runtime = (id: number, startTimeMillis: number): FiberId.Runtime => {\n  return new Runtime(id, startTimeMillis)\n}\n\n/** @internal */\nexport const composite = (left: FiberId.FiberId, right: FiberId.FiberId): FiberId.Composite => {\n  return new Composite(left, right)\n}\n\n/** @internal */\nexport const isFiberId = (self: unknown): self is FiberId.FiberId => hasProperty(self, FiberIdTypeId)\n\n/** @internal */\nexport const isNone = (self: FiberId.FiberId): self is FiberId.None => {\n  return self._tag === OP_NONE || pipe(toSet(self), HashSet.every((id) => isNone(id)))\n}\n\n/** @internal */\nexport const isRuntime = (self: FiberId.FiberId): self is FiberId.Runtime => {\n  return self._tag === OP_RUNTIME\n}\n\n/** @internal */\nexport const isComposite = (self: FiberId.FiberId): self is FiberId.Composite => {\n  return self._tag === OP_COMPOSITE\n}\n\n/** @internal */\nexport const combine = dual<\n  (that: FiberId.FiberId) => (self: FiberId.FiberId) => FiberId.FiberId,\n  (self: FiberId.FiberId, that: FiberId.FiberId) => FiberId.FiberId\n>(2, (self, that) => {\n  if (self._tag === OP_NONE) {\n    return that\n  }\n  if (that._tag === OP_NONE) {\n    return self\n  }\n  return new Composite(self, that)\n})\n\n/** @internal */\nexport const combineAll = (fiberIds: HashSet.HashSet<FiberId.FiberId>): FiberId.FiberId => {\n  return pipe(fiberIds, HashSet.reduce(none as FiberId.FiberId, (a, b) => combine(b)(a)))\n}\n\n/** @internal */\nexport const getOrElse = dual<\n  (that: FiberId.FiberId) => (self: FiberId.FiberId) => FiberId.FiberId,\n  (self: FiberId.FiberId, that: FiberId.FiberId) => FiberId.FiberId\n>(2, (self, that) => isNone(self) ? that : self)\n\n/** @internal */\nexport const ids = (self: FiberId.FiberId): HashSet.HashSet<number> => {\n  switch (self._tag) {\n    case OP_NONE: {\n      return HashSet.empty()\n    }\n    case OP_RUNTIME: {\n      return HashSet.make(self.id)\n    }\n    case OP_COMPOSITE: {\n      return pipe(ids(self.left), HashSet.union(ids(self.right)))\n    }\n  }\n}\n\nconst _fiberCounter = globalValue(\n  Symbol.for(\"effect/Fiber/Id/_fiberCounter\"),\n  () => MutableRef.make(0)\n)\n\n/** @internal */\nexport const make = (id: number, startTimeSeconds: number): FiberId.FiberId => {\n  return new Runtime(id, startTimeSeconds)\n}\n\n/** @internal */\nexport const threadName = (self: FiberId.FiberId): string => {\n  const identifiers = Array.from(ids(self)).map((n) => `#${n}`).join(\",\")\n  return identifiers\n}\n\n/** @internal */\nexport const toOption = (self: FiberId.FiberId): Option.Option<FiberId.FiberId> => {\n  const fiberIds = toSet(self)\n  if (HashSet.size(fiberIds) === 0) {\n    return Option.none()\n  }\n  let first = true\n  let acc: FiberId.FiberId\n  for (const fiberId of fiberIds) {\n    if (first) {\n      acc = fiberId\n      first = false\n    } else {\n      // @ts-expect-error\n      acc = pipe(acc, combine(fiberId))\n    }\n  }\n  // @ts-expect-error\n  return Option.some(acc)\n}\n\n/** @internal */\nexport const toSet = (self: FiberId.FiberId): HashSet.HashSet<FiberId.Runtime> => {\n  switch (self._tag) {\n    case OP_NONE: {\n      return HashSet.empty()\n    }\n    case OP_RUNTIME: {\n      return HashSet.make(self)\n    }\n    case OP_COMPOSITE: {\n      return pipe(toSet(self.left), HashSet.union(toSet(self.right)))\n    }\n  }\n}\n\n/** @internal */\nexport const unsafeMake = (): FiberId.Runtime => {\n  const id = MutableRef.get(_fiberCounter)\n  pipe(_fiberCounter, MutableRef.set(id + 1))\n  return new Runtime(id, Date.now())\n}\n"],"names":["Equal","dual","pipe","globalValue","Hash","HashSet","format","NodeInspectSymbol","toJSON","MutableRef","Option","hasProperty","FiberIdSymbolKey","FiberIdTypeId","Symbol","for","OP_NONE","OP_RUNTIME","OP_COMPOSITE","emptyHash","string","None","_tag","id","startTimeMillis","symbol","that","isFiberId","toString","_id","Runtime","constructor","cached","Composite","left","right","_hash","combine","hash","equals","none","runtime","composite","self","isNone","toSet","every","isRuntime","isComposite","combineAll","fiberIds","reduce","a","b","getOrElse","ids","empty","make","union","_fiberCounter","startTimeSeconds","threadName","identifiers","Array","from","map","n","join","toOption","size","first","acc","fiberId","some","unsafeMake","get","set","Date","now"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2805, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2811, "column": 0}, "map": {"version":3,"file":"runtimeFlagsPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/runtimeFlagsPatch.ts"],"sourcesContent":["import { dual } from \"../Function.js\"\nimport type * as RuntimeFlags from \"../RuntimeFlags.js\"\nimport type * as RuntimeFlagsPatch from \"../RuntimeFlagsPatch.js\"\n\n/** @internal */\nconst BIT_MASK = 0xff\n\n/** @internal */\nconst BIT_SHIFT = 0x08\n\n/** @internal */\nexport const active = (patch: RuntimeFlagsPatch.RuntimeFlagsPatch): number => patch & BIT_MASK\n\n/** @internal */\nexport const enabled = (patch: RuntimeFlagsPatch.RuntimeFlagsPatch): number => (patch >> BIT_SHIFT) & BIT_MASK\n\n/** @internal */\nexport const make = (active: number, enabled: number): RuntimeFlagsPatch.RuntimeFlagsPatch =>\n  ((active & BIT_MASK) + (((enabled & active) & BIT_MASK) << BIT_SHIFT)) as RuntimeFlagsPatch.RuntimeFlagsPatch\n\n/** @internal */\nexport const empty = make(0, 0)\n\n/** @internal */\nexport const enable = (flag: RuntimeFlags.RuntimeFlag): RuntimeFlagsPatch.RuntimeFlagsPatch => make(flag, flag)\n\n/** @internal */\nexport const disable = (flag: RuntimeFlags.RuntimeFlag): RuntimeFlagsPatch.RuntimeFlagsPatch => make(flag, 0)\n\n/** @internal */\nexport const isEmpty = (patch: RuntimeFlagsPatch.RuntimeFlagsPatch): boolean => patch === 0\n\n/** @internal */\nexport const isActive = dual<\n  (flag: RuntimeFlagsPatch.RuntimeFlagsPatch) => (self: RuntimeFlagsPatch.RuntimeFlagsPatch) => boolean,\n  (self: RuntimeFlagsPatch.RuntimeFlagsPatch, flag: RuntimeFlagsPatch.RuntimeFlagsPatch) => boolean\n>(2, (self, flag) => (active(self) & flag) !== 0)\n\n/** @internal */\nexport const isEnabled = dual<\n  (flag: RuntimeFlags.RuntimeFlag) => (self: RuntimeFlagsPatch.RuntimeFlagsPatch) => boolean,\n  (self: RuntimeFlagsPatch.RuntimeFlagsPatch, flag: RuntimeFlags.RuntimeFlag) => boolean\n>(2, (self, flag) => (enabled(self) & flag) !== 0)\n\n/** @internal */\nexport const isDisabled = dual<\n  (flag: RuntimeFlags.RuntimeFlag) => (self: RuntimeFlagsPatch.RuntimeFlagsPatch) => boolean,\n  (self: RuntimeFlagsPatch.RuntimeFlagsPatch, flag: RuntimeFlags.RuntimeFlag) => boolean\n>(2, (self, flag) => ((active(self) & flag) !== 0) && ((enabled(self) & flag) === 0))\n\n/** @internal */\nexport const exclude = dual<\n  (\n    flag: RuntimeFlags.RuntimeFlag\n  ) => (self: RuntimeFlagsPatch.RuntimeFlagsPatch) => RuntimeFlagsPatch.RuntimeFlagsPatch,\n  (self: RuntimeFlagsPatch.RuntimeFlagsPatch, flag: RuntimeFlags.RuntimeFlag) => RuntimeFlagsPatch.RuntimeFlagsPatch\n>(2, (self, flag) => make(active(self) & ~flag, enabled(self)))\n\n/** @internal */\nexport const both = dual<\n  (\n    that: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => (\n    self: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => RuntimeFlagsPatch.RuntimeFlagsPatch,\n  (\n    self: RuntimeFlagsPatch.RuntimeFlagsPatch,\n    that: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => RuntimeFlagsPatch.RuntimeFlagsPatch\n>(2, (self, that) => make(active(self) | active(that), enabled(self) & enabled(that)))\n\n/** @internal */\nexport const either = dual<\n  (\n    that: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => (\n    self: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => RuntimeFlagsPatch.RuntimeFlagsPatch,\n  (\n    self: RuntimeFlagsPatch.RuntimeFlagsPatch,\n    that: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => RuntimeFlagsPatch.RuntimeFlagsPatch\n>(2, (self, that) => make(active(self) | active(that), enabled(self) | enabled(that)))\n\n/** @internal */\nexport const andThen = dual<\n  (\n    that: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => (\n    self: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => RuntimeFlagsPatch.RuntimeFlagsPatch,\n  (\n    self: RuntimeFlagsPatch.RuntimeFlagsPatch,\n    that: RuntimeFlagsPatch.RuntimeFlagsPatch\n  ) => RuntimeFlagsPatch.RuntimeFlagsPatch\n>(2, (self, that) => (self | that) as RuntimeFlagsPatch.RuntimeFlagsPatch)\n\n/** @internal */\nexport const inverse = (patch: RuntimeFlagsPatch.RuntimeFlagsPatch): RuntimeFlagsPatch.RuntimeFlagsPatch =>\n  make(enabled(patch), invert(active(patch)))\n\n/** @internal */\nexport const invert = (n: number): number => (~n >>> 0) & BIT_MASK\n"],"names":["dual","BIT_MASK","BIT_SHIFT","active","patch","enabled","make","empty","enable","flag","disable","isEmpty","isActive","self","isEnabled","isDisabled","exclude","both","that","either","andThen","inverse","invert","n"],"mappings":";;;;;;;;;;;;;;;;;;AAAA,SAASA,IAAI,QAAQ,gBAAgB;;AAIrC,cAAA,GACA,MAAMC,QAAQ,GAAG,IAAI;AAErB,cAAA,GACA,MAAMC,SAAS,GAAG,IAAI;AAGf,MAAMC,MAAM,IAAIC,KAA0C,GAAaA,KAAK,GAAGH,QAAQ;AAGvF,MAAMI,OAAO,IAAID,KAA0C,GAAcA,KAAK,IAAIF,SAAS,GAAID,QAAQ;AAGvG,MAAMK,IAAI,GAAGA,CAACH,MAAc,EAAEE,OAAe,GACjD,CAACF,MAAM,GAAGF,QAAQ,IAAA,CAAK,CAAEI,OAAO,GAAGF,MAAM,GAAIF,QAAQ,KAAKC,SAAS,CAAyC;AAGxG,MAAMK,KAAK,GAAA,WAAA,GAAGD,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AAGxB,MAAME,MAAM,IAAIC,IAA8B,GAA0CH,IAAI,CAACG,IAAI,EAAEA,IAAI,CAAC;AAGxG,MAAMC,OAAO,IAAID,IAA8B,GAA0CH,IAAI,CAACG,IAAI,EAAE,CAAC,CAAC;AAGtG,MAAME,OAAO,IAAIP,KAA0C,GAAcA,KAAK,KAAK,CAAC;AAGpF,MAAMQ,QAAQ,GAAA,WAAA,GAAGZ,+JAAAA,AAAI,EAG1B,CAAC,EAAE,CAACa,IAAI,EAAEJ,IAAI,GAAK,CAACN,MAAM,CAACU,IAAI,CAAC,GAAGJ,IAAI,MAAM,CAAC,CAAC;AAG1C,MAAMK,SAAS,GAAA,WAAA,2JAAGd,OAAAA,AAAI,EAG3B,CAAC,EAAE,CAACa,IAAI,EAAEJ,IAAI,GAAK,CAACJ,OAAO,CAACQ,IAAI,CAAC,GAAGJ,IAAI,MAAM,CAAC,CAAC;AAG3C,MAAMM,UAAU,GAAA,WAAA,2JAAGf,OAAAA,AAAI,EAG5B,CAAC,EAAE,CAACa,IAAI,EAAEJ,IAAI,GAAM,CAACN,MAAM,CAACU,IAAI,CAAC,GAAGJ,IAAI,MAAM,CAAC,IAAM,CAACJ,OAAO,CAACQ,IAAI,CAAC,GAAGJ,IAAI,MAAM,CAAE,CAAC;AAG9E,MAAMO,OAAO,GAAA,WAAA,2JAAGhB,OAAAA,AAAI,EAKzB,CAAC,EAAE,CAACa,IAAI,EAAEJ,IAAI,GAAKH,IAAI,CAACH,MAAM,CAACU,IAAI,CAAC,GAAG,CAACJ,IAAI,EAAEJ,OAAO,CAACQ,IAAI,CAAC,CAAC,CAAC;AAGxD,MAAMI,IAAI,GAAA,WAAA,2JAAGjB,OAAAA,AAAI,EAUtB,CAAC,EAAE,CAACa,IAAI,EAAEK,IAAI,GAAKZ,IAAI,CAACH,MAAM,CAACU,IAAI,CAAC,GAAGV,MAAM,CAACe,IAAI,CAAC,EAAEb,OAAO,CAACQ,IAAI,CAAC,GAAGR,OAAO,CAACa,IAAI,CAAC,CAAC,CAAC;AAG/E,MAAMC,MAAM,GAAA,WAAA,IAAGnB,8JAAAA,AAAI,EAUxB,CAAC,EAAE,CAACa,IAAI,EAAEK,IAAI,GAAKZ,IAAI,CAACH,MAAM,CAACU,IAAI,CAAC,GAAGV,MAAM,CAACe,IAAI,CAAC,EAAEb,OAAO,CAACQ,IAAI,CAAC,GAAGR,OAAO,CAACa,IAAI,CAAC,CAAC,CAAC;AAG/E,MAAME,OAAO,GAAA,WAAA,2JAAGpB,OAAAA,AAAI,EAUzB,CAAC,EAAE,CAACa,IAAI,EAAEK,IAAI,GAAML,IAAI,GAAGK,IAA4C,CAAC;AAGnE,MAAMG,OAAO,IAAIjB,KAA0C,GAChEE,IAAI,CAACD,OAAO,CAACD,KAAK,CAAC,EAAEkB,MAAM,CAACnB,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC;AAGtC,MAAMkB,MAAM,IAAIC,CAAS,GAAc,CAACA,CAAC,KAAK,CAAC,GAAItB,QAAQ","ignoreList":[0]}},
    {"offset": {"line": 2849, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2855, "column": 0}, "map": {"version":3,"file":"data.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/data.ts"],"sourcesContent":["import * as Equal from \"../Equal.js\"\nimport * as Hash from \"../Hash.js\"\nimport type * as Types from \"../Types.js\"\nimport { StructuralPrototype } from \"./effectable.js\"\n\n/** @internal */\nexport const ArrayProto: Equal.Equal = Object.assign(Object.create(Array.prototype), {\n  [Hash.symbol](this: Array<any>) {\n    return Hash.cached(this, Hash.array(this))\n  },\n  [Equal.symbol](this: Array<any>, that: Equal.Equal) {\n    if (Array.isArray(that) && this.length === that.length) {\n      return this.every((v, i) => Equal.equals(v, (that as Array<any>)[i]))\n    } else {\n      return false\n    }\n  }\n})\n\n/** @internal */\nexport const Structural: new<A>(\n  args: Types.Equals<Omit<A, keyof Equal.Equal>, {}> extends true ? void\n    : { readonly [P in keyof A as P extends keyof Equal.Equal ? never : P]: A[P] }\n) => {} = (function() {\n  function Structural(this: any, args: any) {\n    if (args) {\n      Object.assign(this, args)\n    }\n  }\n  Structural.prototype = StructuralPrototype\n  return Structural as any\n})()\n\n/** @internal */\nexport const struct = <As extends Readonly<Record<string, any>>>(as: As): As =>\n  Object.assign(Object.create(StructuralPrototype), as)\n"],"names":["Equal","Hash","StructuralPrototype","ArrayProto","Object","assign","create","Array","prototype","symbol","cached","array","that","isArray","length","every","v","i","equals","Structural","args","struct","as"],"mappings":";;;;;AACA,OAAO,KAAKC,IAAI,MAAM,YAAY;AADlC,OAAO,KAAKD,KAAK,MAAM,aAAa;AAGpC,SAASE,mBAAmB,QAAQ,iBAAiB;;;;AAG9C,MAAMC,UAAU,GAAA,WAAA,GAAgBC,MAAM,CAACC,MAAM,CAAA,WAAA,GAACD,MAAM,CAACE,MAAM,CAACC,KAAK,CAACC,SAAS,CAAC,EAAE;IACnF,CAACP,IAAI,4IAACQ,MAAM,CAAA,GAAC;QACX,OAAOR,IAAI,4IAACS,MAAM,CAAC,IAAI,EAAET,IAAI,4IAACU,KAAK,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC;IACD,CAACX,KAAK,4IAACS,MAAM,CAAA,EAAoBG,IAAiB;QAChD,IAAIL,KAAK,CAACM,OAAO,CAACD,IAAI,CAAC,IAAI,IAAI,CAACE,MAAM,KAAKF,IAAI,CAACE,MAAM,EAAE;YACtD,OAAO,IAAI,CAACC,KAAK,CAAC,CAACC,CAAC,EAAEC,CAAC,GAAKjB,KAAK,4IAACkB,MAAM,CAACF,CAAC,EAAGJ,IAAmB,CAACK,CAAC,CAAC,CAAC,CAAC;QACvE,CAAC,MAAM;YACL,OAAO,KAAK;QACd;IACF;CACD,CAAC;AAGK,MAAME,UAAU,GAAA,WAAA,GAGZ;IACT,SAASA,UAAUA,CAAYC,IAAS;QACtC,IAAIA,IAAI,EAAE;YACRhB,MAAM,CAACC,MAAM,CAAC,IAAI,EAAEe,IAAI,CAAC;QAC3B;IACF;IACAD,UAAU,CAACX,SAAS,qKAAGN,sBAAmB;IAC1C,OAAOiB,UAAiB;AAC1B,CAAC,CAAC,CAAE;AAGG,MAAME,MAAM,IAA8CC,EAAM,GACrElB,MAAM,CAACC,MAAM,CAACD,MAAM,CAACE,MAAM,mKAACJ,sBAAmB,CAAC,EAAEoB,EAAE,CAAC","ignoreList":[0]}},
    {"offset": {"line": 2888, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 2894, "column": 0}, "map": {"version":3,"file":"context.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/context.ts"],"sourcesContent":["import type * as C from \"../Context.js\"\nimport * as Equal from \"../Equal.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { dual } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as Hash from \"../Hash.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport type * as O from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as STM from \"../STM.js\"\nimport { EffectPrototype, effectVariance } from \"./effectable.js\"\nimport * as option from \"./option.js\"\n\n/** @internal */\nexport const TagTypeId: C.TagTypeId = Symbol.for(\"effect/Context/Tag\") as C.TagTypeId\n\n/** @internal */\nexport const ReferenceTypeId: C.ReferenceTypeId = Symbol.for(\"effect/Context/Reference\") as C.ReferenceTypeId\n\n/** @internal */\nconst STMSymbolKey = \"effect/STM\"\n\n/** @internal */\nexport const STMTypeId: STM.STMTypeId = Symbol.for(\n  STMSymbolKey\n) as STM.STMTypeId\n\n/** @internal */\nexport const TagProto: any = {\n  ...EffectPrototype,\n  _op: \"Tag\",\n  [STMTypeId]: effectVariance,\n  [TagTypeId]: {\n    _Service: (_: unknown) => _,\n    _Identifier: (_: unknown) => _\n  },\n  toString() {\n    return format(this.toJSON())\n  },\n  toJSON<I, A>(this: C.Tag<I, A>) {\n    return {\n      _id: \"Tag\",\n      key: this.key,\n      stack: this.stack\n    }\n  },\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  },\n  of<Service>(self: Service): Service {\n    return self\n  },\n  context<Identifier, Service>(\n    this: C.Tag<Identifier, Service>,\n    self: Service\n  ): C.Context<Identifier> {\n    return make(this, self)\n  }\n}\n\nexport const ReferenceProto: any = {\n  ...TagProto,\n  [ReferenceTypeId]: ReferenceTypeId\n}\n\n/** @internal */\nexport const makeGenericTag = <Identifier, Service = Identifier>(key: string): C.Tag<Identifier, Service> => {\n  const limit = Error.stackTraceLimit\n  Error.stackTraceLimit = 2\n  const creationError = new Error()\n  Error.stackTraceLimit = limit\n  const tag = Object.create(TagProto)\n  Object.defineProperty(tag, \"stack\", {\n    get() {\n      return creationError.stack\n    }\n  })\n  tag.key = key\n  return tag\n}\n\n/** @internal */\nexport const Tag = <const Id extends string>(id: Id) => <Self, Shape>(): C.TagClass<Self, Id, Shape> => {\n  const limit = Error.stackTraceLimit\n  Error.stackTraceLimit = 2\n  const creationError = new Error()\n  Error.stackTraceLimit = limit\n\n  function TagClass() {}\n  Object.setPrototypeOf(TagClass, TagProto)\n  TagClass.key = id\n  Object.defineProperty(TagClass, \"stack\", {\n    get() {\n      return creationError.stack\n    }\n  })\n  return TagClass as any\n}\n\n/** @internal */\nexport const Reference = <Self>() =>\n<const Id extends string, Service>(id: Id, options: {\n  readonly defaultValue: () => Service\n}): C.ReferenceClass<Self, Id, Service> => {\n  const limit = Error.stackTraceLimit\n  Error.stackTraceLimit = 2\n  const creationError = new Error()\n  Error.stackTraceLimit = limit\n\n  function ReferenceClass() {}\n  Object.setPrototypeOf(ReferenceClass, ReferenceProto)\n  ReferenceClass.key = id\n  ReferenceClass.defaultValue = options.defaultValue\n  Object.defineProperty(ReferenceClass, \"stack\", {\n    get() {\n      return creationError.stack\n    }\n  })\n  return ReferenceClass as any\n}\n\n/** @internal */\nexport const TypeId: C.TypeId = Symbol.for(\"effect/Context\") as C.TypeId\n\n/** @internal */\nexport const ContextProto: Omit<C.Context<unknown>, \"unsafeMap\"> = {\n  [TypeId]: {\n    _Services: (_: unknown) => _\n  },\n  [Equal.symbol]<A>(this: C.Context<A>, that: unknown): boolean {\n    if (isContext(that)) {\n      if (this.unsafeMap.size === that.unsafeMap.size) {\n        for (const k of this.unsafeMap.keys()) {\n          if (!that.unsafeMap.has(k) || !Equal.equals(this.unsafeMap.get(k), that.unsafeMap.get(k))) {\n            return false\n          }\n        }\n        return true\n      }\n    }\n    return false\n  },\n  [Hash.symbol]<A>(this: C.Context<A>): number {\n    return Hash.cached(this, Hash.number(this.unsafeMap.size))\n  },\n  pipe<A>(this: C.Context<A>) {\n    return pipeArguments(this, arguments)\n  },\n  toString() {\n    return format(this.toJSON())\n  },\n  toJSON<A>(this: C.Context<A>) {\n    return {\n      _id: \"Context\",\n      services: Array.from(this.unsafeMap).map(toJSON)\n    }\n  },\n  [NodeInspectSymbol]() {\n    return (this as any).toJSON()\n  }\n}\n\n/** @internal */\nexport const makeContext = <Services>(unsafeMap: Map<string, any>): C.Context<Services> => {\n  const context = Object.create(ContextProto)\n  context.unsafeMap = unsafeMap\n  return context\n}\n\nconst serviceNotFoundError = (tag: C.Tag<any, any>) => {\n  const error = new Error(`Service not found${tag.key ? `: ${String(tag.key)}` : \"\"}`)\n  if (tag.stack) {\n    const lines = tag.stack.split(\"\\n\")\n    if (lines.length > 2) {\n      const afterAt = lines[2].match(/at (.*)/)\n      if (afterAt) {\n        error.message = error.message + ` (defined at ${afterAt[1]})`\n      }\n    }\n  }\n  if (error.stack) {\n    const lines = error.stack.split(\"\\n\")\n    lines.splice(1, 3)\n    error.stack = lines.join(\"\\n\")\n  }\n  return error\n}\n\n/** @internal */\nexport const isContext = (u: unknown): u is C.Context<never> => hasProperty(u, TypeId)\n\n/** @internal */\nexport const isTag = (u: unknown): u is C.Tag<any, any> => hasProperty(u, TagTypeId)\n\n/** @internal */\nexport const isReference = (u: unknown): u is C.Reference<any, any> => hasProperty(u, ReferenceTypeId)\n\nconst _empty = makeContext(new Map())\n\n/** @internal */\nexport const empty = (): C.Context<never> => _empty\n\n/** @internal */\nexport const make = <T extends C.Tag<any, any>>(\n  tag: T,\n  service: C.Tag.Service<T>\n): C.Context<C.Tag.Identifier<T>> => makeContext(new Map([[tag.key, service]]))\n\n/** @internal */\nexport const add = dual<\n  <T extends C.Tag<any, any>>(\n    tag: T,\n    service: C.Tag.Service<T>\n  ) => <Services>(\n    self: C.Context<Services>\n  ) => C.Context<Services | C.Tag.Identifier<T>>,\n  <Services, T extends C.Tag<any, any>>(\n    self: C.Context<Services>,\n    tag: T,\n    service: C.Tag.Service<T>\n  ) => C.Context<Services | C.Tag.Identifier<T>>\n>(3, (self, tag, service) => {\n  const map = new Map(self.unsafeMap)\n  map.set(tag.key, service)\n  return makeContext(map)\n})\n\nconst defaultValueCache = globalValue(\"effect/Context/defaultValueCache\", () => new Map<string, any>())\nconst getDefaultValue = (tag: C.Reference<any, any>) => {\n  if (defaultValueCache.has(tag.key)) {\n    return defaultValueCache.get(tag.key)\n  }\n  const value = tag.defaultValue()\n  defaultValueCache.set(tag.key, value)\n  return value\n}\n\n/** @internal */\nexport const unsafeGetReference = <Services, I, S>(self: C.Context<Services>, tag: C.Reference<I, S>): S => {\n  return self.unsafeMap.has(tag.key) ? self.unsafeMap.get(tag.key) : getDefaultValue(tag)\n}\n\n/** @internal */\nexport const unsafeGet = dual<\n  <S, I>(tag: C.Tag<I, S>) => <Services>(self: C.Context<Services>) => S,\n  <Services, S, I>(self: C.Context<Services>, tag: C.Tag<I, S>) => S\n>(2, (self, tag) => {\n  if (!self.unsafeMap.has(tag.key)) {\n    if (ReferenceTypeId in tag) return getDefaultValue(tag as any)\n    throw serviceNotFoundError(tag)\n  }\n  return self.unsafeMap.get(tag.key)! as any\n})\n\n/** @internal */\nexport const get: {\n  <I, S>(tag: C.Reference<I, S>): <Services>(self: C.Context<Services>) => S\n  <Services, T extends C.ValidTagsById<Services>>(tag: T): (self: C.Context<Services>) => C.Tag.Service<T>\n  <Services, I, S>(self: C.Context<Services>, tag: C.Reference<I, S>): S\n  <Services, T extends C.ValidTagsById<Services>>(self: C.Context<Services>, tag: T): C.Tag.Service<T>\n} = unsafeGet as any\n\n/** @internal */\nexport const getOrElse = dual<\n  <S, I, B>(tag: C.Tag<I, S>, orElse: LazyArg<B>) => <Services>(self: C.Context<Services>) => S | B,\n  <Services, S, I, B>(self: C.Context<Services>, tag: C.Tag<I, S>, orElse: LazyArg<B>) => S | B\n>(3, (self, tag, orElse) => {\n  if (!self.unsafeMap.has(tag.key)) {\n    return isReference(tag) ? getDefaultValue(tag) : orElse()\n  }\n  return self.unsafeMap.get(tag.key)! as any\n})\n\n/** @internal */\nexport const getOption = dual<\n  <S, I>(tag: C.Tag<I, S>) => <Services>(self: C.Context<Services>) => O.Option<S>,\n  <Services, S, I>(self: C.Context<Services>, tag: C.Tag<I, S>) => O.Option<S>\n>(2, (self, tag) => {\n  if (!self.unsafeMap.has(tag.key)) {\n    return isReference(tag) ? option.some(getDefaultValue(tag)) : option.none\n  }\n  return option.some(self.unsafeMap.get(tag.key)! as any)\n})\n\n/** @internal */\nexport const merge = dual<\n  <R1>(that: C.Context<R1>) => <Services>(self: C.Context<Services>) => C.Context<Services | R1>,\n  <Services, R1>(self: C.Context<Services>, that: C.Context<R1>) => C.Context<Services | R1>\n>(2, (self, that) => {\n  const map = new Map(self.unsafeMap)\n  for (const [tag, s] of that.unsafeMap) {\n    map.set(tag, s)\n  }\n  return makeContext(map)\n})\n\n/** @internal */\nexport const pick =\n  <Services, S extends Array<C.ValidTagsById<Services>>>(...tags: S) =>\n  (self: C.Context<Services>): C.Context<\n    { [k in keyof S]: C.Tag.Identifier<S[k]> }[number]\n  > => {\n    const tagSet = new Set<string>(tags.map((_) => _.key))\n    const newEnv = new Map()\n    for (const [tag, s] of self.unsafeMap.entries()) {\n      if (tagSet.has(tag)) {\n        newEnv.set(tag, s)\n      }\n    }\n    return makeContext<{ [k in keyof S]: C.Tag.Identifier<S[k]> }[number]>(newEnv)\n  }\n\n/** @internal */\nexport const omit =\n  <Services, S extends Array<C.ValidTagsById<Services>>>(...tags: S) =>\n  (self: C.Context<Services>): C.Context<\n    Exclude<Services, { [k in keyof S]: C.Tag.Identifier<S[k]> }[keyof S]>\n  > => {\n    const newEnv = new Map(self.unsafeMap)\n    for (const tag of tags) {\n      newEnv.delete(tag.key)\n    }\n    return makeContext(newEnv)\n  }\n"],"names":["Equal","dual","globalValue","Hash","format","NodeInspectSymbol","toJSON","pipeArguments","hasProperty","EffectPrototype","effectVariance","option","TagTypeId","Symbol","for","ReferenceTypeId","STMSymbolKey","STMTypeId","TagProto","_op","_Service","_","_Identifier","toString","_id","key","stack","of","self","context","make","ReferenceProto","makeGenericTag","limit","Error","stackTraceLimit","creationError","tag","Object","create","defineProperty","get","Tag","id","TagClass","setPrototypeOf","Reference","options","ReferenceClass","defaultValue","TypeId","ContextProto","_Services","symbol","that","isContext","unsafeMap","size","k","keys","has","equals","cached","number","pipe","arguments","services","Array","from","map","makeContext","serviceNotFoundError","error","String","lines","split","length","afterAt","match","message","splice","join","u","isTag","isReference","_empty","Map","empty","service","add","set","defaultValueCache","getDefaultValue","value","unsafeGetReference","unsafeGet","getOrElse","orElse","getOption","some","none","merge","s","pick","tags","tagSet","Set","newEnv","entries","omit","delete"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3152, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3158, "column": 0}, "map": {"version":3,"file":"contextPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ/contextPatch.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport type { Context } from \"../../Context.js\"\nimport type { Differ } from \"../../Differ.js\"\nimport * as Equal from \"../../Equal.js\"\nimport * as Dual from \"../../Function.js\"\nimport { makeContext } from \"../context.js\"\nimport { Structural } from \"../data.js\"\n\n/** @internal */\nexport const ContextPatchTypeId: Differ.Context.TypeId = Symbol.for(\n  \"effect/DifferContextPatch\"\n) as Differ.Context.TypeId\n\nfunction variance<A, B>(a: A): B {\n  return a as unknown as B\n}\n\n/** @internal */\nconst PatchProto = {\n  ...Structural.prototype,\n  [ContextPatchTypeId]: {\n    _Value: variance,\n    _Patch: variance\n  }\n}\n\ninterface Empty<Input, Output> extends Differ.Context.Patch<Input, Output> {\n  readonly _tag: \"Empty\"\n}\n\nconst EmptyProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Empty\"\n})\n\nconst _empty = Object.create(EmptyProto)\n\n/**\n * @internal\n */\nexport const empty = <Input, Output>(): Differ.Context.Patch<Input, Output> => _empty\n\n/** @internal */\nexport interface AndThen<in out Input, in out Output, in out Output2> extends Differ.Context.Patch<Input, Output2> {\n  readonly _tag: \"AndThen\"\n  readonly first: Differ.Context.Patch<Input, Output>\n  readonly second: Differ.Context.Patch<Output, Output2>\n}\n\nconst AndThenProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AndThen\"\n})\n\nconst makeAndThen = <Input, Output, Output2>(\n  first: Differ.Context.Patch<Input, Output>,\n  second: Differ.Context.Patch<Output, Output2>\n): Differ.Context.Patch<Input, Output2> => {\n  const o = Object.create(AndThenProto)\n  o.first = first\n  o.second = second\n  return o\n}\n\n/** @internal */\nexport interface AddService<in out Env, in out T, in out I> extends Differ.Context.Patch<Env, Env | I> {\n  readonly _tag: \"AddService\"\n  readonly key: string\n  readonly service: T\n}\n\nconst AddServiceProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AddService\"\n})\n\nconst makeAddService = <Env, I, T>(\n  key: string,\n  service: T\n): Differ.Context.Patch<Env, Env | I> => {\n  const o = Object.create(AddServiceProto)\n  o.key = key\n  o.service = service\n  return o\n}\n\n/** @internal */\nexport interface RemoveService<in out Env, in out I> extends Differ.Context.Patch<Env, Exclude<Env, I>> {\n  readonly _tag: \"RemoveService\"\n  readonly key: string\n}\n\nconst RemoveServiceProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"RemoveService\"\n})\n\nconst makeRemoveService = <Env, I>(\n  key: string\n): Differ.Context.Patch<Env, Exclude<Env, I>> => {\n  const o = Object.create(RemoveServiceProto)\n  o.key = key\n  return o\n}\n\n/** @internal */\nexport interface UpdateService<in out Env, in out T, in out I> extends Differ.Context.Patch<Env | I, Env | I> {\n  readonly _tag: \"UpdateService\"\n  readonly key: string\n  update(service: T): T\n}\n\nconst UpdateServiceProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"UpdateService\"\n})\n\nconst makeUpdateService = <Env, I, T>(\n  key: string,\n  update: (service: T) => T\n): Differ.Context.Patch<Env | I, Env | I> => {\n  const o = Object.create(UpdateServiceProto)\n  o.key = key\n  o.update = update\n  return o\n}\n\ntype Instruction =\n  | Empty<any, any>\n  | AndThen<any, any, any>\n  | AddService<any, any, any>\n  | RemoveService<any, any>\n  | UpdateService<any, any, any>\n\n/** @internal */\nexport const diff = <Input, Output>(\n  oldValue: Context<Input>,\n  newValue: Context<Output>\n): Differ.Context.Patch<Input, Output> => {\n  const missingServices = new Map(oldValue.unsafeMap)\n  let patch = empty<any, any>()\n  for (const [tag, newService] of newValue.unsafeMap.entries()) {\n    if (missingServices.has(tag)) {\n      const old = missingServices.get(tag)!\n      missingServices.delete(tag)\n      if (!Equal.equals(old, newService)) {\n        patch = combine(makeUpdateService(tag, () => newService))(patch)\n      }\n    } else {\n      missingServices.delete(tag)\n      patch = combine(makeAddService(tag, newService))(patch)\n    }\n  }\n  for (const [tag] of missingServices.entries()) {\n    patch = combine(makeRemoveService(tag))(patch)\n  }\n  return patch\n}\n\n/** @internal */\nexport const combine = Dual.dual<\n  <Output, Output2>(\n    that: Differ.Context.Patch<Output, Output2>\n  ) => <Input>(\n    self: Differ.Context.Patch<Input, Output>\n  ) => Differ.Context.Patch<Input, Output2>,\n  <Input, Output, Output2>(\n    self: Differ.Context.Patch<Input, Output>,\n    that: Differ.Context.Patch<Output, Output2>\n  ) => Differ.Context.Patch<Input, Output2>\n>(2, (self, that) => makeAndThen(self, that))\n\n/** @internal */\nexport const patch = Dual.dual<\n  <Input>(\n    context: Context<Input>\n  ) => <Output>(\n    self: Differ.Context.Patch<Input, Output>\n  ) => Context<Output>,\n  <Input, Output>(\n    self: Differ.Context.Patch<Input, Output>,\n    context: Context<Input>\n  ) => Context<Output>\n>(2, <Input, Output>(self: Differ.Context.Patch<Input, Output>, context: Context<Input>) => {\n  if ((self as Instruction)._tag === \"Empty\") {\n    return context as any\n  }\n  let wasServiceUpdated = false\n  let patches: Chunk.Chunk<Differ.Context.Patch<unknown, unknown>> = Chunk.of(\n    self as Differ.Context.Patch<unknown, unknown>\n  )\n  const updatedContext: Map<string, unknown> = new Map(context.unsafeMap)\n  while (Chunk.isNonEmpty(patches)) {\n    const head: Instruction = Chunk.headNonEmpty(patches) as Instruction\n    const tail = Chunk.tailNonEmpty(patches)\n    switch (head._tag) {\n      case \"Empty\": {\n        patches = tail\n        break\n      }\n      case \"AddService\": {\n        updatedContext.set(head.key, head.service)\n        patches = tail\n        break\n      }\n      case \"AndThen\": {\n        patches = Chunk.prepend(Chunk.prepend(tail, head.second), head.first)\n        break\n      }\n      case \"RemoveService\": {\n        updatedContext.delete(head.key)\n        patches = tail\n        break\n      }\n      case \"UpdateService\": {\n        updatedContext.set(head.key, head.update(updatedContext.get(head.key)))\n        wasServiceUpdated = true\n        patches = tail\n        break\n      }\n    }\n  }\n  if (!wasServiceUpdated) {\n    return makeContext(updatedContext) as Context<Output>\n  }\n  const map = new Map()\n  for (const [tag] of context.unsafeMap) {\n    if (updatedContext.has(tag)) {\n      map.set(tag, updatedContext.get(tag))\n      updatedContext.delete(tag)\n    }\n  }\n  for (const [tag, s] of updatedContext) {\n    map.set(tag, s)\n  }\n  return makeContext(map) as Context<Output>\n})\n"],"names":["Chunk","Equal","Dual","makeContext","Structural","ContextPatchTypeId","Symbol","for","variance","a","PatchProto","prototype","_Value","_Patch","EmptyProto","Object","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AddServiceProto","makeAddService","key","service","RemoveServiceProto","makeRemoveService","UpdateServiceProto","makeUpdateService","update","diff","oldValue","newValue","missingServices","Map","unsafeMap","patch","tag","newService","entries","has","old","get","delete","equals","combine","dual","self","that","context","wasServiceUpdated","patches","of","updatedContext","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","set","prepend","map","s"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3304, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3310, "column": 0}, "map": {"version":3,"file":"chunkPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ/chunkPatch.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport type * as Differ from \"../../Differ.js\"\nimport * as Equal from \"../../Equal.js\"\nimport * as Dual from \"../../Function.js\"\nimport { pipe } from \"../../Function.js\"\nimport * as Data from \"../data.js\"\n\n/** @internal */\nexport const ChunkPatchTypeId: Differ.Differ.Chunk.TypeId = Symbol.for(\n  \"effect/DifferChunkPatch\"\n) as Differ.Differ.Chunk.TypeId\n\nfunction variance<A, B>(a: A): B {\n  return a as unknown as B\n}\n\nconst PatchProto = {\n  ...Data.Structural.prototype,\n  [ChunkPatchTypeId]: {\n    _Value: variance,\n    _Patch: variance\n  }\n}\n\ninterface Empty<Value, Patch> extends Differ.Differ.Chunk.Patch<Value, Patch> {\n  readonly _tag: \"Empty\"\n}\n\nconst EmptyProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Empty\"\n})\n\nconst _empty = Object.create(EmptyProto)\n\n/**\n * @internal\n */\nexport const empty = <Value, Patch>(): Differ.Differ.Chunk.Patch<Value, Patch> => _empty\n\ninterface AndThen<Value, Patch> extends Differ.Differ.Chunk.Patch<Value, Patch> {\n  readonly _tag: \"AndThen\"\n  readonly first: Differ.Differ.Chunk.Patch<Value, Patch>\n  readonly second: Differ.Differ.Chunk.Patch<Value, Patch>\n}\n\nconst AndThenProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AndThen\"\n})\n\nconst makeAndThen = <Value, Patch>(\n  first: Differ.Differ.Chunk.Patch<Value, Patch>,\n  second: Differ.Differ.Chunk.Patch<Value, Patch>\n): Differ.Differ.Chunk.Patch<Value, Patch> => {\n  const o = Object.create(AndThenProto)\n  o.first = first\n  o.second = second\n  return o\n}\n\ninterface Append<Value, Patch> extends Differ.Differ.Chunk.Patch<Value, Patch> {\n  readonly _tag: \"Append\"\n  readonly values: Chunk.Chunk<Value>\n}\n\nconst AppendProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Append\"\n})\n\nconst makeAppend = <Value, Patch>(values: Chunk.Chunk<Value>): Differ.Differ.Chunk.Patch<Value, Patch> => {\n  const o = Object.create(AppendProto)\n  o.values = values\n  return o\n}\n\ninterface Slice<Value, Patch> extends Differ.Differ.Chunk.Patch<Value, Patch> {\n  readonly _tag: \"Slice\"\n  readonly from: number\n  readonly until: number\n}\n\nconst SliceProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Slice\"\n})\n\nconst makeSlice = <Value, Patch>(from: number, until: number): Differ.Differ.Chunk.Patch<Value, Patch> => {\n  const o = Object.create(SliceProto)\n  o.from = from\n  o.until = until\n  return o\n}\n\ninterface Update<Value, Patch> extends Differ.Differ.Chunk.Patch<Value, Patch> {\n  readonly _tag: \"Update\"\n  readonly index: number\n  readonly patch: Patch\n}\n\nconst UpdateProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Update\"\n})\n\nconst makeUpdate = <Value, Patch>(index: number, patch: Patch): Differ.Differ.Chunk.Patch<Value, Patch> => {\n  const o = Object.create(UpdateProto)\n  o.index = index\n  o.patch = patch\n  return o\n}\n\ntype Instruction =\n  | Empty<any, any>\n  | AndThen<any, any>\n  | Append<any, any>\n  | Slice<any, any>\n  | Update<any, any>\n\n/** @internal */\nexport const diff = <Value, Patch>(\n  options: {\n    readonly oldValue: Chunk.Chunk<Value>\n    readonly newValue: Chunk.Chunk<Value>\n    readonly differ: Differ.Differ<Value, Patch>\n  }\n): Differ.Differ.Chunk.Patch<Value, Patch> => {\n  let i = 0\n  let patch = empty<Value, Patch>()\n  while (i < options.oldValue.length && i < options.newValue.length) {\n    const oldElement = Chunk.unsafeGet(i)(options.oldValue)\n    const newElement = Chunk.unsafeGet(i)(options.newValue)\n    const valuePatch = options.differ.diff(oldElement, newElement)\n    if (!Equal.equals(valuePatch, options.differ.empty)) {\n      patch = pipe(patch, combine(makeUpdate(i, valuePatch)))\n    }\n    i = i + 1\n  }\n  if (i < options.oldValue.length) {\n    patch = pipe(patch, combine(makeSlice(0, i)))\n  }\n  if (i < options.newValue.length) {\n    patch = pipe(patch, combine(makeAppend(Chunk.drop(i)(options.newValue))))\n  }\n  return patch\n}\n\n/** @internal */\nexport const combine = Dual.dual<\n  <Value, Patch>(\n    that: Differ.Differ.Chunk.Patch<Value, Patch>\n  ) => (\n    self: Differ.Differ.Chunk.Patch<Value, Patch>\n  ) => Differ.Differ.Chunk.Patch<Value, Patch>,\n  <Value, Patch>(\n    self: Differ.Differ.Chunk.Patch<Value, Patch>,\n    that: Differ.Differ.Chunk.Patch<Value, Patch>\n  ) => Differ.Differ.Chunk.Patch<Value, Patch>\n>(2, (self, that) => makeAndThen(self, that))\n\n/** @internal */\nexport const patch = Dual.dual<\n  <Value, Patch>(\n    oldValue: Chunk.Chunk<Value>,\n    differ: Differ.Differ<Value, Patch>\n  ) => (self: Differ.Differ.Chunk.Patch<Value, Patch>) => Chunk.Chunk<Value>,\n  <Value, Patch>(\n    self: Differ.Differ.Chunk.Patch<Value, Patch>,\n    oldValue: Chunk.Chunk<Value>,\n    differ: Differ.Differ<Value, Patch>\n  ) => Chunk.Chunk<Value>\n>(3, <Value, Patch>(\n  self: Differ.Differ.Chunk.Patch<Value, Patch>,\n  oldValue: Chunk.Chunk<Value>,\n  differ: Differ.Differ<Value, Patch>\n) => {\n  if ((self as Instruction)._tag === \"Empty\") {\n    return oldValue\n  }\n  let chunk = oldValue\n  let patches: Chunk.Chunk<Differ.Differ.Chunk.Patch<Value, Patch>> = Chunk.of(self)\n  while (Chunk.isNonEmpty(patches)) {\n    const head: Instruction = Chunk.headNonEmpty(patches) as Instruction\n    const tail = Chunk.tailNonEmpty(patches)\n    switch (head._tag) {\n      case \"Empty\": {\n        patches = tail\n        break\n      }\n      case \"AndThen\": {\n        patches = Chunk.prepend(head.first)(Chunk.prepend(head.second)(tail))\n        break\n      }\n      case \"Append\": {\n        chunk = Chunk.appendAll(head.values)(chunk)\n        patches = tail\n        break\n      }\n      case \"Slice\": {\n        const array = Chunk.toReadonlyArray(chunk)\n        chunk = Chunk.unsafeFromArray(array.slice(head.from, head.until))\n        patches = tail\n        break\n      }\n      case \"Update\": {\n        const array = Chunk.toReadonlyArray(chunk) as Array<Value>\n        array[head.index] = differ.patch(head.patch, array[head.index]!)\n        chunk = Chunk.unsafeFromArray(array)\n        patches = tail\n        break\n      }\n    }\n  }\n  return chunk\n})\n"],"names":["Chunk","Equal","Dual","pipe","Data","ChunkPatchTypeId","Symbol","for","variance","a","PatchProto","Structural","prototype","_Value","_Patch","EmptyProto","Object","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AppendProto","makeAppend","values","SliceProto","makeSlice","from","until","UpdateProto","makeUpdate","index","patch","diff","options","i","oldValue","length","newValue","oldElement","unsafeGet","newElement","valuePatch","differ","equals","combine","drop","dual","self","that","chunk","patches","of","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend","appendAll","array","toReadonlyArray","unsafeFromArray","slice"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3443, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3449, "column": 0}, "map": {"version":3,"file":"hashMapPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ/hashMapPatch.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport type * as Differ from \"../../Differ.js\"\nimport * as Equal from \"../../Equal.js\"\nimport * as Dual from \"../../Function.js\"\nimport * as HashMap from \"../../HashMap.js\"\nimport { Structural } from \"../data.js\"\n\n/** @internal */\nexport const HashMapPatchTypeId: Differ.Differ.HashMap.TypeId = Symbol.for(\n  \"effect/DifferHashMapPatch\"\n) as Differ.Differ.HashMap.TypeId\n\nfunction variance<A, B>(a: A): B {\n  return a as unknown as B\n}\n\n/** @internal */\nconst PatchProto = {\n  ...Structural.prototype,\n  [HashMapPatchTypeId]: {\n    _Value: variance,\n    _Key: variance,\n    _Patch: variance\n  }\n}\n\ninterface Empty<Key, Value, Patch> extends Differ.Differ.HashMap.Patch<Key, Value, Patch> {\n  readonly _tag: \"Empty\"\n}\n\nconst EmptyProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Empty\"\n})\n\nconst _empty = Object.create(EmptyProto)\n\n/** @internal */\nexport const empty = <Key, Value, Patch>(): Differ.Differ.HashMap.Patch<Key, Value, Patch> => _empty\n\ninterface AndThen<Key, Value, Patch> extends Differ.Differ.HashMap.Patch<Key, Value, Patch> {\n  readonly _tag: \"AndThen\"\n  readonly first: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n  readonly second: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n}\n\nconst AndThenProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AndThen\"\n})\n\nconst makeAndThen = <Key, Value, Patch>(\n  first: Differ.Differ.HashMap.Patch<Key, Value, Patch>,\n  second: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n): Differ.Differ.HashMap.Patch<Key, Value, Patch> => {\n  const o = Object.create(AndThenProto)\n  o.first = first\n  o.second = second\n  return o\n}\n\ninterface Add<Key, Value, Patch> extends Differ.Differ.HashMap.Patch<Key, Value, Patch> {\n  readonly _tag: \"Add\"\n  readonly key: Key\n  readonly value: Value\n}\n\nconst AddProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Add\"\n})\n\nconst makeAdd = <Key, Value, Patch>(key: Key, value: Value): Differ.Differ.HashMap.Patch<Key, Value, Patch> => {\n  const o = Object.create(AddProto)\n  o.key = key\n  o.value = value\n  return o\n}\n\ninterface Remove<Key, Value, Patch> extends Differ.Differ.HashMap.Patch<Key, Value, Patch> {\n  readonly _tag: \"Remove\"\n  readonly key: Key\n}\n\nconst RemoveProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Remove\"\n})\n\nconst makeRemove = <Key, Value, Patch>(key: Key): Differ.Differ.HashMap.Patch<Key, Value, Patch> => {\n  const o = Object.create(RemoveProto)\n  o.key = key\n  return o\n}\n\ninterface Update<Key, Value, Patch> extends Differ.Differ.HashMap.Patch<Key, Value, Patch> {\n  readonly _tag: \"Update\"\n  readonly key: Key\n  readonly patch: Patch\n}\n\nconst UpdateProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Update\"\n})\n\nconst makeUpdate = <Key, Value, Patch>(key: Key, patch: Patch): Differ.Differ.HashMap.Patch<Key, Value, Patch> => {\n  const o = Object.create(UpdateProto)\n  o.key = key\n  o.patch = patch\n  return o\n}\n\ntype Instruction =\n  | Add<any, any, any>\n  | Remove<any, any, any>\n  | Update<any, any, any>\n  | Empty<any, any, any>\n  | AndThen<any, any, any>\n\n/** @internal */\nexport const diff = <Key, Value, Patch>(\n  options: {\n    readonly oldValue: HashMap.HashMap<Key, Value>\n    readonly newValue: HashMap.HashMap<Key, Value>\n    readonly differ: Differ.Differ<Value, Patch>\n  }\n): Differ.Differ.HashMap.Patch<Key, Value, Patch> => {\n  const [removed, patch] = HashMap.reduce(\n    [options.oldValue, empty<Key, Value, Patch>()] as const,\n    ([map, patch], newValue: Value, key: Key) => {\n      const option = HashMap.get(key)(map)\n      switch (option._tag) {\n        case \"Some\": {\n          const valuePatch = options.differ.diff(option.value, newValue)\n          if (Equal.equals(valuePatch, options.differ.empty)) {\n            return [HashMap.remove(key)(map), patch] as const\n          }\n          return [\n            HashMap.remove(key)(map),\n            combine<Key, Value, Patch>(makeUpdate(key, valuePatch))(patch)\n          ] as const\n        }\n        case \"None\": {\n          return [map, combine<Key, Value, Patch>(makeAdd(key, newValue))(patch)] as const\n        }\n      }\n    }\n  )(options.newValue)\n  return HashMap.reduce(\n    patch,\n    (patch, _, key: Key) => combine<Key, Value, Patch>(makeRemove(key))(patch)\n  )(removed)\n}\n\n/** @internal */\nexport const combine = Dual.dual<\n  <Key, Value, Patch>(\n    that: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n  ) => (\n    self: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n  ) => Differ.Differ.HashMap.Patch<Key, Value, Patch>,\n  <Key, Value, Patch>(\n    self: Differ.Differ.HashMap.Patch<Key, Value, Patch>,\n    that: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n  ) => Differ.Differ.HashMap.Patch<Key, Value, Patch>\n>(2, (self, that) => makeAndThen(self, that))\n\n/** @internal */\nexport const patch = Dual.dual<\n  <Key, Value, Patch>(\n    oldValue: HashMap.HashMap<Key, Value>,\n    differ: Differ.Differ<Value, Patch>\n  ) => (\n    self: Differ.Differ.HashMap.Patch<Key, Value, Patch>\n  ) => HashMap.HashMap<Key, Value>,\n  <Key, Value, Patch>(\n    self: Differ.Differ.HashMap.Patch<Key, Value, Patch>,\n    oldValue: HashMap.HashMap<Key, Value>,\n    differ: Differ.Differ<Value, Patch>\n  ) => HashMap.HashMap<Key, Value>\n>(3, <Key, Value, Patch>(\n  self: Differ.Differ.HashMap.Patch<Key, Value, Patch>,\n  oldValue: HashMap.HashMap<Key, Value>,\n  differ: Differ.Differ<Value, Patch>\n) => {\n  if ((self as Instruction)._tag === \"Empty\") {\n    return oldValue\n  }\n  let map = oldValue\n  let patches: Chunk.Chunk<Differ.Differ.HashMap.Patch<Key, Value, Patch>> = Chunk.of(self)\n  while (Chunk.isNonEmpty(patches)) {\n    const head: Instruction = Chunk.headNonEmpty(patches) as Instruction\n    const tail = Chunk.tailNonEmpty(patches)\n    switch (head._tag) {\n      case \"Empty\": {\n        patches = tail\n        break\n      }\n      case \"AndThen\": {\n        patches = Chunk.prepend(head.first)(Chunk.prepend(head.second)(tail))\n        break\n      }\n      case \"Add\": {\n        map = HashMap.set(head.key, head.value)(map)\n        patches = tail\n        break\n      }\n      case \"Remove\": {\n        map = HashMap.remove(head.key)(map)\n        patches = tail\n        break\n      }\n      case \"Update\": {\n        const option = HashMap.get(head.key)(map)\n        if (option._tag === \"Some\") {\n          map = HashMap.set(head.key, differ.patch(head.patch, option.value))(map)\n        }\n        patches = tail\n        break\n      }\n    }\n  }\n  return map\n})\n"],"names":["Chunk","Equal","Dual","HashMap","Structural","HashMapPatchTypeId","Symbol","for","variance","a","PatchProto","prototype","_Value","_Key","_Patch","EmptyProto","Object","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AddProto","makeAdd","key","value","RemoveProto","makeRemove","UpdateProto","makeUpdate","patch","diff","options","removed","reduce","oldValue","map","newValue","option","get","valuePatch","differ","equals","remove","combine","_","dual","self","that","patches","of","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend","set"],"mappings":";;;;;;;AAKA,SAASI,UAAU,QAAQ,YAAY;AADvC,OAAO,KAAKD,OAAO,MAAM,kBAAkB;AAF3C,OAAO,KAAKF,KAAK,MAAM,gBAAgB;AACvC,OAAO,KAAKC,IAAI,MAAM,mBAAmB;AAHzC,OAAO,KAAKF,KAAK,MAAM,gBAAgB;;;;;;AAQhC,MAAMK,kBAAkB,GAAA,WAAA,GAAiCC,MAAM,CAACC,GAAG,CACxE,2BAA2B,CACI;AAEjC,SAASC,QAAQA,CAAOC,CAAI;IAC1B,OAAOA,CAAiB;AAC1B;AAEA,cAAA,GACA,MAAMC,UAAU,GAAG;IACjB,GAAGN,yKAAU,CAACO,SAAS;IACvB,CAACN,kBAAkB,CAAA,EAAG;QACpBO,MAAM,EAAEJ,QAAQ;QAChBK,IAAI,EAAEL,QAAQ;QACdM,MAAM,EAAEN;;CAEX;AAMD,MAAMO,UAAU,GAAA,WAAA,GAAGC,MAAM,CAACC,MAAM,CAAA,WAAA,GAACD,MAAM,CAACE,MAAM,CAACR,UAAU,CAAC,EAAE;IAC1DS,IAAI,EAAE;CACP,CAAC;AAEF,MAAMC,MAAM,GAAA,WAAA,GAAGJ,MAAM,CAACE,MAAM,CAACH,UAAU,CAAC;AAGjC,MAAMM,KAAK,GAAGA,CAAA,GAAyED,MAAM;AAQpG,MAAME,YAAY,GAAA,WAAA,GAAGN,MAAM,CAACC,MAAM,CAAA,WAAA,GAACD,MAAM,CAACE,MAAM,CAACR,UAAU,CAAC,EAAE;IAC5DS,IAAI,EAAE;CACP,CAAC;AAEF,MAAMI,WAAW,GAAGA,CAClBC,KAAqD,EACrDC,MAAsD,KACJ;IAClD,MAAMC,CAAC,GAAGV,MAAM,CAACE,MAAM,CAACI,YAAY,CAAC;IACrCI,CAAC,CAACF,KAAK,GAAGA,KAAK;IACfE,CAAC,CAACD,MAAM,GAAGA,MAAM;IACjB,OAAOC,CAAC;AACV,CAAC;AAQD,MAAMC,QAAQ,GAAA,WAAA,GAAGX,MAAM,CAACC,MAAM,CAAA,WAAA,GAACD,MAAM,CAACE,MAAM,CAACR,UAAU,CAAC,EAAE;IACxDS,IAAI,EAAE;CACP,CAAC;AAEF,MAAMS,OAAO,GAAGA,CAAoBC,GAAQ,EAAEC,KAAY,KAAoD;IAC5G,MAAMJ,CAAC,GAAGV,MAAM,CAACE,MAAM,CAACS,QAAQ,CAAC;IACjCD,CAAC,CAACG,GAAG,GAAGA,GAAG;IACXH,CAAC,CAACI,KAAK,GAAGA,KAAK;IACf,OAAOJ,CAAC;AACV,CAAC;AAOD,MAAMK,WAAW,GAAA,WAAA,GAAGf,MAAM,CAACC,MAAM,CAAA,WAAA,GAACD,MAAM,CAACE,MAAM,CAACR,UAAU,CAAC,EAAE;IAC3DS,IAAI,EAAE;CACP,CAAC;AAEF,MAAMa,UAAU,IAAuBH,GAAQ,IAAoD;IACjG,MAAMH,CAAC,GAAGV,MAAM,CAACE,MAAM,CAACa,WAAW,CAAC;IACpCL,CAAC,CAACG,GAAG,GAAGA,GAAG;IACX,OAAOH,CAAC;AACV,CAAC;AAQD,MAAMO,WAAW,GAAA,WAAA,GAAGjB,MAAM,CAACC,MAAM,CAAA,WAAA,GAACD,MAAM,CAACE,MAAM,CAACR,UAAU,CAAC,EAAE;IAC3DS,IAAI,EAAE;CACP,CAAC;AAEF,MAAMe,UAAU,GAAGA,CAAoBL,GAAQ,EAAEM,KAAY,KAAoD;IAC/G,MAAMT,CAAC,GAAGV,MAAM,CAACE,MAAM,CAACe,WAAW,CAAC;IACpCP,CAAC,CAACG,GAAG,GAAGA,GAAG;IACXH,CAAC,CAACS,KAAK,GAAGA,KAAK;IACf,OAAOT,CAAC;AACV,CAAC;AAUM,MAAMU,IAAI,IACfC,OAIC,IACiD;IAClD,MAAM,CAACC,OAAO,EAAEH,KAAK,CAAC,GAAGhC,OAAO,4IAACoC,MAAM,CACrC;QAACF,OAAO,CAACG,QAAQ;QAAEnB,KAAK,EAAqB;KAAU,EACvD,CAAC,CAACoB,GAAG,EAAEN,KAAK,CAAC,EAAEO,QAAe,EAAEb,GAAQ,KAAI;QAC1C,MAAMc,MAAM,GAAGxC,OAAO,4IAACyC,GAAG,CAACf,GAAG,CAAC,CAACY,GAAG,CAAC;QACpC,OAAQE,MAAM,CAACxB,IAAI;YACjB,KAAK,MAAM;gBAAE;oBACX,MAAM0B,UAAU,GAAGR,OAAO,CAACS,MAAM,CAACV,IAAI,CAACO,MAAM,CAACb,KAAK,EAAEY,QAAQ,CAAC;oBAC9D,IAAIzC,KAAK,4IAAC8C,MAAM,CAACF,UAAU,EAAER,OAAO,CAACS,MAAM,CAACzB,KAAK,CAAC,EAAE;wBAClD,OAAO;4BAAClB,OAAO,4IAAC6C,MAAM,CAACnB,GAAG,CAAC,CAACY,GAAG,CAAC;4BAAEN,KAAK;yBAAU;oBACnD;oBACA,OAAO;wBACLhC,OAAO,4IAAC6C,MAAM,CAACnB,GAAG,CAAC,CAACY,GAAG,CAAC;wBACxBQ,OAAO,CAAoBf,UAAU,CAACL,GAAG,EAAEgB,UAAU,CAAC,CAAC,CAACV,KAAK,CAAC;qBACtD;gBACZ;YACA,KAAK,MAAM;gBAAE;oBACX,OAAO;wBAACM,GAAG;wBAAEQ,OAAO,CAAoBrB,OAAO,CAACC,GAAG,EAAEa,QAAQ,CAAC,CAAC,CAACP,KAAK,CAAC;qBAAU;gBAClF;QACF;IACF,CAAC,CACF,CAACE,OAAO,CAACK,QAAQ,CAAC;IACnB,OAAOvC,OAAO,4IAACoC,MAAM,CACnBJ,KAAK,EACL,CAACA,KAAK,EAAEe,CAAC,EAAErB,GAAQ,GAAKoB,OAAO,CAAoBjB,UAAU,CAACH,GAAG,CAAC,CAAC,CAACM,KAAK,CAAC,CAC3E,CAACG,OAAO,CAAC;AACZ,CAAC;AAGM,MAAMW,OAAO,GAAA,WAAA,GAAG/C,IAAI,gJAACiD,IAAI,CAU9B,CAAC,EAAE,CAACC,IAAI,EAAEC,IAAI,GAAK9B,WAAW,CAAC6B,IAAI,EAAEC,IAAI,CAAC,CAAC;AAGtC,MAAMlB,KAAK,GAAA,WAAA,GAAGjC,IAAI,gJAACiD,IAAI,CAY5B,CAAC,EAAE,CACHC,IAAoD,EACpDZ,QAAqC,EACrCM,MAAmC,KACjC;IACF,IAAKM,IAAoB,CAACjC,IAAI,KAAK,OAAO,EAAE;QAC1C,OAAOqB,QAAQ;IACjB;IACA,IAAIC,GAAG,GAAGD,QAAQ;IAClB,IAAIc,OAAO,GAAgEtD,KAAK,4IAACuD,EAAE,CAACH,IAAI,CAAC;IACzF,MAAOpD,KAAK,4IAACwD,UAAU,CAACF,OAAO,CAAC,CAAE;QAChC,MAAMG,IAAI,GAAgBzD,KAAK,4IAAC0D,YAAY,CAACJ,OAAO,CAAgB;QACpE,MAAMK,IAAI,GAAG3D,KAAK,4IAAC4D,YAAY,CAACN,OAAO,CAAC;QACxC,OAAQG,IAAI,CAACtC,IAAI;YACf,KAAK,OAAO;gBAAE;oBACZmC,OAAO,GAAGK,IAAI;oBACd;gBACF;YACA,KAAK,SAAS;gBAAE;oBACdL,OAAO,GAAGtD,KAAK,4IAAC6D,OAAO,CAACJ,IAAI,CAACjC,KAAK,CAAC,CAACxB,KAAK,4IAAC6D,OAAO,CAACJ,IAAI,CAAChC,MAAM,CAAC,CAACkC,IAAI,CAAC,CAAC;oBACrE;gBACF;YACA,KAAK,KAAK;gBAAE;oBACVlB,GAAG,GAAGtC,OAAO,4IAAC2D,GAAG,CAACL,IAAI,CAAC5B,GAAG,EAAE4B,IAAI,CAAC3B,KAAK,CAAC,CAACW,GAAG,CAAC;oBAC5Ca,OAAO,GAAGK,IAAI;oBACd;gBACF;YACA,KAAK,QAAQ;gBAAE;oBACblB,GAAG,GAAGtC,OAAO,4IAAC6C,MAAM,CAACS,IAAI,CAAC5B,GAAG,CAAC,CAACY,GAAG,CAAC;oBACnCa,OAAO,GAAGK,IAAI;oBACd;gBACF;YACA,KAAK,QAAQ;gBAAE;oBACb,MAAMhB,MAAM,GAAGxC,OAAO,4IAACyC,GAAG,CAACa,IAAI,CAAC5B,GAAG,CAAC,CAACY,GAAG,CAAC;oBACzC,IAAIE,MAAM,CAACxB,IAAI,KAAK,MAAM,EAAE;wBAC1BsB,GAAG,GAAGtC,OAAO,4IAAC2D,GAAG,CAACL,IAAI,CAAC5B,GAAG,EAAEiB,MAAM,CAACX,KAAK,CAACsB,IAAI,CAACtB,KAAK,EAAEQ,MAAM,CAACb,KAAK,CAAC,CAAC,CAACW,GAAG,CAAC;oBAC1E;oBACAa,OAAO,GAAGK,IAAI;oBACd;gBACF;QACF;IACF;IACA,OAAOlB,GAAG;AACZ,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 3596, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3602, "column": 0}, "map": {"version":3,"file":"hashSetPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ/hashSetPatch.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport type { Differ } from \"../../Differ.js\"\nimport * as Dual from \"../../Function.js\"\nimport * as HashSet from \"../../HashSet.js\"\nimport { Structural } from \"../data.js\"\n\n/** @internal */\nexport const HashSetPatchTypeId: Differ.HashSet.TypeId = Symbol.for(\n  \"effect/DifferHashSetPatch\"\n) as Differ.HashSet.TypeId\n\nfunction variance<A, B>(a: A): B {\n  return a as unknown as B\n}\n\n/** @internal */\nconst PatchProto = {\n  ...Structural.prototype,\n  [HashSetPatchTypeId]: {\n    _Value: variance,\n    _Key: variance,\n    _Patch: variance\n  }\n}\n\ninterface Empty<Value> extends Differ.HashSet.Patch<Value> {\n  readonly _tag: \"Empty\"\n}\n\nconst EmptyProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Empty\"\n})\n\nconst _empty = Object.create(EmptyProto)\n\n/** @internal */\nexport const empty = <Value>(): Differ.HashSet.Patch<Value> => _empty\n\ninterface AndThen<Value> extends Differ.HashSet.Patch<Value> {\n  readonly _tag: \"AndThen\"\n  readonly first: Differ.HashSet.Patch<Value>\n  readonly second: Differ.HashSet.Patch<Value>\n}\n\nconst AndThenProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AndThen\"\n})\n\n/** @internal */\nexport const makeAndThen = <Value>(\n  first: Differ.HashSet.Patch<Value>,\n  second: Differ.HashSet.Patch<Value>\n): Differ.HashSet.Patch<Value> => {\n  const o = Object.create(AndThenProto)\n  o.first = first\n  o.second = second\n  return o\n}\n\ninterface Add<Value> extends Differ.HashSet.Patch<Value> {\n  readonly _tag: \"Add\"\n  readonly value: Value\n}\n\nconst AddProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Add\"\n})\n\n/** @internal */\nexport const makeAdd = <Value>(\n  value: Value\n): Differ.HashSet.Patch<Value> => {\n  const o = Object.create(AddProto)\n  o.value = value\n  return o\n}\n\ninterface Remove<Value> extends Differ.HashSet.Patch<Value> {\n  readonly _tag: \"Remove\"\n  readonly value: Value\n}\n\nconst RemoveProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Remove\"\n})\n\n/** @internal */\nexport const makeRemove = <Value>(\n  value: Value\n): Differ.HashSet.Patch<Value> => {\n  const o = Object.create(RemoveProto)\n  o.value = value\n  return o\n}\n\ntype Instruction =\n  | Add<any>\n  | AndThen<any>\n  | Empty<any>\n  | Remove<any>\n\n/** @internal */\nexport const diff = <Value>(\n  oldValue: HashSet.HashSet<Value>,\n  newValue: HashSet.HashSet<Value>\n): Differ.HashSet.Patch<Value> => {\n  const [removed, patch] = HashSet.reduce(\n    [oldValue, empty<Value>()] as const,\n    ([set, patch], value: Value) => {\n      if (HashSet.has(value)(set)) {\n        return [HashSet.remove(value)(set), patch] as const\n      }\n      return [set, combine(makeAdd(value))(patch)] as const\n    }\n  )(newValue)\n  return HashSet.reduce(patch, (patch, value: Value) => combine(makeRemove(value))(patch))(removed)\n}\n\n/** @internal */\nexport const combine = Dual.dual<\n  <Value>(\n    that: Differ.HashSet.Patch<Value>\n  ) => (\n    self: Differ.HashSet.Patch<Value>\n  ) => Differ.HashSet.Patch<Value>,\n  <Value>(\n    self: Differ.HashSet.Patch<Value>,\n    that: Differ.HashSet.Patch<Value>\n  ) => Differ.HashSet.Patch<Value>\n>(2, (self, that) => makeAndThen(self, that))\n\n/** @internal */\nexport const patch = Dual.dual<\n  <Value>(\n    oldValue: HashSet.HashSet<Value>\n  ) => (\n    self: Differ.HashSet.Patch<Value>\n  ) => HashSet.HashSet<Value>,\n  <Value>(\n    self: Differ.HashSet.Patch<Value>,\n    oldValue: HashSet.HashSet<Value>\n  ) => HashSet.HashSet<Value>\n>(2, <Value>(\n  self: Differ.HashSet.Patch<Value>,\n  oldValue: HashSet.HashSet<Value>\n) => {\n  if ((self as Instruction)._tag === \"Empty\") {\n    return oldValue\n  }\n  let set = oldValue\n  let patches: Chunk.Chunk<Differ.HashSet.Patch<Value>> = Chunk.of(self)\n  while (Chunk.isNonEmpty(patches)) {\n    const head: Instruction = Chunk.headNonEmpty(patches) as Instruction\n    const tail = Chunk.tailNonEmpty(patches)\n    switch (head._tag) {\n      case \"Empty\": {\n        patches = tail\n        break\n      }\n      case \"AndThen\": {\n        patches = Chunk.prepend(head.first)(Chunk.prepend(head.second)(tail))\n        break\n      }\n      case \"Add\": {\n        set = HashSet.add(head.value)(set)\n        patches = tail\n        break\n      }\n      case \"Remove\": {\n        set = HashSet.remove(head.value)(set)\n        patches = tail\n      }\n    }\n  }\n  return set\n})\n"],"names":["Chunk","Dual","HashSet","Structural","HashSetPatchTypeId","Symbol","for","variance","a","PatchProto","prototype","_Value","_Key","_Patch","EmptyProto","Object","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AddProto","makeAdd","value","RemoveProto","makeRemove","diff","oldValue","newValue","removed","patch","reduce","set","has","remove","combine","dual","self","that","patches","of","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend","add"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3716, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3722, "column": 0}, "map": {"version":3,"file":"orPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ/orPatch.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport type { Differ } from \"../../Differ.js\"\nimport type { Either } from \"../../Either.js\"\nimport * as E from \"../../Either.js\"\nimport * as Equal from \"../../Equal.js\"\nimport * as Dual from \"../../Function.js\"\nimport { Structural } from \"../data.js\"\n\n/** @internal */\nexport const OrPatchTypeId: Differ.Or.TypeId = Symbol.for(\"effect/DifferOrPatch\") as Differ.Or.TypeId\n\nfunction variance<A, B>(a: A): B {\n  return a as unknown as B\n}\n\n/** @internal */\nconst PatchProto = {\n  ...Structural.prototype,\n  [OrPatchTypeId]: {\n    _Value: variance,\n    _Key: variance,\n    _Patch: variance\n  }\n}\n\n/** @internal */\nexport interface Empty<in out Value, in out Value2, in out Patch, in out Patch2>\n  extends Differ.Or.Patch<Value, Value2, Patch, Patch2>\n{\n  readonly _tag: \"Empty\"\n}\n\nconst EmptyProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Empty\"\n})\n\nconst _empty = Object.create(EmptyProto)\n\n/** @internal */\nexport const empty = <Value, Value2, Patch, Patch2>(): Differ.Or.Patch<\n  Value,\n  Value2,\n  Patch,\n  Patch2\n> => _empty\n\n/** @internal */\nexport interface AndThen<in out Value, in out Value2, in out Patch, Patch2>\n  extends Differ.Or.Patch<Value, Value2, Patch, Patch2>\n{\n  readonly _tag: \"AndThen\"\n  readonly first: Differ.Or.Patch<Value, Value2, Patch, Patch2>\n  readonly second: Differ.Or.Patch<Value, Value2, Patch, Patch2>\n}\n\nconst AndThenProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AndThen\"\n})\n\n/** @internal */\nexport const makeAndThen = <Value, Value2, Patch, Patch2>(\n  first: Differ.Or.Patch<Value, Value2, Patch, Patch2>,\n  second: Differ.Or.Patch<Value, Value2, Patch, Patch2>\n): Differ.Or.Patch<\n  Value,\n  Value2,\n  Patch,\n  Patch2\n> => {\n  const o = Object.create(AndThenProto)\n  o.first = first\n  o.second = second\n  return o\n}\n\n/** @internal */\nexport interface SetLeft<in out Value, in out Value2, in out Patch, Patch2>\n  extends Differ.Or.Patch<Value, Value2, Patch, Patch2>\n{\n  readonly _tag: \"SetLeft\"\n  readonly value: Value\n}\n\nconst SetLeftProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"SetLeft\"\n})\n\n/** @internal */\nexport const makeSetLeft = <Value, Value2, Patch, Patch2>(\n  value: Value\n): Differ.Or.Patch<\n  Value,\n  Value2,\n  Patch,\n  Patch2\n> => {\n  const o = Object.create(SetLeftProto)\n  o.value = value\n  return o\n}\n\n/** @internal */\nexport interface SetRight<in out Value, in out Value2, in out Patch, in out Patch2>\n  extends Differ.Or.Patch<Value, Value2, Patch, Patch2>\n{\n  readonly _tag: \"SetRight\"\n  readonly value: Value2\n}\n\nconst SetRightProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"SetRight\"\n})\n\n/** @internal */\nexport const makeSetRight = <Value, Value2, Patch, Patch2>(\n  value: Value2\n): Differ.Or.Patch<\n  Value,\n  Value2,\n  Patch,\n  Patch2\n> => {\n  const o = Object.create(SetRightProto)\n  o.value = value\n  return o\n}\n\n/** @internal */\nexport interface UpdateLeft<in out Value, in out Value2, in out Patch, in out Patch2>\n  extends Differ.Or.Patch<Value, Value2, Patch, Patch2>\n{\n  readonly _tag: \"UpdateLeft\"\n  readonly patch: Patch\n}\n\nconst UpdateLeftProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"UpdateLeft\"\n})\n\n/** @internal */\nexport const makeUpdateLeft = <Value, Value2, Patch, Patch2>(\n  patch: Patch\n): Differ.Or.Patch<\n  Value,\n  Value2,\n  Patch,\n  Patch2\n> => {\n  const o = Object.create(UpdateLeftProto)\n  o.patch = patch\n  return o\n}\n\n/** @internal */\nexport interface UpdateRight<in out Value, in out Value2, in out Patch, in out Patch2>\n  extends Differ.Or.Patch<Value, Value2, Patch, Patch2>\n{\n  readonly _tag: \"UpdateRight\"\n  readonly patch: Patch2\n}\n\nconst UpdateRightProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"UpdateRight\"\n})\n\n/** @internal */\nexport const makeUpdateRight = <Value, Value2, Patch, Patch2>(\n  patch: Patch2\n): Differ.Or.Patch<\n  Value,\n  Value2,\n  Patch,\n  Patch2\n> => {\n  const o = Object.create(UpdateRightProto)\n  o.patch = patch\n  return o\n}\n\ntype Instruction =\n  | AndThen<any, any, any, any>\n  | Empty<any, any, any, any>\n  | SetLeft<any, any, any, any>\n  | SetRight<any, any, any, any>\n  | UpdateLeft<any, any, any, any>\n  | UpdateRight<any, any, any, any>\n\n/** @internal */\nexport const diff = <Value, Value2, Patch, Patch2>(\n  options: {\n    readonly oldValue: Either<Value2, Value>\n    readonly newValue: Either<Value2, Value>\n    readonly left: Differ<Value, Patch>\n    readonly right: Differ<Value2, Patch2>\n  }\n): Differ.Or.Patch<Value, Value2, Patch, Patch2> => {\n  switch (options.oldValue._tag) {\n    case \"Left\": {\n      switch (options.newValue._tag) {\n        case \"Left\": {\n          const valuePatch = options.left.diff(options.oldValue.left, options.newValue.left)\n          if (Equal.equals(valuePatch, options.left.empty)) {\n            return empty()\n          }\n          return makeUpdateLeft(valuePatch)\n        }\n        case \"Right\": {\n          return makeSetRight(options.newValue.right)\n        }\n      }\n    }\n    case \"Right\": {\n      switch (options.newValue._tag) {\n        case \"Left\": {\n          return makeSetLeft(options.newValue.left)\n        }\n        case \"Right\": {\n          const valuePatch = options.right.diff(options.oldValue.right, options.newValue.right)\n          if (Equal.equals(valuePatch, options.right.empty)) {\n            return empty()\n          }\n          return makeUpdateRight(valuePatch)\n        }\n      }\n    }\n  }\n}\n\n/** @internal */\nexport const combine = Dual.dual<\n  <Value, Value2, Patch, Patch2>(\n    that: Differ.Or.Patch<Value, Value2, Patch, Patch2>\n  ) => (\n    self: Differ.Or.Patch<Value, Value2, Patch, Patch2>\n  ) => Differ.Or.Patch<Value, Value2, Patch, Patch2>,\n  <Value, Value2, Patch, Patch2>(\n    self: Differ.Or.Patch<Value, Value2, Patch, Patch2>,\n    that: Differ.Or.Patch<Value, Value2, Patch, Patch2>\n  ) => Differ.Or.Patch<Value, Value2, Patch, Patch2>\n>(2, (self, that) => makeAndThen(self, that))\n\n/** @internal */\nexport const patch = Dual.dual<\n  <Value, Value2, Patch, Patch2>(\n    options: {\n      readonly oldValue: Either<Value2, Value>\n      readonly left: Differ<Value, Patch>\n      readonly right: Differ<Value2, Patch2>\n    }\n  ) => (self: Differ.Or.Patch<Value, Value2, Patch, Patch2>) => Either<Value2, Value>,\n  <Value, Value2, Patch, Patch2>(\n    self: Differ.Or.Patch<Value, Value2, Patch, Patch2>,\n    options: {\n      readonly oldValue: Either<Value2, Value>\n      readonly left: Differ<Value, Patch>\n      readonly right: Differ<Value2, Patch2>\n    }\n  ) => Either<Value2, Value>\n>(2, <Value, Value2, Patch, Patch2>(\n  self: Differ.Or.Patch<Value, Value2, Patch, Patch2>,\n  { left, oldValue, right }: {\n    oldValue: Either<Value2, Value>\n    left: Differ<Value, Patch>\n    right: Differ<Value2, Patch2>\n  }\n) => {\n  if ((self as Instruction)._tag === \"Empty\") {\n    return oldValue\n  }\n  let patches: Chunk.Chunk<Differ.Or.Patch<Value, Value2, Patch, Patch2>> = Chunk.of(self)\n  let result = oldValue\n  while (Chunk.isNonEmpty(patches)) {\n    const head: Instruction = Chunk.headNonEmpty(patches) as Instruction\n    const tail = Chunk.tailNonEmpty(patches)\n    switch (head._tag) {\n      case \"Empty\": {\n        patches = tail\n        break\n      }\n      case \"AndThen\": {\n        patches = Chunk.prepend(head.first)(Chunk.prepend(head.second)(tail))\n        break\n      }\n      case \"UpdateLeft\": {\n        if (result._tag === \"Left\") {\n          result = E.left(left.patch(head.patch, result.left))\n        }\n        patches = tail\n        break\n      }\n      case \"UpdateRight\": {\n        if (result._tag === \"Right\") {\n          result = E.right(right.patch(head.patch, result.right))\n        }\n        patches = tail\n        break\n      }\n      case \"SetLeft\": {\n        result = E.left(head.value)\n        patches = tail\n        break\n      }\n      case \"SetRight\": {\n        result = E.right(head.value)\n        patches = tail\n        break\n      }\n    }\n  }\n  return result\n})\n"],"names":["Chunk","E","Equal","Dual","Structural","OrPatchTypeId","Symbol","for","variance","a","PatchProto","prototype","_Value","_Key","_Patch","EmptyProto","Object","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","SetLeftProto","makeSetLeft","value","SetRightProto","makeSetRight","UpdateLeftProto","makeUpdateLeft","patch","UpdateRightProto","makeUpdateRight","diff","options","oldValue","newValue","valuePatch","left","equals","right","combine","dual","self","that","patches","of","result","isNonEmpty","head","headNonEmpty","tail","tailNonEmpty","prepend"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 3893, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3899, "column": 0}, "map": {"version":3,"file":"readonlyArrayPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ/readonlyArrayPatch.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport type * as Differ from \"../../Differ.js\"\nimport * as Equal from \"../../Equal.js\"\nimport * as Dual from \"../../Function.js\"\nimport * as Data from \"../data.js\"\n\n/** @internal */\nexport const ReadonlyArrayPatchTypeId: Differ.Differ.ReadonlyArray.TypeId = Symbol.for(\n  \"effect/DifferReadonlyArrayPatch\"\n) as Differ.Differ.ReadonlyArray.TypeId\n\nfunction variance<A, B>(a: A): B {\n  return a as unknown as B\n}\n\nconst PatchProto = {\n  ...Data.Structural.prototype,\n  [ReadonlyArrayPatchTypeId]: {\n    _Value: variance,\n    _Patch: variance\n  }\n}\n\ninterface Empty<Value, Patch> extends Differ.Differ.ReadonlyArray.Patch<Value, Patch> {\n  readonly _tag: \"Empty\"\n}\n\nconst EmptyProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Empty\"\n})\n\nconst _empty = Object.create(EmptyProto)\n\n/**\n * @internal\n */\nexport const empty = <Value, Patch>(): Differ.Differ.ReadonlyArray.Patch<Value, Patch> => _empty\n\ninterface AndThen<Value, Patch> extends Differ.Differ.ReadonlyArray.Patch<Value, Patch> {\n  readonly _tag: \"AndThen\"\n  readonly first: Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n  readonly second: Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n}\n\nconst AndThenProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"AndThen\"\n})\n\nconst makeAndThen = <Value, Patch>(\n  first: Differ.Differ.ReadonlyArray.Patch<Value, Patch>,\n  second: Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n): Differ.Differ.ReadonlyArray.Patch<Value, Patch> => {\n  const o = Object.create(AndThenProto)\n  o.first = first\n  o.second = second\n  return o\n}\n\ninterface Append<Value, Patch> extends Differ.Differ.ReadonlyArray.Patch<Value, Patch> {\n  readonly _tag: \"Append\"\n  readonly values: ReadonlyArray<Value>\n}\n\nconst AppendProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Append\"\n})\n\nconst makeAppend = <Value, Patch>(values: ReadonlyArray<Value>): Differ.Differ.ReadonlyArray.Patch<Value, Patch> => {\n  const o = Object.create(AppendProto)\n  o.values = values\n  return o\n}\n\ninterface Slice<Value, Patch> extends Differ.Differ.ReadonlyArray.Patch<Value, Patch> {\n  readonly _tag: \"Slice\"\n  readonly from: number\n  readonly until: number\n}\n\nconst SliceProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Slice\"\n})\n\nconst makeSlice = <Value, Patch>(from: number, until: number): Differ.Differ.ReadonlyArray.Patch<Value, Patch> => {\n  const o = Object.create(SliceProto)\n  o.from = from\n  o.until = until\n  return o\n}\n\ninterface Update<Value, Patch> extends Differ.Differ.ReadonlyArray.Patch<Value, Patch> {\n  readonly _tag: \"Update\"\n  readonly index: number\n  readonly patch: Patch\n}\n\nconst UpdateProto = Object.assign(Object.create(PatchProto), {\n  _tag: \"Update\"\n})\n\nconst makeUpdate = <Value, Patch>(index: number, patch: Patch): Differ.Differ.ReadonlyArray.Patch<Value, Patch> => {\n  const o = Object.create(UpdateProto)\n  o.index = index\n  o.patch = patch\n  return o\n}\n\ntype Instruction =\n  | Empty<any, any>\n  | AndThen<any, any>\n  | Append<any, any>\n  | Slice<any, any>\n  | Update<any, any>\n\n/** @internal */\nexport const diff = <Value, Patch>(\n  options: {\n    readonly oldValue: ReadonlyArray<Value>\n    readonly newValue: ReadonlyArray<Value>\n    readonly differ: Differ.Differ<Value, Patch>\n  }\n): Differ.Differ.ReadonlyArray.Patch<Value, Patch> => {\n  let i = 0\n  let patch = empty<Value, Patch>()\n  while (i < options.oldValue.length && i < options.newValue.length) {\n    const oldElement = options.oldValue[i]!\n    const newElement = options.newValue[i]!\n    const valuePatch = options.differ.diff(oldElement, newElement)\n    if (!Equal.equals(valuePatch, options.differ.empty)) {\n      patch = combine(patch, makeUpdate(i, valuePatch))\n    }\n    i = i + 1\n  }\n  if (i < options.oldValue.length) {\n    patch = combine(patch, makeSlice(0, i))\n  }\n  if (i < options.newValue.length) {\n    patch = combine(patch, makeAppend(Arr.drop(i)(options.newValue)))\n  }\n  return patch\n}\n\n/** @internal */\nexport const combine = Dual.dual<\n  <Value, Patch>(\n    that: Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n  ) => (\n    self: Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n  ) => Differ.Differ.ReadonlyArray.Patch<Value, Patch>,\n  <Value, Patch>(\n    self: Differ.Differ.ReadonlyArray.Patch<Value, Patch>,\n    that: Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n  ) => Differ.Differ.ReadonlyArray.Patch<Value, Patch>\n>(2, (self, that) => makeAndThen(self, that))\n\n/** @internal */\nexport const patch = Dual.dual<\n  <Value, Patch>(\n    oldValue: ReadonlyArray<Value>,\n    differ: Differ.Differ<Value, Patch>\n  ) => (self: Differ.Differ.ReadonlyArray.Patch<Value, Patch>) => ReadonlyArray<Value>,\n  <Value, Patch>(\n    self: Differ.Differ.ReadonlyArray.Patch<Value, Patch>,\n    oldValue: ReadonlyArray<Value>,\n    differ: Differ.Differ<Value, Patch>\n  ) => ReadonlyArray<Value>\n>(3, <Value, Patch>(\n  self: Differ.Differ.ReadonlyArray.Patch<Value, Patch>,\n  oldValue: ReadonlyArray<Value>,\n  differ: Differ.Differ<Value, Patch>\n) => {\n  if ((self as Instruction)._tag === \"Empty\") {\n    return oldValue\n  }\n  let readonlyArray = oldValue.slice()\n  let patches: Array<Differ.Differ.ReadonlyArray.Patch<Value, Patch>> = Arr.of(self)\n  while (Arr.isNonEmptyArray(patches)) {\n    const head: Instruction = Arr.headNonEmpty(patches) as Instruction\n    const tail = Arr.tailNonEmpty(patches)\n    switch (head._tag) {\n      case \"Empty\": {\n        patches = tail\n        break\n      }\n      case \"AndThen\": {\n        tail.unshift(head.first, head.second)\n        patches = tail\n        break\n      }\n      case \"Append\": {\n        for (const value of head.values) {\n          readonlyArray.push(value)\n        }\n        patches = tail\n        break\n      }\n      case \"Slice\": {\n        readonlyArray = readonlyArray.slice(head.from, head.until)\n        patches = tail\n        break\n      }\n      case \"Update\": {\n        readonlyArray[head.index] = differ.patch(head.patch, readonlyArray[head.index]!)\n        patches = tail\n        break\n      }\n    }\n  }\n  return readonlyArray\n})\n"],"names":["Arr","Equal","Dual","Data","ReadonlyArrayPatchTypeId","Symbol","for","variance","a","PatchProto","Structural","prototype","_Value","_Patch","EmptyProto","Object","assign","create","_tag","_empty","empty","AndThenProto","makeAndThen","first","second","o","AppendProto","makeAppend","values","SliceProto","makeSlice","from","until","UpdateProto","makeUpdate","index","patch","diff","options","i","oldValue","length","newValue","oldElement","newElement","valuePatch","differ","equals","combine","drop","dual","self","that","readonlyArray","slice","patches","of","isNonEmptyArray","head","headNonEmpty","tail","tailNonEmpty","unshift","value","push"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4031, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4037, "column": 0}, "map": {"version":3,"file":"differ.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/differ.ts"],"sourcesContent":["import type { Chunk } from \"../Chunk.js\"\nimport type { Context } from \"../Context.js\"\nimport type * as Differ from \"../Differ.js\"\nimport type { Either } from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport * as Dual from \"../Function.js\"\nimport { constant, identity } from \"../Function.js\"\nimport type { HashMap } from \"../HashMap.js\"\nimport type { HashSet } from \"../HashSet.js\"\nimport * as ChunkPatch from \"./differ/chunkPatch.js\"\nimport * as ContextPatch from \"./differ/contextPatch.js\"\nimport * as HashMapPatch from \"./differ/hashMapPatch.js\"\nimport * as HashSetPatch from \"./differ/hashSetPatch.js\"\nimport * as OrPatch from \"./differ/orPatch.js\"\nimport * as ReadonlyArrayPatch from \"./differ/readonlyArrayPatch.js\"\n\n/** @internal */\nexport const DifferTypeId: Differ.TypeId = Symbol.for(\"effect/Differ\") as Differ.TypeId\n\n/** @internal */\nexport const DifferProto = {\n  [DifferTypeId]: {\n    _P: identity,\n    _V: identity\n  }\n}\n\n/** @internal */\nexport const make = <Value, Patch>(\n  params: {\n    readonly empty: Patch\n    readonly diff: (oldValue: Value, newValue: Value) => Patch\n    readonly combine: (first: Patch, second: Patch) => Patch\n    readonly patch: (patch: Patch, oldValue: Value) => Value\n  }\n): Differ.Differ<Value, Patch> => {\n  const differ = Object.create(DifferProto)\n  differ.empty = params.empty\n  differ.diff = params.diff\n  differ.combine = params.combine\n  differ.patch = params.patch\n  return differ\n}\n\n/** @internal */\nexport const environment = <A>(): Differ.Differ<Context<A>, Differ.Differ.Context.Patch<A, A>> =>\n  make({\n    empty: ContextPatch.empty(),\n    combine: (first, second) => ContextPatch.combine(second)(first),\n    diff: (oldValue, newValue) => ContextPatch.diff(oldValue, newValue),\n    patch: (patch, oldValue) => ContextPatch.patch(oldValue)(patch)\n  })\n\n/** @internal */\nexport const chunk = <Value, Patch>(\n  differ: Differ.Differ<Value, Patch>\n): Differ.Differ<Chunk<Value>, Differ.Differ.Chunk.Patch<Value, Patch>> =>\n  make({\n    empty: ChunkPatch.empty(),\n    combine: (first, second) => ChunkPatch.combine(second)(first),\n    diff: (oldValue, newValue) => ChunkPatch.diff({ oldValue, newValue, differ }),\n    patch: (patch, oldValue) => ChunkPatch.patch(oldValue, differ)(patch)\n  })\n\n/** @internal */\nexport const hashMap = <Key, Value, Patch>(\n  differ: Differ.Differ<Value, Patch>\n): Differ.Differ<HashMap<Key, Value>, Differ.Differ.HashMap.Patch<Key, Value, Patch>> =>\n  make({\n    empty: HashMapPatch.empty(),\n    combine: (first, second) => HashMapPatch.combine(second)(first),\n    diff: (oldValue, newValue) => HashMapPatch.diff({ oldValue, newValue, differ }),\n    patch: (patch, oldValue) => HashMapPatch.patch(oldValue, differ)(patch)\n  })\n\n/** @internal */\nexport const hashSet = <Value>(): Differ.Differ<HashSet<Value>, Differ.Differ.HashSet.Patch<Value>> =>\n  make({\n    empty: HashSetPatch.empty(),\n    combine: (first, second) => HashSetPatch.combine(second)(first),\n    diff: (oldValue, newValue) => HashSetPatch.diff(oldValue, newValue),\n    patch: (patch, oldValue) => HashSetPatch.patch(oldValue)(patch)\n  })\n\n/** @internal */\nexport const orElseEither = Dual.dual<\n  <Value2, Patch2>(that: Differ.Differ<Value2, Patch2>) => <Value, Patch>(\n    self: Differ.Differ<Value, Patch>\n  ) => Differ.Differ<Either<Value2, Value>, Differ.Differ.Or.Patch<Value, Value2, Patch, Patch2>>,\n  <Value, Patch, Value2, Patch2>(\n    self: Differ.Differ<Value, Patch>,\n    that: Differ.Differ<Value2, Patch2>\n  ) => Differ.Differ<Either<Value2, Value>, Differ.Differ.Or.Patch<Value, Value2, Patch, Patch2>>\n>(2, (self, that) =>\n  make({\n    empty: OrPatch.empty(),\n    combine: (first, second) => OrPatch.combine(first, second),\n    diff: (oldValue, newValue) =>\n      OrPatch.diff({\n        oldValue,\n        newValue,\n        left: self,\n        right: that\n      }),\n    patch: (patch, oldValue) =>\n      OrPatch.patch(patch, {\n        oldValue,\n        left: self,\n        right: that\n      })\n  }))\n\n/** @internal */\nexport const readonlyArray = <Value, Patch>(\n  differ: Differ.Differ<Value, Patch>\n): Differ.Differ<ReadonlyArray<Value>, Differ.Differ.ReadonlyArray.Patch<Value, Patch>> =>\n  make({\n    empty: ReadonlyArrayPatch.empty(),\n    combine: (first, second) => ReadonlyArrayPatch.combine(first, second),\n    diff: (oldValue, newValue) => ReadonlyArrayPatch.diff({ oldValue, newValue, differ }),\n    patch: (patch, oldValue) => ReadonlyArrayPatch.patch(patch, oldValue, differ)\n  })\n\n/** @internal */\nexport const transform = Dual.dual<\n  <Value, Value2>(\n    options: {\n      readonly toNew: (value: Value) => Value2\n      readonly toOld: (value: Value2) => Value\n    }\n  ) => <Patch>(self: Differ.Differ<Value, Patch>) => Differ.Differ<Value2, Patch>,\n  <Value, Patch, Value2>(\n    self: Differ.Differ<Value, Patch>,\n    options: {\n      readonly toNew: (value: Value) => Value2\n      readonly toOld: (value: Value2) => Value\n    }\n  ) => Differ.Differ<Value2, Patch>\n>(2, (self, { toNew, toOld }) =>\n  make({\n    empty: self.empty,\n    combine: (first, second) => self.combine(first, second),\n    diff: (oldValue, newValue) => self.diff(toOld(oldValue), toOld(newValue)),\n    patch: (patch, oldValue) => toNew(self.patch(patch, toOld(oldValue)))\n  }))\n\n/** @internal */\nexport const update = <A>(): Differ.Differ<A, (a: A) => A> => updateWith((_, a) => a)\n\n/** @internal */\nexport const updateWith = <A>(f: (x: A, y: A) => A): Differ.Differ<A, (a: A) => A> =>\n  make({\n    empty: identity,\n    combine: (first, second) => {\n      if (first === identity) {\n        return second\n      }\n      if (second === identity) {\n        return first\n      }\n      return (a) => second(first(a))\n    },\n    diff: (oldValue, newValue) => {\n      if (Equal.equals(oldValue, newValue)) {\n        return identity\n      }\n      return constant(newValue)\n    },\n    patch: (patch, oldValue) => f(oldValue, patch(oldValue))\n  })\n\n/** @internal */\nexport const zip = Dual.dual<\n  <Value2, Patch2>(that: Differ.Differ<Value2, Patch2>) => <Value, Patch>(\n    self: Differ.Differ<Value, Patch>\n  ) => Differ.Differ<readonly [Value, Value2], readonly [Patch, Patch2]>,\n  <Value, Patch, Value2, Patch2>(\n    self: Differ.Differ<Value, Patch>,\n    that: Differ.Differ<Value2, Patch2>\n  ) => Differ.Differ<readonly [Value, Value2], readonly [Patch, Patch2]>\n>(2, (self, that) =>\n  make({\n    empty: [self.empty, that.empty] as const,\n    combine: (first, second) => [\n      self.combine(first[0], second[0]),\n      that.combine(first[1], second[1])\n    ],\n    diff: (oldValue, newValue) => [\n      self.diff(oldValue[0], newValue[0]),\n      that.diff(oldValue[1], newValue[1])\n    ],\n    patch: (patch, oldValue) => [\n      self.patch(patch[0], oldValue[0]),\n      that.patch(patch[1], oldValue[1])\n    ]\n  }))\n"],"names":["Equal","Dual","constant","identity","ChunkPatch","ContextPatch","HashMapPatch","HashSetPatch","OrPatch","ReadonlyArrayPatch","DifferTypeId","Symbol","for","DifferProto","_P","_V","make","params","differ","Object","create","empty","diff","combine","patch","environment","first","second","oldValue","newValue","chunk","hashMap","hashSet","orElseEither","dual","self","that","left","right","readonlyArray","transform","toNew","toOld","update","updateWith","_","a","f","equals","zip"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4185, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4191, "column": 0}, "map": {"version":3,"file":"runtimeFlags.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/runtimeFlags.ts"],"sourcesContent":["import type * as Differ from \"../Differ.js\"\nimport { dual } from \"../Function.js\"\nimport type * as RuntimeFlags from \"../RuntimeFlags.js\"\nimport type * as RuntimeFlagsPatch from \"../RuntimeFlagsPatch.js\"\nimport * as internalDiffer from \"./differ.js\"\nimport * as runtimeFlagsPatch from \"./runtimeFlagsPatch.js\"\n\n/** @internal */\nexport const None: RuntimeFlags.RuntimeFlag = 0 as RuntimeFlags.RuntimeFlag\n\n/** @internal */\nexport const Interruption: RuntimeFlags.RuntimeFlag = 1 << 0 as RuntimeFlags.RuntimeFlag\n\n/** @internal */\nexport const OpSupervision: RuntimeFlags.RuntimeFlag = 1 << 1 as RuntimeFlags.RuntimeFlag\n\n/** @internal */\nexport const RuntimeMetrics: RuntimeFlags.RuntimeFlag = 1 << 2 as RuntimeFlags.RuntimeFlag\n\n/** @internal */\nexport const WindDown: RuntimeFlags.RuntimeFlag = 1 << 4 as RuntimeFlags.RuntimeFlag\n\n/** @internal */\nexport const CooperativeYielding: RuntimeFlags.RuntimeFlag = 1 << 5 as RuntimeFlags.RuntimeFlag\n\n/** @internal */\nexport const allFlags: ReadonlyArray<RuntimeFlags.RuntimeFlag> = [\n  None,\n  Interruption,\n  OpSupervision,\n  RuntimeMetrics,\n  WindDown,\n  CooperativeYielding\n]\n\nconst print = (flag: RuntimeFlags.RuntimeFlag) => {\n  switch (flag) {\n    case CooperativeYielding: {\n      return \"CooperativeYielding\"\n    }\n    case WindDown: {\n      return \"WindDown\"\n    }\n    case RuntimeMetrics: {\n      return \"RuntimeMetrics\"\n    }\n    case OpSupervision: {\n      return \"OpSupervision\"\n    }\n    case Interruption: {\n      return \"Interruption\"\n    }\n    case None: {\n      return \"None\"\n    }\n  }\n}\n\n/** @internal */\nexport const cooperativeYielding = (self: RuntimeFlags.RuntimeFlags): boolean => isEnabled(self, CooperativeYielding)\n\n/** @internal */\nexport const disable = dual<\n  (flag: RuntimeFlags.RuntimeFlag) => (self: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags,\n  (self: RuntimeFlags.RuntimeFlags, flag: RuntimeFlags.RuntimeFlag) => RuntimeFlags.RuntimeFlags\n>(2, (self, flag) => (self & ~flag) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const disableAll = dual<\n  (flags: RuntimeFlags.RuntimeFlags) => (self: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags,\n  (self: RuntimeFlags.RuntimeFlags, flags: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags\n>(2, (self, flags) => (self & ~flags) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const enable = dual<\n  (flag: RuntimeFlags.RuntimeFlag) => (self: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags,\n  (self: RuntimeFlags.RuntimeFlags, flag: RuntimeFlags.RuntimeFlag) => RuntimeFlags.RuntimeFlags\n>(2, (self, flag) => (self | flag) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const enableAll = dual<\n  (flags: RuntimeFlags.RuntimeFlags) => (self: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags,\n  (self: RuntimeFlags.RuntimeFlags, flags: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags\n>(2, (self, flags) => (self | flags) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const interruptible = (self: RuntimeFlags.RuntimeFlags): boolean => interruption(self) && !windDown(self)\n\n/** @internal */\nexport const interruption = (self: RuntimeFlags.RuntimeFlags): boolean => isEnabled(self, Interruption)\n\n/** @internal */\nexport const isDisabled = dual<\n  (flag: RuntimeFlags.RuntimeFlag) => (self: RuntimeFlags.RuntimeFlags) => boolean,\n  (self: RuntimeFlags.RuntimeFlags, flag: RuntimeFlags.RuntimeFlag) => boolean\n>(2, (self, flag) => !isEnabled(self, flag))\n\n/** @internal */\nexport const isEnabled = dual<\n  (flag: RuntimeFlags.RuntimeFlag) => (self: RuntimeFlags.RuntimeFlags) => boolean,\n  (self: RuntimeFlags.RuntimeFlags, flag: RuntimeFlags.RuntimeFlag) => boolean\n>(2, (self, flag) => (self & flag) !== 0)\n\n/** @internal */\nexport const make = (...flags: ReadonlyArray<RuntimeFlags.RuntimeFlag>): RuntimeFlags.RuntimeFlags =>\n  flags.reduce((a, b) => a | b, 0) as RuntimeFlags.RuntimeFlags\n\n/** @internal */\nexport const none: RuntimeFlags.RuntimeFlags = make(None)\n\n/** @internal */\nexport const opSupervision = (self: RuntimeFlags.RuntimeFlags): boolean => isEnabled(self, OpSupervision)\n\n/** @internal */\nexport const render = (self: RuntimeFlags.RuntimeFlags): string => {\n  const active: Array<string> = []\n  allFlags.forEach((flag) => {\n    if (isEnabled(self, flag)) {\n      active.push(`${print(flag)}`)\n    }\n  })\n  return `RuntimeFlags(${active.join(\", \")})`\n}\n\n/** @internal */\nexport const runtimeMetrics = (self: RuntimeFlags.RuntimeFlags): boolean => isEnabled(self, RuntimeMetrics)\n\n/** @internal */\nexport const toSet = (self: RuntimeFlags.RuntimeFlags): ReadonlySet<RuntimeFlags.RuntimeFlag> =>\n  new Set(allFlags.filter((flag) => isEnabled(self, flag)))\n\nexport const windDown = (self: RuntimeFlags.RuntimeFlags): boolean => isEnabled(self, WindDown)\n\n// circular with RuntimeFlagsPatch\n\n/** @internal */\nexport const enabledSet = (self: RuntimeFlagsPatch.RuntimeFlagsPatch): ReadonlySet<RuntimeFlags.RuntimeFlag> =>\n  toSet((runtimeFlagsPatch.active(self) & runtimeFlagsPatch.enabled(self)) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const disabledSet = (self: RuntimeFlagsPatch.RuntimeFlagsPatch): ReadonlySet<RuntimeFlags.RuntimeFlag> =>\n  toSet((runtimeFlagsPatch.active(self) & ~runtimeFlagsPatch.enabled(self)) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const diff = dual<\n  (that: RuntimeFlags.RuntimeFlags) => (self: RuntimeFlags.RuntimeFlags) => RuntimeFlagsPatch.RuntimeFlagsPatch,\n  (self: RuntimeFlags.RuntimeFlags, that: RuntimeFlags.RuntimeFlags) => RuntimeFlagsPatch.RuntimeFlagsPatch\n>(2, (self, that) => runtimeFlagsPatch.make(self ^ that, that))\n\n/** @internal */\nexport const patch = dual<\n  (patch: RuntimeFlagsPatch.RuntimeFlagsPatch) => (self: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags,\n  (self: RuntimeFlags.RuntimeFlags, patch: RuntimeFlagsPatch.RuntimeFlagsPatch) => RuntimeFlags.RuntimeFlags\n>(2, (self, patch) =>\n  (\n    (self & (runtimeFlagsPatch.invert(runtimeFlagsPatch.active(patch)) | runtimeFlagsPatch.enabled(patch))) |\n    (runtimeFlagsPatch.active(patch) & runtimeFlagsPatch.enabled(patch))\n  ) as RuntimeFlags.RuntimeFlags)\n\n/** @internal */\nexport const renderPatch = (self: RuntimeFlagsPatch.RuntimeFlagsPatch): string => {\n  const enabled = Array.from(enabledSet(self))\n    .map((flag) => print(flag))\n    .join(\", \")\n  const disabled = Array.from(disabledSet(self))\n    .map((flag) => print(flag))\n    .join(\", \")\n  return `RuntimeFlagsPatch(enabled = (${enabled}), disabled = (${disabled}))`\n}\n\n/** @internal */\nexport const differ: Differ.Differ<RuntimeFlags.RuntimeFlags, RuntimeFlagsPatch.RuntimeFlagsPatch> = internalDiffer\n  .make({\n    empty: runtimeFlagsPatch.empty,\n    diff: (oldValue, newValue) => diff(oldValue, newValue),\n    combine: (first, second) => runtimeFlagsPatch.andThen(second)(first),\n    patch: (_patch, oldValue) => patch(oldValue, _patch)\n  })\n"],"names":["dual","internalDiffer","runtimeFlagsPatch","None","Interruption","OpSupervision","RuntimeMetrics","WindDown","CooperativeYielding","allFlags","print","flag","cooperativeYielding","self","isEnabled","disable","disableAll","flags","enable","enableAll","interruptible","interruption","windDown","isDisabled","make","reduce","a","b","none","opSupervision","render","active","forEach","push","join","runtimeMetrics","toSet","Set","filter","enabledSet","enabled","disabledSet","diff","that","patch","invert","renderPatch","Array","from","map","disabled","differ","empty","oldValue","newValue","combine","first","second","andThen","_patch"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4309, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4315, "column": 0}, "map": {"version":3,"file":"blockedRequests.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/blockedRequests.ts"],"sourcesContent":["import * as Chunk from \"../Chunk.js\"\nimport type * as Deferred from \"../Deferred.js\"\nimport * as Either from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport type { FiberId } from \"../FiberId.js\"\nimport * as HashMap from \"../HashMap.js\"\nimport * as List from \"../List.js\"\nimport * as Option from \"../Option.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Request from \"../Request.js\"\nimport type * as RequestBlock from \"../RequestBlock.js\"\nimport type * as RequestResolver from \"../RequestResolver.js\"\n\n/** @internal */\nexport const empty: RequestBlock.RequestBlock = {\n  _tag: \"Empty\"\n}\n\n/**\n * Combines this collection of blocked requests with the specified collection\n * of blocked requests, in parallel.\n *\n * @internal\n */\nexport const par = (\n  self: RequestBlock.RequestBlock,\n  that: RequestBlock.RequestBlock\n): RequestBlock.RequestBlock => ({\n  _tag: \"Par\",\n  left: self,\n  right: that\n})\n\n/**\n * Combines this collection of blocked requests with the specified collection\n * of blocked requests, in sequence.\n *\n * @internal\n */\nexport const seq = (\n  self: RequestBlock.RequestBlock,\n  that: RequestBlock.RequestBlock\n): RequestBlock.RequestBlock => ({\n  _tag: \"Seq\",\n  left: self,\n  right: that\n})\n\n/**\n * Constructs a collection of blocked requests from the specified blocked\n * request and data source.\n *\n * @internal\n */\nexport const single = <A>(\n  dataSource: RequestResolver.RequestResolver<A>,\n  blockedRequest: Request.Entry<A>\n): RequestBlock.RequestBlock => ({\n  _tag: \"Single\",\n  dataSource: dataSource as any,\n  blockedRequest\n})\n\n/** @internal */\nexport const MapRequestResolversReducer = <A>(\n  f: (dataSource: RequestResolver.RequestResolver<A>) => RequestResolver.RequestResolver<A>\n): RequestBlock.RequestBlock.Reducer<RequestBlock.RequestBlock> => ({\n  emptyCase: () => empty,\n  parCase: (left, right) => par(left, right),\n  seqCase: (left, right) => seq(left, right),\n  singleCase: (dataSource, blockedRequest) => single(f(dataSource), blockedRequest as any)\n})\n\ntype BlockedRequestsCase = ParCase | SeqCase\n\ninterface ParCase {\n  readonly _tag: \"ParCase\"\n}\n\ninterface SeqCase {\n  readonly _tag: \"SeqCase\"\n}\n\n/**\n * Transforms all data sources with the specified data source aspect, which\n * can change the environment type of data sources but must preserve the\n * request type of each data source.\n *\n * @internal\n */\nexport const mapRequestResolvers = <A>(\n  self: RequestBlock.RequestBlock,\n  f: (dataSource: RequestResolver.RequestResolver<A>) => RequestResolver.RequestResolver<A>\n): RequestBlock.RequestBlock => reduce(self, MapRequestResolversReducer(f))\n\n/**\n * Folds over the cases of this collection of blocked requests with the\n * specified functions.\n *\n * @internal\n */\nexport const reduce = <Z>(\n  self: RequestBlock.RequestBlock,\n  reducer: RequestBlock.RequestBlock.Reducer<Z>\n): Z => {\n  let input: List.List<RequestBlock.RequestBlock> = List.of(self)\n  let output = List.empty<Either.Either<Z, BlockedRequestsCase>>()\n  while (List.isCons(input)) {\n    const current: RequestBlock.RequestBlock = input.head\n    switch (current._tag) {\n      case \"Empty\": {\n        output = List.cons(Either.right(reducer.emptyCase()), output)\n        input = input.tail\n        break\n      }\n      case \"Par\": {\n        output = List.cons(Either.left({ _tag: \"ParCase\" }), output)\n        input = List.cons(current.left, List.cons(current.right, input.tail))\n        break\n      }\n      case \"Seq\": {\n        output = List.cons(Either.left({ _tag: \"SeqCase\" }), output)\n        input = List.cons(current.left, List.cons(current.right, input.tail))\n        break\n      }\n      case \"Single\": {\n        const result = reducer.singleCase(current.dataSource, current.blockedRequest)\n        output = List.cons(Either.right(result), output)\n        input = input.tail\n        break\n      }\n    }\n  }\n  const result = List.reduce(output, List.empty<Z>(), (acc, current) => {\n    switch (current._tag) {\n      case \"Left\": {\n        const left = List.unsafeHead(acc)\n        const right = List.unsafeHead(List.unsafeTail(acc))\n        const tail = List.unsafeTail(List.unsafeTail(acc))\n        switch (current.left._tag) {\n          case \"ParCase\": {\n            return List.cons(reducer.parCase(left, right), tail)\n          }\n          case \"SeqCase\": {\n            return List.cons(reducer.seqCase(left, right), tail)\n          }\n        }\n      }\n      case \"Right\": {\n        return List.cons(current.right, acc)\n      }\n    }\n  })\n  if (List.isNil(result)) {\n    throw new Error(\n      \"BUG: BlockedRequests.reduce - please report an issue at https://github.com/Effect-TS/effect/issues\"\n    )\n  }\n  return result.head\n}\n\n/**\n * Flattens a collection of blocked requests into a collection of pipelined\n * and batched requests that can be submitted for execution.\n *\n * @internal\n */\nexport const flatten = (\n  self: RequestBlock.RequestBlock\n): List.List<SequentialCollection> => {\n  let current = List.of(self)\n  let updated = List.empty<SequentialCollection>()\n  // eslint-disable-next-line no-constant-condition\n  while (1) {\n    const [parallel, sequential] = List.reduce(\n      current,\n      [parallelCollectionEmpty(), List.empty<RequestBlock.RequestBlock>()] as const,\n      ([parallel, sequential], blockedRequest) => {\n        const [par, seq] = step(blockedRequest)\n        return [\n          parallelCollectionCombine(parallel, par),\n          List.appendAll(sequential, seq)\n        ]\n      }\n    )\n    updated = merge(updated, parallel)\n    if (List.isNil(sequential)) {\n      return List.reverse(updated)\n    }\n    current = sequential\n  }\n  throw new Error(\n    \"BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues\"\n  )\n}\n\n/**\n * Takes one step in evaluating a collection of blocked requests, returning a\n * collection of blocked requests that can be performed in parallel and a list\n * of blocked requests that must be performed sequentially after those\n * requests.\n */\nconst step = (\n  requests: RequestBlock.RequestBlock\n): [ParallelCollection, List.List<RequestBlock.RequestBlock>] => {\n  let current: RequestBlock.RequestBlock = requests\n  let parallel = parallelCollectionEmpty()\n  let stack = List.empty<RequestBlock.RequestBlock>()\n  let sequential = List.empty<RequestBlock.RequestBlock>()\n  // eslint-disable-next-line no-constant-condition\n  while (1) {\n    switch (current._tag) {\n      case \"Empty\": {\n        if (List.isNil(stack)) {\n          return [parallel, sequential]\n        }\n        current = stack.head\n        stack = stack.tail\n        break\n      }\n      case \"Par\": {\n        stack = List.cons(current.right, stack)\n        current = current.left\n        break\n      }\n      case \"Seq\": {\n        const left = current.left\n        const right = current.right\n        switch (left._tag) {\n          case \"Empty\": {\n            current = right\n            break\n          }\n          case \"Par\": {\n            const l = left.left\n            const r = left.right\n            current = par(seq(l, right), seq(r, right))\n            break\n          }\n          case \"Seq\": {\n            const l = left.left\n            const r = left.right\n            current = seq(l, seq(r, right))\n            break\n          }\n          case \"Single\": {\n            current = left\n            sequential = List.cons(right, sequential)\n            break\n          }\n        }\n        break\n      }\n      case \"Single\": {\n        parallel = parallelCollectionAdd(\n          parallel,\n          current\n        )\n        if (List.isNil(stack)) {\n          return [parallel, sequential]\n        }\n        current = stack.head\n        stack = stack.tail\n        break\n      }\n    }\n  }\n  throw new Error(\n    \"BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues\"\n  )\n}\n\n/**\n * Merges a collection of requests that must be executed sequentially with a\n * collection of requests that can be executed in parallel. If the collections\n * are both from the same single data source then the requests can be\n * pipelined while preserving ordering guarantees.\n */\nconst merge = (\n  sequential: List.List<SequentialCollection>,\n  parallel: ParallelCollection\n): List.List<SequentialCollection> => {\n  if (List.isNil(sequential)) {\n    return List.of(parallelCollectionToSequentialCollection(parallel))\n  }\n  if (parallelCollectionIsEmpty(parallel)) {\n    return sequential\n  }\n  const seqHeadKeys = sequentialCollectionKeys(sequential.head)\n  const parKeys = parallelCollectionKeys(parallel)\n  if (\n    seqHeadKeys.length === 1 &&\n    parKeys.length === 1 &&\n    Equal.equals(seqHeadKeys[0], parKeys[0])\n  ) {\n    return List.cons(\n      sequentialCollectionCombine(\n        sequential.head,\n        parallelCollectionToSequentialCollection(parallel)\n      ),\n      sequential.tail\n    )\n  }\n  return List.cons(parallelCollectionToSequentialCollection(parallel), sequential)\n}\n\n//\n// circular\n//\n\n/** @internal */\nexport const EntryTypeId: Request.EntryTypeId = Symbol.for(\n  \"effect/RequestBlock/Entry\"\n) as Request.EntryTypeId\n\n/** @internal */\nclass EntryImpl<A extends Request.Request<any, any>> implements Request.Entry<A> {\n  readonly [EntryTypeId] = blockedRequestVariance\n  constructor(\n    readonly request: A,\n    readonly result: Deferred.Deferred<Request.Request.Success<A>, Request.Request.Error<A>>,\n    readonly listeners: Request.Listeners,\n    readonly ownerId: FiberId,\n    readonly state: {\n      completed: boolean\n    }\n  ) {}\n}\n\nconst blockedRequestVariance = {\n  /* c8 ignore next */\n  _R: (_: never) => _\n}\n\n/** @internal */\nexport const isEntry = (u: unknown): u is Request.Entry<unknown> => hasProperty(u, EntryTypeId)\n\n/** @internal */\nexport const makeEntry = <A extends Request.Request<any, any>>(\n  options: {\n    readonly request: A\n    readonly result: Deferred.Deferred<Request.Request.Success<A>, Request.Request.Error<A>>\n    readonly listeners: Request.Listeners\n    readonly ownerId: FiberId\n    readonly state: { completed: boolean }\n  }\n): Request.Entry<A> => new EntryImpl(options.request, options.result, options.listeners, options.ownerId, options.state)\n\n/** @internal */\nexport const RequestBlockParallelTypeId = Symbol.for(\n  \"effect/RequestBlock/RequestBlockParallel\"\n)\n\nconst parallelVariance = {\n  /* c8 ignore next */\n  _R: (_: never) => _\n}\n\nclass ParallelImpl implements ParallelCollection {\n  readonly [RequestBlockParallelTypeId] = parallelVariance\n  constructor(\n    readonly map: HashMap.HashMap<\n      RequestResolver.RequestResolver<unknown, unknown>,\n      Chunk.Chunk<Request.Entry<unknown>>\n    >\n  ) {}\n}\n\n/** @internal */\nexport const parallelCollectionEmpty = (): ParallelCollection => new ParallelImpl(HashMap.empty())\n\n/** @internal */\nexport const parallelCollectionMake = <A>(\n  dataSource: RequestResolver.RequestResolver<A>,\n  blockedRequest: Request.Entry<A>\n): ParallelCollection => new ParallelImpl(HashMap.make([dataSource, Chunk.of(blockedRequest)]) as any)\n\n/** @internal */\nexport const parallelCollectionAdd = (\n  self: ParallelCollection,\n  blockedRequest: RequestBlock.Single\n): ParallelCollection =>\n  new ParallelImpl(HashMap.modifyAt(\n    self.map,\n    blockedRequest.dataSource,\n    (_) =>\n      Option.orElseSome(\n        Option.map(_, Chunk.append(blockedRequest.blockedRequest)),\n        () => Chunk.of(blockedRequest.blockedRequest)\n      )\n  ))\n\n/** @internal */\nexport const parallelCollectionCombine = (\n  self: ParallelCollection,\n  that: ParallelCollection\n): ParallelCollection =>\n  new ParallelImpl(HashMap.reduce(self.map, that.map, (map, value, key) =>\n    HashMap.set(\n      map,\n      key,\n      Option.match(HashMap.get(map, key), {\n        onNone: () => value,\n        onSome: (other) => Chunk.appendAll(value, other)\n      })\n    )))\n\n/** @internal */\nexport const parallelCollectionIsEmpty = (self: ParallelCollection): boolean => HashMap.isEmpty(self.map)\n\n/** @internal */\nexport const parallelCollectionKeys = (\n  self: ParallelCollection\n): Array<RequestResolver.RequestResolver<unknown>> => Array.from(HashMap.keys(self.map)) as any\n\n/** @internal */\nexport const parallelCollectionToSequentialCollection = (\n  self: ParallelCollection\n): SequentialCollection => sequentialCollectionMake(HashMap.map(self.map, (x) => Chunk.of(x)) as any)\n\n// TODO\n// /** @internal */\n// export const parallelCollectionToChunk = <R>(\n//   self: ParallelCollection<R>\n// ): Array<[RequestResolver.RequestResolver<unknown, R>, Array<Request.Entry<unknown>>]> => Array.from(self.map) as any\n\n/** @internal */\nexport const SequentialCollectionTypeId = Symbol.for(\n  \"effect/RequestBlock/RequestBlockSequential\"\n)\n\nconst sequentialVariance = {\n  /* c8 ignore next */\n  _R: (_: never) => _\n}\n\nclass SequentialImpl implements SequentialCollection {\n  readonly [SequentialCollectionTypeId] = sequentialVariance\n  constructor(\n    readonly map: HashMap.HashMap<\n      RequestResolver.RequestResolver<unknown, unknown>,\n      Chunk.Chunk<Chunk.Chunk<Request.Entry<unknown>>>\n    >\n  ) {}\n}\n\n/** @internal */\nexport const sequentialCollectionMake = <A, R>(\n  map: HashMap.HashMap<\n    RequestResolver.RequestResolver<A, R>,\n    Chunk.Chunk<Chunk.Chunk<Request.Entry<A>>>\n  >\n): SequentialCollection => new SequentialImpl(map as any)\n\n/** @internal */\nexport const sequentialCollectionCombine = (\n  self: SequentialCollection,\n  that: SequentialCollection\n): SequentialCollection =>\n  new SequentialImpl(HashMap.reduce(that.map, self.map, (map, value, key) =>\n    HashMap.set(\n      map,\n      key,\n      Option.match(HashMap.get(map, key), {\n        onNone: () => Chunk.empty(),\n        onSome: (a) => Chunk.appendAll(a, value)\n      })\n    )))\n\n/** @internal */\nexport const sequentialCollectionIsEmpty = (self: SequentialCollection): boolean => HashMap.isEmpty(self.map)\n\n/** @internal */\nexport const sequentialCollectionKeys = (\n  self: SequentialCollection\n): Array<RequestResolver.RequestResolver<unknown>> => Array.from(HashMap.keys(self.map)) as any\n\n/** @internal */\nexport const sequentialCollectionToChunk = (\n  self: SequentialCollection\n): Array<[RequestResolver.RequestResolver<unknown>, Chunk.Chunk<Chunk.Chunk<Request.Entry<unknown>>>]> =>\n  Array.from(self.map) as any\n\n/** @internal */\nexport type RequestBlockParallelTypeId = typeof RequestBlockParallelTypeId\n\n/** @internal */\nexport interface ParallelCollection extends ParallelCollection.Variance {\n  readonly map: HashMap.HashMap<\n    RequestResolver.RequestResolver<unknown, unknown>,\n    Chunk.Chunk<Request.Entry<unknown>>\n  >\n}\n\n/** @internal */\nexport declare namespace ParallelCollection {\n  /** @internal */\n  export interface Variance {\n    readonly [RequestBlockParallelTypeId]: {}\n  }\n}\n\n/** @internal */\nexport type SequentialCollectionTypeId = typeof SequentialCollectionTypeId\n\n/** @internal */\nexport interface SequentialCollection extends SequentialCollection.Variance {\n  readonly map: HashMap.HashMap<\n    RequestResolver.RequestResolver<unknown, unknown>,\n    Chunk.Chunk<Chunk.Chunk<Request.Entry<unknown>>>\n  >\n}\n\n/** @internal */\nexport declare namespace SequentialCollection {\n  /** @internal */\n  export interface Variance {\n    readonly [SequentialCollectionTypeId]: {}\n  }\n}\n"],"names":["Chunk","Either","Equal","HashMap","List","Option","hasProperty","empty","_tag","par","self","that","left","right","seq","single","dataSource","blockedRequest","MapRequestResolversReducer","f","emptyCase","parCase","seqCase","singleCase","mapRequestResolvers","reduce","reducer","input","of","output","isCons","current","head","cons","tail","result","acc","unsafeHead","unsafeTail","isNil","Error","flatten","updated","parallel","sequential","parallelCollectionEmpty","step","parallelCollectionCombine","appendAll","merge","reverse","requests","stack","l","r","parallelCollectionAdd","parallelCollectionToSequentialCollection","parallelCollectionIsEmpty","seqHeadKeys","sequentialCollectionKeys","parKeys","parallelCollectionKeys","length","equals","sequentialCollectionCombine","EntryTypeId","Symbol","for","EntryImpl","request","listeners","ownerId","state","blockedRequestVariance","constructor","_R","_","isEntry","u","makeEntry","options","RequestBlockParallelTypeId","parallelVariance","ParallelImpl","map","parallelCollectionMake","make","modifyAt","orElseSome","append","value","key","set","match","get","onNone","onSome","other","isEmpty","Array","from","keys","sequentialCollectionMake","x","SequentialCollectionTypeId","sequentialVariance","SequentialImpl","a","sequentialCollectionIsEmpty","sequentialCollectionToChunk"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4634, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4640, "column": 0}, "map": {"version":3,"file":"deferred.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/deferred.ts"],"sourcesContent":["import type * as Deferred from \"../Deferred.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as OpCodes from \"./opCodes/deferred.js\"\n\n/** @internal */\nconst DeferredSymbolKey = \"effect/Deferred\"\n\n/** @internal */\nexport const DeferredTypeId: Deferred.DeferredTypeId = Symbol.for(\n  DeferredSymbolKey\n) as Deferred.DeferredTypeId\n\n/** @internal */\nexport const deferredVariance = {\n  /* c8 ignore next */\n  _E: (_: any) => _,\n  /* c8 ignore next */\n  _A: (_: any) => _\n}\n\n/** @internal */\nexport type State</* in out */ A, /* in out */ E> = Pending<A, E> | Done<A, E>\n\n/** @internal */\nexport interface Pending<in A, in E> {\n  readonly _tag: \"Pending\"\n  readonly joiners: Array<(effect: Effect.Effect<A, E>) => void>\n}\n\n/** @internal */\nexport interface Done<out A, out E> {\n  readonly _tag: \"Done\"\n  readonly effect: Effect.Effect<A, E>\n}\n\n/** @internal */\nexport const pending = <A, E>(\n  joiners: Array<(effect: Effect.Effect<A, E>) => void>\n): State<A, E> => {\n  return { _tag: OpCodes.OP_STATE_PENDING, joiners }\n}\n\n/** @internal */\nexport const done = <A, E>(effect: Effect.Effect<A, E>): State<A, E> => {\n  return { _tag: OpCodes.OP_STATE_DONE, effect }\n}\n"],"names":["OpCodes","DeferredSymbolKey","DeferredTypeId","Symbol","for","deferredVariance","_E","_","_A","pending","joiners","_tag","OP_STATE_PENDING","done","effect","OP_STATE_DONE"],"mappings":";;;;;;AAEA,OAAO,KAAKA,OAAO,MAAM,uBAAuB;;AAEhD,cAAA,GACA,MAAMC,iBAAiB,GAAG,iBAAiB;AAGpC,MAAMC,cAAc,GAAA,WAAA,GAA4BC,MAAM,CAACC,GAAG,CAC/DH,iBAAiB,CACS;AAGrB,MAAMI,gBAAgB,GAAG;IAC9B,kBAAA,GACAC,EAAE,GAAGC,CAAM,GAAKA,CAAC;IACjB,kBAAA,GACAC,EAAE,GAAGD,CAAM,GAAKA;CACjB;AAkBM,MAAME,OAAO,IAClBC,OAAqD,IACtC;IACf,OAAO;QAAEC,IAAI,EAAEX,OAAO,oKAACY,gBAAgB;QAAEF;IAAO,CAAE;AACpD,CAAC;AAGM,MAAMG,IAAI,IAAUC,MAA2B,IAAiB;IACrE,OAAO;QAAEH,IAAI,EAAEX,OAAO,oKAACe,aAAa;QAAED;IAAM,CAAE;AAChD,CAAC","ignoreList":[0]}},
    {"offset": {"line": 4666, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4672, "column": 0}, "map": {"version":3,"file":"pair.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/pair.ts"],"sourcesContent":["import type * as MetricKey from \"../../MetricKey.js\"\nimport type * as MetricKeyType from \"../../MetricKeyType.js\"\nimport type * as MetricPair from \"../../MetricPair.js\"\nimport type * as MetricState from \"../../MetricState.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\n\n/** @internal */\nconst MetricPairSymbolKey = \"effect/MetricPair\"\n\n/** @internal */\nexport const MetricPairTypeId: MetricPair.MetricPairTypeId = Symbol.for(\n  MetricPairSymbolKey\n) as MetricPair.MetricPairTypeId\n\nconst metricPairVariance = {\n  /* c8 ignore next */\n  _Type: (_: never) => _\n}\n\n/** @internal */\nexport const make = <Type extends MetricKeyType.MetricKeyType<any, any>>(\n  metricKey: MetricKey.MetricKey<Type>,\n  metricState: MetricState.MetricState<MetricKeyType.MetricKeyType.OutType<Type>>\n): MetricPair.MetricPair.Untyped => {\n  return {\n    [MetricPairTypeId]: metricPairVariance,\n    metricKey,\n    metricState,\n    pipe() {\n      return pipeArguments(this, arguments)\n    }\n  }\n}\n\n/** @internal */\nexport const unsafeMake = <Type extends MetricKeyType.MetricKeyType<any, any>>(\n  metricKey: MetricKey.MetricKey<Type>,\n  metricState: MetricState.MetricState.Untyped\n): MetricPair.MetricPair.Untyped => {\n  return {\n    [MetricPairTypeId]: metricPairVariance,\n    metricKey,\n    metricState,\n    pipe() {\n      return pipeArguments(this, arguments)\n    }\n  }\n}\n"],"names":["pipeArguments","MetricPairSymbolKey","MetricPairTypeId","Symbol","for","metricPairVariance","_Type","_","make","metricKey","metricState","pipe","arguments","unsafeMake"],"mappings":";;;;;AAIA,SAASA,aAAa,QAAQ,mBAAmB;;AAEjD,cAAA,GACA,MAAMC,mBAAmB,GAAG,mBAAmB;AAGxC,MAAMC,gBAAgB,GAAA,WAAA,GAAgCC,MAAM,CAACC,GAAG,CACrEH,mBAAmB,CACW;AAEhC,MAAMI,kBAAkB,GAAG;IACzB,kBAAA,GACAC,KAAK,EAAGC,CAAQ,IAAKA;CACtB;AAGM,MAAMC,IAAI,GAAGA,CAClBC,SAAoC,EACpCC,WAA+E,KAC9C;IACjC,OAAO;QACL,CAACR,gBAAgB,CAAA,EAAGG,kBAAkB;QACtCI,SAAS;QACTC,WAAW;QACXC,IAAIA,CAAA;YACF,+JAAOX,gBAAAA,AAAa,EAAC,IAAI,EAAEY,SAAS,CAAC;QACvC;KACD;AACH,CAAC;AAGM,MAAMC,UAAU,GAAGA,CACxBJ,SAAoC,EACpCC,WAA4C,KACX;IACjC,OAAO;QACL,CAACR,gBAAgB,CAAA,EAAGG,kBAAkB;QACtCI,SAAS;QACTC,WAAW;QACXC,IAAIA,CAAA;YACF,+JAAOX,gBAAAA,AAAa,EAAC,IAAI,EAAEY,SAAS,CAAC;QACvC;KACD;AACH,CAAC","ignoreList":[0]}},
    {"offset": {"line": 4704, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4710, "column": 0}, "map": {"version":3,"file":"keyType.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/keyType.ts"],"sourcesContent":["import * as Duration from \"../../Duration.js\"\nimport * as Equal from \"../../Equal.js\"\nimport { pipe } from \"../../Function.js\"\nimport * as Hash from \"../../Hash.js\"\nimport type * as MetricBoundaries from \"../../MetricBoundaries.js\"\nimport type * as MetricKeyType from \"../../MetricKeyType.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport { hasProperty } from \"../../Predicate.js\"\n\n/** @internal */\nconst MetricKeyTypeSymbolKey = \"effect/MetricKeyType\"\n\n/** @internal */\nexport const MetricKeyTypeTypeId: MetricKeyType.MetricKeyTypeTypeId = Symbol.for(\n  MetricKeyTypeSymbolKey\n) as MetricKeyType.MetricKeyTypeTypeId\n\n/** @internal */\nconst CounterKeyTypeSymbolKey = \"effect/MetricKeyType/Counter\"\n\n/** @internal */\nexport const CounterKeyTypeTypeId: MetricKeyType.CounterKeyTypeTypeId = Symbol.for(\n  CounterKeyTypeSymbolKey\n) as MetricKeyType.CounterKeyTypeTypeId\n\n/** @internal */\nconst FrequencyKeyTypeSymbolKey = \"effect/MetricKeyType/Frequency\"\n\n/** @internal */\nexport const FrequencyKeyTypeTypeId: MetricKeyType.FrequencyKeyTypeTypeId = Symbol.for(\n  FrequencyKeyTypeSymbolKey\n) as MetricKeyType.FrequencyKeyTypeTypeId\n\n/** @internal */\nconst GaugeKeyTypeSymbolKey = \"effect/MetricKeyType/Gauge\"\n\n/** @internal */\nexport const GaugeKeyTypeTypeId: MetricKeyType.GaugeKeyTypeTypeId = Symbol.for(\n  GaugeKeyTypeSymbolKey\n) as MetricKeyType.GaugeKeyTypeTypeId\n\n/** @internal */\nconst HistogramKeyTypeSymbolKey = \"effect/MetricKeyType/Histogram\"\n\n/** @internal */\nexport const HistogramKeyTypeTypeId: MetricKeyType.HistogramKeyTypeTypeId = Symbol.for(\n  HistogramKeyTypeSymbolKey\n) as MetricKeyType.HistogramKeyTypeTypeId\n\n/** @internal */\nconst SummaryKeyTypeSymbolKey = \"effect/MetricKeyType/Summary\"\n\n/** @internal */\nexport const SummaryKeyTypeTypeId: MetricKeyType.SummaryKeyTypeTypeId = Symbol.for(\n  SummaryKeyTypeSymbolKey\n) as MetricKeyType.SummaryKeyTypeTypeId\n\nconst metricKeyTypeVariance = {\n  /* c8 ignore next */\n  _In: (_: unknown) => _,\n  /* c8 ignore next */\n  _Out: (_: never) => _\n}\n\n/** @internal */\nclass CounterKeyType<A extends (number | bigint)> implements MetricKeyType.MetricKeyType.Counter<A> {\n  readonly [MetricKeyTypeTypeId] = metricKeyTypeVariance\n  readonly [CounterKeyTypeTypeId]: MetricKeyType.CounterKeyTypeTypeId = CounterKeyTypeTypeId\n  constructor(readonly incremental: boolean, readonly bigint: boolean) {\n    this._hash = Hash.string(CounterKeyTypeSymbolKey)\n  }\n  readonly _hash: number;\n  [Hash.symbol](): number {\n    return this._hash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isCounterKey(that)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nconst FrequencyKeyTypeHash = Hash.string(FrequencyKeyTypeSymbolKey)\n\n/** @internal */\nclass FrequencyKeyType implements MetricKeyType.MetricKeyType.Frequency {\n  readonly [MetricKeyTypeTypeId] = metricKeyTypeVariance\n  readonly [FrequencyKeyTypeTypeId]: MetricKeyType.FrequencyKeyTypeTypeId = FrequencyKeyTypeTypeId\n  constructor(readonly preregisteredWords: ReadonlyArray<string>) {}\n  [Hash.symbol](): number {\n    return FrequencyKeyTypeHash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isFrequencyKey(that)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nconst GaugeKeyTypeHash = Hash.string(GaugeKeyTypeSymbolKey)\n\n/** @internal */\nclass GaugeKeyType<A extends (number | bigint)> implements MetricKeyType.MetricKeyType.Gauge<A> {\n  readonly [MetricKeyTypeTypeId] = metricKeyTypeVariance\n  readonly [GaugeKeyTypeTypeId]: MetricKeyType.GaugeKeyTypeTypeId = GaugeKeyTypeTypeId\n  constructor(readonly bigint: boolean) {}\n  [Hash.symbol](): number {\n    return GaugeKeyTypeHash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isGaugeKey(that)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport class HistogramKeyType implements MetricKeyType.MetricKeyType.Histogram {\n  readonly [MetricKeyTypeTypeId] = metricKeyTypeVariance\n  readonly [HistogramKeyTypeTypeId]: MetricKeyType.HistogramKeyTypeTypeId = HistogramKeyTypeTypeId\n  constructor(readonly boundaries: MetricBoundaries.MetricBoundaries) {\n    this._hash = pipe(\n      Hash.string(HistogramKeyTypeSymbolKey),\n      Hash.combine(Hash.hash(this.boundaries))\n    )\n  }\n  readonly _hash: number;\n  [Hash.symbol](): number {\n    return this._hash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isHistogramKey(that) && Equal.equals(this.boundaries, that.boundaries)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nclass SummaryKeyType implements MetricKeyType.MetricKeyType.Summary {\n  readonly [MetricKeyTypeTypeId] = metricKeyTypeVariance\n  readonly [SummaryKeyTypeTypeId]: MetricKeyType.SummaryKeyTypeTypeId = SummaryKeyTypeTypeId\n  constructor(\n    readonly maxAge: Duration.Duration,\n    readonly maxSize: number,\n    readonly error: number,\n    readonly quantiles: ReadonlyArray<number>\n  ) {\n    this._hash = pipe(\n      Hash.string(SummaryKeyTypeSymbolKey),\n      Hash.combine(Hash.hash(this.maxAge)),\n      Hash.combine(Hash.hash(this.maxSize)),\n      Hash.combine(Hash.hash(this.error)),\n      Hash.combine(Hash.array(this.quantiles))\n    )\n  }\n  readonly _hash: number;\n  [Hash.symbol](): number {\n    return this._hash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isSummaryKey(that) &&\n      Equal.equals(this.maxAge, that.maxAge) &&\n      this.maxSize === that.maxSize &&\n      this.error === that.error &&\n      Equal.equals(this.quantiles, that.quantiles)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const counter: <A extends number | bigint>(options?: {\n  readonly bigint: boolean\n  readonly incremental: boolean\n}) => CounterKeyType<A> = (options) =>\n  new CounterKeyType(\n    options?.incremental ?? false,\n    options?.bigint ?? false\n  )\n\n/** @internal */\nexport const frequency = (options?: {\n  readonly preregisteredWords?: ReadonlyArray<string> | undefined\n}): MetricKeyType.MetricKeyType.Frequency => new FrequencyKeyType(options?.preregisteredWords ?? [])\n\n/** @internal */\nexport const gauge: <A extends number | bigint>(options?: {\n  readonly bigint: boolean\n}) => GaugeKeyType<A> = (options) =>\n  new GaugeKeyType(\n    options?.bigint ?? false\n  )\n\n/** @internal */\nexport const histogram = (boundaries: MetricBoundaries.MetricBoundaries): MetricKeyType.MetricKeyType.Histogram => {\n  return new HistogramKeyType(boundaries)\n}\n\n/** @internal */\nexport const summary = (\n  options: {\n    readonly maxAge: Duration.DurationInput\n    readonly maxSize: number\n    readonly error: number\n    readonly quantiles: ReadonlyArray<number>\n  }\n): MetricKeyType.MetricKeyType.Summary => {\n  return new SummaryKeyType(Duration.decode(options.maxAge), options.maxSize, options.error, options.quantiles)\n}\n\n/** @internal */\nexport const isMetricKeyType = (u: unknown): u is MetricKeyType.MetricKeyType<unknown, unknown> =>\n  hasProperty(u, MetricKeyTypeTypeId)\n\n/** @internal */\nexport const isCounterKey = (u: unknown): u is MetricKeyType.MetricKeyType.Counter<number | bigint> =>\n  hasProperty(u, CounterKeyTypeTypeId)\n\n/** @internal */\nexport const isFrequencyKey = (u: unknown): u is MetricKeyType.MetricKeyType.Frequency =>\n  hasProperty(u, FrequencyKeyTypeTypeId)\n\n/** @internal */\nexport const isGaugeKey = (u: unknown): u is MetricKeyType.MetricKeyType.Gauge<number | bigint> =>\n  hasProperty(u, GaugeKeyTypeTypeId)\n\n/** @internal */\nexport const isHistogramKey = (u: unknown): u is MetricKeyType.MetricKeyType.Histogram =>\n  hasProperty(u, HistogramKeyTypeTypeId)\n\n/** @internal */\nexport const isSummaryKey = (u: unknown): u is MetricKeyType.MetricKeyType.Summary =>\n  hasProperty(u, SummaryKeyTypeTypeId)\n"],"names":["Duration","Equal","pipe","Hash","pipeArguments","hasProperty","MetricKeyTypeSymbolKey","MetricKeyTypeTypeId","Symbol","for","CounterKeyTypeSymbolKey","CounterKeyTypeTypeId","FrequencyKeyTypeSymbolKey","FrequencyKeyTypeTypeId","GaugeKeyTypeSymbolKey","GaugeKeyTypeTypeId","HistogramKeyTypeSymbolKey","HistogramKeyTypeTypeId","SummaryKeyTypeSymbolKey","SummaryKeyTypeTypeId","metricKeyTypeVariance","_In","_","_Out","CounterKeyType","incremental","bigint","constructor","_hash","string","symbol","that","isCounterKey","arguments","FrequencyKeyTypeHash","FrequencyKeyType","preregisteredWords","isFrequencyKey","GaugeKeyTypeHash","GaugeKeyType","isGaugeKey","HistogramKeyType","boundaries","combine","hash","isHistogramKey","equals","SummaryKeyType","maxAge","maxSize","error","quantiles","array","isSummaryKey","counter","options","frequency","gauge","histogram","summary","decode","isMetricKeyType","u"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 4874, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 4880, "column": 0}, "map": {"version":3,"file":"state.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/state.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport * as Equal from \"../../Equal.js\"\nimport { pipe } from \"../../Function.js\"\nimport * as Hash from \"../../Hash.js\"\nimport type * as MetricState from \"../../MetricState.js\"\nimport type * as Option from \"../../Option.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport { hasProperty } from \"../../Predicate.js\"\n\n/** @internal */\nconst MetricStateSymbolKey = \"effect/MetricState\"\n\n/** @internal */\nexport const MetricStateTypeId: MetricState.MetricStateTypeId = Symbol.for(\n  MetricStateSymbolKey\n) as MetricState.MetricStateTypeId\n\n/** @internal */\nconst CounterStateSymbolKey = \"effect/MetricState/Counter\"\n\n/** @internal */\nexport const CounterStateTypeId: MetricState.CounterStateTypeId = Symbol.for(\n  CounterStateSymbolKey\n) as MetricState.CounterStateTypeId\n\n/** @internal */\nconst FrequencyStateSymbolKey = \"effect/MetricState/Frequency\"\n\n/** @internal */\nexport const FrequencyStateTypeId: MetricState.FrequencyStateTypeId = Symbol.for(\n  FrequencyStateSymbolKey\n) as MetricState.FrequencyStateTypeId\n\n/** @internal */\nconst GaugeStateSymbolKey = \"effect/MetricState/Gauge\"\n\n/** @internal */\nexport const GaugeStateTypeId: MetricState.GaugeStateTypeId = Symbol.for(\n  GaugeStateSymbolKey\n) as MetricState.GaugeStateTypeId\n\n/** @internal */\nconst HistogramStateSymbolKey = \"effect/MetricState/Histogram\"\n\n/** @internal */\nexport const HistogramStateTypeId: MetricState.HistogramStateTypeId = Symbol.for(\n  HistogramStateSymbolKey\n) as MetricState.HistogramStateTypeId\n\n/** @internal */\nconst SummaryStateSymbolKey = \"effect/MetricState/Summary\"\n\n/** @internal */\nexport const SummaryStateTypeId: MetricState.SummaryStateTypeId = Symbol.for(\n  SummaryStateSymbolKey\n) as MetricState.SummaryStateTypeId\n\nconst metricStateVariance = {\n  /* c8 ignore next */\n  _A: (_: unknown) => _\n}\n\n/** @internal */\nclass CounterState<A extends (number | bigint)> implements MetricState.MetricState.Counter<A> {\n  readonly [MetricStateTypeId] = metricStateVariance\n  readonly [CounterStateTypeId]: MetricState.CounterStateTypeId = CounterStateTypeId\n  constructor(readonly count: A) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(CounterStateSymbolKey),\n      Hash.combine(Hash.hash(this.count)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isCounterState(that) && this.count === that.count\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nconst arrayEquals = Arr.getEquivalence(Equal.equals)\n\n/** @internal */\nclass FrequencyState implements MetricState.MetricState.Frequency {\n  readonly [MetricStateTypeId] = metricStateVariance\n  readonly [FrequencyStateTypeId]: MetricState.FrequencyStateTypeId = FrequencyStateTypeId\n  constructor(readonly occurrences: ReadonlyMap<string, number>) {}\n  _hash: number | undefined;\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.string(FrequencyStateSymbolKey),\n      Hash.combine(Hash.array(Arr.fromIterable(this.occurrences.entries()))),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isFrequencyState(that) && arrayEquals(\n      Arr.fromIterable(this.occurrences.entries()),\n      Arr.fromIterable(that.occurrences.entries())\n    )\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nclass GaugeState<A extends (number | bigint)> implements MetricState.MetricState.Gauge<A> {\n  readonly [MetricStateTypeId] = metricStateVariance\n  readonly [GaugeStateTypeId]: MetricState.GaugeStateTypeId = GaugeStateTypeId\n  constructor(readonly value: A) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(GaugeStateSymbolKey),\n      Hash.combine(Hash.hash(this.value)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](u: unknown): boolean {\n    return isGaugeState(u) && this.value === u.value\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport class HistogramState implements MetricState.MetricState.Histogram {\n  readonly [MetricStateTypeId] = metricStateVariance\n  readonly [HistogramStateTypeId]: MetricState.HistogramStateTypeId = HistogramStateTypeId\n  constructor(\n    readonly buckets: ReadonlyArray<readonly [number, number]>,\n    readonly count: number,\n    readonly min: number,\n    readonly max: number,\n    readonly sum: number\n  ) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(HistogramStateSymbolKey),\n      Hash.combine(Hash.hash(this.buckets)),\n      Hash.combine(Hash.hash(this.count)),\n      Hash.combine(Hash.hash(this.min)),\n      Hash.combine(Hash.hash(this.max)),\n      Hash.combine(Hash.hash(this.sum)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isHistogramState(that) &&\n      Equal.equals(this.buckets, that.buckets) &&\n      this.count === that.count &&\n      this.min === that.min &&\n      this.max === that.max &&\n      this.sum === that.sum\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport class SummaryState implements MetricState.MetricState.Summary {\n  readonly [MetricStateTypeId] = metricStateVariance\n  readonly [SummaryStateTypeId]: MetricState.SummaryStateTypeId = SummaryStateTypeId\n  constructor(\n    readonly error: number,\n    readonly quantiles: ReadonlyArray<readonly [number, Option.Option<number>]>,\n    readonly count: number,\n    readonly min: number,\n    readonly max: number,\n    readonly sum: number\n  ) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(SummaryStateSymbolKey),\n      Hash.combine(Hash.hash(this.error)),\n      Hash.combine(Hash.hash(this.quantiles)),\n      Hash.combine(Hash.hash(this.count)),\n      Hash.combine(Hash.hash(this.min)),\n      Hash.combine(Hash.hash(this.max)),\n      Hash.combine(Hash.hash(this.sum)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isSummaryState(that) &&\n      this.error === that.error &&\n      Equal.equals(this.quantiles, that.quantiles) &&\n      this.count === that.count &&\n      this.min === that.min &&\n      this.max === that.max &&\n      this.sum === that.sum\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const counter: {\n  (count: number): MetricState.MetricState.Counter<number>\n  (count: bigint): MetricState.MetricState.Counter<bigint>\n} = (count) => new CounterState(count) as any\n\n/** @internal */\nexport const frequency = (occurrences: ReadonlyMap<string, number>): MetricState.MetricState.Frequency => {\n  return new FrequencyState(occurrences)\n}\n\n/** @internal */\nexport const gauge: {\n  (count: number): MetricState.MetricState.Gauge<number>\n  (count: bigint): MetricState.MetricState.Gauge<bigint>\n} = (count) => new GaugeState(count) as any\n\n/** @internal */\nexport const histogram = (\n  options: {\n    readonly buckets: ReadonlyArray<readonly [number, number]>\n    readonly count: number\n    readonly min: number\n    readonly max: number\n    readonly sum: number\n  }\n): MetricState.MetricState.Histogram =>\n  new HistogramState(\n    options.buckets,\n    options.count,\n    options.min,\n    options.max,\n    options.sum\n  )\n\n/** @internal */\nexport const summary = (\n  options: {\n    readonly error: number\n    readonly quantiles: ReadonlyArray<readonly [number, Option.Option<number>]>\n    readonly count: number\n    readonly min: number\n    readonly max: number\n    readonly sum: number\n  }\n): MetricState.MetricState.Summary =>\n  new SummaryState(\n    options.error,\n    options.quantiles,\n    options.count,\n    options.min,\n    options.max,\n    options.sum\n  )\n\n/** @internal */\nexport const isMetricState = (u: unknown): u is MetricState.MetricState.Counter<number | bigint> =>\n  hasProperty(u, MetricStateTypeId)\n\n/** @internal */\nexport const isCounterState = (u: unknown): u is MetricState.MetricState.Counter<number | bigint> =>\n  hasProperty(u, CounterStateTypeId)\n\n/**\n * @since 2.0.0\n * @category refinements\n */\nexport const isFrequencyState = (u: unknown): u is MetricState.MetricState.Frequency =>\n  hasProperty(u, FrequencyStateTypeId)\n\n/**\n * @since 2.0.0\n * @category refinements\n */\nexport const isGaugeState = (u: unknown): u is MetricState.MetricState.Gauge<number | bigint> =>\n  hasProperty(u, GaugeStateTypeId)\n\n/**\n * @since 2.0.0\n * @category refinements\n */\nexport const isHistogramState = (u: unknown): u is MetricState.MetricState.Histogram =>\n  hasProperty(u, HistogramStateTypeId)\n\n/**\n * @since 2.0.0\n * @category refinements\n */\nexport const isSummaryState = (u: unknown): u is MetricState.MetricState.Summary => hasProperty(u, SummaryStateTypeId)\n"],"names":["Arr","Equal","pipe","Hash","pipeArguments","hasProperty","MetricStateSymbolKey","MetricStateTypeId","Symbol","for","CounterStateSymbolKey","CounterStateTypeId","FrequencyStateSymbolKey","FrequencyStateTypeId","GaugeStateSymbolKey","GaugeStateTypeId","HistogramStateSymbolKey","HistogramStateTypeId","SummaryStateSymbolKey","SummaryStateTypeId","metricStateVariance","_A","_","CounterState","count","constructor","symbol","hash","combine","cached","that","isCounterState","arguments","arrayEquals","getEquivalence","equals","FrequencyState","occurrences","_hash","string","array","fromIterable","entries","isFrequencyState","GaugeState","value","u","isGaugeState","HistogramState","buckets","min","max","sum","isHistogramState","SummaryState","error","quantiles","isSummaryState","counter","frequency","gauge","histogram","options","summary","isMetricState"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5046, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5052, "column": 0}, "map": {"version":3,"file":"hook.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/hook.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport * as Duration from \"../../Duration.js\"\nimport type { LazyArg } from \"../../Function.js\"\nimport { dual, pipe } from \"../../Function.js\"\nimport type * as MetricHook from \"../../MetricHook.js\"\nimport type * as MetricKey from \"../../MetricKey.js\"\nimport type * as MetricState from \"../../MetricState.js\"\nimport * as number from \"../../Number.js\"\nimport * as Option from \"../../Option.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport * as metricState from \"./state.js\"\n\n/** @internal */\nconst MetricHookSymbolKey = \"effect/MetricHook\"\n\n/** @internal */\nexport const MetricHookTypeId: MetricHook.MetricHookTypeId = Symbol.for(\n  MetricHookSymbolKey\n) as MetricHook.MetricHookTypeId\n\nconst metricHookVariance = {\n  /* c8 ignore next */\n  _In: (_: unknown) => _,\n  /* c8 ignore next */\n  _Out: (_: never) => _\n}\n\n/** @internal */\nexport const make = <In, Out>(\n  options: {\n    readonly get: LazyArg<Out>\n    readonly update: (input: In) => void\n    readonly modify: (input: In) => void\n  }\n): MetricHook.MetricHook<In, Out> => ({\n  [MetricHookTypeId]: metricHookVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  ...options\n})\n\n/** @internal */\nexport const onModify = dual<\n  <In, Out>(f: (input: In) => void) => (self: MetricHook.MetricHook<In, Out>) => MetricHook.MetricHook<In, Out>,\n  <In, Out>(self: MetricHook.MetricHook<In, Out>, f: (input: In) => void) => MetricHook.MetricHook<In, Out>\n>(2, (self, f) => ({\n  [MetricHookTypeId]: metricHookVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  get: self.get,\n  update: self.update,\n  modify: (input) => {\n    self.modify(input)\n    return f(input)\n  }\n}))\n\n/** @internal */\nexport const onUpdate = dual<\n  <In, Out>(f: (input: In) => void) => (self: MetricHook.MetricHook<In, Out>) => MetricHook.MetricHook<In, Out>,\n  <In, Out>(self: MetricHook.MetricHook<In, Out>, f: (input: In) => void) => MetricHook.MetricHook<In, Out>\n>(2, (self, f) => ({\n  [MetricHookTypeId]: metricHookVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  get: self.get,\n  update: (input) => {\n    self.update(input)\n    return f(input)\n  },\n  modify: self.modify\n}))\n\nconst bigint0 = BigInt(0)\n\n/** @internal */\nexport const counter = <A extends (number | bigint)>(\n  key: MetricKey.MetricKey.Counter<A>\n): MetricHook.MetricHook.Counter<A> => {\n  let sum: A = key.keyType.bigint ? bigint0 as A : 0 as A\n  const canUpdate = key.keyType.incremental\n    ? key.keyType.bigint\n      ? (value: A) => value >= bigint0\n      : (value: A) => value >= 0\n    : (_value: A) => true\n  const update = (value: A) => {\n    if (canUpdate(value)) {\n      sum = (sum as any) + value\n    }\n  }\n  return make({\n    get: () => metricState.counter(sum as number) as unknown as MetricState.MetricState.Counter<A>,\n    update,\n    modify: update\n  })\n}\n\n/** @internal */\nexport const frequency = (key: MetricKey.MetricKey.Frequency): MetricHook.MetricHook.Frequency => {\n  const values = new Map<string, number>()\n  for (const word of key.keyType.preregisteredWords) {\n    values.set(word, 0)\n  }\n  const update = (word: string) => {\n    const slotCount = values.get(word) ?? 0\n    values.set(word, slotCount + 1)\n  }\n  return make({\n    get: () => metricState.frequency(values),\n    update,\n    modify: update\n  })\n}\n\n/** @internal */\nexport const gauge: {\n  (key: MetricKey.MetricKey.Gauge<number>, startAt: number): MetricHook.MetricHook.Gauge<number>\n  (key: MetricKey.MetricKey.Gauge<bigint>, startAt: bigint): MetricHook.MetricHook.Gauge<bigint>\n} = <A extends (number | bigint)>(\n  _key: MetricKey.MetricKey.Gauge<A>,\n  startAt: A\n): MetricHook.MetricHook.Gauge<A> => {\n  let value = startAt\n  return make({\n    get: () => metricState.gauge(value as number) as unknown as MetricState.MetricState.Gauge<A>,\n    update: (v) => {\n      value = v\n    },\n    modify: (v) => {\n      value = (value as any) + v\n    }\n  })\n}\n\n/** @internal */\nexport const histogram = (key: MetricKey.MetricKey.Histogram): MetricHook.MetricHook.Histogram => {\n  const bounds = key.keyType.boundaries.values\n  const size = bounds.length\n  const values = new Uint32Array(size + 1)\n  const boundaries = new Float32Array(size)\n  let count = 0\n  let sum = 0\n  let min = Number.MAX_VALUE\n  let max = Number.MIN_VALUE\n\n  pipe(\n    bounds,\n    Arr.sort(number.Order),\n    Arr.map((n, i) => {\n      boundaries[i] = n\n    })\n  )\n\n  // Insert the value into the right bucket with a binary search\n  const update = (value: number) => {\n    let from = 0\n    let to = size\n    while (from !== to) {\n      const mid = Math.floor(from + (to - from) / 2)\n      const boundary = boundaries[mid]\n      if (value <= boundary) {\n        to = mid\n      } else {\n        from = mid\n      }\n      // The special case when to / from have a distance of one\n      if (to === from + 1) {\n        if (value <= boundaries[from]) {\n          to = from\n        } else {\n          from = to\n        }\n      }\n    }\n    values[from] = values[from]! + 1\n    count = count + 1\n    sum = sum + value\n    if (value < min) {\n      min = value\n    }\n    if (value > max) {\n      max = value\n    }\n  }\n\n  const getBuckets = (): ReadonlyArray<readonly [number, number]> => {\n    const builder: Array<readonly [number, number]> = Arr.allocate(size) as any\n    let cumulated = 0\n    for (let i = 0; i < size; i++) {\n      const boundary = boundaries[i]\n      const value = values[i]\n      cumulated = cumulated + value\n      builder[i] = [boundary, cumulated]\n    }\n    return builder\n  }\n\n  return make({\n    get: () =>\n      metricState.histogram({\n        buckets: getBuckets(),\n        count,\n        min,\n        max,\n        sum\n      }),\n    update,\n    modify: update\n  })\n}\n\n/** @internal */\nexport const summary = (key: MetricKey.MetricKey.Summary): MetricHook.MetricHook.Summary => {\n  const { error, maxAge, maxSize, quantiles } = key.keyType\n  const sortedQuantiles = pipe(quantiles, Arr.sort(number.Order))\n  const values = Arr.allocate<readonly [number, number]>(maxSize)\n\n  let head = 0\n  let count = 0\n  let sum = 0\n  let min = Number.MAX_VALUE\n  let max = Number.MIN_VALUE\n\n  // Just before the snapshot we filter out all values older than maxAge\n  const snapshot = (now: number): ReadonlyArray<readonly [number, Option.Option<number>]> => {\n    const builder: Array<number> = []\n    // If the buffer is not full yet it contains valid items at the 0..last\n    // indices and null values at the rest of the positions.\n    //\n    // If the buffer is already full then all elements contains a valid\n    // measurement with timestamp.\n    //\n    // At any given point in time we can enumerate all the non-null elements in\n    // the buffer and filter them by timestamp to get a valid view of a time\n    // window.\n    //\n    // The order does not matter because it gets sorted before passing to\n    // `calculateQuantiles`.\n    let i = 0\n    while (i !== maxSize - 1) {\n      const item = values[i]\n      if (item != null) {\n        const [t, v] = item\n        const age = Duration.millis(now - t)\n        if (Duration.greaterThanOrEqualTo(age, Duration.zero) && age <= maxAge) {\n          builder.push(v)\n        }\n      }\n      i = i + 1\n    }\n    return calculateQuantiles(\n      error,\n      sortedQuantiles,\n      Arr.sort(builder, number.Order)\n    )\n  }\n\n  const observe = (value: number, timestamp: number) => {\n    if (maxSize > 0) {\n      head = head + 1\n      const target = head % maxSize\n      values[target] = [timestamp, value] as const\n    }\n    count = count + 1\n    sum = sum + value\n    if (value < min) {\n      min = value\n    }\n    if (value > max) {\n      max = value\n    }\n  }\n\n  return make({\n    get: () =>\n      metricState.summary({\n        error,\n        quantiles: snapshot(Date.now()),\n        count,\n        min,\n        max,\n        sum\n      }),\n    update: ([value, timestamp]) => observe(value, timestamp),\n    modify: ([value, timestamp]) => observe(value, timestamp)\n  })\n}\n\n/** @internal */\ninterface ResolvedQuantile {\n  /**\n   * The quantile that shall be resolved.\n   */\n  readonly quantile: number\n  /**\n   * `Some<number>` if a value for the quantile could be found, otherwise\n   * `None`.\n   */\n  readonly value: Option.Option<number>\n  /**\n   * How many samples have been consumed prior to this quantile.\n   */\n  readonly consumed: number\n  /**\n   * The rest of the samples after the quantile has been resolved.\n   */\n  readonly rest: ReadonlyArray<number>\n}\n\n/** @internal */\nconst calculateQuantiles = (\n  error: number,\n  sortedQuantiles: ReadonlyArray<number>,\n  sortedSamples: ReadonlyArray<number>\n): ReadonlyArray<readonly [number, Option.Option<number>]> => {\n  // The number of samples examined\n  const sampleCount = sortedSamples.length\n  if (!Arr.isNonEmptyReadonlyArray(sortedQuantiles)) {\n    return Arr.empty()\n  }\n  const head = sortedQuantiles[0]\n  const tail = sortedQuantiles.slice(1)\n  const resolvedHead = resolveQuantile(\n    error,\n    sampleCount,\n    Option.none(),\n    0,\n    head,\n    sortedSamples\n  )\n  const resolved = Arr.of(resolvedHead)\n  tail.forEach((quantile) => {\n    resolved.push(\n      resolveQuantile(\n        error,\n        sampleCount,\n        resolvedHead.value,\n        resolvedHead.consumed,\n        quantile,\n        resolvedHead.rest\n      )\n    )\n  })\n  return Arr.map(resolved, (rq) => [rq.quantile, rq.value] as const)\n}\n\n/** @internal */\nconst resolveQuantile = (\n  error: number,\n  sampleCount: number,\n  current: Option.Option<number>,\n  consumed: number,\n  quantile: number,\n  rest: ReadonlyArray<number>\n): ResolvedQuantile => {\n  let error_1 = error\n  let sampleCount_1 = sampleCount\n  let current_1 = current\n  let consumed_1 = consumed\n  let quantile_1 = quantile\n  let rest_1 = rest\n  let error_2 = error\n  let sampleCount_2 = sampleCount\n  let current_2 = current\n  let consumed_2 = consumed\n  let quantile_2 = quantile\n  let rest_2 = rest\n  // eslint-disable-next-line no-constant-condition\n  while (1) {\n    // If the remaining list of samples is empty, there is nothing more to resolve\n    if (!Arr.isNonEmptyReadonlyArray(rest_1)) {\n      return {\n        quantile: quantile_1,\n        value: Option.none(),\n        consumed: consumed_1,\n        rest: []\n      }\n    }\n    // If the quantile is the 100% quantile, we can take the maximum of all the\n    // remaining values as the result\n    if (quantile_1 === 1) {\n      return {\n        quantile: quantile_1,\n        value: Option.some(Arr.lastNonEmpty(rest_1)),\n        consumed: consumed_1 + rest_1.length,\n        rest: []\n      }\n    }\n    // Split into two chunks - the first chunk contains all elements of the same\n    // value as the chunk head\n    const sameHead = Arr.span(rest_1, (n) => n <= rest_1[0])\n    // How many elements do we want to accept for this quantile\n    const desired = quantile_1 * sampleCount_1\n    // The error margin\n    const allowedError = (error_1 / 2) * desired\n    // Taking into account the elements consumed from the samples so far and the\n    // number of same elements at the beginning of the chunk, calculate the number\n    // of elements we would have if we selected the current head as result\n    const candConsumed = consumed_1 + sameHead[0].length\n    const candError = Math.abs(candConsumed - desired)\n    // If we haven't got enough elements yet, recurse\n    if (candConsumed < desired - allowedError) {\n      error_2 = error_1\n      sampleCount_2 = sampleCount_1\n      current_2 = Arr.head(rest_1)\n      consumed_2 = candConsumed\n      quantile_2 = quantile_1\n      rest_2 = sameHead[1]\n      error_1 = error_2\n      sampleCount_1 = sampleCount_2\n      current_1 = current_2\n      consumed_1 = consumed_2\n      quantile_1 = quantile_2\n      rest_1 = rest_2\n      continue\n    }\n    // If we have too many elements, select the previous value and hand back the\n    // the rest as leftover\n    if (candConsumed > desired + allowedError) {\n      return {\n        quantile: quantile_1,\n        value: current_1,\n        consumed: consumed_1,\n        rest: rest_1\n      }\n    }\n    // If we are in the target interval, select the current head and hand back the leftover after dropping all elements\n    // from the sample chunk that are equal to the current head\n    switch (current_1._tag) {\n      case \"None\": {\n        error_2 = error_1\n        sampleCount_2 = sampleCount_1\n        current_2 = Arr.head(rest_1)\n        consumed_2 = candConsumed\n        quantile_2 = quantile_1\n        rest_2 = sameHead[1]\n        error_1 = error_2\n        sampleCount_1 = sampleCount_2\n        current_1 = current_2\n        consumed_1 = consumed_2\n        quantile_1 = quantile_2\n        rest_1 = rest_2\n        continue\n      }\n      case \"Some\": {\n        const prevError = Math.abs(desired - current_1.value)\n        if (candError < prevError) {\n          error_2 = error_1\n          sampleCount_2 = sampleCount_1\n          current_2 = Arr.head(rest_1)\n          consumed_2 = candConsumed\n          quantile_2 = quantile_1\n          rest_2 = sameHead[1]\n          error_1 = error_2\n          sampleCount_1 = sampleCount_2\n          current_1 = current_2\n          consumed_1 = consumed_2\n          quantile_1 = quantile_2\n          rest_1 = rest_2\n          continue\n        }\n        return {\n          quantile: quantile_1,\n          value: Option.some(current_1.value),\n          consumed: consumed_1,\n          rest: rest_1\n        }\n      }\n    }\n  }\n  throw new Error(\n    \"BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues\"\n  )\n}\n"],"names":["Arr","Duration","dual","pipe","number","Option","pipeArguments","metricState","MetricHookSymbolKey","MetricHookTypeId","Symbol","for","metricHookVariance","_In","_","_Out","make","options","arguments","onModify","self","f","get","update","modify","input","onUpdate","bigint0","BigInt","counter","key","sum","keyType","bigint","canUpdate","incremental","value","_value","frequency","values","Map","word","preregisteredWords","set","slotCount","gauge","_key","startAt","v","histogram","bounds","boundaries","size","length","Uint32Array","Float32Array","count","min","Number","MAX_VALUE","max","MIN_VALUE","sort","Order","map","n","i","from","to","mid","Math","floor","boundary","getBuckets","builder","allocate","cumulated","buckets","summary","error","maxAge","maxSize","quantiles","sortedQuantiles","head","snapshot","now","item","t","age","millis","greaterThanOrEqualTo","zero","push","calculateQuantiles","observe","timestamp","target","Date","sortedSamples","sampleCount","isNonEmptyReadonlyArray","empty","tail","slice","resolvedHead","resolveQuantile","none","resolved","of","forEach","quantile","consumed","rest","rq","current","error_1","sampleCount_1","current_1","consumed_1","quantile_1","rest_1","error_2","sampleCount_2","current_2","consumed_2","quantile_2","rest_2","some","lastNonEmpty","sameHead","span","desired","allowedError","candConsumed","candError","abs","_tag","prevError","Error"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5432, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5438, "column": 0}, "map": {"version":3,"file":"registry.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/registry.ts"],"sourcesContent":["import { pipe } from \"../../Function.js\"\nimport type * as MetricHook from \"../../MetricHook.js\"\nimport type * as MetricKey from \"../../MetricKey.js\"\nimport type * as MetricKeyType from \"../../MetricKeyType.js\"\nimport type * as MetricPair from \"../../MetricPair.js\"\nimport type * as MetricRegistry from \"../../MetricRegistry.js\"\nimport * as MutableHashMap from \"../../MutableHashMap.js\"\nimport * as Option from \"../../Option.js\"\nimport * as metricHook from \"./hook.js\"\nimport * as metricKeyType from \"./keyType.js\"\nimport * as metricPair from \"./pair.js\"\n\n/** @internal */\nconst MetricRegistrySymbolKey = \"effect/MetricRegistry\"\n\n/** @internal */\nexport const MetricRegistryTypeId: MetricRegistry.MetricRegistryTypeId = Symbol.for(\n  MetricRegistrySymbolKey\n) as MetricRegistry.MetricRegistryTypeId\n\n/** @internal */\nclass MetricRegistryImpl implements MetricRegistry.MetricRegistry {\n  readonly [MetricRegistryTypeId]: MetricRegistry.MetricRegistryTypeId = MetricRegistryTypeId\n\n  private map = MutableHashMap.empty<\n    MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>,\n    MetricHook.MetricHook.Root\n  >()\n\n  snapshot(): Array<MetricPair.MetricPair.Untyped> {\n    const result: Array<MetricPair.MetricPair.Untyped> = []\n    for (const [key, hook] of this.map) {\n      result.push(metricPair.unsafeMake(key, hook.get()))\n    }\n    return result\n  }\n\n  get<Type extends MetricKeyType.MetricKeyType<any, any>>(\n    key: MetricKey.MetricKey<Type>\n  ): MetricHook.MetricHook<\n    MetricKeyType.MetricKeyType.InType<typeof key[\"keyType\"]>,\n    MetricKeyType.MetricKeyType.OutType<typeof key[\"keyType\"]>\n  > {\n    const hook = pipe(\n      this.map,\n      MutableHashMap.get(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>),\n      Option.getOrUndefined\n    )\n    if (hook == null) {\n      if (metricKeyType.isCounterKey(key.keyType)) {\n        return this.getCounter(key as unknown as MetricKey.MetricKey.Counter<any>) as any\n      }\n      if (metricKeyType.isGaugeKey(key.keyType)) {\n        return this.getGauge(key as unknown as MetricKey.MetricKey.Gauge<any>) as any\n      }\n      if (metricKeyType.isFrequencyKey(key.keyType)) {\n        return this.getFrequency(key as unknown as MetricKey.MetricKey.Frequency) as any\n      }\n      if (metricKeyType.isHistogramKey(key.keyType)) {\n        return this.getHistogram(key as unknown as MetricKey.MetricKey.Histogram) as any\n      }\n      if (metricKeyType.isSummaryKey(key.keyType)) {\n        return this.getSummary(key as unknown as MetricKey.MetricKey.Summary) as any\n      }\n      throw new Error(\n        \"BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues\"\n      )\n    } else {\n      return hook as any\n    }\n  }\n\n  getCounter<A extends (number | bigint)>(key: MetricKey.MetricKey.Counter<A>): MetricHook.MetricHook.Counter<A> {\n    let value = pipe(\n      this.map,\n      MutableHashMap.get(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>),\n      Option.getOrUndefined\n    )\n    if (value == null) {\n      const counter = metricHook.counter(key)\n      if (!pipe(this.map, MutableHashMap.has(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>))) {\n        pipe(\n          this.map,\n          MutableHashMap.set(\n            key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>,\n            counter as MetricHook.MetricHook.Root\n          )\n        )\n      }\n      value = counter\n    }\n    return value as MetricHook.MetricHook.Counter<A>\n  }\n\n  getFrequency(key: MetricKey.MetricKey.Frequency): MetricHook.MetricHook.Frequency {\n    let value = pipe(\n      this.map,\n      MutableHashMap.get(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>),\n      Option.getOrUndefined\n    )\n    if (value == null) {\n      const frequency = metricHook.frequency(key)\n      if (!pipe(this.map, MutableHashMap.has(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>))) {\n        pipe(\n          this.map,\n          MutableHashMap.set(\n            key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>,\n            frequency as MetricHook.MetricHook.Root\n          )\n        )\n      }\n      value = frequency\n    }\n    return value as MetricHook.MetricHook.Frequency\n  }\n\n  getGauge<A extends (number | bigint)>(key: MetricKey.MetricKey.Gauge<A>): MetricHook.MetricHook.Gauge<A> {\n    let value = pipe(\n      this.map,\n      MutableHashMap.get(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>),\n      Option.getOrUndefined\n    )\n    if (value == null) {\n      const gauge = metricHook.gauge(key as any, key.keyType.bigint ? BigInt(0) as any : 0)\n      if (!pipe(this.map, MutableHashMap.has(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>))) {\n        pipe(\n          this.map,\n          MutableHashMap.set(\n            key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>,\n            gauge as MetricHook.MetricHook.Root\n          )\n        )\n      }\n      value = gauge\n    }\n    return value as MetricHook.MetricHook.Gauge<A>\n  }\n\n  getHistogram(key: MetricKey.MetricKey.Histogram): MetricHook.MetricHook.Histogram {\n    let value = pipe(\n      this.map,\n      MutableHashMap.get(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>),\n      Option.getOrUndefined\n    )\n    if (value == null) {\n      const histogram = metricHook.histogram(key)\n      if (!pipe(this.map, MutableHashMap.has(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>))) {\n        pipe(\n          this.map,\n          MutableHashMap.set(\n            key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>,\n            histogram as MetricHook.MetricHook.Root\n          )\n        )\n      }\n      value = histogram\n    }\n    return value as MetricHook.MetricHook.Histogram\n  }\n\n  getSummary(key: MetricKey.MetricKey.Summary): MetricHook.MetricHook.Summary {\n    let value = pipe(\n      this.map,\n      MutableHashMap.get(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>),\n      Option.getOrUndefined\n    )\n    if (value == null) {\n      const summary = metricHook.summary(key)\n      if (!pipe(this.map, MutableHashMap.has(key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>))) {\n        pipe(\n          this.map,\n          MutableHashMap.set(\n            key as MetricKey.MetricKey<MetricKeyType.MetricKeyType.Untyped>,\n            summary as MetricHook.MetricHook.Root\n          )\n        )\n      }\n      value = summary\n    }\n    return value as MetricHook.MetricHook.Summary\n  }\n}\n\n/** @internal */\nexport const make = (): MetricRegistry.MetricRegistry => {\n  return new MetricRegistryImpl()\n}\n"],"names":["pipe","MutableHashMap","Option","metricHook","metricKeyType","metricPair","MetricRegistrySymbolKey","MetricRegistryTypeId","Symbol","for","MetricRegistryImpl","map","empty","snapshot","result","key","hook","push","unsafeMake","get","getOrUndefined","isCounterKey","keyType","getCounter","isGaugeKey","getGauge","isFrequencyKey","getFrequency","isHistogramKey","getHistogram","isSummaryKey","getSummary","Error","value","counter","has","set","frequency","gauge","bigint","BigInt","histogram","summary","make"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5548, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5554, "column": 0}, "map": {"version":3,"file":"label.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/label.ts"],"sourcesContent":["import * as Equal from \"../../Equal.js\"\nimport * as Hash from \"../../Hash.js\"\nimport type * as MetricLabel from \"../../MetricLabel.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport { hasProperty } from \"../../Predicate.js\"\n\n/** @internal */\nconst MetricLabelSymbolKey = \"effect/MetricLabel\"\n\n/** @internal */\nexport const MetricLabelTypeId: MetricLabel.MetricLabelTypeId = Symbol.for(\n  MetricLabelSymbolKey\n) as MetricLabel.MetricLabelTypeId\n\n/** @internal */\nclass MetricLabelImpl implements MetricLabel.MetricLabel {\n  readonly [MetricLabelTypeId]: MetricLabel.MetricLabelTypeId = MetricLabelTypeId\n  readonly _hash: number\n  constructor(readonly key: string, readonly value: string) {\n    this._hash = Hash.string(MetricLabelSymbolKey + this.key + this.value)\n  }\n  [Hash.symbol](): number {\n    return this._hash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isMetricLabel(that) &&\n      this.key === that.key &&\n      this.value === that.value\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const make = (key: string, value: string): MetricLabel.MetricLabel => {\n  return new MetricLabelImpl(key, value)\n}\n\n/** @internal */\nexport const isMetricLabel = (u: unknown): u is MetricLabel.MetricLabel => hasProperty(u, MetricLabelTypeId)\n"],"names":["Equal","Hash","pipeArguments","hasProperty","MetricLabelSymbolKey","MetricLabelTypeId","Symbol","for","MetricLabelImpl","key","value","_hash","constructor","string","symbol","that","isMetricLabel","pipe","arguments","make","u"],"mappings":";;;;;AACA,OAAO,KAAKC,IAAI,MAAM,eAAe;AADrC,OAAO,KAAKD,KAAK,MAAM,gBAAgB;AAGvC,SAASE,aAAa,QAAQ,mBAAmB;AACjD,SAASC,WAAW,QAAQ,oBAAoB;;;;;AAEhD,cAAA,GACA,MAAMC,oBAAoB,GAAG,oBAAoB;AAG1C,MAAMC,iBAAiB,GAAA,WAAA,GAAkCC,MAAM,CAACC,GAAG,CACxEH,oBAAoB,CACY;AAElC,cAAA,GACA,MAAMI,eAAe;IAGEC,GAAA,CAAA;IAAsBC,KAAA,CAAA;IAFlC,CAACL,iBAAiB,CAAA,GAAmCA,iBAAiB,CAAA;IACtEM,KAAK,CAAA;IACdC,YAAqBH,GAAW,EAAWC,KAAa,CAAA;QAAnC,IAAA,CAAAD,GAAG,GAAHA,GAAG;QAAmB,IAAA,CAAAC,KAAK,GAALA,KAAK;QAC9C,IAAI,CAACC,KAAK,GAAGV,IAAI,4IAACY,MAAM,CAACT,oBAAoB,GAAG,IAAI,CAACK,GAAG,GAAG,IAAI,CAACC,KAAK,CAAC;IACxE;IACA,CAACT,IAAI,4IAACa,MAAM,CAAA,GAAC;QACX,OAAO,IAAI,CAACH,KAAK;IACnB;IACA,CAACX,KAAK,4IAACc,MAAM,CAAA,CAAEC,IAAa,EAAA;QAC1B,OAAOC,aAAa,CAACD,IAAI,CAAC,IACxB,IAAI,CAACN,GAAG,KAAKM,IAAI,CAACN,GAAG,IACrB,IAAI,CAACC,KAAK,KAAKK,IAAI,CAACL,KAAK;IAC7B;IACAO,IAAIA,CAAA,EAAA;QACF,QAAOf,uKAAAA,AAAa,EAAC,IAAI,EAAEgB,SAAS,CAAC;IACvC;;AAIK,MAAMC,IAAI,GAAGA,CAACV,GAAW,EAAEC,KAAa,KAA6B;IAC1E,OAAO,IAAIF,eAAe,CAACC,GAAG,EAAEC,KAAK,CAAC;AACxC,CAAC;AAGM,MAAMM,aAAa,IAAII,CAAU,4JAAmCjB,cAAAA,AAAW,EAACiB,CAAC,EAAEf,iBAAiB,CAAC","ignoreList":[0]}},
    {"offset": {"line": 5593, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5599, "column": 0}, "map": {"version":3,"file":"key.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/key.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport type * as Duration from \"../../Duration.js\"\nimport * as Equal from \"../../Equal.js\"\nimport { dual, pipe } from \"../../Function.js\"\nimport * as Hash from \"../../Hash.js\"\nimport type * as MetricBoundaries from \"../../MetricBoundaries.js\"\nimport type * as MetricKey from \"../../MetricKey.js\"\nimport type * as MetricKeyType from \"../../MetricKeyType.js\"\nimport type * as MetricLabel from \"../../MetricLabel.js\"\nimport * as Option from \"../../Option.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport { hasProperty } from \"../../Predicate.js\"\nimport * as metricKeyType from \"./keyType.js\"\nimport * as metricLabel from \"./label.js\"\n\n/** @internal */\nconst MetricKeySymbolKey = \"effect/MetricKey\"\n\n/** @internal */\nexport const MetricKeyTypeId: MetricKey.MetricKeyTypeId = Symbol.for(\n  MetricKeySymbolKey\n) as MetricKey.MetricKeyTypeId\n\nconst metricKeyVariance = {\n  /* c8 ignore next */\n  _Type: (_: never) => _\n}\n\nconst arrayEquivilence = Arr.getEquivalence(Equal.equals)\n\n/** @internal */\nclass MetricKeyImpl<out Type extends MetricKeyType.MetricKeyType<any, any>> implements MetricKey.MetricKey<Type> {\n  readonly [MetricKeyTypeId] = metricKeyVariance\n  constructor(\n    readonly name: string,\n    readonly keyType: Type,\n    readonly description: Option.Option<string>,\n    readonly tags: ReadonlyArray<MetricLabel.MetricLabel> = []\n  ) {\n    this._hash = pipe(\n      Hash.string(this.name + this.description),\n      Hash.combine(Hash.hash(this.keyType)),\n      Hash.combine(Hash.array(this.tags))\n    )\n  }\n  readonly _hash: number;\n  [Hash.symbol](): number {\n    return this._hash\n  }\n  [Equal.symbol](u: unknown): boolean {\n    return isMetricKey(u) &&\n      this.name === u.name &&\n      Equal.equals(this.keyType, u.keyType) &&\n      Equal.equals(this.description, u.description) &&\n      arrayEquivilence(this.tags, u.tags)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const isMetricKey = (u: unknown): u is MetricKey.MetricKey<MetricKeyType.MetricKeyType<unknown, unknown>> =>\n  hasProperty(u, MetricKeyTypeId)\n\n/** @internal */\nexport const counter: {\n  (name: string, options?: {\n    readonly description?: string | undefined\n    readonly bigint?: false | undefined\n    readonly incremental?: boolean | undefined\n  }): MetricKey.MetricKey.Counter<number>\n  (name: string, options: {\n    readonly description?: string | undefined\n    readonly bigint: true\n    readonly incremental?: boolean | undefined\n  }): MetricKey.MetricKey.Counter<bigint>\n} = (name: string, options) =>\n  new MetricKeyImpl(\n    name,\n    metricKeyType.counter(options as any),\n    Option.fromNullable(options?.description)\n  )\n\n/** @internal */\nexport const frequency = (name: string, options?: {\n  readonly description?: string | undefined\n  readonly preregisteredWords?: ReadonlyArray<string> | undefined\n}): MetricKey.MetricKey.Frequency =>\n  new MetricKeyImpl(name, metricKeyType.frequency(options), Option.fromNullable(options?.description))\n\n/** @internal */\nexport const gauge: {\n  (name: string, options?: {\n    readonly description?: string | undefined\n    readonly bigint?: false | undefined\n  }): MetricKey.MetricKey.Gauge<number>\n  (name: string, options: {\n    readonly description?: string | undefined\n    readonly bigint: true\n  }): MetricKey.MetricKey.Gauge<bigint>\n} = (name, options) =>\n  new MetricKeyImpl(\n    name,\n    metricKeyType.gauge(options as any),\n    Option.fromNullable(options?.description)\n  )\n\n/** @internal */\nexport const histogram = (\n  name: string,\n  boundaries: MetricBoundaries.MetricBoundaries,\n  description?: string\n): MetricKey.MetricKey.Histogram =>\n  new MetricKeyImpl(\n    name,\n    metricKeyType.histogram(boundaries),\n    Option.fromNullable(description)\n  )\n\n/** @internal */\nexport const summary = (\n  options: {\n    readonly name: string\n    readonly maxAge: Duration.DurationInput\n    readonly maxSize: number\n    readonly error: number\n    readonly quantiles: ReadonlyArray<number>\n    readonly description?: string | undefined\n  }\n): MetricKey.MetricKey.Summary =>\n  new MetricKeyImpl(\n    options.name,\n    metricKeyType.summary(options),\n    Option.fromNullable(options.description)\n  )\n\n/** @internal */\nexport const tagged = dual<\n  (\n    key: string,\n    value: string\n  ) => <Type extends MetricKeyType.MetricKeyType<any, any>>(\n    self: MetricKey.MetricKey<Type>\n  ) => MetricKey.MetricKey<Type>,\n  <Type extends MetricKeyType.MetricKeyType<any, any>>(\n    self: MetricKey.MetricKey<Type>,\n    key: string,\n    value: string\n  ) => MetricKey.MetricKey<Type>\n>(3, (self, key, value) => taggedWithLabels(self, [metricLabel.make(key, value)]))\n\n/** @internal */\nexport const taggedWithLabels = dual<\n  (\n    extraTags: ReadonlyArray<MetricLabel.MetricLabel>\n  ) => <Type extends MetricKeyType.MetricKeyType<any, any>>(\n    self: MetricKey.MetricKey<Type>\n  ) => MetricKey.MetricKey<Type>,\n  <Type extends MetricKeyType.MetricKeyType<any, any>>(\n    self: MetricKey.MetricKey<Type>,\n    extraTags: ReadonlyArray<MetricLabel.MetricLabel>\n  ) => MetricKey.MetricKey<Type>\n>(2, (self, extraTags) =>\n  extraTags.length === 0\n    ? self\n    : new MetricKeyImpl(self.name, self.keyType, self.description, Arr.union(self.tags, extraTags)))\n"],"names":["Arr","Equal","dual","pipe","Hash","Option","pipeArguments","hasProperty","metricKeyType","metricLabel","MetricKeySymbolKey","MetricKeyTypeId","Symbol","for","metricKeyVariance","_Type","_","arrayEquivilence","getEquivalence","equals","MetricKeyImpl","name","keyType","description","tags","constructor","_hash","string","combine","hash","array","symbol","u","isMetricKey","arguments","counter","options","fromNullable","frequency","gauge","histogram","boundaries","summary","tagged","self","key","value","taggedWithLabels","make","extraTags","length","union"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5668, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5674, "column": 0}, "map": {"version":3,"file":"boundaries.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric/boundaries.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport * as Chunk from \"../../Chunk.js\"\nimport * as Equal from \"../../Equal.js\"\nimport { pipe } from \"../../Function.js\"\nimport * as Hash from \"../../Hash.js\"\nimport type * as MetricBoundaries from \"../../MetricBoundaries.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport { hasProperty } from \"../../Predicate.js\"\n\n/** @internal */\nconst MetricBoundariesSymbolKey = \"effect/MetricBoundaries\"\n\n/** @internal */\nexport const MetricBoundariesTypeId: MetricBoundaries.MetricBoundariesTypeId = Symbol.for(\n  MetricBoundariesSymbolKey\n) as MetricBoundaries.MetricBoundariesTypeId\n\n/** @internal */\nclass MetricBoundariesImpl implements MetricBoundaries.MetricBoundaries {\n  readonly [MetricBoundariesTypeId]: MetricBoundaries.MetricBoundariesTypeId = MetricBoundariesTypeId\n  constructor(readonly values: ReadonlyArray<number>) {\n    this._hash = pipe(\n      Hash.string(MetricBoundariesSymbolKey),\n      Hash.combine(Hash.array(this.values))\n    )\n  }\n  readonly _hash: number;\n  [Hash.symbol](): number {\n    return this._hash\n  }\n  [Equal.symbol](u: unknown): boolean {\n    return isMetricBoundaries(u) && Equal.equals(this.values, u.values)\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const isMetricBoundaries = (u: unknown): u is MetricBoundaries.MetricBoundaries =>\n  hasProperty(u, MetricBoundariesTypeId)\n\n/** @internal */\nexport const fromIterable = (iterable: Iterable<number>): MetricBoundaries.MetricBoundaries => {\n  const values = pipe(\n    iterable,\n    Arr.appendAll(Chunk.of(Number.POSITIVE_INFINITY)),\n    Arr.dedupe\n  )\n  return new MetricBoundariesImpl(values)\n}\n\n/** @internal */\nexport const linear = (options: {\n  readonly start: number\n  readonly width: number\n  readonly count: number\n}): MetricBoundaries.MetricBoundaries =>\n  pipe(\n    Arr.makeBy(options.count - 1, (i) => options.start + i * options.width),\n    Chunk.unsafeFromArray,\n    fromIterable\n  )\n\n/** @internal */\nexport const exponential = (options: {\n  readonly start: number\n  readonly factor: number\n  readonly count: number\n}): MetricBoundaries.MetricBoundaries =>\n  pipe(\n    Arr.makeBy(options.count - 1, (i) => options.start * Math.pow(options.factor, i)),\n    Chunk.unsafeFromArray,\n    fromIterable\n  )\n"],"names":["Arr","Chunk","Equal","pipe","Hash","pipeArguments","hasProperty","MetricBoundariesSymbolKey","MetricBoundariesTypeId","Symbol","for","MetricBoundariesImpl","values","constructor","_hash","string","combine","array","symbol","u","isMetricBoundaries","equals","arguments","fromIterable","iterable","appendAll","of","Number","POSITIVE_INFINITY","dedupe","linear","options","makeBy","count","i","start","width","unsafeFromArray","exponential","Math","pow","factor"],"mappings":";;;;;;;AAGA,SAASG,IAAI,QAAQ,mBAAmB;AACxC,OAAO,KAAKC,IAAI,MAAM,eAAe;AAFrC,OAAO,KAAKF,KAAK,MAAM,gBAAgB;AAIvC,SAASG,aAAa,QAAQ,mBAAmB;AACjD,SAASC,WAAW,QAAQ,oBAAoB;AAPhD,OAAO,KAAKN,GAAG,MAAM,gBAAgB;AACrC,OAAO,KAAKC,KAAK,MAAM,gBAAgB;;;;;;;;AAQvC,cAAA,GACA,MAAMM,yBAAyB,GAAG,yBAAyB;AAGpD,MAAMC,sBAAsB,GAAA,WAAA,GAA4CC,MAAM,CAACC,GAAG,CACvFH,yBAAyB,CACiB;AAE5C,cAAA,GACA,MAAMI,oBAAoB;IAEHC,MAAA,CAAA;IADZ,CAACJ,sBAAsB,CAAA,GAA6CA,sBAAsB,CAAA;IACnGK,YAAqBD,MAA6B,CAAA;QAA7B,IAAA,CAAAA,MAAM,GAANA,MAAM;QACzB,IAAI,CAACE,KAAK,2JAAGX,OAAAA,AAAI,EACfC,IAAI,4IAACW,MAAM,CAACR,yBAAyB,CAAC,EACtCH,IAAI,4IAACY,OAAO,CAACZ,IAAI,4IAACa,KAAK,CAAC,IAAI,CAACL,MAAM,CAAC,CAAC,CACtC;IACH;IACSE,KAAK,CAAA;IACd,CAACV,IAAI,4IAACc,MAAM,CAAA,GAAC;QACX,OAAO,IAAI,CAACJ,KAAK;IACnB;IACA,CAACZ,KAAK,4IAACgB,MAAM,CAAA,CAAEC,CAAU,EAAA;QACvB,OAAOC,kBAAkB,CAACD,CAAC,CAAC,IAAIjB,KAAK,4IAACmB,MAAM,CAAC,IAAI,CAACT,MAAM,EAAEO,CAAC,CAACP,MAAM,CAAC;IACrE;IACAT,IAAIA,CAAA,EAAA;QACF,+JAAOE,gBAAAA,AAAa,EAAC,IAAI,EAAEiB,SAAS,CAAC;IACvC;;AAIK,MAAMF,kBAAkB,IAAID,CAAU,IAC3Cb,sKAAAA,AAAW,EAACa,CAAC,EAAEX,sBAAsB,CAAC;AAGjC,MAAMe,YAAY,IAAIC,QAA0B,IAAuC;IAC5F,MAAMZ,MAAM,2JAAGT,OAAAA,AAAI,EACjBqB,QAAQ,EACRxB,GAAG,8IAACyB,SAAS,CAACxB,KAAK,4IAACyB,EAAE,CAACC,MAAM,CAACC,iBAAiB,CAAC,CAAC,EACjD5B,GAAG,8IAAC6B,MAAM,CACX;IACD,OAAO,IAAIlB,oBAAoB,CAACC,MAAM,CAAC;AACzC,CAAC;AAGM,MAAMkB,MAAM,IAAIC,OAItB,2JACC5B,OAAAA,AAAI,EACFH,GAAG,8IAACgC,MAAM,CAACD,OAAO,CAACE,KAAK,GAAG,CAAC,EAAGC,CAAC,IAAKH,OAAO,CAACI,KAAK,GAAGD,CAAC,GAAGH,OAAO,CAACK,KAAK,CAAC,EACvEnC,KAAK,4IAACoC,eAAe,EACrBd,YAAY,CACb;AAGI,MAAMe,WAAW,IAAIP,OAI3B,2JACC5B,OAAAA,AAAI,EACFH,GAAG,8IAACgC,MAAM,CAACD,OAAO,CAACE,KAAK,GAAG,CAAC,GAAGC,CAAC,GAAKH,OAAO,CAACI,KAAK,GAAGI,IAAI,CAACC,GAAG,CAACT,OAAO,CAACU,MAAM,EAAEP,CAAC,CAAC,CAAC,EACjFjC,KAAK,4IAACoC,eAAe,EACrBd,YAAY,CACb","ignoreList":[0]}},
    {"offset": {"line": 5722, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5728, "column": 0}, "map": {"version":3,"file":"clock.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/clock.ts"],"sourcesContent":["import type * as Clock from \"../Clock.js\"\nimport * as Context from \"../Context.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport { constFalse } from \"../Function.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nconst ClockSymbolKey = \"effect/Clock\"\n\n/** @internal */\nexport const ClockTypeId: Clock.ClockTypeId = Symbol.for(ClockSymbolKey) as Clock.ClockTypeId\n\n/** @internal */\nexport const clockTag: Context.Tag<Clock.Clock, Clock.Clock> = Context.GenericTag(\"effect/Clock\")\n\n/** @internal */\nexport const MAX_TIMER_MILLIS = 2 ** 31 - 1\n\n/** @internal */\nexport const globalClockScheduler: Clock.ClockScheduler = {\n  unsafeSchedule(task: Clock.Task, duration: Duration.Duration): Clock.CancelToken {\n    const millis = Duration.toMillis(duration)\n    // If the duration is greater than the value allowable by the JS timer\n    // functions, treat the value as an infinite duration\n    if (millis > MAX_TIMER_MILLIS) {\n      return constFalse\n    }\n    let completed = false\n    const handle = setTimeout(() => {\n      completed = true\n      task()\n    }, millis)\n    return () => {\n      clearTimeout(handle)\n      return !completed\n    }\n  }\n}\n\nconst performanceNowNanos = (function() {\n  const bigint1e6 = BigInt(1_000_000)\n  if (typeof performance === \"undefined\") {\n    return () => BigInt(Date.now()) * bigint1e6\n  } else if (typeof performance.timeOrigin === \"number\" && performance.timeOrigin === 0) {\n    return () => BigInt(Math.round(performance.now() * 1_000_000))\n  }\n  const origin = (BigInt(Date.now()) * bigint1e6) - BigInt(Math.round(performance.now() * 1_000_000))\n  return () => origin + BigInt(Math.round(performance.now() * 1_000_000))\n})()\nconst processOrPerformanceNow = (function() {\n  const processHrtime =\n    typeof process === \"object\" && \"hrtime\" in process && typeof process.hrtime.bigint === \"function\" ?\n      process.hrtime :\n      undefined\n  if (!processHrtime) {\n    return performanceNowNanos\n  }\n  const origin = performanceNowNanos() - processHrtime.bigint()\n  return () => origin + processHrtime.bigint()\n})()\n\n/** @internal */\nclass ClockImpl implements Clock.Clock {\n  readonly [ClockTypeId]: Clock.ClockTypeId = ClockTypeId\n\n  unsafeCurrentTimeMillis(): number {\n    return Date.now()\n  }\n\n  unsafeCurrentTimeNanos(): bigint {\n    return processOrPerformanceNow()\n  }\n\n  currentTimeMillis: Effect.Effect<number> = core.sync(() => this.unsafeCurrentTimeMillis())\n\n  currentTimeNanos: Effect.Effect<bigint> = core.sync(() => this.unsafeCurrentTimeNanos())\n\n  scheduler(): Effect.Effect<Clock.ClockScheduler> {\n    return core.succeed(globalClockScheduler)\n  }\n\n  sleep(duration: Duration.Duration): Effect.Effect<void> {\n    return core.async<void>((resume) => {\n      const canceler = globalClockScheduler.unsafeSchedule(() => resume(core.void), duration)\n      return core.asVoid(core.sync(canceler))\n    })\n  }\n}\n\n/** @internal */\nexport const make = (): Clock.Clock => new ClockImpl()\n"],"names":["Context","Duration","constFalse","core","ClockSymbolKey","ClockTypeId","Symbol","for","clockTag","GenericTag","MAX_TIMER_MILLIS","globalClockScheduler","unsafeSchedule","task","duration","millis","toMillis","completed","handle","setTimeout","clearTimeout","performanceNowNanos","bigint1e6","BigInt","performance","Date","now","timeOrigin","Math","round","origin","processOrPerformanceNow","processHrtime","process","hrtime","bigint","undefined","ClockImpl","unsafeCurrentTimeMillis","unsafeCurrentTimeNanos","currentTimeMillis","sync","currentTimeNanos","scheduler","succeed","sleep","async","resume","canceler","void","asVoid","make"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5805, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5811, "column": 0}, "map": {"version":3,"file":"console.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/defaultServices/console.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport type * as Console from \"../../Console.js\"\nimport * as Context from \"../../Context.js\"\nimport * as core from \"../core.js\"\n\n/** @internal */\nexport const TypeId: Console.TypeId = Symbol.for(\"effect/Console\") as Console.TypeId\n\n/** @internal */\nexport const consoleTag: Context.Tag<Console.Console, Console.Console> = Context.GenericTag<Console.Console>(\n  \"effect/Console\"\n)\n\n/** @internal */\nexport const defaultConsole: Console.Console = {\n  [TypeId]: TypeId,\n  assert(condition, ...args) {\n    return core.sync(() => {\n      console.assert(condition, ...args)\n    })\n  },\n  clear: core.sync(() => {\n    console.clear()\n  }),\n  count(label) {\n    return core.sync(() => {\n      console.count(label)\n    })\n  },\n  countReset(label) {\n    return core.sync(() => {\n      console.countReset(label)\n    })\n  },\n  debug(...args) {\n    return core.sync(() => {\n      console.debug(...args)\n    })\n  },\n  dir(item, options) {\n    return core.sync(() => {\n      console.dir(item, options)\n    })\n  },\n  dirxml(...args) {\n    return core.sync(() => {\n      console.dirxml(...args)\n    })\n  },\n  error(...args) {\n    return core.sync(() => {\n      console.error(...args)\n    })\n  },\n  group(options) {\n    return options?.collapsed ?\n      core.sync(() => console.groupCollapsed(options?.label)) :\n      core.sync(() => console.group(options?.label))\n  },\n  groupEnd: core.sync(() => {\n    console.groupEnd()\n  }),\n  info(...args) {\n    return core.sync(() => {\n      console.info(...args)\n    })\n  },\n  log(...args) {\n    return core.sync(() => {\n      console.log(...args)\n    })\n  },\n  table(tabularData, properties) {\n    return core.sync(() => {\n      console.table(tabularData, properties)\n    })\n  },\n  time(label) {\n    return core.sync(() => console.time(label))\n  },\n  timeEnd(label) {\n    return core.sync(() => console.timeEnd(label))\n  },\n  timeLog(label, ...args) {\n    return core.sync(() => {\n      console.timeLog(label, ...args)\n    })\n  },\n  trace(...args) {\n    return core.sync(() => {\n      console.trace(...args)\n    })\n  },\n  warn(...args) {\n    return core.sync(() => {\n      console.warn(...args)\n    })\n  },\n  unsafe: console\n}\n"],"names":["Context","core","TypeId","Symbol","for","consoleTag","GenericTag","defaultConsole","assert","condition","args","sync","console","clear","count","label","countReset","debug","dir","item","options","dirxml","error","group","collapsed","groupCollapsed","groupEnd","info","log","table","tabularData","properties","time","timeEnd","timeLog","trace","warn","unsafe"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5906, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5912, "column": 0}, "map": {"version":3,"file":"random.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/random.ts"],"sourcesContent":["import * as Chunk from \"../Chunk.js\"\nimport * as Context from \"../Context.js\"\nimport type * as Effect from \"../Effect.js\"\nimport { pipe } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport type * as Random from \"../Random.js\"\nimport * as PCGRandom from \"../Utils.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nconst RandomSymbolKey = \"effect/Random\"\n\n/** @internal */\nexport const RandomTypeId: Random.RandomTypeId = Symbol.for(\n  RandomSymbolKey\n) as Random.RandomTypeId\n\n/** @internal */\nexport const randomTag: Context.Tag<Random.Random, Random.Random> = Context.GenericTag(\"effect/Random\")\n/** @internal */\nclass RandomImpl implements Random.Random {\n  readonly [RandomTypeId]: Random.RandomTypeId = RandomTypeId\n\n  readonly PRNG: PCGRandom.PCGRandom\n\n  constructor(readonly seed: number) {\n    this.PRNG = new PCGRandom.PCGRandom(seed)\n  }\n\n  get next(): Effect.Effect<number> {\n    return core.sync(() => this.PRNG.number())\n  }\n\n  get nextBoolean(): Effect.Effect<boolean> {\n    return core.map(this.next, (n) => n > 0.5)\n  }\n\n  get nextInt(): Effect.Effect<number> {\n    return core.sync(() => this.PRNG.integer(Number.MAX_SAFE_INTEGER))\n  }\n\n  nextRange(min: number, max: number): Effect.Effect<number> {\n    return core.map(this.next, (n) => (max - min) * n + min)\n  }\n\n  nextIntBetween(min: number, max: number): Effect.Effect<number> {\n    return core.sync(() => this.PRNG.integer(max - min) + min)\n  }\n\n  shuffle<A>(elements: Iterable<A>): Effect.Effect<Chunk.Chunk<A>> {\n    return shuffleWith(elements, (n) => this.nextIntBetween(0, n))\n  }\n}\n\nconst shuffleWith = <A>(\n  elements: Iterable<A>,\n  nextIntBounded: (n: number) => Effect.Effect<number>\n): Effect.Effect<Chunk.Chunk<A>> => {\n  return core.suspend(() =>\n    pipe(\n      core.sync(() => Array.from(elements)),\n      core.flatMap((buffer) => {\n        const numbers: Array<number> = []\n        for (let i = buffer.length; i >= 2; i = i - 1) {\n          numbers.push(i)\n        }\n        return pipe(\n          numbers,\n          core.forEachSequentialDiscard((n) =>\n            pipe(\n              nextIntBounded(n),\n              core.map((k) => swap(buffer, n - 1, k))\n            )\n          ),\n          core.as(Chunk.fromIterable(buffer))\n        )\n      })\n    )\n  )\n}\n\nconst swap = <A>(buffer: Array<A>, index1: number, index2: number): Array<A> => {\n  const tmp = buffer[index1]!\n  buffer[index1] = buffer[index2]!\n  buffer[index2] = tmp\n  return buffer\n}\n\nexport const make = <A>(seed: A): Random.Random => new RandomImpl(Hash.hash(seed))\n"],"names":["Chunk","Context","pipe","Hash","PCGRandom","core","RandomSymbolKey","RandomTypeId","Symbol","for","randomTag","GenericTag","RandomImpl","seed","PRNG","constructor","next","sync","number","nextBoolean","map","n","nextInt","integer","Number","MAX_SAFE_INTEGER","nextRange","min","max","nextIntBetween","shuffle","elements","shuffleWith","nextIntBounded","suspend","Array","from","flatMap","buffer","numbers","i","length","push","forEachSequentialDiscard","k","swap","as","fromIterable","index1","index2","tmp","make","hash"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 5975, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 5981, "column": 0}, "map": {"version":3,"file":"configError.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/configError.ts"],"sourcesContent":["import * as RA from \"../Array.js\"\nimport type * as Cause from \"../Cause.js\"\nimport type * as ConfigError from \"../ConfigError.js\"\nimport * as Either from \"../Either.js\"\nimport { constFalse, constTrue, dual, pipe } from \"../Function.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport * as OpCodes from \"./opCodes/configError.js\"\n\n/** @internal */\nconst ConfigErrorSymbolKey = \"effect/ConfigError\"\n\n/** @internal */\nexport const ConfigErrorTypeId: ConfigError.ConfigErrorTypeId = Symbol.for(\n  ConfigErrorSymbolKey\n) as ConfigError.ConfigErrorTypeId\n\n/** @internal */\nexport const proto = {\n  _tag: \"ConfigError\",\n  [ConfigErrorTypeId]: ConfigErrorTypeId\n}\n\n/** @internal */\nexport const And = (self: ConfigError.ConfigError, that: ConfigError.ConfigError): ConfigError.ConfigError => {\n  const error = Object.create(proto)\n  error._op = OpCodes.OP_AND\n  error.left = self\n  error.right = that\n  Object.defineProperty(error, \"toString\", {\n    enumerable: false,\n    value(this: ConfigError.And) {\n      return `${this.left} and ${this.right}`\n    }\n  })\n  return error\n}\n\n/** @internal */\nexport const Or = (self: ConfigError.ConfigError, that: ConfigError.ConfigError): ConfigError.ConfigError => {\n  const error = Object.create(proto)\n  error._op = OpCodes.OP_OR\n  error.left = self\n  error.right = that\n  Object.defineProperty(error, \"toString\", {\n    enumerable: false,\n    value(this: ConfigError.Or) {\n      return `${this.left} or ${this.right}`\n    }\n  })\n  return error\n}\n\n/** @internal */\nexport const InvalidData = (\n  path: ReadonlyArray<string>,\n  message: string,\n  options: ConfigError.Options = { pathDelim: \".\" }\n): ConfigError.ConfigError => {\n  const error = Object.create(proto)\n  error._op = OpCodes.OP_INVALID_DATA\n  error.path = path\n  error.message = message\n  Object.defineProperty(error, \"toString\", {\n    enumerable: false,\n    value(this: ConfigError.InvalidData) {\n      const path = pipe(this.path, RA.join(options.pathDelim))\n      return `(Invalid data at ${path}: \"${this.message}\")`\n    }\n  })\n  return error\n}\n\n/** @internal */\nexport const MissingData = (\n  path: ReadonlyArray<string>,\n  message: string,\n  options: ConfigError.Options = { pathDelim: \".\" }\n): ConfigError.ConfigError => {\n  const error = Object.create(proto)\n  error._op = OpCodes.OP_MISSING_DATA\n  error.path = path\n  error.message = message\n  Object.defineProperty(error, \"toString\", {\n    enumerable: false,\n    value(this: ConfigError.MissingData) {\n      const path = pipe(this.path, RA.join(options.pathDelim))\n      return `(Missing data at ${path}: \"${this.message}\")`\n    }\n  })\n  return error\n}\n\n/** @internal */\nexport const SourceUnavailable = (\n  path: ReadonlyArray<string>,\n  message: string,\n  cause: Cause.Cause<unknown>,\n  options: ConfigError.Options = { pathDelim: \".\" }\n): ConfigError.ConfigError => {\n  const error = Object.create(proto)\n  error._op = OpCodes.OP_SOURCE_UNAVAILABLE\n  error.path = path\n  error.message = message\n  error.cause = cause\n  Object.defineProperty(error, \"toString\", {\n    enumerable: false,\n    value(this: ConfigError.SourceUnavailable) {\n      const path = pipe(this.path, RA.join(options.pathDelim))\n      return `(Source unavailable at ${path}: \"${this.message}\")`\n    }\n  })\n  return error\n}\n\n/** @internal */\nexport const Unsupported = (\n  path: ReadonlyArray<string>,\n  message: string,\n  options: ConfigError.Options = { pathDelim: \".\" }\n): ConfigError.ConfigError => {\n  const error = Object.create(proto)\n  error._op = OpCodes.OP_UNSUPPORTED\n  error.path = path\n  error.message = message\n  Object.defineProperty(error, \"toString\", {\n    enumerable: false,\n    value(this: ConfigError.Unsupported) {\n      const path = pipe(this.path, RA.join(options.pathDelim))\n      return `(Unsupported operation at ${path}: \"${this.message}\")`\n    }\n  })\n  return error\n}\n\n/** @internal */\nexport const isConfigError = (u: unknown): u is ConfigError.ConfigError => hasProperty(u, ConfigErrorTypeId)\n\n/** @internal */\nexport const isAnd = (self: ConfigError.ConfigError): self is ConfigError.And => self._op === OpCodes.OP_AND\n\n/** @internal */\nexport const isOr = (self: ConfigError.ConfigError): self is ConfigError.Or => self._op === OpCodes.OP_OR\n\n/** @internal */\nexport const isInvalidData = (self: ConfigError.ConfigError): self is ConfigError.InvalidData =>\n  self._op === OpCodes.OP_INVALID_DATA\n\n/** @internal */\nexport const isMissingData = (self: ConfigError.ConfigError): self is ConfigError.MissingData =>\n  self._op === OpCodes.OP_MISSING_DATA\n\n/** @internal */\nexport const isSourceUnavailable = (self: ConfigError.ConfigError): self is ConfigError.SourceUnavailable =>\n  self._op === OpCodes.OP_SOURCE_UNAVAILABLE\n\n/** @internal */\nexport const isUnsupported = (self: ConfigError.ConfigError): self is ConfigError.Unsupported =>\n  self._op === OpCodes.OP_UNSUPPORTED\n\n/** @internal */\nexport const prefixed: {\n  (prefix: ReadonlyArray<string>): (self: ConfigError.ConfigError) => ConfigError.ConfigError\n  (self: ConfigError.ConfigError, prefix: ReadonlyArray<string>): ConfigError.ConfigError\n} = dual<\n  (prefix: ReadonlyArray<string>) => (self: ConfigError.ConfigError) => ConfigError.ConfigError,\n  (self: ConfigError.ConfigError, prefix: ReadonlyArray<string>) => ConfigError.ConfigError\n>(2, (self, prefix) => {\n  switch (self._op) {\n    case OpCodes.OP_AND: {\n      return And(prefixed(self.left, prefix), prefixed(self.right, prefix))\n    }\n    case OpCodes.OP_OR: {\n      return Or(prefixed(self.left, prefix), prefixed(self.right, prefix))\n    }\n    case OpCodes.OP_INVALID_DATA: {\n      return InvalidData([...prefix, ...self.path], self.message)\n    }\n    case OpCodes.OP_MISSING_DATA: {\n      return MissingData([...prefix, ...self.path], self.message)\n    }\n    case OpCodes.OP_SOURCE_UNAVAILABLE: {\n      return SourceUnavailable([...prefix, ...self.path], self.message, self.cause)\n    }\n    case OpCodes.OP_UNSUPPORTED: {\n      return Unsupported([...prefix, ...self.path], self.message)\n    }\n  }\n})\n\n/** @internal */\nconst IsMissingDataOnlyReducer: ConfigError.ConfigErrorReducer<unknown, boolean> = {\n  andCase: (_, left, right) => left && right,\n  orCase: (_, left, right) => left && right,\n  invalidDataCase: constFalse,\n  missingDataCase: constTrue,\n  sourceUnavailableCase: constFalse,\n  unsupportedCase: constFalse\n}\n\n/** @internal */\ntype ConfigErrorCase = AndCase | OrCase\n\n/** @internal */\ninterface AndCase {\n  readonly _op: \"AndCase\"\n}\n\n/** @internal */\ninterface OrCase {\n  readonly _op: \"OrCase\"\n}\n\n/** @internal */\nexport const reduceWithContext = dual<\n  <C, Z>(context: C, reducer: ConfigError.ConfigErrorReducer<C, Z>) => (self: ConfigError.ConfigError) => Z,\n  <C, Z>(self: ConfigError.ConfigError, context: C, reducer: ConfigError.ConfigErrorReducer<C, Z>) => Z\n>(3, <C, Z>(self: ConfigError.ConfigError, context: C, reducer: ConfigError.ConfigErrorReducer<C, Z>) => {\n  const input: Array<ConfigError.ConfigError> = [self]\n  const output: Array<Either.Either<Z, ConfigErrorCase>> = []\n  while (input.length > 0) {\n    const error = input.pop()!\n    switch (error._op) {\n      case OpCodes.OP_AND: {\n        input.push(error.right)\n        input.push(error.left)\n        output.push(Either.left({ _op: \"AndCase\" }))\n        break\n      }\n      case OpCodes.OP_OR: {\n        input.push(error.right)\n        input.push(error.left)\n        output.push(Either.left({ _op: \"OrCase\" }))\n        break\n      }\n      case OpCodes.OP_INVALID_DATA: {\n        output.push(Either.right(reducer.invalidDataCase(context, error.path, error.message)))\n        break\n      }\n      case OpCodes.OP_MISSING_DATA: {\n        output.push(Either.right(reducer.missingDataCase(context, error.path, error.message)))\n        break\n      }\n      case OpCodes.OP_SOURCE_UNAVAILABLE: {\n        output.push(Either.right(reducer.sourceUnavailableCase(context, error.path, error.message, error.cause)))\n        break\n      }\n      case OpCodes.OP_UNSUPPORTED: {\n        output.push(Either.right(reducer.unsupportedCase(context, error.path, error.message)))\n        break\n      }\n    }\n  }\n  const accumulator: Array<Z> = []\n  while (output.length > 0) {\n    const either = output.pop()!\n    switch (either._op) {\n      case \"Left\": {\n        switch (either.left._op) {\n          case \"AndCase\": {\n            const left = accumulator.pop()!\n            const right = accumulator.pop()!\n            const value = reducer.andCase(context, left, right)\n            accumulator.push(value)\n            break\n          }\n          case \"OrCase\": {\n            const left = accumulator.pop()!\n            const right = accumulator.pop()!\n            const value = reducer.orCase(context, left, right)\n            accumulator.push(value)\n            break\n          }\n        }\n        break\n      }\n      case \"Right\": {\n        accumulator.push(either.right)\n        break\n      }\n    }\n  }\n  if (accumulator.length === 0) {\n    throw new Error(\n      \"BUG: ConfigError.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues\"\n    )\n  }\n  return accumulator.pop()!\n})\n\n/** @internal */\nexport const isMissingDataOnly = (self: ConfigError.ConfigError): boolean =>\n  reduceWithContext(self, void 0, IsMissingDataOnlyReducer)\n"],"names":["RA","Either","constFalse","constTrue","dual","pipe","hasProperty","OpCodes","ConfigErrorSymbolKey","ConfigErrorTypeId","Symbol","for","proto","_tag","And","self","that","error","Object","create","_op","OP_AND","left","right","defineProperty","enumerable","value","Or","OP_OR","InvalidData","path","message","options","pathDelim","OP_INVALID_DATA","join","MissingData","OP_MISSING_DATA","SourceUnavailable","cause","OP_SOURCE_UNAVAILABLE","Unsupported","OP_UNSUPPORTED","isConfigError","u","isAnd","isOr","isInvalidData","isMissingData","isSourceUnavailable","isUnsupported","prefixed","prefix","IsMissingDataOnlyReducer","andCase","_","orCase","invalidDataCase","missingDataCase","sourceUnavailableCase","unsupportedCase","reduceWithContext","context","reducer","input","output","length","pop","push","accumulator","either","Error","isMissingDataOnly"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6250, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6256, "column": 0}, "map": {"version":3,"file":"pathPatch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/configProvider/pathPatch.ts"],"sourcesContent":["import * as RA from \"../../Array.js\"\nimport type * as ConfigError from \"../../ConfigError.js\"\nimport type * as PathPatch from \"../../ConfigProviderPathPatch.js\"\nimport * as Either from \"../../Either.js\"\nimport { dual, pipe } from \"../../Function.js\"\nimport * as List from \"../../List.js\"\nimport * as Option from \"../../Option.js\"\nimport * as configError from \"../configError.js\"\n\n/** @internal */\nexport const empty: PathPatch.PathPatch = {\n  _tag: \"Empty\"\n}\n\n/** @internal */\nexport const andThen = dual<\n  (that: PathPatch.PathPatch) => (self: PathPatch.PathPatch) => PathPatch.PathPatch,\n  (self: PathPatch.PathPatch, that: PathPatch.PathPatch) => PathPatch.PathPatch\n>(2, (self, that) => ({\n  _tag: \"AndThen\",\n  first: self,\n  second: that\n}))\n\n/** @internal */\nexport const mapName = dual<\n  (f: (string: string) => string) => (self: PathPatch.PathPatch) => PathPatch.PathPatch,\n  (self: PathPatch.PathPatch, f: (string: string) => string) => PathPatch.PathPatch\n>(2, (self, f) => andThen(self, { _tag: \"MapName\", f }))\n\n/** @internal */\nexport const nested = dual<\n  (name: string) => (self: PathPatch.PathPatch) => PathPatch.PathPatch,\n  (self: PathPatch.PathPatch, name: string) => PathPatch.PathPatch\n>(2, (self, name) => andThen(self, { _tag: \"Nested\", name }))\n\n/** @internal */\nexport const unnested = dual<\n  (name: string) => (self: PathPatch.PathPatch) => PathPatch.PathPatch,\n  (self: PathPatch.PathPatch, name: string) => PathPatch.PathPatch\n>(2, (self, name) => andThen(self, { _tag: \"Unnested\", name }))\n\n/** @internal */\nexport const patch = dual<\n  (\n    patch: PathPatch.PathPatch\n  ) => (\n    path: ReadonlyArray<string>\n  ) => Either.Either<ReadonlyArray<string>, ConfigError.ConfigError>,\n  (\n    path: ReadonlyArray<string>,\n    patch: PathPatch.PathPatch\n  ) => Either.Either<ReadonlyArray<string>, ConfigError.ConfigError>\n>(2, (path, patch) => {\n  let input: List.List<PathPatch.PathPatch> = List.of(patch)\n  let output: ReadonlyArray<string> = path\n  while (List.isCons(input)) {\n    const patch: PathPatch.PathPatch = input.head\n    switch (patch._tag) {\n      case \"Empty\": {\n        input = input.tail\n        break\n      }\n      case \"AndThen\": {\n        input = List.cons(patch.first, List.cons(patch.second, input.tail))\n        break\n      }\n      case \"MapName\": {\n        output = RA.map(output, patch.f)\n        input = input.tail\n        break\n      }\n      case \"Nested\": {\n        output = RA.prepend(output, patch.name)\n        input = input.tail\n        break\n      }\n      case \"Unnested\": {\n        const containsName = pipe(\n          RA.head(output),\n          Option.contains(patch.name)\n        )\n        if (containsName) {\n          output = RA.tailNonEmpty(output as RA.NonEmptyArray<string>)\n          input = input.tail\n        } else {\n          return Either.left(configError.MissingData(\n            output,\n            `Expected ${patch.name} to be in path in ConfigProvider#unnested`\n          ))\n        }\n        break\n      }\n    }\n  }\n  return Either.right(output)\n})\n"],"names":["RA","Either","dual","pipe","List","Option","configError","empty","_tag","andThen","self","that","first","second","mapName","f","nested","name","unnested","patch","path","input","of","output","isCons","head","tail","cons","map","prepend","containsName","contains","tailNonEmpty","left","MissingData","right"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6339, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6345, "column": 0}, "map": {"version":3,"file":"string-utils.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/string-utils.ts"],"sourcesContent":["/**\n * Adapted from the `change-case` library.\n *\n * Copyright (c) 2014 Blake Embrey (hello@blakeembrey.com)\n */\n\n/** @internal */\nexport const lowerCase = (str: string) => str.toLowerCase()\n\n/** @internal */\nexport const upperCase = (str: string) => str.toUpperCase()\n\ninterface Options {\n  splitRegexp?: RegExp | ReadonlyArray<RegExp>\n  stripRegexp?: RegExp | ReadonlyArray<RegExp>\n  delimiter?: string\n  transform?: (part: string, index: number, parts: ReadonlyArray<string>) => string\n}\n\n/**\n * Replace `re` in the input string with the replacement value.\n */\nconst replace = (input: string, re: RegExp | ReadonlyArray<RegExp>, value: string): string =>\n  re instanceof RegExp\n    ? input.replace(re, value)\n    : re.reduce((input, re) => input.replace(re, value), input)\n\n// Support camel case (\"camelCase\" -> \"camel Case\" and \"CAMELCase\" -> \"CAMEL Case\").\nconst DEFAULT_SPLIT_REGEXP = [/([a-z0-9])([A-Z])/g, /([A-Z])([A-Z][a-z])/g]\n\n// Remove all non-word characters.\nconst DEFAULT_STRIP_REGEXP = /[^A-Z0-9]+/gi\n\n/**\n * Normalize the string into something other libraries can manipulate easier.\n */\nconst noCase = (input: string, options: Options = {}): string => {\n  const {\n    delimiter = \" \",\n    splitRegexp = DEFAULT_SPLIT_REGEXP,\n    stripRegexp = DEFAULT_STRIP_REGEXP,\n    transform = lowerCase\n  } = options\n  const result = replace(replace(input, splitRegexp, \"$1\\0$2\"), stripRegexp, \"\\0\")\n  let start = 0\n  let end = result.length\n  // Trim the delimiter from around the output string.\n  while (result.charAt(start) === \"\\0\") {\n    start++\n  }\n  while (result.charAt(end - 1) === \"\\0\") {\n    end--\n  }\n  // Transform each token independently.\n  return result.slice(start, end).split(\"\\0\").map(transform).join(delimiter)\n}\n\nconst pascalCaseTransform = (input: string, index: number): string => {\n  const firstChar = input.charAt(0)\n  const lowerChars = input.substring(1).toLowerCase()\n  if (index > 0 && firstChar >= \"0\" && firstChar <= \"9\") {\n    return `_${firstChar}${lowerChars}`\n  }\n  return `${firstChar.toUpperCase()}${lowerChars}`\n}\n\n/** @internal */\nexport const pascalCase = (input: string, options?: Options): string =>\n  noCase(input, {\n    delimiter: \"\",\n    transform: pascalCaseTransform,\n    ...options\n  })\n\nconst camelCaseTransform = (input: string, index: number): string =>\n  index === 0\n    ? input.toLowerCase()\n    : pascalCaseTransform(input, index)\n\n/** @internal */\nexport const camelCase = (input: string, options?: Options): string =>\n  pascalCase(input, {\n    transform: camelCaseTransform,\n    ...options\n  })\n\n/** @internal */\nexport const constantCase = (input: string, options?: Options): string =>\n  noCase(input, {\n    delimiter: \"_\",\n    transform: upperCase,\n    ...options\n  })\n\n/** @internal */\nexport const kebabCase = (input: string, options?: Options) =>\n  noCase(input, {\n    delimiter: \"-\",\n    ...options\n  })\n\n/** @internal */\nexport const snakeCase = (input: string, options?: Options) =>\n  noCase(input, {\n    delimiter: \"_\",\n    ...options\n  })\n"],"names":["lowerCase","str","toLowerCase","upperCase","toUpperCase","replace","input","re","value","RegExp","reduce","DEFAULT_SPLIT_REGEXP","DEFAULT_STRIP_REGEXP","noCase","options","delimiter","splitRegexp","stripRegexp","transform","result","start","end","length","charAt","slice","split","map","join","pascalCaseTransform","index","firstChar","lowerChars","substring","pascalCase","camelCaseTransform","camelCase","constantCase","kebabCase","snakeCase"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 6418, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6424, "column": 0}, "map": {"version":3,"file":"configProvider.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/configProvider.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport type * as Config from \"../Config.js\"\nimport type * as ConfigError from \"../ConfigError.js\"\nimport type * as ConfigProvider from \"../ConfigProvider.js\"\nimport type * as PathPatch from \"../ConfigProviderPathPatch.js\"\nimport * as Context from \"../Context.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Either from \"../Either.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as HashMap from \"../HashMap.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport * as number from \"../Number.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport * as Predicate from \"../Predicate.js\"\nimport * as regexp from \"../RegExp.js\"\nimport type * as _config from \"./config.js\"\nimport * as configError from \"./configError.js\"\nimport * as pathPatch from \"./configProvider/pathPatch.js\"\nimport * as core from \"./core.js\"\nimport * as OpCodes from \"./opCodes/config.js\"\nimport * as StringUtils from \"./string-utils.js\"\n\ntype KeyComponent = ConfigProvider.ConfigProvider.KeyComponent\n\nconst concat = <A, B>(l: ReadonlyArray<A>, r: ReadonlyArray<B>): ReadonlyArray<A | B> => [...l, ...r]\n\n/** @internal */\nconst ConfigProviderSymbolKey = \"effect/ConfigProvider\"\n\n/** @internal */\nexport const ConfigProviderTypeId: ConfigProvider.ConfigProviderTypeId = Symbol.for(\n  ConfigProviderSymbolKey\n) as ConfigProvider.ConfigProviderTypeId\n\n/** @internal */\nexport const configProviderTag: Context.Tag<ConfigProvider.ConfigProvider, ConfigProvider.ConfigProvider> = Context\n  .GenericTag(\n    \"effect/ConfigProvider\"\n  )\n\n/** @internal */\nconst FlatConfigProviderSymbolKey = \"effect/ConfigProviderFlat\"\n\n/** @internal */\nexport const FlatConfigProviderTypeId: ConfigProvider.FlatConfigProviderTypeId = Symbol.for(\n  FlatConfigProviderSymbolKey\n) as ConfigProvider.FlatConfigProviderTypeId\n\n/** @internal */\nexport const make = (\n  options: {\n    readonly load: <A>(config: Config.Config<A>) => Effect.Effect<A, ConfigError.ConfigError>\n    readonly flattened: ConfigProvider.ConfigProvider.Flat\n  }\n): ConfigProvider.ConfigProvider => ({\n  [ConfigProviderTypeId]: ConfigProviderTypeId,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  ...options\n})\n\n/** @internal */\nexport const makeFlat = (\n  options: {\n    readonly load: <A>(\n      path: ReadonlyArray<string>,\n      config: Config.Config.Primitive<A>,\n      split: boolean\n    ) => Effect.Effect<Array<A>, ConfigError.ConfigError>\n    readonly enumerateChildren: (\n      path: ReadonlyArray<string>\n    ) => Effect.Effect<HashSet.HashSet<string>, ConfigError.ConfigError>\n    readonly patch: PathPatch.PathPatch\n  }\n): ConfigProvider.ConfigProvider.Flat => ({\n  [FlatConfigProviderTypeId]: FlatConfigProviderTypeId,\n  patch: options.patch,\n  load: (path, config, split = true) => options.load(path, config, split),\n  enumerateChildren: options.enumerateChildren\n})\n\n/** @internal */\nexport const fromFlat = (flat: ConfigProvider.ConfigProvider.Flat): ConfigProvider.ConfigProvider =>\n  make({\n    load: (config) =>\n      core.flatMap(fromFlatLoop(flat, Arr.empty(), config, false), (chunk) =>\n        Option.match(Arr.head(chunk), {\n          onNone: () =>\n            core.fail(\n              configError.MissingData(\n                Arr.empty(),\n                `Expected a single value having structure: ${config}`\n              )\n            ),\n          onSome: core.succeed\n        })),\n    flattened: flat\n  })\n\n/** @internal */\nexport const fromEnv = (\n  config?: Partial<ConfigProvider.ConfigProvider.FromEnvConfig>\n): ConfigProvider.ConfigProvider => {\n  const { pathDelim, seqDelim } = Object.assign({}, { pathDelim: \"_\", seqDelim: \",\" }, config)\n  const makePathString = (path: ReadonlyArray<string>): string => pipe(path, Arr.join(pathDelim))\n  const unmakePathString = (pathString: string): ReadonlyArray<string> => pathString.split(pathDelim)\n\n  const getEnv = () =>\n    typeof process !== \"undefined\" && \"env\" in process && typeof process.env === \"object\" ? process.env : {}\n\n  const load = <A>(\n    path: ReadonlyArray<string>,\n    primitive: Config.Config.Primitive<A>,\n    split = true\n  ): Effect.Effect<Array<A>, ConfigError.ConfigError> => {\n    const pathString = makePathString(path)\n    const current = getEnv()\n    const valueOpt = pathString in current ? Option.some(current[pathString]!) : Option.none()\n    return pipe(\n      valueOpt,\n      core.mapError(() => configError.MissingData(path, `Expected ${pathString} to exist in the process context`)),\n      core.flatMap((value) => parsePrimitive(value, path, primitive, seqDelim, split))\n    )\n  }\n\n  const enumerateChildren = (\n    path: ReadonlyArray<string>\n  ): Effect.Effect<HashSet.HashSet<string>, ConfigError.ConfigError> =>\n    core.sync(() => {\n      const current = getEnv()\n      const keys = Object.keys(current)\n      const keyPaths = keys.map((value) => unmakePathString(value.toUpperCase()))\n      const filteredKeyPaths = keyPaths.filter((keyPath) => {\n        for (let i = 0; i < path.length; i++) {\n          const pathComponent = pipe(path, Arr.unsafeGet(i))\n          const currentElement = keyPath[i]\n          if (currentElement === undefined || pathComponent !== currentElement) {\n            return false\n          }\n        }\n        return true\n      }).flatMap((keyPath) => keyPath.slice(path.length, path.length + 1))\n      return HashSet.fromIterable(filteredKeyPaths)\n    })\n\n  return fromFlat(makeFlat({ load, enumerateChildren, patch: pathPatch.empty }))\n}\n\n/** @internal */\nexport const fromMap = (\n  map: Map<string, string>,\n  config?: Partial<ConfigProvider.ConfigProvider.FromMapConfig>\n): ConfigProvider.ConfigProvider => {\n  const { pathDelim, seqDelim } = Object.assign({ seqDelim: \",\", pathDelim: \".\" }, config)\n  const makePathString = (path: ReadonlyArray<string>): string => pipe(path, Arr.join(pathDelim))\n  const unmakePathString = (pathString: string): ReadonlyArray<string> => pathString.split(pathDelim)\n  const mapWithIndexSplit = splitIndexInKeys(\n    map,\n    (str) => unmakePathString(str),\n    makePathString\n  )\n  const load = <A>(\n    path: ReadonlyArray<string>,\n    primitive: Config.Config.Primitive<A>,\n    split = true\n  ): Effect.Effect<Array<A>, ConfigError.ConfigError> => {\n    const pathString = makePathString(path)\n    const valueOpt = mapWithIndexSplit.has(pathString) ?\n      Option.some(mapWithIndexSplit.get(pathString)!) :\n      Option.none()\n    return pipe(\n      valueOpt,\n      core.mapError(() => configError.MissingData(path, `Expected ${pathString} to exist in the provided map`)),\n      core.flatMap((value) => parsePrimitive(value, path, primitive, seqDelim, split))\n    )\n  }\n  const enumerateChildren = (\n    path: ReadonlyArray<string>\n  ): Effect.Effect<HashSet.HashSet<string>, ConfigError.ConfigError> =>\n    core.sync(() => {\n      const keyPaths = Arr.fromIterable(mapWithIndexSplit.keys()).map(unmakePathString)\n      const filteredKeyPaths = keyPaths.filter((keyPath) => {\n        for (let i = 0; i < path.length; i++) {\n          const pathComponent = pipe(path, Arr.unsafeGet(i))\n          const currentElement = keyPath[i]\n          if (currentElement === undefined || pathComponent !== currentElement) {\n            return false\n          }\n        }\n        return true\n      }).flatMap((keyPath) => keyPath.slice(path.length, path.length + 1))\n      return HashSet.fromIterable(filteredKeyPaths)\n    })\n\n  return fromFlat(makeFlat({ load, enumerateChildren, patch: pathPatch.empty }))\n}\n\nconst extend = <A, B>(\n  leftDef: (n: number) => A,\n  rightDef: (n: number) => B,\n  left: ReadonlyArray<A>,\n  right: ReadonlyArray<B>\n): [ReadonlyArray<A>, ReadonlyArray<B>] => {\n  const leftPad = Arr.unfold(\n    left.length,\n    (index) =>\n      index >= right.length ?\n        Option.none() :\n        Option.some([leftDef(index), index + 1])\n  )\n  const rightPad = Arr.unfold(\n    right.length,\n    (index) =>\n      index >= left.length ?\n        Option.none() :\n        Option.some([rightDef(index), index + 1])\n  )\n  const leftExtension = concat(left, leftPad)\n  const rightExtension = concat(right, rightPad)\n  return [leftExtension, rightExtension]\n}\n\nconst appendConfigPath = (path: ReadonlyArray<string>, config: Config.Config<unknown>): ReadonlyArray<string> => {\n  let op = config as _config.ConfigPrimitive\n  if (op._tag === \"Nested\") {\n    const out = path.slice()\n    while (op._tag === \"Nested\") {\n      out.push(op.name)\n      op = op.config as _config.ConfigPrimitive\n    }\n    return out\n  }\n  return path\n}\n\nconst fromFlatLoop = <A>(\n  flat: ConfigProvider.ConfigProvider.Flat,\n  prefix: ReadonlyArray<string>,\n  config: Config.Config<A>,\n  split: boolean\n): Effect.Effect<Array<A>, ConfigError.ConfigError> => {\n  const op = config as _config.ConfigPrimitive\n  switch (op._tag) {\n    case OpCodes.OP_CONSTANT: {\n      return core.succeed(Arr.of(op.value)) as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_DESCRIBED: {\n      return core.suspend(\n        () => fromFlatLoop(flat, prefix, op.config, split)\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_FAIL: {\n      return core.fail(configError.MissingData(prefix, op.message)) as Effect.Effect<\n        Array<A>,\n        ConfigError.ConfigError\n      >\n    }\n    case OpCodes.OP_FALLBACK: {\n      return pipe(\n        core.suspend(() => fromFlatLoop(flat, prefix, op.first, split)),\n        core.catchAll((error1) => {\n          if (op.condition(error1)) {\n            return pipe(\n              fromFlatLoop(flat, prefix, op.second, split),\n              core.catchAll((error2) => core.fail(configError.Or(error1, error2)))\n            )\n          }\n          return core.fail(error1)\n        })\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_LAZY: {\n      return core.suspend(() => fromFlatLoop(flat, prefix, op.config(), split)) as Effect.Effect<\n        Array<A>,\n        ConfigError.ConfigError\n      >\n    }\n    case OpCodes.OP_MAP_OR_FAIL: {\n      return core.suspend(() =>\n        pipe(\n          fromFlatLoop(flat, prefix, op.original, split),\n          core.flatMap(\n            core.forEachSequential((a) =>\n              pipe(\n                op.mapOrFail(a),\n                core.mapError(configError.prefixed(appendConfigPath(prefix, op.original)))\n              )\n            )\n          )\n        )\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_NESTED: {\n      return core.suspend(() =>\n        fromFlatLoop(\n          flat,\n          concat(prefix, Arr.of(op.name)),\n          op.config,\n          split\n        )\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_PRIMITIVE: {\n      return pipe(\n        pathPatch.patch(prefix, flat.patch),\n        core.flatMap((prefix) =>\n          pipe(\n            flat.load(prefix, op, split),\n            core.flatMap((values) => {\n              if (values.length === 0) {\n                const name = pipe(Arr.last(prefix), Option.getOrElse(() => \"<n/a>\"))\n                return core.fail(configError.MissingData([], `Expected ${op.description} with name ${name}`))\n              }\n              return core.succeed(values)\n            })\n          )\n        )\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_SEQUENCE: {\n      return pipe(\n        pathPatch.patch(prefix, flat.patch),\n        core.flatMap((patchedPrefix) =>\n          pipe(\n            flat.enumerateChildren(patchedPrefix),\n            core.flatMap(indicesFrom),\n            core.flatMap((indices) => {\n              if (indices.length === 0) {\n                return core.suspend(() =>\n                  core.map(fromFlatLoop(flat, prefix, op.config, true), Arr.of)\n                ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n              }\n              return pipe(\n                core.forEachSequential(\n                  indices,\n                  (index) => fromFlatLoop(flat, Arr.append(prefix, `[${index}]`), op.config, true)\n                ),\n                core.map((chunkChunk) => {\n                  const flattened = Arr.flatten(chunkChunk)\n                  if (flattened.length === 0) {\n                    return Arr.of(Arr.empty<A>())\n                  }\n                  return Arr.of(flattened)\n                })\n              ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n            })\n          )\n        )\n      )\n    }\n    case OpCodes.OP_HASHMAP: {\n      return core.suspend(() =>\n        pipe(\n          pathPatch.patch(prefix, flat.patch),\n          core.flatMap((prefix) =>\n            pipe(\n              flat.enumerateChildren(prefix),\n              core.flatMap((keys) => {\n                return pipe(\n                  keys,\n                  core.forEachSequential((key) =>\n                    fromFlatLoop(\n                      flat,\n                      concat(prefix, Arr.of(key)),\n                      op.valueConfig,\n                      split\n                    )\n                  ),\n                  core.map((matrix) => {\n                    if (matrix.length === 0) {\n                      return Arr.of(HashMap.empty())\n                    }\n                    return pipe(\n                      transpose(matrix),\n                      Arr.map((values) => HashMap.fromIterable(Arr.zip(Arr.fromIterable(keys), values)))\n                    )\n                  })\n                )\n              })\n            )\n          )\n        )\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n    case OpCodes.OP_ZIP_WITH: {\n      return core.suspend(() =>\n        pipe(\n          fromFlatLoop(flat, prefix, op.left, split),\n          core.either,\n          core.flatMap((left) =>\n            pipe(\n              fromFlatLoop(flat, prefix, op.right, split),\n              core.either,\n              core.flatMap((right) => {\n                if (Either.isLeft(left) && Either.isLeft(right)) {\n                  return core.fail(configError.And(left.left, right.left))\n                }\n                if (Either.isLeft(left) && Either.isRight(right)) {\n                  return core.fail(left.left)\n                }\n                if (Either.isRight(left) && Either.isLeft(right)) {\n                  return core.fail(right.left)\n                }\n                if (Either.isRight(left) && Either.isRight(right)) {\n                  const path = pipe(prefix, Arr.join(\".\"))\n                  const fail = fromFlatLoopFail(prefix, path)\n                  const [lefts, rights] = extend(\n                    fail,\n                    fail,\n                    pipe(left.right, Arr.map(Either.right)),\n                    pipe(right.right, Arr.map(Either.right))\n                  )\n                  return pipe(\n                    lefts,\n                    Arr.zip(rights),\n                    core.forEachSequential(([left, right]) =>\n                      pipe(\n                        core.zip(left, right),\n                        core.map(([left, right]) => op.zip(left, right))\n                      )\n                    )\n                  )\n                }\n                throw new Error(\n                  \"BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues\"\n                )\n              })\n            )\n          )\n        )\n      ) as unknown as Effect.Effect<Array<A>, ConfigError.ConfigError>\n    }\n  }\n}\n\nconst fromFlatLoopFail =\n  (prefix: ReadonlyArray<string>, path: string) => (index: number): Either.Either<unknown, ConfigError.ConfigError> =>\n    Either.left(\n      configError.MissingData(\n        prefix,\n        `The element at index ${index} in a sequence at path \"${path}\" was missing`\n      )\n    )\n\n/** @internal */\nexport const mapInputPath = dual<\n  (f: (path: string) => string) => (self: ConfigProvider.ConfigProvider) => ConfigProvider.ConfigProvider,\n  (self: ConfigProvider.ConfigProvider, f: (path: string) => string) => ConfigProvider.ConfigProvider\n>(2, (self, f) => fromFlat(mapInputPathFlat(self.flattened, f)))\n\nconst mapInputPathFlat = (\n  self: ConfigProvider.ConfigProvider.Flat,\n  f: (path: string) => string\n): ConfigProvider.ConfigProvider.Flat =>\n  makeFlat({\n    load: (path, config, split = true) => self.load(path, config, split),\n    enumerateChildren: (path) => self.enumerateChildren(path),\n    patch: pathPatch.mapName(self.patch, f)\n  })\n\n/** @internal */\nexport const nested = dual<\n  (name: string) => (self: ConfigProvider.ConfigProvider) => ConfigProvider.ConfigProvider,\n  (self: ConfigProvider.ConfigProvider, name: string) => ConfigProvider.ConfigProvider\n>(2, (self, name) =>\n  fromFlat(makeFlat({\n    load: (path, config) => self.flattened.load(path, config, true),\n    enumerateChildren: (path) => self.flattened.enumerateChildren(path),\n    patch: pathPatch.nested(self.flattened.patch, name)\n  })))\n\n/** @internal */\nexport const unnested = dual<\n  (name: string) => (self: ConfigProvider.ConfigProvider) => ConfigProvider.ConfigProvider,\n  (self: ConfigProvider.ConfigProvider, name: string) => ConfigProvider.ConfigProvider\n>(2, (self, name) =>\n  fromFlat(makeFlat({\n    load: (path, config) => self.flattened.load(path, config, true),\n    enumerateChildren: (path) => self.flattened.enumerateChildren(path),\n    patch: pathPatch.unnested(self.flattened.patch, name)\n  })))\n\n/** @internal */\nexport const orElse = dual<\n  (\n    that: LazyArg<ConfigProvider.ConfigProvider>\n  ) => (\n    self: ConfigProvider.ConfigProvider\n  ) => ConfigProvider.ConfigProvider,\n  (\n    self: ConfigProvider.ConfigProvider,\n    that: LazyArg<ConfigProvider.ConfigProvider>\n  ) => ConfigProvider.ConfigProvider\n>(2, (self, that) => fromFlat(orElseFlat(self.flattened, () => that().flattened)))\n\nconst orElseFlat = (\n  self: ConfigProvider.ConfigProvider.Flat,\n  that: LazyArg<ConfigProvider.ConfigProvider.Flat>\n): ConfigProvider.ConfigProvider.Flat =>\n  makeFlat({\n    load: (path, config, split) =>\n      pipe(\n        pathPatch.patch(path, self.patch),\n        core.flatMap((patch) => self.load(patch, config, split)),\n        core.catchAll((error1) =>\n          pipe(\n            core.sync(that),\n            core.flatMap((that) =>\n              pipe(\n                pathPatch.patch(path, that.patch),\n                core.flatMap((patch) => that.load(patch, config, split)),\n                core.catchAll((error2) => core.fail(configError.Or(error1, error2)))\n              )\n            )\n          )\n        )\n      ),\n    enumerateChildren: (path) =>\n      pipe(\n        pathPatch.patch(path, self.patch),\n        core.flatMap((patch) => self.enumerateChildren(patch)),\n        core.either,\n        core.flatMap((left) =>\n          pipe(\n            core.sync(that),\n            core.flatMap((that) =>\n              pipe(\n                pathPatch.patch(path, that.patch),\n                core.flatMap((patch) => that.enumerateChildren(patch)),\n                core.either,\n                core.flatMap((right) => {\n                  if (Either.isLeft(left) && Either.isLeft(right)) {\n                    return core.fail(configError.And(left.left, right.left))\n                  }\n                  if (Either.isLeft(left) && Either.isRight(right)) {\n                    return core.succeed(right.right)\n                  }\n                  if (Either.isRight(left) && Either.isLeft(right)) {\n                    return core.succeed(left.right)\n                  }\n                  if (Either.isRight(left) && Either.isRight(right)) {\n                    return core.succeed(pipe(left.right, HashSet.union(right.right)))\n                  }\n                  throw new Error(\n                    \"BUG: ConfigProvider.orElseFlat - please report an issue at https://github.com/Effect-TS/effect/issues\"\n                  )\n                })\n              )\n            )\n          )\n        )\n      ),\n    patch: pathPatch.empty\n  })\n\n/** @internal */\nexport const constantCase = (self: ConfigProvider.ConfigProvider): ConfigProvider.ConfigProvider =>\n  mapInputPath(self, StringUtils.constantCase)\n\n/** @internal */\nexport const kebabCase = (self: ConfigProvider.ConfigProvider): ConfigProvider.ConfigProvider =>\n  mapInputPath(self, StringUtils.kebabCase)\n\n/** @internal */\nexport const lowerCase = (self: ConfigProvider.ConfigProvider): ConfigProvider.ConfigProvider =>\n  mapInputPath(self, StringUtils.lowerCase)\n\n/** @internal */\nexport const snakeCase = (self: ConfigProvider.ConfigProvider): ConfigProvider.ConfigProvider =>\n  mapInputPath(self, StringUtils.snakeCase)\n\n/** @internal */\nexport const upperCase = (self: ConfigProvider.ConfigProvider): ConfigProvider.ConfigProvider =>\n  mapInputPath(self, StringUtils.upperCase)\n\n/** @internal */\nexport const within = dual<\n  (\n    path: ReadonlyArray<string>,\n    f: (self: ConfigProvider.ConfigProvider) => ConfigProvider.ConfigProvider\n  ) => (self: ConfigProvider.ConfigProvider) => ConfigProvider.ConfigProvider,\n  (\n    self: ConfigProvider.ConfigProvider,\n    path: ReadonlyArray<string>,\n    f: (self: ConfigProvider.ConfigProvider) => ConfigProvider.ConfigProvider\n  ) => ConfigProvider.ConfigProvider\n>(3, (self, path, f) => {\n  const unnest = Arr.reduce(path, self, (provider, name) => unnested(provider, name))\n  const nest = Arr.reduceRight(path, f(unnest), (provider, name) => nested(provider, name))\n  return orElse(nest, () => self)\n})\n\nconst splitPathString = (text: string, delim: string): Array<string> => {\n  const split = text.split(new RegExp(`\\\\s*${regexp.escape(delim)}\\\\s*`))\n  return split\n}\n\nconst parsePrimitive = <A>(\n  text: string,\n  path: ReadonlyArray<string>,\n  primitive: Config.Config.Primitive<A>,\n  delimiter: string,\n  split: boolean\n): Effect.Effect<Array<A>, ConfigError.ConfigError> => {\n  if (!split) {\n    return pipe(\n      primitive.parse(text),\n      core.mapBoth({\n        onFailure: configError.prefixed(path),\n        onSuccess: Arr.of\n      })\n    )\n  }\n  return pipe(\n    splitPathString(text, delimiter),\n    core.forEachSequential((char) => primitive.parse(char.trim())),\n    core.mapError(configError.prefixed(path))\n  )\n}\n\nconst transpose = <A>(array: ReadonlyArray<ReadonlyArray<A>>): Array<Array<A>> => {\n  return Object.keys(array[0]).map((column) => array.map((row) => row[column as any]))\n}\n\nconst indicesFrom = (quotedIndices: HashSet.HashSet<string>): Effect.Effect<Array<number>> =>\n  pipe(\n    core.forEachSequential(quotedIndices, parseQuotedIndex),\n    core.mapBoth({\n      onFailure: () => Arr.empty<number>(),\n      onSuccess: Arr.sort(number.Order)\n    }),\n    core.either,\n    core.map(Either.merge)\n  )\n\nconst STR_INDEX_REGEX = /(^.+)(\\[(\\d+)\\])$/\nconst QUOTED_INDEX_REGEX = /^(\\[(\\d+)\\])$/\n\nconst parseQuotedIndex = (str: string): Option.Option<number> => {\n  const match = str.match(QUOTED_INDEX_REGEX)\n  if (match !== null) {\n    const matchedIndex = match[2]\n    return pipe(\n      matchedIndex !== undefined && matchedIndex.length > 0 ?\n        Option.some(matchedIndex) :\n        Option.none(),\n      Option.flatMap(parseInteger)\n    )\n  }\n  return Option.none()\n}\n\nconst splitIndexInKeys = (\n  map: Map<string, string>,\n  unmakePathString: (str: string) => ReadonlyArray<string>,\n  makePathString: (chunk: ReadonlyArray<string>) => string\n): Map<string, string> => {\n  const newMap: Map<string, string> = new Map()\n  for (const [pathString, value] of map) {\n    const keyWithIndex = pipe(\n      unmakePathString(pathString),\n      Arr.flatMap((key) =>\n        Option.match(splitIndexFrom(key), {\n          onNone: () => Arr.of(key),\n          onSome: ([key, index]) => Arr.make(key, `[${index}]`)\n        })\n      )\n    )\n    newMap.set(makePathString(keyWithIndex), value)\n  }\n  return newMap\n}\n\nconst splitIndexFrom = (key: string): Option.Option<[string, number]> => {\n  const match = key.match(STR_INDEX_REGEX)\n  if (match !== null) {\n    const matchedString = match[1]\n    const matchedIndex = match[3]\n    const optionalString = matchedString !== undefined && matchedString.length > 0 ?\n      Option.some(matchedString) :\n      Option.none()\n    const optionalIndex = pipe(\n      matchedIndex !== undefined && matchedIndex.length > 0 ?\n        Option.some(matchedIndex) :\n        Option.none(),\n      Option.flatMap(parseInteger)\n    )\n    return Option.all([optionalString, optionalIndex])\n  }\n  return Option.none()\n}\n\nconst parseInteger = (str: string): Option.Option<number> => {\n  const parsedIndex = Number.parseInt(str)\n  return Number.isNaN(parsedIndex) ?\n    Option.none() :\n    Option.some(parsedIndex)\n}\n\nconst keyName = (name: string): KeyComponent => ({\n  _tag: \"KeyName\",\n  name\n})\n\nconst keyIndex = (index: number): KeyComponent => ({\n  _tag: \"KeyIndex\",\n  index\n})\n\ninterface JsonMap {\n  [member: string]: string | number | boolean | null | JsonArray | JsonMap\n}\ninterface JsonArray extends Array<string | number | boolean | null | JsonArray | JsonMap> {}\n\n/** @internal */\nexport const fromJson = (json: unknown): ConfigProvider.ConfigProvider => {\n  const hiddenDelimiter = \"\\ufeff\"\n  const indexedEntries = Arr.map(\n    getIndexedEntries(json as JsonMap),\n    ([key, value]): [string, string] => [configPathToString(key).join(hiddenDelimiter), value]\n  )\n  return fromMap(new Map(indexedEntries), {\n    pathDelim: hiddenDelimiter,\n    seqDelim: hiddenDelimiter\n  })\n}\n\nconst configPathToString = (path: ReadonlyArray<KeyComponent>): ReadonlyArray<string> => {\n  const output: Array<string> = []\n  let i = 0\n  while (i < path.length) {\n    const component = path[i]\n    if (component._tag === \"KeyName\") {\n      if (i + 1 < path.length) {\n        const nextComponent = path[i + 1]\n        if (nextComponent._tag === \"KeyIndex\") {\n          output.push(`${component.name}[${nextComponent.index}]`)\n          i += 2\n        } else {\n          output.push(component.name)\n          i += 1\n        }\n      } else {\n        output.push(component.name)\n        i += 1\n      }\n    }\n  }\n  return output\n}\n\nconst getIndexedEntries = (\n  config: JsonMap\n): ReadonlyArray<[path: ReadonlyArray<KeyComponent>, value: string]> => {\n  const loopAny = (\n    path: ReadonlyArray<KeyComponent>,\n    value: string | number | boolean | JsonMap | JsonArray | null\n  ): ReadonlyArray<[path: ReadonlyArray<KeyComponent>, value: string]> => {\n    if (typeof value === \"string\") {\n      return Arr.make([path, value] as [ReadonlyArray<KeyComponent>, string])\n    }\n    if (typeof value === \"number\" || typeof value === \"boolean\") {\n      return Arr.make([path, String(value)] as [ReadonlyArray<KeyComponent>, string])\n    }\n    if (Arr.isArray(value)) {\n      return loopArray(path, value)\n    }\n    if (typeof value === \"object\" && value !== null) {\n      return loopObject(path, value)\n    }\n    return Arr.empty<[ReadonlyArray<KeyComponent>, string]>()\n  }\n  const loopArray = (\n    path: ReadonlyArray<KeyComponent>,\n    values: JsonArray\n  ): ReadonlyArray<[path: ReadonlyArray<KeyComponent>, value: string]> =>\n    Arr.match(values, {\n      onEmpty: () => Arr.make([path, \"<nil>\"] as [ReadonlyArray<KeyComponent>, string]),\n      onNonEmpty: Arr.flatMap((value, index) => loopAny(Arr.append(path, keyIndex(index)), value))\n    })\n  const loopObject = (\n    path: ReadonlyArray<KeyComponent>,\n    value: JsonMap\n  ): ReadonlyArray<[path: ReadonlyArray<KeyComponent>, value: string]> =>\n    Object.entries(value)\n      .filter(([, value]) => Predicate.isNotNullable(value))\n      .flatMap(([key, value]) => {\n        const newPath = Arr.append(path, keyName(key))\n        const result = loopAny(newPath, value)\n        if (Arr.isEmptyReadonlyArray(result)) {\n          return Arr.make([newPath, \"\"] as [ReadonlyArray<KeyComponent>, string])\n        }\n        return result\n      })\n  return loopObject(Arr.empty(), config)\n}\n"],"names":["Arr","Context","Either","dual","pipe","HashMap","HashSet","number","Option","pipeArguments","Predicate","regexp","configError","pathPatch","core","OpCodes","StringUtils","concat","l","r","ConfigProviderSymbolKey","ConfigProviderTypeId","Symbol","for","configProviderTag","GenericTag","FlatConfigProviderSymbolKey","FlatConfigProviderTypeId","make","options","arguments","makeFlat","patch","load","path","config","split","enumerateChildren","fromFlat","flat","flatMap","fromFlatLoop","empty","chunk","match","head","onNone","fail","MissingData","onSome","succeed","flattened","fromEnv","pathDelim","seqDelim","Object","assign","makePathString","join","unmakePathString","pathString","getEnv","process","env","primitive","current","valueOpt","some","none","mapError","value","parsePrimitive","sync","keys","keyPaths","map","toUpperCase","filteredKeyPaths","filter","keyPath","i","length","pathComponent","unsafeGet","currentElement","undefined","slice","fromIterable","fromMap","mapWithIndexSplit","splitIndexInKeys","str","has","get","extend","leftDef","rightDef","left","right","leftPad","unfold","index","rightPad","leftExtension","rightExtension","appendConfigPath","op","_tag","out","push","name","prefix","OP_CONSTANT","of","OP_DESCRIBED","suspend","OP_FAIL","message","OP_FALLBACK","first","catchAll","error1","condition","second","error2","Or","OP_LAZY","OP_MAP_OR_FAIL","original","forEachSequential","a","mapOrFail","prefixed","OP_NESTED","OP_PRIMITIVE","values","last","getOrElse","description","OP_SEQUENCE","patchedPrefix","indicesFrom","indices","append","chunkChunk","flatten","OP_HASHMAP","key","valueConfig","matrix","transpose","zip","OP_ZIP_WITH","either","isLeft","And","isRight","fromFlatLoopFail","lefts","rights","Error","mapInputPath","self","f","mapInputPathFlat","mapName","nested","unnested","orElse","that","orElseFlat","union","constantCase","kebabCase","lowerCase","snakeCase","upperCase","within","unnest","reduce","provider","nest","reduceRight","splitPathString","text","delim","RegExp","escape","delimiter","parse","mapBoth","onFailure","onSuccess","char","trim","array","column","row","quotedIndices","parseQuotedIndex","sort","Order","merge","STR_INDEX_REGEX","QUOTED_INDEX_REGEX","matchedIndex","parseInteger","newMap","Map","keyWithIndex","splitIndexFrom","set","matchedString","optionalString","optionalIndex","all","parsedIndex","Number","parseInt","isNaN","keyName","keyIndex","fromJson","json","hiddenDelimiter","indexedEntries","getIndexedEntries","configPathToString","output","component","nextComponent","loopAny","String","isArray","loopArray","loopObject","onEmpty","onNonEmpty","entries","isNotNullable","newPath","result","isEmptyReadonlyArray"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAKA,OAAO,KAAKC,OAAO,MAAM,eAAe;AASxC,SAASQ,aAAa,QAAQ,gBAAgB;AAM9C,OAAO,KAAKK,IAAI,MAAM,WAAW;AApBjC,OAAO,KAAKd,GAAG,MAAM,aAAa;AAalC,OAAO,KAAKQ,MAAM,MAAM,cAAc;AAKtC,OAAO,KAAKI,WAAW,MAAM,kBAAkB;AAT/C,SAAST,IAAI,EAAEC,IAAI,QAAQ,gBAAgB;AAE3C,OAAO,KAAKE,OAAO,MAAM,eAAe;AAQxC,OAAO,KAAKO,SAAS,MAAM,+BAA+B;AAE1D,OAAO,KAAKE,OAAO,MAAM,qBAAqB;AAX9C,OAAO,KAAKV,OAAO,MAAM,eAAe;AAHxC,OAAO,KAAKH,MAAM,MAAM,cAAc;AAetC,OAAO,KAAKc,WAAW,MAAM,mBAAmB;AANhD,OAAO,KAAKL,MAAM,MAAM,cAAc;AAJtC,OAAO,KAAKJ,MAAM,MAAM,cAAc;AAGtC,OAAO,KAAKG,SAAS,MAAM,iBAAiB;;;;;;;;;;;;;;;;;AAW5C,MAAMO,MAAM,GAAGA,CAAOC,CAAmB,EAAEC,CAAmB,GAA2B,CAAC;WAAGD,CAAC,EAAE;WAAGC,CAAC;KAAC;AAErG,cAAA,GACA,MAAMC,uBAAuB,GAAG,uBAAuB;AAGhD,MAAMC,oBAAoB,GAAA,WAAA,GAAwCC,MAAM,CAACC,GAAG,CACjFH,uBAAuB,CACe;AAGjC,MAAMI,iBAAiB,GAAA,WAAA,GAA8EvB,OAAO,4IAChHwB,UAAU,CACT,uBAAuB,CACxB;AAEH,cAAA,GACA,MAAMC,2BAA2B,GAAG,2BAA2B;AAGxD,MAAMC,wBAAwB,GAAA,WAAA,GAA4CL,MAAM,CAACC,GAAG,CACzFG,2BAA2B,CACe;AAGrC,MAAME,IAAI,IACfC,OAGC,GAAA,CACkC;QACnC,CAACR,oBAAoB,CAAA,EAAGA,oBAAoB;QAC5CjB,IAAIA,CAAA;YACF,+JAAOK,gBAAAA,AAAa,EAAC,IAAI,EAAEqB,SAAS,CAAC;QACvC,CAAC;QACD,GAAGD,OAAAA;KACJ,CAAC;AAGK,MAAME,QAAQ,IACnBF,OAUC,GAAA,CACuC;QACxC,CAACF,wBAAwB,CAAA,EAAGA,wBAAwB;QACpDK,KAAK,EAAEH,OAAO,CAACG,KAAK;QACpBC,IAAI,EAAEA,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,GAAG,IAAI,GAAKP,OAAO,CAACI,IAAI,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,CAAC;QACvEC,iBAAiB,EAAER,OAAO,CAACQ,iBAAAA;KAC5B,CAAC;AAGK,MAAMC,QAAQ,IAAIC,IAAwC,GAC/DX,IAAI,CAAC;QACHK,IAAI,GAAGE,MAAM,GACXrB,IAAI,wJAAC0B,OAAO,CAACC,YAAY,CAACF,IAAI,EAAEvC,GAAG,8IAAC0C,KAAK,EAAE,EAAEP,MAAM,EAAE,KAAK,CAAC,GAAGQ,KAAK,GACjEnC,MAAM,4IAACoC,KAAK,CAAC5C,GAAG,8IAAC6C,IAAI,CAACF,KAAK,CAAC,EAAE;oBAC5BG,MAAM,EAAEA,CAAA,GACNhC,IAAI,wJAACiC,IAAI,CACPnC,WAAW,wJAACoC,WAAW,CACrBhD,GAAG,8IAAC0C,KAAK,EAAE,EACX,CAAA,0CAAA,EAA6CP,MAAM,EAAE,CACtD,CACF;oBACHc,MAAM,EAAEnC,IAAI,wJAACoC,OAAAA;iBACd,CAAC,CAAC;QACPC,SAAS,EAAEZ;KACZ,CAAC;AAGG,MAAMa,OAAO,GAClBjB,MAA6D,IAC5B;IACjC,MAAM,EAAEkB,SAAS,EAAEC,QAAAA,EAAU,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAA,CAAE,EAAE;QAAEH,SAAS,EAAE,GAAG;QAAEC,QAAQ,EAAE;IAAG,CAAE,EAAEnB,MAAM,CAAC;IAC5F,MAAMsB,cAAc,IAAIvB,IAA2B,IAAa9B,8JAAI,AAAJA,EAAK8B,IAAI,EAAElC,GAAG,8IAAC0D,IAAI,CAACL,SAAS,CAAC,CAAC;IAC/F,MAAMM,gBAAgB,IAAIC,UAAkB,GAA4BA,UAAU,CAACxB,KAAK,CAACiB,SAAS,CAAC;IAEnG,MAAMQ,MAAM,GAAGA,CAAA,GACb,OAAOC,OAAO,KAAK,WAAW,IAAI,KAAK,IAAIA,OAAO,IAAI,OAAOA,OAAO,CAACC,GAAG,KAAK,QAAQ,GAAGD,OAAO,CAACC,GAAG,GAAG,CAAA,CAAE;IAE1G,MAAM9B,IAAI,GAAGA,CACXC,IAA2B,EAC3B8B,SAAqC,EACrC5B,KAAK,GAAG,IAAI,KACwC;QACpD,MAAMwB,UAAU,GAAGH,cAAc,CAACvB,IAAI,CAAC;QACvC,MAAM+B,OAAO,GAAGJ,MAAM,EAAE;QACxB,MAAMK,QAAQ,GAAGN,UAAU,IAAIK,OAAO,GAAGzD,MAAM,4IAAC2D,IAAI,CAACF,OAAO,CAACL,UAAU,CAAE,CAAC,GAAGpD,MAAM,4IAAC4D,IAAI,EAAE;QAC1F,+JAAOhE,OAAAA,AAAI,EACT8D,QAAQ,EACRpD,IAAI,wJAACuD,QAAQ,CAAC,IAAMzD,WAAW,wJAACoC,WAAW,CAACd,IAAI,EAAE,CAAA,SAAA,EAAY0B,UAAU,CAAA,gCAAA,CAAkC,CAAC,CAAC,EAC5G9C,IAAI,wJAAC0B,OAAO,EAAE8B,KAAK,GAAKC,cAAc,CAACD,KAAK,EAAEpC,IAAI,EAAE8B,SAAS,EAAEV,QAAQ,EAAElB,KAAK,CAAC,CAAC,CACjF;IACH,CAAC;IAED,MAAMC,iBAAiB,GACrBH,IAA2B,IAE3BpB,IAAI,wJAAC0D,IAAI,CAAC,MAAK;YACb,MAAMP,OAAO,GAAGJ,MAAM,EAAE;YACxB,MAAMY,IAAI,GAAGlB,MAAM,CAACkB,IAAI,CAACR,OAAO,CAAC;YACjC,MAAMS,QAAQ,GAAGD,IAAI,CAACE,GAAG,EAAEL,KAAK,GAAKX,gBAAgB,CAACW,KAAK,CAACM,WAAW,EAAE,CAAC,CAAC;YAC3E,MAAMC,gBAAgB,GAAGH,QAAQ,CAACI,MAAM,EAAEC,OAAO,IAAI;gBACnD,IAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9C,IAAI,CAAC+C,MAAM,EAAED,CAAC,EAAE,CAAE;oBACpC,MAAME,aAAa,2JAAG9E,OAAAA,AAAI,EAAC8B,IAAI,EAAElC,GAAG,8IAACmF,SAAS,CAACH,CAAC,CAAC,CAAC;oBAClD,MAAMI,cAAc,GAAGL,OAAO,CAACC,CAAC,CAAC;oBACjC,IAAII,cAAc,KAAKC,SAAS,IAAIH,aAAa,KAAKE,cAAc,EAAE;wBACpE,OAAO,KAAK;oBACd;gBACF;gBACA,OAAO,IAAI;YACb,CAAC,CAAC,CAAC5C,OAAO,EAAEuC,OAAO,GAAKA,OAAO,CAACO,KAAK,CAACpD,IAAI,CAAC+C,MAAM,EAAE/C,IAAI,CAAC+C,MAAM,GAAG,CAAC,CAAC,CAAC;YACpE,OAAO3E,OAAO,4IAACiF,YAAY,CAACV,gBAAgB,CAAC;QAC/C,CAAC,CAAC;IAEJ,OAAOvC,QAAQ,CAACP,QAAQ,CAAC;QAAEE,IAAI;QAAEI,iBAAiB;QAAEL,KAAK,EAAEnB,SAAS,0KAAC6B,KAAAA;IAAK,CAAE,CAAC,CAAC;AAChF,CAAC;AAGM,MAAM8C,OAAO,GAAGA,CACrBb,GAAwB,EACxBxC,MAA6D,KAC5B;IACjC,MAAM,EAAEkB,SAAS,EAAEC,QAAAA,EAAU,GAAGC,MAAM,CAACC,MAAM,CAAC;QAAEF,QAAQ,EAAE,GAAG;QAAED,SAAS,EAAE;IAAG,CAAE,EAAElB,MAAM,CAAC;IACxF,MAAMsB,cAAc,IAAIvB,IAA2B,2JAAa9B,OAAAA,AAAI,EAAC8B,IAAI,EAAElC,GAAG,8IAAC0D,IAAI,CAACL,SAAS,CAAC,CAAC;IAC/F,MAAMM,gBAAgB,IAAIC,UAAkB,GAA4BA,UAAU,CAACxB,KAAK,CAACiB,SAAS,CAAC;IACnG,MAAMoC,iBAAiB,GAAGC,gBAAgB,CACxCf,GAAG,GACFgB,GAAG,GAAKhC,gBAAgB,CAACgC,GAAG,CAAC,EAC9BlC,cAAc,CACf;IACD,MAAMxB,IAAI,GAAGA,CACXC,IAA2B,EAC3B8B,SAAqC,EACrC5B,KAAK,GAAG,IAAI,KACwC;QACpD,MAAMwB,UAAU,GAAGH,cAAc,CAACvB,IAAI,CAAC;QACvC,MAAMgC,QAAQ,GAAGuB,iBAAiB,CAACG,GAAG,CAAChC,UAAU,CAAC,GAChDpD,MAAM,4IAAC2D,IAAI,CAACsB,iBAAiB,CAACI,GAAG,CAACjC,UAAU,CAAE,CAAC,GAC/CpD,MAAM,4IAAC4D,IAAI,EAAE;QACf,+JAAOhE,OAAAA,AAAI,EACT8D,QAAQ,EACRpD,IAAI,wJAACuD,QAAQ,CAAC,IAAMzD,WAAW,wJAACoC,WAAW,CAACd,IAAI,EAAE,CAAA,SAAA,EAAY0B,UAAU,CAAA,6BAAA,CAA+B,CAAC,CAAC,EACzG9C,IAAI,wJAAC0B,OAAO,CAAE8B,KAAK,IAAKC,cAAc,CAACD,KAAK,EAAEpC,IAAI,EAAE8B,SAAS,EAAEV,QAAQ,EAAElB,KAAK,CAAC,CAAC,CACjF;IACH,CAAC;IACD,MAAMC,iBAAiB,IACrBH,IAA2B,GAE3BpB,IAAI,wJAAC0D,IAAI,CAAC,MAAK;YACb,MAAME,QAAQ,GAAG1E,GAAG,8IAACuF,YAAY,CAACE,iBAAiB,CAAChB,IAAI,EAAE,CAAC,CAACE,GAAG,CAAChB,gBAAgB,CAAC;YACjF,MAAMkB,gBAAgB,GAAGH,QAAQ,CAACI,MAAM,EAAEC,OAAO,IAAI;gBACnD,IAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG9C,IAAI,CAAC+C,MAAM,EAAED,CAAC,EAAE,CAAE;oBACpC,MAAME,aAAa,2JAAG9E,OAAAA,AAAI,EAAC8B,IAAI,EAAElC,GAAG,8IAACmF,SAAS,CAACH,CAAC,CAAC,CAAC;oBAClD,MAAMI,cAAc,GAAGL,OAAO,CAACC,CAAC,CAAC;oBACjC,IAAII,cAAc,KAAKC,SAAS,IAAIH,aAAa,KAAKE,cAAc,EAAE;wBACpE,OAAO,KAAK;oBACd;gBACF;gBACA,OAAO,IAAI;YACb,CAAC,CAAC,CAAC5C,OAAO,EAAEuC,OAAO,GAAKA,OAAO,CAACO,KAAK,CAACpD,IAAI,CAAC+C,MAAM,EAAE/C,IAAI,CAAC+C,MAAM,GAAG,CAAC,CAAC,CAAC;YACpE,OAAO3E,OAAO,4IAACiF,YAAY,CAACV,gBAAgB,CAAC;QAC/C,CAAC,CAAC;IAEJ,OAAOvC,QAAQ,CAACP,QAAQ,CAAC;QAAEE,IAAI;QAAEI,iBAAiB;QAAEL,KAAK,EAAEnB,SAAS,0KAAC6B,KAAAA;IAAK,CAAE,CAAC,CAAC;AAChF,CAAC;AAED,MAAMoD,MAAM,GAAGA,CACbC,OAAyB,EACzBC,QAA0B,EAC1BC,IAAsB,EACtBC,KAAuB,KACiB;IACxC,MAAMC,OAAO,GAAGnG,GAAG,8IAACoG,MAAM,CACxBH,IAAI,CAAChB,MAAM,GACVoB,KAAK,GACJA,KAAK,IAAIH,KAAK,CAACjB,MAAM,GACnBzE,MAAM,4IAAC4D,IAAI,EAAE,GACb5D,MAAM,4IAAC2D,IAAI,CAAC;YAAC4B,OAAO,CAACM,KAAK,CAAC;YAAEA,KAAK,GAAG,CAAC;SAAC,CAAC,CAC7C;IACD,MAAMC,QAAQ,GAAGtG,GAAG,8IAACoG,MAAM,CACzBF,KAAK,CAACjB,MAAM,GACXoB,KAAK,GACJA,KAAK,IAAIJ,IAAI,CAAChB,MAAM,GAClBzE,MAAM,4IAAC4D,IAAI,EAAE,GACb5D,MAAM,4IAAC2D,IAAI,CAAC;YAAC6B,QAAQ,CAACK,KAAK,CAAC;YAAEA,KAAK,GAAG,CAAC;SAAC,CAAC,CAC9C;IACD,MAAME,aAAa,GAAGtF,MAAM,CAACgF,IAAI,EAAEE,OAAO,CAAC;IAC3C,MAAMK,cAAc,GAAGvF,MAAM,CAACiF,KAAK,EAAEI,QAAQ,CAAC;IAC9C,OAAO;QAACC,aAAa;QAAEC,cAAc;KAAC;AACxC,CAAC;AAED,MAAMC,gBAAgB,GAAGA,CAACvE,IAA2B,EAAEC,MAA8B,KAA2B;IAC9G,IAAIuE,EAAE,GAAGvE,MAAiC;IAC1C,IAAIuE,EAAE,CAACC,IAAI,KAAK,QAAQ,EAAE;QACxB,MAAMC,GAAG,GAAG1E,IAAI,CAACoD,KAAK,EAAE;QACxB,MAAOoB,EAAE,CAACC,IAAI,KAAK,QAAQ,CAAE;YAC3BC,GAAG,CAACC,IAAI,CAACH,EAAE,CAACI,IAAI,CAAC;YACjBJ,EAAE,GAAGA,EAAE,CAACvE,MAAiC;QAC3C;QACA,OAAOyE,GAAG;IACZ;IACA,OAAO1E,IAAI;AACb,CAAC;AAED,MAAMO,YAAY,GAAGA,CACnBF,IAAwC,EACxCwE,MAA6B,EAC7B5E,MAAwB,EACxBC,KAAc,KACsC;IACpD,MAAMsE,EAAE,GAAGvE,MAAiC;IAC5C,OAAQuE,EAAE,CAACC,IAAI;QACb,KAAK5F,OAAO,kKAACiG,WAAW;YAAE;gBACxB,OAAOlG,IAAI,wJAACoC,OAAO,CAAClD,GAAG,8IAACiH,EAAE,CAACP,EAAE,CAACpC,KAAK,CAAC,CAAqD;YAC3F;QACA,KAAKvD,OAAO,kKAACmG,YAAY;YAAE;gBACzB,OAAOpG,IAAI,wJAACqG,OAAO,CACjB,IAAM1E,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACvE,MAAM,EAAEC,KAAK,CAAC,CACY;YAClE;QACA,KAAKrB,OAAO,kKAACqG,OAAO;YAAE;gBACpB,OAAOtG,IAAI,wJAACiC,IAAI,CAACnC,WAAW,wJAACoC,WAAW,CAAC+D,MAAM,EAAEL,EAAE,CAACW,OAAO,CAAC,CAG3D;YACH;QACA,KAAKtG,OAAO,kKAACuG,WAAW;YAAE;gBACxB,8JAAOlH,QAAAA,AAAI,EACTU,IAAI,wJAACqG,OAAO,CAAC,IAAM1E,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACa,KAAK,EAAEnF,KAAK,CAAC,CAAC,EAC/DtB,IAAI,wJAAC0G,QAAQ,EAAEC,MAAM,IAAI;oBACvB,IAAIf,EAAE,CAACgB,SAAS,CAACD,MAAM,CAAC,EAAE;wBACxB,+JAAOrH,OAAAA,AAAI,EACTqC,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACiB,MAAM,EAAEvF,KAAK,CAAC,EAC5CtB,IAAI,wJAAC0G,QAAQ,EAAEI,MAAM,GAAK9G,IAAI,wJAACiC,IAAI,CAACnC,WAAW,wJAACiH,EAAE,CAACJ,MAAM,EAAEG,MAAM,CAAC,CAAC,CAAC,CACrE;oBACH;oBACA,OAAO9G,IAAI,wJAACiC,IAAI,CAAC0E,MAAM,CAAC;gBAC1B,CAAC,CAAC,CAC4D;YAClE;QACA,KAAK1G,OAAO,kKAAC+G,OAAO;YAAE;gBACpB,OAAOhH,IAAI,wJAACqG,OAAO,CAAC,IAAM1E,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACvE,MAAM,EAAE,EAAEC,KAAK,CAAC,CAGvE;YACH;QACA,KAAKrB,OAAO,kKAACgH,cAAc;YAAE;gBAC3B,OAAOjH,IAAI,wJAACqG,OAAO,CAAC,4JAClB/G,OAAAA,AAAI,EACFqC,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACsB,QAAQ,EAAE5F,KAAK,CAAC,EAC9CtB,IAAI,wJAAC0B,OAAO,CACV1B,IAAI,wJAACmH,iBAAiB,CAAEC,CAAC,2JACvB9H,QAAAA,AAAI,EACFsG,EAAE,CAACyB,SAAS,CAACD,CAAC,CAAC,EACfpH,IAAI,wJAACuD,QAAQ,CAACzD,WAAW,wJAACwH,QAAQ,CAAC3B,gBAAgB,CAACM,MAAM,EAAEL,EAAE,CAACsB,QAAQ,CAAC,CAAC,CAAC,CAC3E,CACF,CACF,CACF,CAC6D;YAClE;QACA,KAAKjH,OAAO,kKAACsH,SAAS;YAAE;gBACtB,OAAOvH,IAAI,wJAACqG,OAAO,CAAC,IAClB1E,YAAY,CACVF,IAAI,EACJtB,MAAM,CAAC8F,MAAM,EAAE/G,GAAG,8IAACiH,EAAE,CAACP,EAAE,CAACI,IAAI,CAAC,CAAC,EAC/BJ,EAAE,CAACvE,MAAM,EACTC,KAAK,CACN,CAC6D;YAClE;QACA,KAAKrB,OAAO,kKAACuH,YAAY;YAAE;gBACzB,+JAAOlI,OAAAA,AAAI,EACTS,SAAS,0KAACmB,KAAK,CAAC+E,MAAM,EAAExE,IAAI,CAACP,KAAK,CAAC,EACnClB,IAAI,wJAAC0B,OAAO,EAAEuE,MAAM,2JAClB3G,OAAAA,AAAI,EACFmC,IAAI,CAACN,IAAI,CAAC8E,MAAM,EAAEL,EAAE,EAAEtE,KAAK,CAAC,EAC5BtB,IAAI,wJAAC0B,OAAO,EAAE+F,MAAM,IAAI;wBACtB,IAAIA,MAAM,CAACtD,MAAM,KAAK,CAAC,EAAE;4BACvB,MAAM6B,IAAI,2JAAG1G,OAAAA,AAAI,EAACJ,GAAG,8IAACwI,IAAI,CAACzB,MAAM,CAAC,EAAEvG,MAAM,4IAACiI,SAAS,CAAC,IAAM,OAAO,CAAC,CAAC;4BACpE,OAAO3H,IAAI,wJAACiC,IAAI,CAACnC,WAAW,wJAACoC,WAAW,CAAC,EAAE,EAAE,CAAA,SAAA,EAAY0D,EAAE,CAACgC,WAAW,CAAA,WAAA,EAAc5B,IAAI,EAAE,CAAC,CAAC;wBAC/F;wBACA,OAAOhG,IAAI,wJAACoC,OAAO,CAACqF,MAAM,CAAC;oBAC7B,CAAC,CAAC,CACH,CACF,CAC6D;YAClE;QACA,KAAKxH,OAAO,kKAAC4H,WAAW;YAAE;gBACxB,+JAAOvI,OAAAA,AAAI,EACTS,SAAS,0KAACmB,KAAK,CAAC+E,MAAM,EAAExE,IAAI,CAACP,KAAK,CAAC,EACnClB,IAAI,wJAAC0B,OAAO,EAAEoG,aAAa,0JACzBxI,QAAI,AAAJA,EACEmC,IAAI,CAACF,iBAAiB,CAACuG,aAAa,CAAC,EACrC9H,IAAI,wJAAC0B,OAAO,CAACqG,WAAW,CAAC,EACzB/H,IAAI,wJAAC0B,OAAO,EAAEsG,OAAO,IAAI;wBACvB,IAAIA,OAAO,CAAC7D,MAAM,KAAK,CAAC,EAAE;4BACxB,OAAOnE,IAAI,wJAACqG,OAAO,CAAC,IAClBrG,IAAI,wJAAC6D,GAAG,CAAClC,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACvE,MAAM,EAAE,IAAI,CAAC,EAAEnC,GAAG,8IAACiH,EAAE,CAAC,CACC;wBAClE;wBACA,QAAO7G,8JAAAA,AAAI,EACTU,IAAI,wJAACmH,iBAAiB,CACpBa,OAAO,GACNzC,KAAK,GAAK5D,YAAY,CAACF,IAAI,EAAEvC,GAAG,8IAAC+I,MAAM,CAAChC,MAAM,EAAE,CAAA,CAAA,EAAIV,KAAK,CAAA,CAAA,CAAG,CAAC,EAAEK,EAAE,CAACvE,MAAM,EAAE,IAAI,CAAC,CACjF,EACDrB,IAAI,wJAAC6D,GAAG,EAAEqE,UAAU,IAAI;4BACtB,MAAM7F,SAAS,GAAGnD,GAAG,8IAACiJ,OAAO,CAACD,UAAU,CAAC;4BACzC,IAAI7F,SAAS,CAAC8B,MAAM,KAAK,CAAC,EAAE;gCAC1B,OAAOjF,GAAG,8IAACiH,EAAE,CAACjH,GAAG,8IAAC0C,KAAK,EAAK,CAAC;4BAC/B;4BACA,OAAO1C,GAAG,8IAACiH,EAAE,CAAC9D,SAAS,CAAC;wBAC1B,CAAC,CAAC,CAC4D;oBAClE,CAAC,CAAC,CACH,CACF,CACF;YACH;QACA,KAAKpC,OAAO,kKAACmI,UAAU;YAAE;gBACvB,OAAOpI,IAAI,wJAACqG,OAAO,CAAC,2JAClB/G,QAAI,AAAJA,EACES,SAAS,0KAACmB,KAAK,CAAC+E,MAAM,EAAExE,IAAI,CAACP,KAAK,CAAC,EACnClB,IAAI,wJAAC0B,OAAO,EAAEuE,MAAM,GAClB3G,+JAAAA,AAAI,EACFmC,IAAI,CAACF,iBAAiB,CAAC0E,MAAM,CAAC,EAC9BjG,IAAI,wJAAC0B,OAAO,EAAEiC,IAAI,IAAI;4BACpB,+JAAOrE,OAAAA,AAAI,EACTqE,IAAI,EACJ3D,IAAI,wJAACmH,iBAAiB,EAAEkB,GAAG,GACzB1G,YAAY,CACVF,IAAI,EACJtB,MAAM,CAAC8F,MAAM,EAAE/G,GAAG,8IAACiH,EAAE,CAACkC,GAAG,CAAC,CAAC,EAC3BzC,EAAE,CAAC0C,WAAW,EACdhH,KAAK,CACN,CACF,EACDtB,IAAI,wJAAC6D,GAAG,CAAE0E,MAAM,IAAI;gCAClB,IAAIA,MAAM,CAACpE,MAAM,KAAK,CAAC,EAAE;oCACvB,OAAOjF,GAAG,8IAACiH,EAAE,CAAC5G,OAAO,4IAACqC,KAAK,EAAE,CAAC;gCAChC;gCACA,WAAOtC,2JAAAA,AAAI,EACTkJ,SAAS,CAACD,MAAM,CAAC,EACjBrJ,GAAG,8IAAC2E,GAAG,EAAE4D,MAAM,GAAKlI,OAAO,4IAACkF,YAAY,CAACvF,GAAG,8IAACuJ,GAAG,CAACvJ,GAAG,8IAACuF,YAAY,CAACd,IAAI,CAAC,EAAE8D,MAAM,CAAC,CAAC,CAAC,CACnF;4BACH,CAAC,CAAC,CACH;wBACH,CAAC,CAAC,CACH,CACF,CACF,CAC6D;YAClE;QACA,KAAKxH,OAAO,kKAACyI,WAAW;YAAE;gBACxB,OAAO1I,IAAI,wJAACqG,OAAO,CAAC,4JAClB/G,OAAAA,AAAI,EACFqC,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACT,IAAI,EAAE7D,KAAK,CAAC,EAC1CtB,IAAI,wJAAC2I,MAAM,EACX3I,IAAI,wJAAC0B,OAAO,EAAEyD,IAAI,2JAChB7F,OAAAA,AAAI,EACFqC,YAAY,CAACF,IAAI,EAAEwE,MAAM,EAAEL,EAAE,CAACR,KAAK,EAAE9D,KAAK,CAAC,EAC3CtB,IAAI,wJAAC2I,MAAM,EACX3I,IAAI,wJAAC0B,OAAO,EAAE0D,KAAK,IAAI;4BACrB,IAAIhG,MAAM,4IAACwJ,MAAM,CAACzD,IAAI,CAAC,IAAI/F,MAAM,4IAACwJ,MAAM,CAACxD,KAAK,CAAC,EAAE;gCAC/C,OAAOpF,IAAI,wJAACiC,IAAI,CAACnC,WAAW,wJAAC+I,GAAG,CAAC1D,IAAI,CAACA,IAAI,EAAEC,KAAK,CAACD,IAAI,CAAC,CAAC;4BAC1D;4BACA,IAAI/F,MAAM,4IAACwJ,MAAM,CAACzD,IAAI,CAAC,IAAI/F,MAAM,4IAAC0J,OAAO,CAAC1D,KAAK,CAAC,EAAE;gCAChD,OAAOpF,IAAI,wJAACiC,IAAI,CAACkD,IAAI,CAACA,IAAI,CAAC;4BAC7B;4BACA,IAAI/F,MAAM,4IAAC0J,OAAO,CAAC3D,IAAI,CAAC,IAAI/F,MAAM,4IAACwJ,MAAM,CAACxD,KAAK,CAAC,EAAE;gCAChD,OAAOpF,IAAI,wJAACiC,IAAI,CAACmD,KAAK,CAACD,IAAI,CAAC;4BAC9B;4BACA,IAAI/F,MAAM,4IAAC0J,OAAO,CAAC3D,IAAI,CAAC,IAAI/F,MAAM,4IAAC0J,OAAO,CAAC1D,KAAK,CAAC,EAAE;gCACjD,MAAMhE,IAAI,OAAG9B,2JAAAA,AAAI,EAAC2G,MAAM,EAAE/G,GAAG,8IAAC0D,IAAI,CAAC,GAAG,CAAC,CAAC;gCACxC,MAAMX,IAAI,GAAG8G,gBAAgB,CAAC9C,MAAM,EAAE7E,IAAI,CAAC;gCAC3C,MAAM,CAAC4H,KAAK,EAAEC,MAAM,CAAC,GAAGjE,MAAM,CAC5B/C,IAAI,EACJA,IAAI,0JACJ3C,OAAAA,AAAI,EAAC6F,IAAI,CAACC,KAAK,EAAElG,GAAG,8IAAC2E,GAAG,CAACzE,MAAM,4IAACgG,KAAK,CAAC,CAAC,0JACvC9F,OAAAA,AAAI,EAAC8F,KAAK,CAACA,KAAK,EAAElG,GAAG,8IAAC2E,GAAG,CAACzE,MAAM,4IAACgG,KAAK,CAAC,CAAC,CACzC;gCACD,QAAO9F,8JAAAA,AAAI,EACT0J,KAAK,EACL9J,GAAG,8IAACuJ,GAAG,CAACQ,MAAM,CAAC,EACfjJ,IAAI,wJAACmH,iBAAiB,CAAC,CAAC,CAAChC,IAAI,EAAEC,KAAK,CAAC,GACnC9F,+JAAAA,AAAI,EACFU,IAAI,wJAACyI,GAAG,CAACtD,IAAI,EAAEC,KAAK,CAAC,EACrBpF,IAAI,wJAAC6D,GAAG,CAAC,CAAC,CAACsB,IAAI,EAAEC,KAAK,CAAC,GAAKQ,EAAE,CAAC6C,GAAG,CAACtD,IAAI,EAAEC,KAAK,CAAC,CAAC,CACjD,CACF,CACF;4BACH;4BACA,MAAM,IAAI8D,KAAK,CACb,yGAAyG,CAC1G;wBACH,CAAC,CAAC,CACH,CACF,CACF,CAC6D;YAClE;IACF;AACF,CAAC;AAED,MAAMH,gBAAgB,GACpBA,CAAC9C,MAA6B,EAAE7E,IAAY,IAAMmE,KAAa,GAC7DnG,MAAM,4IAAC+F,IAAI,CACTrF,WAAW,wJAACoC,WAAW,CACrB+D,MAAM,EACN,CAAA,qBAAA,EAAwBV,KAAK,CAAA,wBAAA,EAA2BnE,IAAI,CAAA,aAAA,CAAe,CAC5E,CACF;AAGE,MAAM+H,YAAY,GAAA,WAAA,IAAG9J,8JAAAA,AAAI,EAG9B,CAAC,EAAE,CAAC+J,IAAI,EAAEC,CAAC,GAAK7H,QAAQ,CAAC8H,gBAAgB,CAACF,IAAI,CAAC/G,SAAS,EAAEgH,CAAC,CAAC,CAAC,CAAC;AAEhE,MAAMC,gBAAgB,GAAGA,CACvBF,IAAwC,EACxCC,CAA2B,GAE3BpI,QAAQ,CAAC;QACPE,IAAI,EAAEA,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,GAAG,IAAI,GAAK8H,IAAI,CAACjI,IAAI,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,CAAC;QACpEC,iBAAiB,GAAGH,IAAI,GAAKgI,IAAI,CAAC7H,iBAAiB,CAACH,IAAI,CAAC;QACzDF,KAAK,EAAEnB,SAAS,0KAACwJ,OAAO,CAACH,IAAI,CAAClI,KAAK,EAAEmI,CAAC;KACvC,CAAC;AAGG,MAAMG,MAAM,GAAA,WAAA,2JAAGnK,OAAI,AAAJA,EAGpB,CAAC,EAAE,CAAC+J,IAAI,EAAEpD,IAAI,GACdxE,QAAQ,CAACP,QAAQ,CAAC;QAChBE,IAAI,EAAEA,CAACC,IAAI,EAAEC,MAAM,GAAK+H,IAAI,CAAC/G,SAAS,CAAClB,IAAI,CAACC,IAAI,EAAEC,MAAM,EAAE,IAAI,CAAC;QAC/DE,iBAAiB,GAAGH,IAAI,GAAKgI,IAAI,CAAC/G,SAAS,CAACd,iBAAiB,CAACH,IAAI,CAAC;QACnEF,KAAK,EAAEnB,SAAS,0KAACyJ,MAAM,CAACJ,IAAI,CAAC/G,SAAS,CAACnB,KAAK,EAAE8E,IAAI;KACnD,CAAC,CAAC,CAAC;AAGC,MAAMyD,QAAQ,GAAA,WAAA,2JAAGpK,OAAAA,AAAI,EAG1B,CAAC,EAAE,CAAC+J,IAAI,EAAEpD,IAAI,GACdxE,QAAQ,CAACP,QAAQ,CAAC;QAChBE,IAAI,EAAEA,CAACC,IAAI,EAAEC,MAAM,GAAK+H,IAAI,CAAC/G,SAAS,CAAClB,IAAI,CAACC,IAAI,EAAEC,MAAM,EAAE,IAAI,CAAC;QAC/DE,iBAAiB,GAAGH,IAAI,GAAKgI,IAAI,CAAC/G,SAAS,CAACd,iBAAiB,CAACH,IAAI,CAAC;QACnEF,KAAK,EAAEnB,SAAS,0KAAC0J,QAAQ,CAACL,IAAI,CAAC/G,SAAS,CAACnB,KAAK,EAAE8E,IAAI;KACrD,CAAC,CAAC,CAAC;AAGC,MAAM0D,MAAM,GAAA,WAAA,IAAGrK,8JAAAA,AAAI,EAUxB,CAAC,EAAE,CAAC+J,IAAI,EAAEO,IAAI,GAAKnI,QAAQ,CAACoI,UAAU,CAACR,IAAI,CAAC/G,SAAS,EAAE,IAAMsH,IAAI,EAAE,CAACtH,SAAS,CAAC,CAAC,CAAC;AAElF,MAAMuH,UAAU,GAAGA,CACjBR,IAAwC,EACxCO,IAAiD,GAEjD1I,QAAQ,CAAC;QACPE,IAAI,EAAEA,CAACC,IAAI,EAAEC,MAAM,EAAEC,KAAK,2JACxBhC,OAAI,AAAJA,EACES,SAAS,0KAACmB,KAAK,CAACE,IAAI,EAAEgI,IAAI,CAAClI,KAAK,CAAC,EACjClB,IAAI,wJAAC0B,OAAO,EAAER,KAAK,GAAKkI,IAAI,CAACjI,IAAI,CAACD,KAAK,EAAEG,MAAM,EAAEC,KAAK,CAAC,CAAC,EACxDtB,IAAI,wJAAC0G,QAAQ,EAAEC,MAAM,2JACnBrH,OAAAA,AAAI,EACFU,IAAI,wJAAC0D,IAAI,CAACiG,IAAI,CAAC,EACf3J,IAAI,wJAAC0B,OAAO,EAAEiI,IAAI,0JAChBrK,QAAAA,AAAI,EACFS,SAAS,0KAACmB,KAAK,CAACE,IAAI,EAAEuI,IAAI,CAACzI,KAAK,CAAC,EACjClB,IAAI,wJAAC0B,OAAO,EAAER,KAAK,GAAKyI,IAAI,CAACxI,IAAI,CAACD,KAAK,EAAEG,MAAM,EAAEC,KAAK,CAAC,CAAC,EACxDtB,IAAI,wJAAC0G,QAAQ,EAAEI,MAAM,GAAK9G,IAAI,wJAACiC,IAAI,CAACnC,WAAW,wJAACiH,EAAE,CAACJ,MAAM,EAAEG,MAAM,CAAC,CAAC,CAAC,CACrE,CACF,CACF,CACF,CACF;QACHvF,iBAAiB,GAAGH,IAAI,2JACtB9B,OAAI,AAAJA,EACES,SAAS,0KAACmB,KAAK,CAACE,IAAI,EAAEgI,IAAI,CAAClI,KAAK,CAAC,EACjClB,IAAI,wJAAC0B,OAAO,EAAER,KAAK,GAAKkI,IAAI,CAAC7H,iBAAiB,CAACL,KAAK,CAAC,CAAC,EACtDlB,IAAI,wJAAC2I,MAAM,EACX3I,IAAI,wJAAC0B,OAAO,CAAEyD,IAAI,KAChB7F,8JAAAA,AAAI,EACFU,IAAI,wJAAC0D,IAAI,CAACiG,IAAI,CAAC,EACf3J,IAAI,wJAAC0B,OAAO,EAAEiI,IAAI,2JAChBrK,OAAAA,AAAI,EACFS,SAAS,0KAACmB,KAAK,CAACE,IAAI,EAAEuI,IAAI,CAACzI,KAAK,CAAC,EACjClB,IAAI,wJAAC0B,OAAO,EAAER,KAAK,GAAKyI,IAAI,CAACpI,iBAAiB,CAACL,KAAK,CAAC,CAAC,EACtDlB,IAAI,wJAAC2I,MAAM,EACX3I,IAAI,wJAAC0B,OAAO,CAAE0D,KAAK,IAAI;wBACrB,IAAIhG,MAAM,4IAACwJ,MAAM,CAACzD,IAAI,CAAC,IAAI/F,MAAM,4IAACwJ,MAAM,CAACxD,KAAK,CAAC,EAAE;4BAC/C,OAAOpF,IAAI,wJAACiC,IAAI,CAACnC,WAAW,wJAAC+I,GAAG,CAAC1D,IAAI,CAACA,IAAI,EAAEC,KAAK,CAACD,IAAI,CAAC,CAAC;wBAC1D;wBACA,IAAI/F,MAAM,4IAACwJ,MAAM,CAACzD,IAAI,CAAC,IAAI/F,MAAM,4IAAC0J,OAAO,CAAC1D,KAAK,CAAC,EAAE;4BAChD,OAAOpF,IAAI,wJAACoC,OAAO,CAACgD,KAAK,CAACA,KAAK,CAAC;wBAClC;wBACA,IAAIhG,MAAM,4IAAC0J,OAAO,CAAC3D,IAAI,CAAC,IAAI/F,MAAM,4IAACwJ,MAAM,CAACxD,KAAK,CAAC,EAAE;4BAChD,OAAOpF,IAAI,wJAACoC,OAAO,CAAC+C,IAAI,CAACC,KAAK,CAAC;wBACjC;wBACA,IAAIhG,MAAM,4IAAC0J,OAAO,CAAC3D,IAAI,CAAC,IAAI/F,MAAM,4IAAC0J,OAAO,CAAC1D,KAAK,CAAC,EAAE;4BACjD,OAAOpF,IAAI,wJAACoC,OAAO,CAAC9C,+JAAAA,AAAI,EAAC6F,IAAI,CAACC,KAAK,EAAE5F,OAAO,4IAACqK,KAAK,CAACzE,KAAK,CAACA,KAAK,CAAC,CAAC,CAAC;wBACnE;wBACA,MAAM,IAAI8D,KAAK,CACb,uGAAuG,CACxG;oBACH,CAAC,CAAC,CACH,CACF,CACF,CACF,CACF;QACHhI,KAAK,EAAEnB,SAAS,0KAAC6B,KAAAA;KAClB,CAAC;AAGG,MAAMkI,YAAY,IAAIV,IAAmC,GAC9DD,YAAY,CAACC,IAAI,EAAElJ,WAAW,4JAAC4J,YAAY,CAAC;AAGvC,MAAMC,SAAS,IAAIX,IAAmC,GAC3DD,YAAY,CAACC,IAAI,EAAElJ,WAAW,4JAAC6J,SAAS,CAAC;AAGpC,MAAMC,SAAS,IAAIZ,IAAmC,GAC3DD,YAAY,CAACC,IAAI,EAAElJ,WAAW,4JAAC8J,SAAS,CAAC;AAGpC,MAAMC,SAAS,IAAIb,IAAmC,GAC3DD,YAAY,CAACC,IAAI,EAAElJ,WAAW,4JAAC+J,SAAS,CAAC;AAGpC,MAAMC,SAAS,IAAId,IAAmC,GAC3DD,YAAY,CAACC,IAAI,EAAElJ,WAAW,4JAACgK,SAAS,CAAC;AAGpC,MAAMC,MAAM,GAAA,WAAA,GAAG9K,+JAAAA,AAAI,EAUxB,CAAC,EAAE,CAAC+J,IAAI,EAAEhI,IAAI,EAAEiI,CAAC,KAAI;IACrB,MAAMe,MAAM,GAAGlL,GAAG,8IAACmL,MAAM,CAACjJ,IAAI,EAAEgI,IAAI,EAAE,CAACkB,QAAQ,EAAEtE,IAAI,GAAKyD,QAAQ,CAACa,QAAQ,EAAEtE,IAAI,CAAC,CAAC;IACnF,MAAMuE,IAAI,GAAGrL,GAAG,8IAACsL,WAAW,CAACpJ,IAAI,EAAEiI,CAAC,CAACe,MAAM,CAAC,EAAE,CAACE,QAAQ,EAAEtE,IAAI,GAAKwD,MAAM,CAACc,QAAQ,EAAEtE,IAAI,CAAC,CAAC;IACzF,OAAO0D,MAAM,CAACa,IAAI,EAAE,IAAMnB,IAAI,CAAC;AACjC,CAAC,CAAC;AAEF,MAAMqB,eAAe,GAAGA,CAACC,IAAY,EAAEC,KAAa,KAAmB;IACrE,MAAMrJ,KAAK,GAAGoJ,IAAI,CAACpJ,KAAK,CAAC,IAAIsJ,MAAM,CAAC,CAAA,IAAA,EAAO/K,MAAM,4IAACgL,MAAM,CAACF,KAAK,CAAC,CAAA,IAAA,CAAM,CAAC,CAAC;IACvE,OAAOrJ,KAAK;AACd,CAAC;AAED,MAAMmC,cAAc,GAAGA,CACrBiH,IAAY,EACZtJ,IAA2B,EAC3B8B,SAAqC,EACrC4H,SAAiB,EACjBxJ,KAAc,KACsC;IACpD,IAAI,CAACA,KAAK,EAAE;QACV,+JAAOhC,OAAAA,AAAI,EACT4D,SAAS,CAAC6H,KAAK,CAACL,IAAI,CAAC,EACrB1K,IAAI,wJAACgL,OAAO,CAAC;YACXC,SAAS,EAAEnL,WAAW,wJAACwH,QAAQ,CAAClG,IAAI,CAAC;YACrC8J,SAAS,EAAEhM,GAAG,8IAACiH,EAAAA;SAChB,CAAC,CACH;IACH;IACA,+JAAO7G,OAAAA,AAAI,EACTmL,eAAe,CAACC,IAAI,EAAEI,SAAS,CAAC,EAChC9K,IAAI,wJAACmH,iBAAiB,EAAEgE,IAAI,GAAKjI,SAAS,CAAC6H,KAAK,CAACI,IAAI,CAACC,IAAI,EAAE,CAAC,CAAC,EAC9DpL,IAAI,wJAACuD,QAAQ,CAACzD,WAAW,wJAACwH,QAAQ,CAAClG,IAAI,CAAC,CAAC,CAC1C;AACH,CAAC;AAED,MAAMoH,SAAS,IAAO6C,KAAsC,IAAqB;IAC/E,OAAO5I,MAAM,CAACkB,IAAI,CAAC0H,KAAK,CAAC,CAAC,CAAC,CAAC,CAACxH,GAAG,EAAEyH,MAAM,GAAKD,KAAK,CAACxH,GAAG,EAAE0H,GAAG,GAAKA,GAAG,CAACD,MAAa,CAAC,CAAC,CAAC;AACtF,CAAC;AAED,MAAMvD,WAAW,IAAIyD,aAAsC,IACzDlM,8JAAAA,AAAI,EACFU,IAAI,wJAACmH,iBAAiB,CAACqE,aAAa,EAAEC,gBAAgB,CAAC,EACvDzL,IAAI,wJAACgL,OAAO,CAAC;QACXC,SAAS,EAAEA,CAAA,GAAM/L,GAAG,8IAAC0C,KAAK,EAAU;QACpCsJ,SAAS,EAAEhM,GAAG,8IAACwM,IAAI,CAACjM,MAAM,4IAACkM,KAAK;KACjC,CAAC,EACF3L,IAAI,wJAAC2I,MAAM,EACX3I,IAAI,wJAAC6D,GAAG,CAACzE,MAAM,4IAACwM,KAAK,CAAC,CACvB;AAEH,MAAMC,eAAe,GAAG,mBAAmB;AAC3C,MAAMC,kBAAkB,GAAG,eAAe;AAE1C,MAAML,gBAAgB,IAAI5G,GAAW,IAA2B;IAC9D,MAAM/C,KAAK,GAAG+C,GAAG,CAAC/C,KAAK,CAACgK,kBAAkB,CAAC;IAC3C,IAAIhK,KAAK,KAAK,IAAI,EAAE;QAClB,MAAMiK,YAAY,GAAGjK,KAAK,CAAC,CAAC,CAAC;QAC7B,+JAAOxC,OAAAA,AAAI,EACTyM,YAAY,KAAKxH,SAAS,IAAIwH,YAAY,CAAC5H,MAAM,GAAG,CAAC,GACnDzE,MAAM,4IAAC2D,IAAI,CAAC0I,YAAY,CAAC,GACzBrM,MAAM,4IAAC4D,IAAI,EAAE,EACf5D,MAAM,4IAACgC,OAAO,CAACsK,YAAY,CAAC,CAC7B;IACH;IACA,OAAOtM,MAAM,4IAAC4D,IAAI,EAAE;AACtB,CAAC;AAED,MAAMsB,gBAAgB,GAAGA,CACvBf,GAAwB,EACxBhB,gBAAwD,EACxDF,cAAwD,KACjC;IACvB,MAAMsJ,MAAM,GAAwB,IAAIC,GAAG,EAAE;IAC7C,KAAK,MAAM,CAACpJ,UAAU,EAAEU,KAAK,CAAC,IAAIK,GAAG,CAAE;QACrC,MAAMsI,YAAY,GAAG7M,+JAAAA,AAAI,EACvBuD,gBAAgB,CAACC,UAAU,CAAC,EAC5B5D,GAAG,8IAACwC,OAAO,EAAE2G,GAAG,GACd3I,MAAM,4IAACoC,KAAK,CAACsK,cAAc,CAAC/D,GAAG,CAAC,EAAE;gBAChCrG,MAAM,EAAEA,CAAA,GAAM9C,GAAG,8IAACiH,EAAE,CAACkC,GAAG,CAAC;gBACzBlG,MAAM,EAAEA,CAAC,CAACkG,GAAG,EAAE9C,KAAK,CAAC,GAAKrG,GAAG,8IAAC4B,IAAI,CAACuH,GAAG,EAAE,CAAA,CAAA,EAAI9C,KAAK,CAAA,CAAA,CAAG;aACrD,CAAC,CACH,CACF;QACD0G,MAAM,CAACI,GAAG,CAAC1J,cAAc,CAACwJ,YAAY,CAAC,EAAE3I,KAAK,CAAC;IACjD;IACA,OAAOyI,MAAM;AACf,CAAC;AAED,MAAMG,cAAc,IAAI/D,GAAW,IAAqC;IACtE,MAAMvG,KAAK,GAAGuG,GAAG,CAACvG,KAAK,CAAC+J,eAAe,CAAC;IACxC,IAAI/J,KAAK,KAAK,IAAI,EAAE;QAClB,MAAMwK,aAAa,GAAGxK,KAAK,CAAC,CAAC,CAAC;QAC9B,MAAMiK,YAAY,GAAGjK,KAAK,CAAC,CAAC,CAAC;QAC7B,MAAMyK,cAAc,GAAGD,aAAa,KAAK/H,SAAS,IAAI+H,aAAa,CAACnI,MAAM,GAAG,CAAC,GAC5EzE,MAAM,4IAAC2D,IAAI,CAACiJ,aAAa,CAAC,GAC1B5M,MAAM,4IAAC4D,IAAI,EAAE;QACf,MAAMkJ,aAAa,2JAAGlN,OAAAA,AAAI,EACxByM,YAAY,KAAKxH,SAAS,IAAIwH,YAAY,CAAC5H,MAAM,GAAG,CAAC,GACnDzE,MAAM,4IAAC2D,IAAI,CAAC0I,YAAY,CAAC,GACzBrM,MAAM,4IAAC4D,IAAI,EAAE,EACf5D,MAAM,4IAACgC,OAAO,CAACsK,YAAY,CAAC,CAC7B;QACD,OAAOtM,MAAM,4IAAC+M,GAAG,CAAC;YAACF,cAAc;YAAEC,aAAa;SAAC,CAAC;IACpD;IACA,OAAO9M,MAAM,4IAAC4D,IAAI,EAAE;AACtB,CAAC;AAED,MAAM0I,YAAY,GAAInH,GAAW,IAA2B;IAC1D,MAAM6H,WAAW,GAAGC,MAAM,CAACC,QAAQ,CAAC/H,GAAG,CAAC;IACxC,OAAO8H,MAAM,CAACE,KAAK,CAACH,WAAW,CAAC,GAC9BhN,MAAM,4IAAC4D,IAAI,EAAE,GACb5D,MAAM,4IAAC2D,IAAI,CAACqJ,WAAW,CAAC;AAC5B,CAAC;AAED,MAAMI,OAAO,IAAI9G,IAAY,GAAA,CAAoB;QAC/CH,IAAI,EAAE,SAAS;QACfG;KACD,CAAC;AAEF,MAAM+G,QAAQ,IAAIxH,KAAa,GAAA,CAAoB;QACjDM,IAAI,EAAE,UAAU;QAChBN;KACD,CAAC;AAQK,MAAMyH,QAAQ,IAAIC,IAAa,IAAmC;IACvE,MAAMC,eAAe,GAAG,QAAQ;IAChC,MAAMC,cAAc,GAAGjO,GAAG,8IAAC2E,GAAG,CAC5BuJ,iBAAiB,CAACH,IAAe,CAAC,EAClC,CAAC,CAAC5E,GAAG,EAAE7E,KAAK,CAAC,GAAuB;YAAC6J,kBAAkB,CAAChF,GAAG,CAAC,CAACzF,IAAI,CAACsK,eAAe,CAAC;YAAE1J,KAAK;SAAC,CAC3F;IACD,OAAOkB,OAAO,CAAC,IAAIwH,GAAG,CAACiB,cAAc,CAAC,EAAE;QACtC5K,SAAS,EAAE2K,eAAe;QAC1B1K,QAAQ,EAAE0K;KACX,CAAC;AACJ,CAAC;AAED,MAAMG,kBAAkB,IAAIjM,IAAiC,IAA2B;IACtF,MAAMkM,MAAM,GAAkB,EAAE;IAChC,IAAIpJ,CAAC,GAAG,CAAC;IACT,MAAOA,CAAC,GAAG9C,IAAI,CAAC+C,MAAM,CAAE;QACtB,MAAMoJ,SAAS,GAAGnM,IAAI,CAAC8C,CAAC,CAAC;QACzB,IAAIqJ,SAAS,CAAC1H,IAAI,KAAK,SAAS,EAAE;YAChC,IAAI3B,CAAC,GAAG,CAAC,GAAG9C,IAAI,CAAC+C,MAAM,EAAE;gBACvB,MAAMqJ,aAAa,GAAGpM,IAAI,CAAC8C,CAAC,GAAG,CAAC,CAAC;gBACjC,IAAIsJ,aAAa,CAAC3H,IAAI,KAAK,UAAU,EAAE;oBACrCyH,MAAM,CAACvH,IAAI,CAAC,GAAGwH,SAAS,CAACvH,IAAI,CAAA,CAAA,EAAIwH,aAAa,CAACjI,KAAK,CAAA,CAAA,CAAG,CAAC;oBACxDrB,CAAC,IAAI,CAAC;gBACR,CAAC,MAAM;oBACLoJ,MAAM,CAACvH,IAAI,CAACwH,SAAS,CAACvH,IAAI,CAAC;oBAC3B9B,CAAC,IAAI,CAAC;gBACR;YACF,CAAC,MAAM;gBACLoJ,MAAM,CAACvH,IAAI,CAACwH,SAAS,CAACvH,IAAI,CAAC;gBAC3B9B,CAAC,IAAI,CAAC;YACR;QACF;IACF;IACA,OAAOoJ,MAAM;AACf,CAAC;AAED,MAAMF,iBAAiB,IACrB/L,MAAe,IACsD;IACrE,MAAMoM,OAAO,GAAGA,CACdrM,IAAiC,EACjCoC,KAA6D,KACQ;QACrE,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;YAC7B,OAAOtE,GAAG,8IAAC4B,IAAI,CAAC;gBAACM,IAAI;gBAAEoC,KAAK;aAA0C,CAAC;QACzE;QACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAI,OAAOA,KAAK,KAAK,SAAS,EAAE;YAC3D,OAAOtE,GAAG,8IAAC4B,IAAI,CAAC;gBAACM,IAAI;gBAAEsM,MAAM,CAAClK,KAAK,CAAC;aAA0C,CAAC;QACjF;QACA,IAAItE,GAAG,8IAACyO,OAAO,CAACnK,KAAK,CAAC,EAAE;YACtB,OAAOoK,SAAS,CAACxM,IAAI,EAAEoC,KAAK,CAAC;QAC/B;QACA,IAAI,OAAOA,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,EAAE;YAC/C,OAAOqK,UAAU,CAACzM,IAAI,EAAEoC,KAAK,CAAC;QAChC;QACA,OAAOtE,GAAG,8IAAC0C,KAAK,EAAyC;IAC3D,CAAC;IACD,MAAMgM,SAAS,GAAGA,CAChBxM,IAAiC,EACjCqG,MAAiB,GAEjBvI,GAAG,8IAAC4C,KAAK,CAAC2F,MAAM,EAAE;YAChBqG,OAAO,EAAEA,CAAA,GAAM5O,GAAG,8IAAC4B,IAAI,CAAC;oBAACM,IAAI;oBAAE,OAAO;iBAA0C,CAAC;YACjF2M,UAAU,EAAE7O,GAAG,8IAACwC,OAAO,CAAC,CAAC8B,KAAK,EAAE+B,KAAK,GAAKkI,OAAO,CAACvO,GAAG,8IAAC+I,MAAM,CAAC7G,IAAI,EAAE2L,QAAQ,CAACxH,KAAK,CAAC,CAAC,EAAE/B,KAAK,CAAC;SAC5F,CAAC;IACJ,MAAMqK,UAAU,GAAGA,CACjBzM,IAAiC,EACjCoC,KAAc,GAEdf,MAAM,CAACuL,OAAO,CAACxK,KAAK,CAAC,CAClBQ,MAAM,CAAC,CAAC,GAAGR,KAAK,CAAC,GAAK5D,SAAS,4IAACqO,aAAa,CAACzK,KAAK,CAAC,CAAC,CACrD9B,OAAO,CAAC,CAAC,CAAC2G,GAAG,EAAE7E,KAAK,CAAC,KAAI;YACxB,MAAM0K,OAAO,GAAGhP,GAAG,8IAAC+I,MAAM,CAAC7G,IAAI,EAAE0L,OAAO,CAACzE,GAAG,CAAC,CAAC;YAC9C,MAAM8F,MAAM,GAAGV,OAAO,CAACS,OAAO,EAAE1K,KAAK,CAAC;YACtC,IAAItE,GAAG,8IAACkP,oBAAoB,CAACD,MAAM,CAAC,EAAE;gBACpC,OAAOjP,GAAG,8IAAC4B,IAAI,CAAC;oBAACoN,OAAO;oBAAE,EAAE;iBAA0C,CAAC;YACzE;YACA,OAAOC,MAAM;QACf,CAAC,CAAC;IACN,OAAON,UAAU,CAAC3O,GAAG,8IAAC0C,KAAK,EAAE,EAAEP,MAAM,CAAC;AACxC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 6888, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 6894, "column": 0}, "map": {"version":3,"file":"tracer.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/tracer.ts"],"sourcesContent":["/**\n * @since 2.0.0\n */\nimport * as Context from \"../Context.js\"\nimport type * as Exit from \"../Exit.js\"\nimport type * as Option from \"../Option.js\"\nimport type * as Tracer from \"../Tracer.js\"\n\n/** @internal */\nexport const TracerTypeId: Tracer.TracerTypeId = Symbol.for(\"effect/Tracer\") as Tracer.TracerTypeId\n\n/** @internal */\nexport const make = (options: Omit<Tracer.Tracer, Tracer.TracerTypeId>): Tracer.Tracer => ({\n  [TracerTypeId]: TracerTypeId,\n  ...options\n})\n\n/** @internal */\nexport const tracerTag = Context.GenericTag<Tracer.Tracer>(\"effect/Tracer\")\n\n/** @internal */\nexport const spanTag = Context.GenericTag<Tracer.ParentSpan, Tracer.AnySpan>(\"effect/ParentSpan\")\n\nconst randomHexString = (function() {\n  const characters = \"abcdef0123456789\"\n  const charactersLength = characters.length\n  return function(length: number) {\n    let result = \"\"\n    for (let i = 0; i < length; i++) {\n      result += characters.charAt(Math.floor(Math.random() * charactersLength))\n    }\n    return result\n  }\n})()\n\n/** @internal */\nexport class NativeSpan implements Tracer.Span {\n  readonly _tag = \"Span\"\n  readonly spanId: string\n  readonly traceId: string = \"native\"\n  readonly sampled = true\n\n  status: Tracer.SpanStatus\n  attributes: Map<string, unknown>\n  events: Array<[name: string, startTime: bigint, attributes: Record<string, unknown>]> = []\n\n  constructor(\n    readonly name: string,\n    readonly parent: Option.Option<Tracer.AnySpan>,\n    readonly context: Context.Context<never>,\n    readonly links: ReadonlyArray<Tracer.SpanLink>,\n    readonly startTime: bigint,\n    readonly kind: Tracer.SpanKind\n  ) {\n    this.status = {\n      _tag: \"Started\",\n      startTime\n    }\n    this.attributes = new Map()\n    this.traceId = parent._tag === \"Some\" ? parent.value.traceId : randomHexString(32)\n    this.spanId = randomHexString(16)\n  }\n\n  end(endTime: bigint, exit: Exit.Exit<unknown, unknown>): void {\n    this.status = {\n      _tag: \"Ended\",\n      endTime,\n      exit,\n      startTime: this.status.startTime\n    }\n  }\n\n  attribute(key: string, value: unknown): void {\n    this.attributes.set(key, value)\n  }\n\n  event(name: string, startTime: bigint, attributes?: Record<string, unknown>): void {\n    this.events.push([name, startTime, attributes ?? {}])\n  }\n}\n\n/** @internal */\nexport const nativeTracer: Tracer.Tracer = make({\n  span: (name, parent, context, links, startTime, kind) =>\n    new NativeSpan(\n      name,\n      parent,\n      context,\n      links,\n      startTime,\n      kind\n    ),\n  context: (f) => f()\n})\n\n/** @internal */\nexport const externalSpan = (options: {\n  readonly spanId: string\n  readonly traceId: string\n  readonly sampled?: boolean | undefined\n  readonly context?: Context.Context<never> | undefined\n}): Tracer.ExternalSpan => ({\n  _tag: \"ExternalSpan\",\n  spanId: options.spanId,\n  traceId: options.traceId,\n  sampled: options.sampled ?? true,\n  context: options.context ?? Context.empty()\n})\n\n/** @internal */\nexport const addSpanStackTrace = (options: Tracer.SpanOptions | undefined): Tracer.SpanOptions => {\n  if (options?.captureStackTrace === false) {\n    return options\n  } else if (options?.captureStackTrace !== undefined && typeof options.captureStackTrace !== \"boolean\") {\n    return options\n  }\n  const limit = Error.stackTraceLimit\n  Error.stackTraceLimit = 3\n  const traceError = new Error()\n  Error.stackTraceLimit = limit\n  let cache: false | string = false\n  return {\n    ...options,\n    captureStackTrace: () => {\n      if (cache !== false) {\n        return cache\n      }\n      if (traceError.stack !== undefined) {\n        const stack = traceError.stack.split(\"\\n\")\n        if (stack[3] !== undefined) {\n          cache = stack[3].trim()\n          return cache\n        }\n      }\n    }\n  }\n}\n"],"names":["Context","TracerTypeId","Symbol","for","make","options","tracerTag","GenericTag","spanTag","randomHexString","characters","charactersLength","length","result","i","charAt","Math","floor","random","NativeSpan","name","parent","context","links","startTime","kind","_tag","spanId","traceId","sampled","status","attributes","events","constructor","Map","value","end","endTime","exit","attribute","key","set","event","push","nativeTracer","span","f","externalSpan","empty","addSpanStackTrace","captureStackTrace","undefined","limit","Error","stackTraceLimit","traceError","cache","stack","split","trim"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7012, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7018, "column": 0}, "map": {"version":3,"file":"defaultServices.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/defaultServices.ts"],"sourcesContent":["import * as Array from \"../Array.js\"\nimport type * as Chunk from \"../Chunk.js\"\nimport type * as Clock from \"../Clock.js\"\nimport type * as Config from \"../Config.js\"\nimport type * as ConfigProvider from \"../ConfigProvider.js\"\nimport * as Context from \"../Context.js\"\nimport type * as DefaultServices from \"../DefaultServices.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport type * as Random from \"../Random.js\"\nimport type * as Tracer from \"../Tracer.js\"\nimport * as clock from \"./clock.js\"\nimport * as configProvider from \"./configProvider.js\"\nimport * as core from \"./core.js\"\nimport * as console_ from \"./defaultServices/console.js\"\nimport * as random from \"./random.js\"\nimport * as tracer from \"./tracer.js\"\n\n/** @internal */\nexport const liveServices: Context.Context<DefaultServices.DefaultServices> = pipe(\n  Context.empty(),\n  Context.add(clock.clockTag, clock.make()),\n  Context.add(console_.consoleTag, console_.defaultConsole),\n  Context.add(random.randomTag, random.make(Math.random())),\n  Context.add(configProvider.configProviderTag, configProvider.fromEnv()),\n  Context.add(tracer.tracerTag, tracer.nativeTracer)\n)\n\n/**\n * The `FiberRef` holding the default `Effect` services.\n *\n * @since 2.0.0\n * @category fiberRefs\n */\nexport const currentServices = globalValue(\n  Symbol.for(\"effect/DefaultServices/currentServices\"),\n  () => core.fiberRefUnsafeMakeContext(liveServices)\n)\n\n// circular with Clock\n\n/** @internal */\nexport const sleep = (duration: Duration.DurationInput): Effect.Effect<void> => {\n  const decodedDuration = Duration.decode(duration)\n  return clockWith((clock) => clock.sleep(decodedDuration))\n}\n\n/** @internal */\nexport const defaultServicesWith = <A, E, R>(\n  f: (services: Context.Context<DefaultServices.DefaultServices>) => Effect.Effect<A, E, R>\n) => core.withFiberRuntime<A, E, R>((fiber) => f(fiber.currentDefaultServices))\n\n/** @internal */\nexport const clockWith = <A, E, R>(f: (clock: Clock.Clock) => Effect.Effect<A, E, R>): Effect.Effect<A, E, R> =>\n  defaultServicesWith((services) => f(services.unsafeMap.get(clock.clockTag.key)))\n\n/** @internal */\nexport const currentTimeMillis: Effect.Effect<number> = clockWith((clock) => clock.currentTimeMillis)\n\n/** @internal */\nexport const currentTimeNanos: Effect.Effect<bigint> = clockWith((clock) => clock.currentTimeNanos)\n\n/** @internal */\nexport const withClock = dual<\n  <X extends Clock.Clock>(value: X) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <X extends Clock.Clock, A, E, R>(effect: Effect.Effect<A, E, R>, value: X) => Effect.Effect<A, E, R>\n>(2, (effect, value) =>\n  core.fiberRefLocallyWith(\n    currentServices,\n    Context.add(clock.clockTag, value)\n  )(effect))\n\n// circular with ConfigProvider\n\n/** @internal */\nexport const withConfigProvider = dual<\n  (value: ConfigProvider.ConfigProvider) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(effect: Effect.Effect<A, E, R>, value: ConfigProvider.ConfigProvider) => Effect.Effect<A, E, R>\n>(2, (effect, value) =>\n  core.fiberRefLocallyWith(\n    currentServices,\n    Context.add(configProvider.configProviderTag, value)\n  )(effect))\n\n/** @internal */\nexport const configProviderWith = <A, E, R>(\n  f: (configProvider: ConfigProvider.ConfigProvider) => Effect.Effect<A, E, R>\n): Effect.Effect<A, E, R> =>\n  defaultServicesWith((services) => f(services.unsafeMap.get(configProvider.configProviderTag.key)))\n\n/** @internal */\nexport const config = <A>(config: Config.Config<A>) => configProviderWith((_) => _.load(config))\n\n/** @internal */\nexport const configOrDie = <A>(config: Config.Config<A>) => core.orDie(configProviderWith((_) => _.load(config)))\n\n// circular with Random\n\n/** @internal */\nexport const randomWith = <A, E, R>(f: (random: Random.Random) => Effect.Effect<A, E, R>): Effect.Effect<A, E, R> =>\n  defaultServicesWith((services) => f(services.unsafeMap.get(random.randomTag.key)))\n\n/** @internal */\nexport const withRandom = dual<\n  <X extends Random.Random>(value: X) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <X extends Random.Random, A, E, R>(effect: Effect.Effect<A, E, R>, value: X) => Effect.Effect<A, E, R>\n>(2, (effect, value) =>\n  core.fiberRefLocallyWith(\n    currentServices,\n    Context.add(random.randomTag, value)\n  )(effect))\n\n/** @internal */\nexport const next: Effect.Effect<number> = randomWith((random) => random.next)\n\n/** @internal */\nexport const nextInt: Effect.Effect<number> = randomWith((random) => random.nextInt)\n\n/** @internal */\nexport const nextBoolean: Effect.Effect<boolean> = randomWith((random) => random.nextBoolean)\n\n/** @internal */\nexport const nextRange = (min: number, max: number): Effect.Effect<number> =>\n  randomWith((random) => random.nextRange(min, max))\n\n/** @internal */\nexport const nextIntBetween = (min: number, max: number): Effect.Effect<number> =>\n  randomWith((random) => random.nextIntBetween(min, max))\n\n/** @internal */\nexport const shuffle = <A>(elements: Iterable<A>): Effect.Effect<Chunk.Chunk<A>> =>\n  randomWith((random) => random.shuffle(elements))\n\n/** @internal */\nexport const choice = <Self extends Iterable<unknown>>(\n  elements: Self\n) => {\n  const array = Array.fromIterable(elements)\n  return core.map(\n    array.length === 0\n      ? core.fail(new core.NoSuchElementException(\"Cannot select a random element from an empty array\"))\n      : randomWith((random) => random.nextIntBetween(0, array.length)),\n    (i) => array[i]\n  ) as any\n}\n\n// circular with Tracer\n\n/** @internal */\nexport const tracerWith = <A, E, R>(f: (tracer: Tracer.Tracer) => Effect.Effect<A, E, R>): Effect.Effect<A, E, R> =>\n  defaultServicesWith((services) => f(services.unsafeMap.get(tracer.tracerTag.key)))\n\n/** @internal */\nexport const withTracer = dual<\n  (value: Tracer.Tracer) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(effect: Effect.Effect<A, E, R>, value: Tracer.Tracer) => Effect.Effect<A, E, R>\n>(2, (effect, value) =>\n  core.fiberRefLocallyWith(\n    currentServices,\n    Context.add(tracer.tracerTag, value)\n  )(effect))\n"],"names":["Array","Context","Duration","dual","pipe","globalValue","clock","configProvider","core","console_","random","tracer","liveServices","empty","add","clockTag","make","consoleTag","defaultConsole","randomTag","Math","configProviderTag","fromEnv","tracerTag","nativeTracer","currentServices","Symbol","for","fiberRefUnsafeMakeContext","sleep","duration","decodedDuration","decode","clockWith","defaultServicesWith","f","withFiberRuntime","fiber","currentDefaultServices","services","unsafeMap","get","key","currentTimeMillis","currentTimeNanos","withClock","effect","value","fiberRefLocallyWith","withConfigProvider","configProviderWith","config","_","load","configOrDie","orDie","randomWith","withRandom","next","nextInt","nextBoolean","nextRange","min","max","nextIntBetween","shuffle","elements","choice","array","fromIterable","map","length","fail","NoSuchElementException","i","tracerWith","withTracer"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7094, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7100, "column": 0}, "map": {"version":3,"file":"fiberRefs.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiberRefs.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Equal from \"../Equal.js\"\nimport type * as FiberId from \"../FiberId.js\"\nimport type * as FiberRef from \"../FiberRef.js\"\nimport type * as FiberRefs from \"../FiberRefs.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nexport function unsafeMake(\n  fiberRefLocals: Map<FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>>\n): FiberRefs.FiberRefs {\n  return new FiberRefsImpl(fiberRefLocals)\n}\n\n/** @internal */\nexport function empty(): FiberRefs.FiberRefs {\n  return unsafeMake(new Map())\n}\n\n/** @internal */\nexport const FiberRefsSym: FiberRefs.FiberRefsSym = Symbol.for(\"effect/FiberRefs\") as FiberRefs.FiberRefsSym\n\n/** @internal */\nexport class FiberRefsImpl implements FiberRefs.FiberRefs {\n  readonly [FiberRefsSym]: FiberRefs.FiberRefsSym = FiberRefsSym\n  constructor(\n    readonly locals: Map<\n      FiberRef.FiberRef<any>,\n      Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>\n    >\n  ) {}\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nconst findAncestor = (\n  _ref: FiberRef.FiberRef<any>,\n  _parentStack: ReadonlyArray<readonly [FiberId.Single, unknown]>,\n  _childStack: ReadonlyArray<readonly [FiberId.Single, unknown]>,\n  _childModified = false\n): readonly [unknown, boolean] => {\n  const ref = _ref\n  let parentStack = _parentStack\n  let childStack = _childStack\n  let childModified = _childModified\n  let ret: readonly [unknown, boolean] | undefined = undefined\n  while (ret === undefined) {\n    if (Arr.isNonEmptyReadonlyArray(parentStack) && Arr.isNonEmptyReadonlyArray(childStack)) {\n      const parentFiberId = Arr.headNonEmpty(parentStack)[0]\n      const parentAncestors = Arr.tailNonEmpty(parentStack)\n      const childFiberId = Arr.headNonEmpty(childStack)[0]\n      const childRefValue = Arr.headNonEmpty(childStack)[1]\n      const childAncestors = Arr.tailNonEmpty(childStack)\n      if (parentFiberId.startTimeMillis < childFiberId.startTimeMillis) {\n        childStack = childAncestors\n        childModified = true\n      } else if (parentFiberId.startTimeMillis > childFiberId.startTimeMillis) {\n        parentStack = parentAncestors\n      } else {\n        if (parentFiberId.id < childFiberId.id) {\n          childStack = childAncestors\n          childModified = true\n        } else if (parentFiberId.id > childFiberId.id) {\n          parentStack = parentAncestors\n        } else {\n          ret = [childRefValue, childModified] as const\n        }\n      }\n    } else {\n      ret = [ref.initial, true] as const\n    }\n  }\n  return ret\n}\n\n/** @internal */\nexport const joinAs = dual<\n  (fiberId: FiberId.Single, that: FiberRefs.FiberRefs) => (self: FiberRefs.FiberRefs) => FiberRefs.FiberRefs,\n  (self: FiberRefs.FiberRefs, fiberId: FiberId.Single, that: FiberRefs.FiberRefs) => FiberRefs.FiberRefs\n>(3, (self, fiberId, that) => {\n  const parentFiberRefs = new Map(self.locals)\n  that.locals.forEach((childStack, fiberRef) => {\n    const childValue = childStack[0][1]\n    if (!childStack[0][0][Equal.symbol](fiberId)) {\n      if (!parentFiberRefs.has(fiberRef)) {\n        if (Equal.equals(childValue, fiberRef.initial)) {\n          return\n        }\n        parentFiberRefs.set(\n          fiberRef,\n          [[fiberId, fiberRef.join(fiberRef.initial, childValue)]]\n        )\n        return\n      }\n      const parentStack = parentFiberRefs.get(fiberRef)!\n      const [ancestor, wasModified] = findAncestor(\n        fiberRef,\n        parentStack,\n        childStack\n      )\n      if (wasModified) {\n        const patch = fiberRef.diff(ancestor, childValue)\n        const oldValue = parentStack[0][1]\n        const newValue = fiberRef.join(oldValue, fiberRef.patch(patch)(oldValue))\n        if (!Equal.equals(oldValue, newValue)) {\n          let newStack: Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, unknown]>\n          const parentFiberId = parentStack[0][0]\n          if (parentFiberId[Equal.symbol](fiberId)) {\n            newStack = [[parentFiberId, newValue] as const, ...parentStack.slice(1)]\n          } else {\n            newStack = [[fiberId, newValue] as const, ...parentStack]\n          }\n          parentFiberRefs.set(fiberRef, newStack)\n        }\n      }\n    }\n  })\n  return new FiberRefsImpl(parentFiberRefs)\n})\n\n/** @internal */\nexport const forkAs = dual<\n  (childId: FiberId.Single) => (self: FiberRefs.FiberRefs) => FiberRefs.FiberRefs,\n  (self: FiberRefs.FiberRefs, childId: FiberId.Single) => FiberRefs.FiberRefs\n>(2, (self, childId) => {\n  const map = new Map<FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, unknown]>>()\n  unsafeForkAs(self, map, childId)\n  return new FiberRefsImpl(map)\n})\n\nconst unsafeForkAs = (\n  self: FiberRefs.FiberRefs,\n  map: Map<FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>>,\n  fiberId: FiberId.Single\n) => {\n  self.locals.forEach((stack, fiberRef) => {\n    const oldValue = stack[0][1]\n    const newValue = fiberRef.patch(fiberRef.fork)(oldValue)\n    if (Equal.equals(oldValue, newValue)) {\n      map.set(fiberRef, stack)\n    } else {\n      map.set(fiberRef, [[fiberId, newValue] as const, ...stack])\n    }\n  })\n}\n\n/** @internal */\nexport const fiberRefs = (self: FiberRefs.FiberRefs) => HashSet.fromIterable(self.locals.keys())\n\n/** @internal */\nexport const setAll = (self: FiberRefs.FiberRefs): Effect.Effect<void> =>\n  core.forEachSequentialDiscard(\n    fiberRefs(self),\n    (fiberRef) => core.fiberRefSet(fiberRef, getOrDefault(self, fiberRef))\n  )\n\n/** @internal */\nexport const delete_ = dual<\n  <A>(fiberRef: FiberRef.FiberRef<A>) => (self: FiberRefs.FiberRefs) => FiberRefs.FiberRefs,\n  <A>(self: FiberRefs.FiberRefs, fiberRef: FiberRef.FiberRef<A>) => FiberRefs.FiberRefs\n>(2, (self, fiberRef) => {\n  const locals = new Map(self.locals)\n  locals.delete(fiberRef)\n  return new FiberRefsImpl(locals)\n})\n\n/** @internal */\nexport const get = dual<\n  <A>(fiberRef: FiberRef.FiberRef<A>) => (self: FiberRefs.FiberRefs) => Option.Option<A>,\n  <A>(self: FiberRefs.FiberRefs, fiberRef: FiberRef.FiberRef<A>) => Option.Option<A>\n>(2, (self, fiberRef) => {\n  if (!self.locals.has(fiberRef)) {\n    return Option.none()\n  }\n  return Option.some(Arr.headNonEmpty(self.locals.get(fiberRef)!)[1])\n})\n\n/** @internal */\nexport const getOrDefault = dual<\n  <A>(fiberRef: FiberRef.FiberRef<A>) => (self: FiberRefs.FiberRefs) => A,\n  <A>(self: FiberRefs.FiberRefs, fiberRef: FiberRef.FiberRef<A>) => A\n>(2, (self, fiberRef) => pipe(get(self, fiberRef), Option.getOrElse(() => fiberRef.initial)))\n\n/** @internal */\nexport const updateAs = dual<\n  <A>(\n    options: {\n      readonly fiberId: FiberId.Single\n      readonly fiberRef: FiberRef.FiberRef<A>\n      readonly value: A\n    }\n  ) => (self: FiberRefs.FiberRefs) => FiberRefs.FiberRefs,\n  <A>(\n    self: FiberRefs.FiberRefs,\n    options: {\n      readonly fiberId: FiberId.Single\n      readonly fiberRef: FiberRef.FiberRef<A>\n      readonly value: A\n    }\n  ) => FiberRefs.FiberRefs\n>(2, <A>(self: FiberRefs.FiberRefs, { fiberId, fiberRef, value }: {\n  readonly fiberId: FiberId.Single\n  readonly fiberRef: FiberRef.FiberRef<A>\n  readonly value: A\n}) => {\n  if (self.locals.size === 0) {\n    return new FiberRefsImpl(new Map([[fiberRef, [[fiberId, value] as const]]]))\n  }\n  const locals = new Map(self.locals)\n  unsafeUpdateAs(locals, fiberId, fiberRef, value)\n  return new FiberRefsImpl(locals)\n})\n\nconst unsafeUpdateAs = (\n  locals: Map<FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>>,\n  fiberId: FiberId.Single,\n  fiberRef: FiberRef.FiberRef<any>,\n  value: any\n) => {\n  const oldStack: ReadonlyArray<readonly [FiberId.Single, any]> = locals.get(fiberRef) ?? []\n  let newStack: Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]> | undefined\n\n  if (Arr.isNonEmptyReadonlyArray(oldStack)) {\n    const [currentId, currentValue] = Arr.headNonEmpty(oldStack)\n    if (currentId[Equal.symbol](fiberId)) {\n      if (Equal.equals(currentValue, value)) {\n        return\n      } else {\n        newStack = [\n          [fiberId, value] as const,\n          ...oldStack.slice(1)\n        ]\n      }\n    } else {\n      newStack = [\n        [fiberId, value] as const,\n        ...oldStack\n      ]\n    }\n  } else {\n    newStack = [[fiberId, value] as const]\n  }\n\n  locals.set(fiberRef, newStack)\n}\n\n/** @internal */\nexport const updateManyAs = dual<\n  (\n    options: {\n      readonly forkAs?: FiberId.Single | undefined\n      readonly entries: Arr.NonEmptyReadonlyArray<\n        readonly [FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>]\n      >\n    }\n  ) => (self: FiberRefs.FiberRefs) => FiberRefs.FiberRefs,\n  (\n    self: FiberRefs.FiberRefs,\n    options: {\n      readonly forkAs?: FiberId.Single | undefined\n      readonly entries: Arr.NonEmptyReadonlyArray<\n        readonly [FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>]\n      >\n    }\n  ) => FiberRefs.FiberRefs\n>(2, (self: FiberRefs.FiberRefs, { entries, forkAs }: {\n  readonly forkAs?: FiberId.Single | undefined\n  readonly entries: Arr.NonEmptyReadonlyArray<\n    readonly [FiberRef.FiberRef<any>, Arr.NonEmptyReadonlyArray<readonly [FiberId.Single, any]>]\n  >\n}) => {\n  if (self.locals.size === 0) {\n    return new FiberRefsImpl(new Map(entries))\n  }\n\n  const locals = new Map(self.locals)\n  if (forkAs !== undefined) {\n    unsafeForkAs(self, locals, forkAs)\n  }\n  entries.forEach(([fiberRef, values]) => {\n    if (values.length === 1) {\n      unsafeUpdateAs(locals, values[0][0], fiberRef, values[0][1])\n    } else {\n      values.forEach(([fiberId, value]) => {\n        unsafeUpdateAs(locals, fiberId, fiberRef, value)\n      })\n    }\n  })\n  return new FiberRefsImpl(locals)\n})\n"],"names":["Arr","Equal","dual","pipe","HashSet","Option","pipeArguments","core","unsafeMake","fiberRefLocals","FiberRefsImpl","empty","Map","FiberRefsSym","Symbol","for","locals","constructor","arguments","findAncestor","_ref","_parentStack","_childStack","_childModified","ref","parentStack","childStack","childModified","ret","undefined","isNonEmptyReadonlyArray","parentFiberId","headNonEmpty","parentAncestors","tailNonEmpty","childFiberId","childRefValue","childAncestors","startTimeMillis","id","initial","joinAs","self","fiberId","that","parentFiberRefs","forEach","fiberRef","childValue","symbol","has","equals","set","join","get","ancestor","wasModified","patch","diff","oldValue","newValue","newStack","slice","forkAs","childId","map","unsafeForkAs","stack","fork","fiberRefs","fromIterable","keys","setAll","forEachSequentialDiscard","fiberRefSet","getOrDefault","delete_","delete","none","some","getOrElse","updateAs","value","size","unsafeUpdateAs","oldStack","currentId","currentValue","updateManyAs","entries","values","length"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7345, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7351, "column": 0}, "map": {"version":3,"file":"patch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiberRefs/patch.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport { equals } from \"../../Equal.js\"\nimport type * as FiberId from \"../../FiberId.js\"\nimport type * as FiberRefs from \"../../FiberRefs.js\"\nimport type * as FiberRefsPatch from \"../../FiberRefsPatch.js\"\nimport { dual } from \"../../Function.js\"\nimport * as _fiberRefs from \"../fiberRefs.js\"\n\n/** @internal */\nexport const OP_EMPTY = \"Empty\" as const\n\n/** @internal */\nexport type OP_EMPTY = typeof OP_EMPTY\n\n/** @internal */\nexport const OP_ADD = \"Add\" as const\n\n/** @internal */\nexport type OP_ADD = typeof OP_ADD\n\n/** @internal */\nexport const OP_REMOVE = \"Remove\" as const\n\n/** @internal */\nexport type OP_REMOVE = typeof OP_REMOVE\n\n/** @internal */\nexport const OP_UPDATE = \"Update\" as const\n\n/** @internal */\nexport type OP_UPDATE = typeof OP_UPDATE\n\n/** @internal */\nexport const OP_AND_THEN = \"AndThen\" as const\n\n/** @internal */\nexport type OP_AND_THEN = typeof OP_AND_THEN\n\n/** @internal */\nexport const empty: FiberRefsPatch.FiberRefsPatch = ({\n  _tag: OP_EMPTY\n}) as FiberRefsPatch.FiberRefsPatch\n\n/** @internal */\nexport const diff = (\n  oldValue: FiberRefs.FiberRefs,\n  newValue: FiberRefs.FiberRefs\n): FiberRefsPatch.FiberRefsPatch => {\n  const missingLocals = new Map(oldValue.locals)\n  let patch = empty\n  for (const [fiberRef, pairs] of newValue.locals.entries()) {\n    const newValue = Arr.headNonEmpty(pairs)[1]\n    const old = missingLocals.get(fiberRef)\n    if (old !== undefined) {\n      const oldValue = Arr.headNonEmpty(old)[1]\n      if (!equals(oldValue, newValue)) {\n        patch = combine({\n          _tag: OP_UPDATE,\n          fiberRef,\n          patch: fiberRef.diff(oldValue, newValue)\n        })(patch)\n      }\n    } else {\n      patch = combine({\n        _tag: OP_ADD,\n        fiberRef,\n        value: newValue\n      })(patch)\n    }\n    missingLocals.delete(fiberRef)\n  }\n  for (const [fiberRef] of missingLocals.entries()) {\n    patch = combine({\n      _tag: OP_REMOVE,\n      fiberRef\n    })(patch)\n  }\n  return patch\n}\n\n/** @internal */\nexport const combine = dual<\n  (that: FiberRefsPatch.FiberRefsPatch) => (self: FiberRefsPatch.FiberRefsPatch) => FiberRefsPatch.FiberRefsPatch,\n  (self: FiberRefsPatch.FiberRefsPatch, that: FiberRefsPatch.FiberRefsPatch) => FiberRefsPatch.FiberRefsPatch\n>(2, (self, that) => ({\n  _tag: OP_AND_THEN,\n  first: self,\n  second: that\n}))\n\n/** @internal */\nexport const patch = dual<\n  (\n    fiberId: FiberId.Runtime,\n    oldValue: FiberRefs.FiberRefs\n  ) => (self: FiberRefsPatch.FiberRefsPatch) => FiberRefs.FiberRefs,\n  (\n    self: FiberRefsPatch.FiberRefsPatch,\n    fiberId: FiberId.Runtime,\n    oldValue: FiberRefs.FiberRefs\n  ) => FiberRefs.FiberRefs\n>(3, (self, fiberId, oldValue) => {\n  let fiberRefs: FiberRefs.FiberRefs = oldValue\n  let patches: ReadonlyArray<FiberRefsPatch.FiberRefsPatch> = Arr.of(self)\n  while (Arr.isNonEmptyReadonlyArray(patches)) {\n    const head = Arr.headNonEmpty(patches)\n    const tail = Arr.tailNonEmpty(patches)\n    switch (head._tag) {\n      case OP_EMPTY: {\n        patches = tail\n        break\n      }\n      case OP_ADD: {\n        fiberRefs = _fiberRefs.updateAs(fiberRefs, {\n          fiberId,\n          fiberRef: head.fiberRef,\n          value: head.value\n        })\n        patches = tail\n        break\n      }\n      case OP_REMOVE: {\n        fiberRefs = _fiberRefs.delete_(fiberRefs, head.fiberRef)\n        patches = tail\n        break\n      }\n      case OP_UPDATE: {\n        const value = _fiberRefs.getOrDefault(fiberRefs, head.fiberRef)\n        fiberRefs = _fiberRefs.updateAs(fiberRefs, {\n          fiberId,\n          fiberRef: head.fiberRef,\n          value: head.fiberRef.patch(head.patch)(value)\n        })\n        patches = tail\n        break\n      }\n      case OP_AND_THEN: {\n        patches = Arr.prepend(head.first)(Arr.prepend(head.second)(tail))\n        break\n      }\n    }\n  }\n  return fiberRefs\n})\n"],"names":["Arr","equals","dual","_fiberRefs","OP_EMPTY","OP_ADD","OP_REMOVE","OP_UPDATE","OP_AND_THEN","empty","_tag","diff","oldValue","newValue","missingLocals","Map","locals","patch","fiberRef","pairs","entries","headNonEmpty","old","get","undefined","combine","value","delete","self","that","first","second","fiberId","fiberRefs","patches","of","isNonEmptyReadonlyArray","head","tail","tailNonEmpty","updateAs","delete_","getOrDefault","prepend"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7463, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7469, "column": 0}, "map": {"version":3,"file":"logSpan.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/logSpan.ts"],"sourcesContent":["import type * as LogSpan from \"../LogSpan.js\"\n\n/** @internal */\nexport const make = (label: string, startTime: number): LogSpan.LogSpan => ({\n  label,\n  startTime\n})\n\n/** @internal */\nexport const render = (now: number) => (self: LogSpan.LogSpan): string => {\n  const label = self.label.replace(/[\\s=\"]/g, \"_\")\n  return `${label}=${now - self.startTime}ms`\n}\n"],"names":["make","label","startTime","render","now","self","replace"],"mappings":"AAEA,cAAA;;;;AACO,MAAMA,IAAI,GAAGA,CAACC,KAAa,EAAEC,SAAiB,GAAA,CAAuB;QAC1ED,KAAK;QACLC;KACD,CAAC;AAGK,MAAMC,MAAM,IAAIC,GAAW,IAAMC,IAAqB,IAAY;QACvE,MAAMJ,KAAK,GAAGI,IAAI,CAACJ,KAAK,CAACK,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC;QAChD,OAAO,GAAGL,KAAK,CAAA,CAAA,EAAIG,GAAG,GAAGC,IAAI,CAACH,SAAS,CAAA,EAAA,CAAI;IAC7C,CAAC","ignoreList":[0]}},
    {"offset": {"line": 7481, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7487, "column": 0}, "map": {"version":3,"file":"ref.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/ref.ts"],"sourcesContent":["import type * as Effect from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport { dual } from \"../Function.js\"\nimport * as MutableRef from \"../MutableRef.js\"\nimport * as Option from \"../Option.js\"\nimport * as Readable from \"../Readable.js\"\nimport type * as Ref from \"../Ref.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nexport const RefTypeId: Ref.RefTypeId = Symbol.for(\"effect/Ref\") as Ref.RefTypeId\n\n/** @internal */\nexport const refVariance = {\n  /* c8 ignore next */\n  _A: (_: any) => _\n}\n\nclass RefImpl<in out A> extends Effectable.Class<A> implements Ref.Ref<A> {\n  commit() {\n    return this.get\n  }\n  readonly [RefTypeId] = refVariance\n  readonly [Readable.TypeId]: Readable.TypeId = Readable.TypeId\n  constructor(readonly ref: MutableRef.MutableRef<A>) {\n    super()\n    this.get = core.sync(() => MutableRef.get(this.ref))\n  }\n  readonly get: Effect.Effect<A>\n  modify<B>(f: (a: A) => readonly [B, A]): Effect.Effect<B> {\n    return core.sync(() => {\n      const current = MutableRef.get(this.ref)\n      const [b, a] = f(current)\n      if ((current as unknown) !== (a as unknown)) {\n        MutableRef.set(a)(this.ref)\n      }\n      return b\n    })\n  }\n}\n\n/** @internal */\nexport const unsafeMake = <A>(value: A): Ref.Ref<A> => new RefImpl(MutableRef.make(value))\n\n/** @internal */\nexport const make = <A>(value: A): Effect.Effect<Ref.Ref<A>> => core.sync(() => unsafeMake(value))\n\n/** @internal */\nexport const get = <A>(self: Ref.Ref<A>) => self.get\n\n/** @internal */\nexport const set = dual<\n  <A>(value: A) => (self: Ref.Ref<A>) => Effect.Effect<void>,\n  <A>(self: Ref.Ref<A>, value: A) => Effect.Effect<void>\n>(2, <A>(self: Ref.Ref<A>, value: A) => self.modify((): [void, A] => [void 0, value]))\n\n/** @internal */\nexport const getAndSet = dual<\n  <A>(value: A) => (self: Ref.Ref<A>) => Effect.Effect<A>,\n  <A>(self: Ref.Ref<A>, value: A) => Effect.Effect<A>\n>(2, <A>(self: Ref.Ref<A>, value: A) => self.modify((a): [A, A] => [a, value]))\n\n/** @internal */\nexport const getAndUpdate = dual<\n  <A>(f: (a: A) => A) => (self: Ref.Ref<A>) => Effect.Effect<A>,\n  <A>(self: Ref.Ref<A>, f: (a: A) => A) => Effect.Effect<A>\n>(2, <A>(self: Ref.Ref<A>, f: (a: A) => A) => self.modify((a): [A, A] => [a, f(a)]))\n\n/** @internal */\nexport const getAndUpdateSome = dual<\n  <A>(pf: (a: A) => Option.Option<A>) => (self: Ref.Ref<A>) => Effect.Effect<A>,\n  <A>(self: Ref.Ref<A>, pf: (a: A) => Option.Option<A>) => Effect.Effect<A>\n>(2, <A>(self: Ref.Ref<A>, pf: (a: A) => Option.Option<A>) =>\n  self.modify((value): [A, A] => {\n    const option = pf(value)\n    switch (option._tag) {\n      case \"None\": {\n        return [value, value]\n      }\n      case \"Some\": {\n        return [value, option.value]\n      }\n    }\n  }))\n\n/** @internal */\nexport const setAndGet = dual<\n  <A>(value: A) => (self: Ref.Ref<A>) => Effect.Effect<A>,\n  <A>(self: Ref.Ref<A>, value: A) => Effect.Effect<A>\n>(2, <A>(self: Ref.Ref<A>, value: A) => self.modify((): [A, A] => [value, value]))\n\n/** @internal */\nexport const modify = dual<\n  <A, B>(f: (a: A) => readonly [B, A]) => (self: Ref.Ref<A>) => Effect.Effect<B>,\n  <A, B>(self: Ref.Ref<A>, f: (a: A) => readonly [B, A]) => Effect.Effect<B>\n>(2, (self, f) => self.modify(f))\n\n/** @internal */\nexport const modifySome = dual<\n  <B, A>(\n    fallback: B,\n    pf: (a: A) => Option.Option<readonly [B, A]>\n  ) => (self: Ref.Ref<A>) => Effect.Effect<B>,\n  <A, B>(\n    self: Ref.Ref<A>,\n    fallback: B,\n    pf: (a: A) => Option.Option<readonly [B, A]>\n  ) => Effect.Effect<B>\n>(3, (self, fallback, pf) =>\n  self.modify((value) => {\n    const option = pf(value)\n    switch (option._tag) {\n      case \"None\": {\n        return [fallback, value]\n      }\n      case \"Some\": {\n        return option.value\n      }\n    }\n  }))\n\n/** @internal */\nexport const update = dual<\n  <A>(f: (a: A) => A) => (self: Ref.Ref<A>) => Effect.Effect<void>,\n  <A>(self: Ref.Ref<A>, f: (a: A) => A) => Effect.Effect<void>\n>(2, <A>(self: Ref.Ref<A>, f: (a: A) => A) => self.modify((a): [void, A] => [void 0, f(a)]))\n\n/** @internal */\nexport const updateAndGet = dual<\n  <A>(f: (a: A) => A) => (self: Ref.Ref<A>) => Effect.Effect<A>,\n  <A>(self: Ref.Ref<A>, f: (a: A) => A) => Effect.Effect<A>\n>(2, <A>(self: Ref.Ref<A>, f: (a: A) => A) =>\n  self.modify((a): [A, A] => {\n    const result = f(a)\n    return [result, result]\n  }))\n\n/** @internal */\nexport const updateSome = dual<\n  <A>(f: (a: A) => Option.Option<A>) => (self: Ref.Ref<A>) => Effect.Effect<void>,\n  <A>(self: Ref.Ref<A>, f: (a: A) => Option.Option<A>) => Effect.Effect<void>\n>(2, <A>(self: Ref.Ref<A>, f: (a: A) => Option.Option<A>) =>\n  self.modify(\n    (a): [void, A] => [\n      void 0,\n      Option.match(f(a), {\n        onNone: () => a,\n        onSome: (b) => b\n      })\n    ]\n  ))\n\n/** @internal */\nexport const updateSomeAndGet = dual<\n  <A>(pf: (a: A) => Option.Option<A>) => (self: Ref.Ref<A>) => Effect.Effect<A>,\n  <A>(self: Ref.Ref<A>, pf: (a: A) => Option.Option<A>) => Effect.Effect<A>\n>(2, <A>(self: Ref.Ref<A>, pf: (a: A) => Option.Option<A>) =>\n  self.modify((value): [A, A] => {\n    const option = pf(value)\n    switch (option._tag) {\n      case \"None\": {\n        return [value, value]\n      }\n      case \"Some\": {\n        return [option.value, option.value]\n      }\n    }\n  }))\n\n/** @internal */\nexport const unsafeGet = <A>(self: Ref.Ref<A>): A => MutableRef.get((self as RefImpl<A>).ref)\n"],"names":["Effectable","dual","MutableRef","Option","Readable","core","RefTypeId","Symbol","for","refVariance","_A","_","RefImpl","Class","ref","commit","get","TypeId","constructor","sync","modify","f","current","b","a","set","unsafeMake","value","make","self","getAndSet","getAndUpdate","getAndUpdateSome","pf","option","_tag","setAndGet","modifySome","fallback","update","updateAndGet","result","updateSome","match","onNone","onSome","updateSomeAndGet","unsafeGet"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 7639, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 7645, "column": 0}, "map": {"version":3,"file":"core-effect.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/core-effect.ts"],"sourcesContent":["import type { Exit } from \"effect/Exit\"\nimport { internalCall } from \"effect/Utils\"\nimport * as Arr from \"../Array.js\"\nimport type * as Cause from \"../Cause.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport * as Clock from \"../Clock.js\"\nimport * as Context from \"../Context.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport type * as Fiber from \"../Fiber.js\"\nimport type * as FiberId from \"../FiberId.js\"\nimport type * as FiberRef from \"../FiberRef.js\"\nimport * as FiberRefs from \"../FiberRefs.js\"\nimport type * as FiberRefsPatch from \"../FiberRefsPatch.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { constFalse, constTrue, constVoid, dual, identity, pipe } from \"../Function.js\"\nimport * as HashMap from \"../HashMap.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport * as List from \"../List.js\"\nimport * as LogLevel from \"../LogLevel.js\"\nimport * as LogSpan from \"../LogSpan.js\"\nimport type * as Metric from \"../Metric.js\"\nimport type * as MetricLabel from \"../MetricLabel.js\"\nimport * as Option from \"../Option.js\"\nimport * as Predicate from \"../Predicate.js\"\nimport type * as Random from \"../Random.js\"\nimport * as Ref from \"../Ref.js\"\nimport type * as runtimeFlagsPatch from \"../RuntimeFlagsPatch.js\"\nimport * as Tracer from \"../Tracer.js\"\nimport type { NoInfer } from \"../Types.js\"\nimport type { Unify } from \"../Unify.js\"\nimport * as internalCause from \"./cause.js\"\nimport { clockTag } from \"./clock.js\"\nimport * as core from \"./core.js\"\nimport * as defaultServices from \"./defaultServices.js\"\nimport * as doNotation from \"./doNotation.js\"\nimport * as fiberRefsPatch from \"./fiberRefs/patch.js\"\nimport type { FiberRuntime } from \"./fiberRuntime.js\"\nimport * as metricLabel from \"./metric/label.js\"\nimport * as runtimeFlags from \"./runtimeFlags.js\"\nimport * as internalTracer from \"./tracer.js\"\n\n/* @internal */\nexport const annotateLogs = dual<\n  {\n    (key: string, value: unknown): <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n    (\n      values: Record<string, unknown>\n    ): <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  },\n  {\n    <A, E, R>(effect: Effect.Effect<A, E, R>, key: string, value: unknown): Effect.Effect<A, E, R>\n    <A, E, R>(effect: Effect.Effect<A, E, R>, values: Record<string, unknown>): Effect.Effect<A, E, R>\n  }\n>(\n  (args) => core.isEffect(args[0]),\n  function<A, E, R>() {\n    const args = arguments\n    return core.fiberRefLocallyWith(\n      args[0] as Effect.Effect<A, E, R>,\n      core.currentLogAnnotations,\n      typeof args[1] === \"string\"\n        ? HashMap.set(args[1], args[2])\n        : (annotations) =>\n          Object.entries(args[1] as Record<string, unknown>).reduce(\n            (acc, [key, value]) => HashMap.set(acc, key, value),\n            annotations\n          )\n    )\n  }\n)\n\n/* @internal */\nexport const asSome = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<Option.Option<A>, E, R> =>\n  core.map(self, Option.some)\n\n/* @internal */\nexport const asSomeError = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<A, Option.Option<E>, R> =>\n  core.mapError(self, Option.some)\n\n/* @internal */\nexport const try_: {\n  <A, E>(options: {\n    readonly try: LazyArg<A>\n    readonly catch: (error: unknown) => E\n  }): Effect.Effect<A, E>\n  <A>(thunk: LazyArg<A>): Effect.Effect<A, Cause.UnknownException>\n} = <A, E>(\n  arg: LazyArg<A> | {\n    readonly try: LazyArg<A>\n    readonly catch: (error: unknown) => E\n  }\n) => {\n  let evaluate: LazyArg<A>\n  let onFailure: ((error: unknown) => E) | undefined = undefined\n  if (typeof arg === \"function\") {\n    evaluate = arg\n  } else {\n    evaluate = arg.try\n    onFailure = arg.catch\n  }\n  return core.sync(() => {\n    try {\n      return evaluate()\n    } catch (error) {\n      throw core.makeEffectError(internalCause.fail(\n        onFailure ? onFailure(error) : new core.UnknownException(error)\n      ))\n    }\n  })\n}\n\n/* @internal */\nexport const _catch: {\n  <N extends keyof E, K extends E[N] & string, E, A1, E1, R1>(\n    discriminator: N,\n    options: {\n      readonly failure: K\n      readonly onFailure: (error: Extract<E, { [n in N]: K }>) => Effect.Effect<A1, E1, R1>\n    }\n  ): <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<\n    A | A1,\n    Exclude<E, { [n in N]: K }> | E1,\n    R | R1\n  >\n  <A, E, R, N extends keyof E, K extends E[N] & string, A1, E1, R1>(\n    self: Effect.Effect<A, E, R>,\n    discriminator: N,\n    options: {\n      readonly failure: K\n      readonly onFailure: (error: Extract<E, { [n in N]: K }>) => Effect.Effect<A1, E1, R1>\n    }\n  ): Effect.Effect<A | A1, Exclude<E, { [n in N]: K }> | E1, R | R1>\n} = dual(\n  3,\n  (self, tag, options) =>\n    core.catchAll(self, (e) => {\n      if (Predicate.hasProperty(e, tag) && e[tag] === options.failure) {\n        return options.onFailure(e)\n      }\n      return core.fail(e)\n    })\n)\n\n/* @internal */\nexport const catchAllDefect = dual<\n  <A2, E2, R2>(\n    f: (defect: unknown) => Effect.Effect<A2, E2, R2>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A | A2, E | E2, R | R2>,\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (defect: unknown) => Effect.Effect<A2, E2, R2>\n  ) => Effect.Effect<A | A2, E | E2, R | R2>\n>(2, <A, E, R, A2, E2, R2>(\n  self: Effect.Effect<A, E, R>,\n  f: (defect: unknown) => Effect.Effect<A2, E2, R2>\n): Effect.Effect<A | A2, E | E2, R | R2> =>\n  core.catchAllCause(\n    self,\n    (cause): Effect.Effect<A | A2, E | E2, R | R2> => {\n      const option = internalCause.find(cause, (_) => internalCause.isDieType(_) ? Option.some(_) : Option.none())\n      switch (option._tag) {\n        case \"None\": {\n          return core.failCause(cause)\n        }\n        case \"Some\": {\n          return f(option.value.defect)\n        }\n      }\n    }\n  ))\n\n/* @internal */\nexport const catchSomeCause: {\n  <E, A2, E2, R2>(\n    f: (cause: Cause.Cause<NoInfer<E>>) => Option.Option<Effect.Effect<A2, E2, R2>>\n  ): <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A2 | A, E | E2, R2 | R>\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (cause: Cause.Cause<NoInfer<E>>) => Option.Option<Effect.Effect<A2, E2, R2>>\n  ): Effect.Effect<A2 | A, E | E2, R2 | R>\n} = dual(\n  2,\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (cause: Cause.Cause<NoInfer<E>>) => Option.Option<Effect.Effect<A2, E2, R2>>\n  ): Effect.Effect<A2 | A, E | E2, R2 | R> =>\n    core.matchCauseEffect(self, {\n      onFailure: (cause): Effect.Effect<A2, E | E2, R2> => {\n        const option = f(cause)\n        switch (option._tag) {\n          case \"None\": {\n            return core.failCause(cause)\n          }\n          case \"Some\": {\n            return option.value\n          }\n        }\n      },\n      onSuccess: core.succeed\n    })\n)\n\n/* @internal */\nexport const catchSomeDefect = dual<\n  <A2, E2, R2>(\n    pf: (defect: unknown) => Option.Option<Effect.Effect<A2, E2, R2>>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A | A2, E | E2, R | R2>,\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    pf: (defect: unknown) => Option.Option<Effect.Effect<A2, E2, R2>>\n  ) => Effect.Effect<A | A2, E | E2, R | R2>\n>(\n  2,\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    pf: (defect: unknown) => Option.Option<Effect.Effect<A2, E2, R2>>\n  ): Effect.Effect<A | A2, E | E2, R | R2> =>\n    core.catchAllCause(\n      self,\n      (cause): Effect.Effect<A | A2, E | E2, R | R2> => {\n        const option = internalCause.find(cause, (_) => internalCause.isDieType(_) ? Option.some(_) : Option.none())\n        switch (option._tag) {\n          case \"None\": {\n            return core.failCause(cause)\n          }\n          case \"Some\": {\n            const optionEffect = pf(option.value.defect)\n            return optionEffect._tag === \"Some\" ? optionEffect.value : core.failCause(cause)\n          }\n        }\n      }\n    )\n)\n\n/* @internal */\nexport const catchTag = dual<\n  <K extends (E extends { _tag: string } ? E[\"_tag\"] : never), E, A1, E1, R1>(\n    k: K,\n    f: (e: Extract<E, { _tag: K }>) => Effect.Effect<A1, E1, R1>\n  ) => <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A | A1, Exclude<E, { _tag: K }> | E1, R | R1>,\n  <A, E, R, K extends (E extends { _tag: string } ? E[\"_tag\"] : never), R1, E1, A1>(\n    self: Effect.Effect<A, E, R>,\n    k: K,\n    f: (e: Extract<E, { _tag: K }>) => Effect.Effect<A1, E1, R1>\n  ) => Effect.Effect<A | A1, Exclude<E, { _tag: K }> | E1, R | R1>\n>(3, <A, E, R, K extends (E extends { _tag: string } ? E[\"_tag\"] : never), R1, E1, A1>(\n  self: Effect.Effect<A, E, R>,\n  k: K,\n  f: (e: Extract<E, { _tag: K }>) => Effect.Effect<A1, E1, R1>\n): Effect.Effect<A | A1, Exclude<E, { _tag: K }> | E1, R | R1> =>\n  core.catchIf(self, Predicate.isTagged(k) as Predicate.Refinement<E, Extract<E, { _tag: K }>>, f) as any)\n\n/** @internal */\nexport const catchTags: {\n  <\n    E,\n    Cases extends (E extends { _tag: string } ? {\n        [K in E[\"_tag\"]]+?: (error: Extract<E, { _tag: K }>) => Effect.Effect<any, any, any>\n      } :\n      {})\n  >(\n    cases: Cases\n  ): <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<\n    | A\n    | {\n      [K in keyof Cases]: Cases[K] extends ((...args: Array<any>) => Effect.Effect<infer A, any, any>) ? A : never\n    }[keyof Cases],\n    | Exclude<E, { _tag: keyof Cases }>\n    | {\n      [K in keyof Cases]: Cases[K] extends ((...args: Array<any>) => Effect.Effect<any, infer E, any>) ? E : never\n    }[keyof Cases],\n    | R\n    | {\n      [K in keyof Cases]: Cases[K] extends ((...args: Array<any>) => Effect.Effect<any, any, infer R>) ? R : never\n    }[keyof Cases]\n  >\n  <\n    R,\n    E,\n    A,\n    Cases extends (E extends { _tag: string } ? {\n        [K in E[\"_tag\"]]+?: (error: Extract<E, { _tag: K }>) => Effect.Effect<any, any, any>\n      } :\n      {})\n  >(\n    self: Effect.Effect<A, E, R>,\n    cases: Cases\n  ): Effect.Effect<\n    | A\n    | {\n      [K in keyof Cases]: Cases[K] extends ((...args: Array<any>) => Effect.Effect<infer A, any, any>) ? A : never\n    }[keyof Cases],\n    | Exclude<E, { _tag: keyof Cases }>\n    | {\n      [K in keyof Cases]: Cases[K] extends ((...args: Array<any>) => Effect.Effect<any, infer E, any>) ? E : never\n    }[keyof Cases],\n    | R\n    | {\n      [K in keyof Cases]: Cases[K] extends ((...args: Array<any>) => Effect.Effect<any, any, infer R>) ? R : never\n    }[keyof Cases]\n  >\n} = dual(2, (self, cases) => {\n  let keys: Array<string>\n  return core.catchIf(\n    self,\n    (e): e is { readonly _tag: string } => {\n      keys ??= Object.keys(cases)\n      return Predicate.hasProperty(e, \"_tag\") && Predicate.isString(e[\"_tag\"]) && keys.includes(e[\"_tag\"])\n    },\n    (e) => cases[e[\"_tag\"]](e)\n  )\n})\n\n/* @internal */\nexport const cause = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<Cause.Cause<E>, never, R> =>\n  core.matchCause(self, { onFailure: identity, onSuccess: () => internalCause.empty })\n\n/* @internal */\nexport const clockWith: <A, E, R>(f: (clock: Clock.Clock) => Effect.Effect<A, E, R>) => Effect.Effect<A, E, R> =\n  Clock.clockWith\n\n/* @internal */\nexport const clock: Effect.Effect<Clock.Clock> = clockWith(core.succeed)\n\n/* @internal */\nexport const delay = dual<\n  (duration: Duration.DurationInput) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, duration: Duration.DurationInput) => Effect.Effect<A, E, R>\n>(2, (self, duration) => core.zipRight(Clock.sleep(duration), self))\n\n/* @internal */\nexport const descriptorWith = <A, E, R>(\n  f: (descriptor: Fiber.Fiber.Descriptor) => Effect.Effect<A, E, R>\n): Effect.Effect<A, E, R> =>\n  core.withFiberRuntime((state, status) =>\n    f({\n      id: state.id(),\n      status,\n      interruptors: internalCause.interruptors(state.getFiberRef(core.currentInterruptedCause))\n    })\n  ) as Effect.Effect<A, E, R>\n\n/* @internal */\nexport const allowInterrupt: Effect.Effect<void> = descriptorWith(\n  (descriptor) =>\n    HashSet.size(descriptor.interruptors) > 0\n      ? core.interrupt\n      : core.void\n)\n\n/* @internal */\nexport const descriptor: Effect.Effect<Fiber.Fiber.Descriptor> = descriptorWith(core.succeed)\n\n/* @internal */\nexport const diffFiberRefs = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<[FiberRefsPatch.FiberRefsPatch, A], E, R> => summarized(self, fiberRefs, fiberRefsPatch.diff)\n\n/* @internal */\nexport const diffFiberRefsAndRuntimeFlags = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<[[FiberRefsPatch.FiberRefsPatch, runtimeFlagsPatch.RuntimeFlagsPatch], A], E, R> =>\n  summarized(\n    self,\n    core.zip(fiberRefs, core.runtimeFlags),\n    ([refs, flags], [refsNew, flagsNew]) => [fiberRefsPatch.diff(refs, refsNew), runtimeFlags.diff(flags, flagsNew)]\n  )\n\n/* @internal */\nexport const Do: Effect.Effect<{}> = core.succeed({})\n\n/* @internal */\nexport const bind: {\n  <N extends string, A extends object, B, E2, R2>(\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => Effect.Effect<B, E2, R2>\n  ): <E1, R1>(\n    self: Effect.Effect<A, E1, R1>\n  ) => Effect.Effect<{ [K in N | keyof A]: K extends keyof A ? A[K] : B }, E2 | E1, R2 | R1>\n  <A extends object, N extends string, E1, R1, B, E2, R2>(\n    self: Effect.Effect<A, E1, R1>,\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => Effect.Effect<B, E2, R2>\n  ): Effect.Effect<{ [K in N | keyof A]: K extends keyof A ? A[K] : B }, E1 | E2, R1 | R2>\n} = doNotation.bind<Effect.EffectTypeLambda>(core.map, core.flatMap)\n\n/* @internal */\nexport const bindTo: {\n  <N extends string>(name: N): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<{ [K in N]: A }, E, R>\n  <A, E, R, N extends string>(self: Effect.Effect<A, E, R>, name: N): Effect.Effect<{ [K in N]: A }, E, R>\n} = doNotation.bindTo<Effect.EffectTypeLambda>(core.map)\n\n/* @internal */\nexport const let_: {\n  <N extends string, A extends object, B>(\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => B\n  ): <E, R>(\n    self: Effect.Effect<A, E, R>\n  ) => Effect.Effect<{ [K in N | keyof A]: K extends keyof A ? A[K] : B }, E, R>\n  <A extends object, N extends string, E, R, B>(\n    self: Effect.Effect<A, E, R>,\n    name: Exclude<N, keyof A>,\n    f: (a: NoInfer<A>) => B\n  ): Effect.Effect<{ [K in N | keyof A]: K extends keyof A ? A[K] : B }, E, R>\n} = doNotation.let_<Effect.EffectTypeLambda>(core.map)\n\n/* @internal */\nexport const dropUntil: {\n  <A, E, R>(\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): (elements: Iterable<A>) => Effect.Effect<Array<A>, E, R>\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: A, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Array<A>, E, R>\n} = dual(\n  2,\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: A, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Array<A>, E, R> =>\n    core.suspend(() => {\n      const iterator = elements[Symbol.iterator]()\n      const builder: Array<A> = []\n      let next: IteratorResult<A, any>\n      let dropping: Effect.Effect<boolean, E, R> = core.succeed(false)\n      let i = 0\n      while ((next = iterator.next()) && !next.done) {\n        const a = next.value\n        const index = i++\n        dropping = core.flatMap(dropping, (bool) => {\n          if (bool) {\n            builder.push(a)\n            return core.succeed(true)\n          }\n          return predicate(a, index)\n        })\n      }\n      return core.map(dropping, () => builder)\n    })\n)\n\n/* @internal */\nexport const dropWhile: {\n  <A, E, R>(\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): (elements: Iterable<A>) => Effect.Effect<Array<A>, E, R>\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: A, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Array<A>, E, R>\n} = dual(\n  2,\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: A, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Array<A>, E, R> =>\n    core.suspend(() => {\n      const iterator = elements[Symbol.iterator]()\n      const builder: Array<A> = []\n      let next\n      let dropping: Effect.Effect<boolean, E, R> = core.succeed(true)\n      let i = 0\n      while ((next = iterator.next()) && !next.done) {\n        const a = next.value\n        const index = i++\n        dropping = core.flatMap(dropping, (d) =>\n          core.map(d ? predicate(a, index) : core.succeed(false), (b) => {\n            if (!b) {\n              builder.push(a)\n            }\n            return b\n          }))\n      }\n      return core.map(dropping, () => builder)\n    })\n)\n\n/* @internal */\nexport const contextWith = <R, A>(f: (context: Context.Context<R>) => A): Effect.Effect<A, never, R> =>\n  core.map(core.context<R>(), f)\n\n/* @internal */\nexport const eventually = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<A, never, R> =>\n  core.orElse(self, () => core.flatMap(core.yieldNow(), () => eventually(self)))\n\n/* @internal */\nexport const filterMap = dual<\n  <Eff extends Effect.Effect<any, any, any>, B>(\n    pf: (a: Effect.Effect.Success<Eff>) => Option.Option<B>\n  ) => (elements: Iterable<Eff>) => Effect.Effect<Array<B>, Effect.Effect.Error<Eff>, Effect.Effect.Context<Eff>>,\n  <Eff extends Effect.Effect<any, any, any>, B>(\n    elements: Iterable<Eff>,\n    pf: (a: Effect.Effect.Success<Eff>) => Option.Option<B>\n  ) => Effect.Effect<Array<B>, Effect.Effect.Error<Eff>, Effect.Effect.Context<Eff>>\n>(2, (elements, pf) =>\n  core.map(\n    core.forEachSequential(elements, identity),\n    Arr.filterMap(pf)\n  ))\n\n/* @internal */\nexport const filterOrDie: {\n  <A, B extends A>(\n    refinement: Predicate.Refinement<NoInfer<A>, B>,\n    orDieWith: (a: NoInfer<A>) => unknown\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E, R>\n  <A>(\n    predicate: Predicate.Predicate<NoInfer<A>>,\n    orDieWith: (a: NoInfer<A>) => unknown\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  <A, E, R, B extends A>(\n    self: Effect.Effect<A, E, R>,\n    refinement: Predicate.Refinement<A, B>,\n    orDieWith: (a: A) => unknown\n  ): Effect.Effect<B, E, R>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    predicate: Predicate.Predicate<A>,\n    orDieWith: (a: A) => unknown\n  ): Effect.Effect<A, E, R>\n} = dual(\n  3,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    predicate: Predicate.Predicate<A>,\n    orDieWith: (a: A) => unknown\n  ): Effect.Effect<A, E, R> => filterOrElse(self, predicate, (a) => core.dieSync(() => orDieWith(a)))\n)\n\n/* @internal */\nexport const filterOrDieMessage: {\n  <A, B extends A>(\n    refinement: Predicate.Refinement<NoInfer<A>, B>,\n    message: string\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E, R>\n  <A>(\n    predicate: Predicate.Predicate<NoInfer<A>>,\n    message: string\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  <A, E, R, B extends A>(\n    self: Effect.Effect<A, E, R>,\n    refinement: Predicate.Refinement<A, B>,\n    message: string\n  ): Effect.Effect<B, E, R>\n  <A, E, R>(self: Effect.Effect<A, E, R>, predicate: Predicate.Predicate<A>, message: string): Effect.Effect<A, E, R>\n} = dual(\n  3,\n  <A, E, R>(self: Effect.Effect<A, E, R>, predicate: Predicate.Predicate<A>, message: string): Effect.Effect<A, E, R> =>\n    filterOrElse(self, predicate, () => core.dieMessage(message))\n)\n\n/* @internal */\nexport const filterOrElse: {\n  <A, B extends A, C, E2, R2>(\n    refinement: Predicate.Refinement<NoInfer<A>, B>,\n    orElse: (a: NoInfer<A>) => Effect.Effect<C, E2, R2>\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B | C, E2 | E, R2 | R>\n  <A, B, E2, R2>(\n    predicate: Predicate.Predicate<NoInfer<A>>,\n    orElse: (a: NoInfer<A>) => Effect.Effect<B, E2, R2>\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A | B, E2 | E, R2 | R>\n  <A, E, R, B extends A, C, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    refinement: Predicate.Refinement<A, B>,\n    orElse: (a: A) => Effect.Effect<C, E2, R2>\n  ): Effect.Effect<B | C, E | E2, R | R2>\n  <A, E, R, B, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    predicate: Predicate.Predicate<A>,\n    orElse: (a: A) => Effect.Effect<B, E2, R2>\n  ): Effect.Effect<A | B, E | E2, R | R2>\n} = dual(3, <A, E, R, B, E2, R2>(\n  self: Effect.Effect<A, E, R>,\n  predicate: Predicate.Predicate<A>,\n  orElse: (a: A) => Effect.Effect<B, E2, R2>\n): Effect.Effect<A | B, E | E2, R | R2> =>\n  core.flatMap(\n    self,\n    (a) => predicate(a) ? core.succeed<A | B>(a) : orElse(a)\n  ))\n\n/** @internal */\nexport const liftPredicate = dual<\n  {\n    <A, B extends A, E>(\n      refinement: Predicate.Refinement<NoInfer<A>, B>,\n      orFailWith: (a: NoInfer<A>) => E\n    ): (a: A) => Effect.Effect<B, E>\n    <A, E>(\n      predicate: Predicate.Predicate<NoInfer<A>>,\n      orFailWith: (a: NoInfer<A>) => E\n    ): (a: A) => Effect.Effect<A, E>\n  },\n  {\n    <A, E, B extends A>(\n      self: A,\n      refinement: Predicate.Refinement<A, B>,\n      orFailWith: (a: A) => E\n    ): Effect.Effect<B, E>\n    <A, E>(\n      self: A,\n      predicate: Predicate.Predicate<NoInfer<A>>,\n      orFailWith: (a: NoInfer<A>) => E\n    ): Effect.Effect<A, E>\n  }\n>(\n  3,\n  <A, E>(\n    self: A,\n    predicate: Predicate.Predicate<NoInfer<A>>,\n    orFailWith: (a: NoInfer<A>) => E\n  ): Effect.Effect<A, E> => core.suspend(() => predicate(self) ? core.succeed(self) : core.fail(orFailWith(self)))\n)\n\n/* @internal */\nexport const filterOrFail: {\n  <A, B extends A, E2>(\n    refinement: Predicate.Refinement<NoInfer<A>, B>,\n    orFailWith: (a: NoInfer<A>) => E2\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E2 | E, R>\n  <A, E2>(\n    predicate: Predicate.Predicate<NoInfer<A>>,\n    orFailWith: (a: NoInfer<A>) => E2\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E2 | E, R>\n  <A, B extends A>(\n    refinement: Predicate.Refinement<NoInfer<A>, B>\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, Cause.NoSuchElementException | E, R>\n  <A>(\n    predicate: Predicate.Predicate<NoInfer<A>>\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, Cause.NoSuchElementException | E, R>\n  <A, E, R, B extends A, E2>(\n    self: Effect.Effect<A, E, R>,\n    refinement: Predicate.Refinement<A, B>,\n    orFailWith: (a: A) => E2\n  ): Effect.Effect<B, E | E2, R>\n  <A, E, R, E2>(\n    self: Effect.Effect<A, E, R>,\n    predicate: Predicate.Predicate<A>,\n    orFailWith: (a: A) => E2\n  ): Effect.Effect<A, E | E2, R>\n  <A, E, R, B extends A>(\n    self: Effect.Effect<A, E, R>,\n    refinement: Predicate.Refinement<A, B>\n  ): Effect.Effect<B, E | Cause.NoSuchElementException, R>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    predicate: Predicate.Predicate<A>\n  ): Effect.Effect<A, E | Cause.NoSuchElementException, R>\n} = dual((args) => core.isEffect(args[0]), <A, E, R, E2>(\n  self: Effect.Effect<A, E, R>,\n  predicate: Predicate.Predicate<A>,\n  orFailWith?: (a: A) => E2\n): Effect.Effect<A, E | E2 | Cause.NoSuchElementException, R> =>\n  filterOrElse(\n    self,\n    predicate,\n    (a): Effect.Effect<never, E2 | Cause.NoSuchElementException, never> =>\n      orFailWith === undefined ? core.fail(new core.NoSuchElementException()) : core.failSync(() => orFailWith(a))\n  ))\n\n/* @internal */\nexport const findFirst: {\n  <A, E, R>(\n    f: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): (elements: Iterable<A>) => Effect.Effect<Option.Option<A>, E, R>\n  <A, E, R>(\n    elements: Iterable<A>,\n    f: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Option.Option<A>, E, R>\n} = dual(\n  2,\n  <A, E, R>(\n    elements: Iterable<A>,\n    f: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Option.Option<A>, E, R> =>\n    core.suspend(() => {\n      const iterator = elements[Symbol.iterator]()\n      const next = iterator.next()\n      if (!next.done) {\n        return findLoop(iterator, 0, f, next.value)\n      }\n      return core.succeed(Option.none())\n    })\n)\n\nconst findLoop = <A, E, R>(\n  iterator: Iterator<A>,\n  index: number,\n  f: (a: A, i: number) => Effect.Effect<boolean, E, R>,\n  value: A\n): Effect.Effect<Option.Option<A>, E, R> =>\n  core.flatMap(f(value, index), (result) => {\n    if (result) {\n      return core.succeed(Option.some(value))\n    }\n    const next = iterator.next()\n    if (!next.done) {\n      return findLoop(iterator, index + 1, f, next.value)\n    }\n    return core.succeed(Option.none())\n  })\n\n/* @internal */\nexport const firstSuccessOf = <Eff extends Effect.Effect<any, any, any>>(\n  effects: Iterable<Eff>\n): Effect.Effect<Effect.Effect.Success<Eff>, Effect.Effect.Error<Eff>, Effect.Effect.Context<Eff>> =>\n  core.suspend(() => {\n    const list = Chunk.fromIterable(effects)\n    if (!Chunk.isNonEmpty(list)) {\n      return core.dieSync(() => new core.IllegalArgumentException(`Received an empty collection of effects`))\n    }\n    return pipe(\n      Chunk.tailNonEmpty(list),\n      Arr.reduce(Chunk.headNonEmpty(list), (left, right) => core.orElse(left, () => right) as Eff)\n    )\n  })\n\n/* @internal */\nexport const flipWith: {\n  <E, A, R, E2, A2, R2>(\n    f: (effect: Effect.Effect<E, A, R>) => Effect.Effect<E2, A2, R2>\n  ): (self: Effect.Effect<A, E, R>) => Effect.Effect<A2, E2, R2>\n  <A, E, R, E2, A2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (effect: Effect.Effect<E, A, R>) => Effect.Effect<E2, A2, R2>\n  ): Effect.Effect<A2, E2, R2>\n} = dual(2, <A, E, R, E2, A2, R2>(\n  self: Effect.Effect<A, E, R>,\n  f: (effect: Effect.Effect<E, A, R>) => Effect.Effect<E2, A2, R2>\n): Effect.Effect<A2, E2, R2> => core.flip(f(core.flip(self))))\n\n/* @internal */\nexport const match: {\n  <E, A2, A, A3>(\n    options: {\n      readonly onFailure: (error: E) => A2\n      readonly onSuccess: (value: A) => A3\n    }\n  ): <R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A2 | A3, never, R>\n  <A, E, R, A2, A3>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly onFailure: (error: E) => A2\n      readonly onSuccess: (value: A) => A3\n    }\n  ): Effect.Effect<A2 | A3, never, R>\n} = dual(2, <A, E, R, A2, A3>(\n  self: Effect.Effect<A, E, R>,\n  options: {\n    readonly onFailure: (error: E) => A2\n    readonly onSuccess: (value: A) => A3\n  }\n): Effect.Effect<A2 | A3, never, R> =>\n  core.matchEffect(self, {\n    onFailure: (e) => core.succeed(options.onFailure(e)),\n    onSuccess: (a) => core.succeed(options.onSuccess(a))\n  }))\n\n/* @internal */\nexport const every: {\n  <A, E, R>(\n    f: (a: A, i: number) => Effect.Effect<boolean, E, R>\n  ): (elements: Iterable<A>) => Effect.Effect<boolean, E, R>\n  <A, E, R>(elements: Iterable<A>, f: (a: A, i: number) => Effect.Effect<boolean, E, R>): Effect.Effect<boolean, E, R>\n} = dual(\n  2,\n  <A, E, R>(\n    elements: Iterable<A>,\n    f: (a: A, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<boolean, E, R> => core.suspend(() => forAllLoop(elements[Symbol.iterator](), 0, f))\n)\n\nconst forAllLoop = <A, E, R>(\n  iterator: Iterator<A>,\n  index: number,\n  f: (a: A, i: number) => Effect.Effect<boolean, E, R>\n): Effect.Effect<boolean, E, R> => {\n  const next = iterator.next()\n  return next.done\n    ? core.succeed(true)\n    : core.flatMap(\n      f(next.value, index),\n      (b) => b ? forAllLoop(iterator, index + 1, f) : core.succeed(b)\n    )\n}\n\n/* @internal */\nexport const forever = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<never, E, R> => {\n  const loop: Effect.Effect<never, E, R> = core.flatMap(core.flatMap(self, () => core.yieldNow()), () => loop)\n  return loop\n}\n\n/* @internal */\nexport const fiberRefs: Effect.Effect<FiberRefs.FiberRefs> = core.withFiberRuntime((state) =>\n  core.succeed(state.getFiberRefs())\n)\n\n/* @internal */\nexport const head = <A, E, R>(\n  self: Effect.Effect<Iterable<A>, E, R>\n): Effect.Effect<A, E | Cause.NoSuchElementException, R> =>\n  core.flatMap(self, (as) => {\n    const iterator = as[Symbol.iterator]()\n    const next = iterator.next()\n    if (next.done) {\n      return core.fail(new core.NoSuchElementException())\n    }\n    return core.succeed(next.value)\n  })\n\n/* @internal */\nexport const ignore = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<void, never, R> =>\n  match(self, { onFailure: constVoid, onSuccess: constVoid })\n\n/* @internal */\nexport const ignoreLogged = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<void, never, R> =>\n  core.matchCauseEffect(self, {\n    onFailure: (cause) => logDebug(cause, \"An error was silently ignored because it is not anticipated to be useful\"),\n    onSuccess: () => core.void\n  })\n\n/* @internal */\nexport const inheritFiberRefs = (childFiberRefs: FiberRefs.FiberRefs) =>\n  updateFiberRefs((parentFiberId, parentFiberRefs) => FiberRefs.joinAs(parentFiberRefs, parentFiberId, childFiberRefs))\n\n/* @internal */\nexport const isFailure = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<boolean, never, R> =>\n  match(self, { onFailure: constTrue, onSuccess: constFalse })\n\n/* @internal */\nexport const isSuccess = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<boolean, never, R> =>\n  match(self, { onFailure: constFalse, onSuccess: constTrue })\n\n/* @internal */\nexport const iterate: {\n  <A, B extends A, R, E>(\n    initial: A,\n    options: {\n      readonly while: Predicate.Refinement<A, B>\n      readonly body: (b: B) => Effect.Effect<A, E, R>\n    }\n  ): Effect.Effect<A, E, R>\n  <A, R, E>(\n    initial: A,\n    options: {\n      readonly while: Predicate.Predicate<A>\n      readonly body: (a: A) => Effect.Effect<A, E, R>\n    }\n  ): Effect.Effect<A, E, R>\n} = <A, E, R>(\n  initial: A,\n  options: {\n    readonly while: Predicate.Predicate<A>\n    readonly body: (z: A) => Effect.Effect<A, E, R>\n  }\n): Effect.Effect<A, E, R> =>\n  core.suspend<A, E, R>(() => {\n    if (options.while(initial)) {\n      return core.flatMap(options.body(initial), (z2) => iterate(z2, options))\n    }\n    return core.succeed(initial)\n  })\n\n/** @internal */\nexport const logWithLevel = (level?: LogLevel.LogLevel) =>\n(\n  ...message: ReadonlyArray<any>\n): Effect.Effect<void> => {\n  const levelOption = Option.fromNullable(level)\n  let cause: Cause.Cause<unknown> | undefined = undefined\n  for (let i = 0, len = message.length; i < len; i++) {\n    const msg = message[i]\n    if (internalCause.isCause(msg)) {\n      if (cause !== undefined) {\n        cause = internalCause.sequential(cause, msg)\n      } else {\n        cause = msg\n      }\n      message = [...message.slice(0, i), ...message.slice(i + 1)]\n      i--\n    }\n  }\n  if (cause === undefined) {\n    cause = internalCause.empty\n  }\n  return core.withFiberRuntime((fiberState) => {\n    fiberState.log(message, cause, levelOption)\n    return core.void\n  })\n}\n\n/** @internal */\nexport const log: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel()\n\n/** @internal */\nexport const logTrace: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel(\n  LogLevel.Trace\n)\n\n/** @internal */\nexport const logDebug: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel(\n  LogLevel.Debug\n)\n\n/** @internal */\nexport const logInfo: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel(\n  LogLevel.Info\n)\n\n/** @internal */\nexport const logWarning: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel(\n  LogLevel.Warning\n)\n\n/** @internal */\nexport const logError: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel(\n  LogLevel.Error\n)\n\n/** @internal */\nexport const logFatal: (...message: ReadonlyArray<any>) => Effect.Effect<void, never, never> = logWithLevel(\n  LogLevel.Fatal\n)\n\n/* @internal */\nexport const withLogSpan = dual<\n  (label: string) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(effect: Effect.Effect<A, E, R>, label: string) => Effect.Effect<A, E, R>\n>(2, (effect, label) =>\n  core.flatMap(Clock.currentTimeMillis, (now) =>\n    core.fiberRefLocallyWith(\n      effect,\n      core.currentLogSpan,\n      List.prepend(LogSpan.make(label, now))\n    )))\n\n/* @internal */\nexport const logAnnotations: Effect.Effect<HashMap.HashMap<string, unknown>> = core\n  .fiberRefGet(\n    core.currentLogAnnotations\n  )\n\n/* @internal */\nexport const loop: {\n  <A, B extends A, C, E, R>(\n    initial: A,\n    options: {\n      readonly while: Predicate.Refinement<A, B>\n      readonly step: (b: B) => A\n      readonly body: (b: B) => Effect.Effect<C, E, R>\n      readonly discard?: false | undefined\n    }\n  ): Effect.Effect<Array<C>, E, R>\n  <A, C, E, R>(\n    initial: A,\n    options: {\n      readonly while: (a: A) => boolean\n      readonly step: (a: A) => A\n      readonly body: (a: A) => Effect.Effect<C, E, R>\n      readonly discard?: false | undefined\n    }\n  ): Effect.Effect<Array<C>, E, R>\n  <A, B extends A, C, E, R>(\n    initial: A,\n    options: {\n      readonly while: Predicate.Refinement<A, B>\n      readonly step: (b: B) => A\n      readonly body: (b: B) => Effect.Effect<R, E, C>\n      readonly discard: true\n    }\n  ): Effect.Effect<void, E, R>\n  <A, C, E, R>(\n    initial: A,\n    options: {\n      readonly while: (a: A) => boolean\n      readonly step: (a: A) => A\n      readonly body: (a: A) => Effect.Effect<C, E, R>\n      readonly discard: true\n    }\n  ): Effect.Effect<void, E, R>\n} = <A, C, E, R>(\n  initial: A,\n  options: {\n    readonly while: Predicate.Predicate<A>\n    readonly step: (a: A) => A\n    readonly body: (a: A) => Effect.Effect<C, E, R>\n    readonly discard?: boolean | undefined\n  }\n): any =>\n  options.discard\n    ? loopDiscard(initial, options.while, options.step, options.body)\n    : core.map(loopInternal(initial, options.while, options.step, options.body), Arr.fromIterable)\n\nconst loopInternal = <Z, A, E, R>(\n  initial: Z,\n  cont: Predicate.Predicate<Z>,\n  inc: (z: Z) => Z,\n  body: (z: Z) => Effect.Effect<A, E, R>\n): Effect.Effect<List.List<A>, E, R> =>\n  core.suspend(() =>\n    cont(initial)\n      ? core.flatMap(body(initial), (a) =>\n        core.map(\n          loopInternal(inc(initial), cont, inc, body),\n          List.prepend(a)\n        ))\n      : core.sync(() => List.empty())\n  )\n\nconst loopDiscard = <S, X, E, R>(\n  initial: S,\n  cont: Predicate.Predicate<S>,\n  inc: (s: S) => S,\n  body: (s: S) => Effect.Effect<X, E, R>\n): Effect.Effect<void, E, R> =>\n  core.suspend(() =>\n    cont(initial)\n      ? core.flatMap(\n        body(initial),\n        () => loopDiscard(inc(initial), cont, inc, body)\n      )\n      : core.void\n  )\n\n/* @internal */\nexport const mapAccum: {\n  <S, A, B, E, R, I extends Iterable<A> = Iterable<A>>(\n    initial: S,\n    f: (state: S, a: A, i: number) => Effect.Effect<readonly [S, B], E, R>\n  ): (elements: I) => Effect.Effect<[S, Arr.ReadonlyArray.With<I, B>], E, R>\n  <A, S, B, E, R, I extends Iterable<A> = Iterable<A>>(\n    elements: I,\n    initial: S,\n    f: (state: S, a: A, i: number) => Effect.Effect<readonly [S, B], E, R>\n  ): Effect.Effect<[S, Arr.ReadonlyArray.With<I, B>], E, R>\n} = dual(3, <A, S, B, E, R, I extends Iterable<A> = Iterable<A>>(\n  elements: I,\n  initial: S,\n  f: (state: S, a: A, i: number) => Effect.Effect<readonly [S, B], E, R>\n): Effect.Effect<[S, Array<B>], E, R> =>\n  core.suspend(() => {\n    const iterator = elements[Symbol.iterator]()\n    const builder: Array<B> = []\n    let result: Effect.Effect<S, E, R> = core.succeed(initial)\n    let next: IteratorResult<A, any>\n    let i = 0\n    while (!(next = iterator.next()).done) {\n      const index = i++\n      const value = next.value\n      result = core.flatMap(result, (state) =>\n        core.map(f(state, value, index), ([z, b]) => {\n          builder.push(b)\n          return z\n        }))\n    }\n    return core.map(result, (z) => [z, builder])\n  }))\n\n/* @internal */\nexport const mapErrorCause: {\n  <E, E2>(\n    f: (cause: Cause.Cause<E>) => Cause.Cause<E2>\n  ): <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E2, R>\n  <A, E, R, E2>(self: Effect.Effect<A, E, R>, f: (cause: Cause.Cause<E>) => Cause.Cause<E2>): Effect.Effect<A, E2, R>\n} = dual(\n  2,\n  <A, E, R, E2>(self: Effect.Effect<A, E, R>, f: (cause: Cause.Cause<E>) => Cause.Cause<E2>): Effect.Effect<A, E2, R> =>\n    core.matchCauseEffect(self, {\n      onFailure: (c) => core.failCauseSync(() => f(c)),\n      onSuccess: core.succeed\n    })\n)\n\n/* @internal */\nexport const memoize = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<Effect.Effect<A, E, R>> =>\n  pipe(\n    core.deferredMake<[[FiberRefsPatch.FiberRefsPatch, runtimeFlagsPatch.RuntimeFlagsPatch], A], E>(),\n    core.flatMap((deferred) =>\n      pipe(\n        diffFiberRefsAndRuntimeFlags(self),\n        core.intoDeferred(deferred),\n        once,\n        core.map((complete) =>\n          core.zipRight(\n            complete,\n            pipe(\n              core.deferredAwait(deferred),\n              core.flatMap(([patch, a]) =>\n                core.as(core.zip(patchFiberRefs(patch[0]), core.updateRuntimeFlags(patch[1])), a)\n              )\n            )\n          )\n        )\n      )\n    )\n  )\n\n/* @internal */\nexport const merge = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<E | A, never, R> =>\n  core.matchEffect(self, {\n    onFailure: (e) => core.succeed(e),\n    onSuccess: core.succeed\n  })\n\n/* @internal */\nexport const negate = <E, R>(self: Effect.Effect<boolean, E, R>): Effect.Effect<boolean, E, R> =>\n  core.map(self, (b) => !b)\n\n/* @internal */\nexport const none = <A, E, R>(\n  self: Effect.Effect<Option.Option<A>, E, R>\n): Effect.Effect<void, E | Cause.NoSuchElementException, R> =>\n  core.flatMap(self, (option) => {\n    switch (option._tag) {\n      case \"None\":\n        return core.void\n      case \"Some\":\n        return core.fail(new core.NoSuchElementException())\n    }\n  })\n\n/* @internal */\nexport const once = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<Effect.Effect<void, E, R>> =>\n  core.map(\n    Ref.make(true),\n    (ref) => core.asVoid(core.whenEffect(self, Ref.getAndSet(ref, false)))\n  )\n\n/* @internal */\nexport const option = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<Option.Option<A>, never, R> =>\n  core.matchEffect(self, {\n    onFailure: () => core.succeed(Option.none()),\n    onSuccess: (a) => core.succeed(Option.some(a))\n  })\n\n/* @internal */\nexport const orElseFail = dual<\n  <E2>(evaluate: LazyArg<E2>) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E2, R>,\n  <A, E, R, E2>(self: Effect.Effect<A, E, R>, evaluate: LazyArg<E2>) => Effect.Effect<A, E2, R>\n>(2, (self, evaluate) => core.orElse(self, () => core.failSync(evaluate)))\n\n/* @internal */\nexport const orElseSucceed = dual<\n  <A2>(evaluate: LazyArg<A2>) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A | A2, never, R>,\n  <A, E, R, A2>(self: Effect.Effect<A, E, R>, evaluate: LazyArg<A2>) => Effect.Effect<A | A2, never, R>\n>(2, (self, evaluate) => core.orElse(self, () => core.sync(evaluate)))\n\n/* @internal */\nexport const parallelErrors = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<A, Array<E>, R> =>\n  core.matchCauseEffect(self, {\n    onFailure: (cause) => {\n      const errors = Arr.fromIterable(internalCause.failures(cause))\n      return errors.length === 0\n        ? core.failCause(cause as Cause.Cause<never>)\n        : core.fail(errors)\n    },\n    onSuccess: core.succeed\n  })\n\n/* @internal */\nexport const patchFiberRefs = (patch: FiberRefsPatch.FiberRefsPatch): Effect.Effect<void> =>\n  updateFiberRefs((fiberId, fiberRefs) => pipe(patch, fiberRefsPatch.patch(fiberId, fiberRefs)))\n\n/* @internal */\nexport const promise = <A>(evaluate: (signal: AbortSignal) => PromiseLike<A>): Effect.Effect<A> =>\n  evaluate.length >= 1\n    ? core.async((resolve, signal) => {\n      try {\n        evaluate(signal)\n          .then((a) => resolve(core.exitSucceed(a)), (e) => resolve(core.exitDie(e)))\n      } catch (e) {\n        resolve(core.exitDie(e))\n      }\n    })\n    : core.async((resolve) => {\n      try {\n        ;(evaluate as LazyArg<PromiseLike<A>>)()\n          .then((a) => resolve(core.exitSucceed(a)), (e) => resolve(core.exitDie(e)))\n      } catch (e) {\n        resolve(core.exitDie(e))\n      }\n    })\n\n/* @internal */\nexport const provideService = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T,\n    service: Context.Tag.Service<T>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, Exclude<R, Context.Tag.Identifier<T>>>,\n  <A, E, R, T extends Context.Tag<any, any>>(\n    self: Effect.Effect<A, E, R>,\n    tag: T,\n    service: Context.Tag.Service<T>\n  ) => Effect.Effect<A, E, Exclude<R, Context.Tag.Identifier<T>>>\n>(\n  3,\n  <A, E, R, T extends Context.Tag<any, any>>(\n    self: Effect.Effect<A, E, R>,\n    tag: T,\n    service: Context.Tag.Service<T>\n  ): Effect.Effect<A, E, Exclude<R, Context.Tag.Identifier<T>>> =>\n    core.contextWithEffect((env) =>\n      core.provideContext(\n        self as Effect.Effect<A, E, Context.Tag.Identifier<T> | Exclude<R, Context.Tag.Identifier<T>>>,\n        Context.add(env, tag, service)\n      )\n    )\n)\n\n/* @internal */\nexport const provideServiceEffect = dual<\n  <T extends Context.Tag<any, any>, E1, R1>(\n    tag: T,\n    effect: Effect.Effect<Context.Tag.Service<T>, E1, R1>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E1, R1 | Exclude<R, Context.Tag.Identifier<T>>>,\n  <A, E, R, T extends Context.Tag<any, any>, E1, R1>(\n    self: Effect.Effect<A, E, R>,\n    tag: T,\n    effect: Effect.Effect<Context.Tag.Service<T>, E1, R1>\n  ) => Effect.Effect<A, E | E1, R1 | Exclude<R, Context.Tag.Identifier<T>>>\n>(3, <A, E, R, T extends Context.Tag<any, any>, E1, R1>(\n  self: Effect.Effect<A, E, R>,\n  tag: T,\n  effect: Effect.Effect<Context.Tag.Service<T>, E1, R1>\n) =>\n  core.contextWithEffect((env: Context.Context<R1 | Exclude<R, Context.Tag.Identifier<T>>>) =>\n    core.flatMap(\n      effect,\n      (service) => core.provideContext(self, pipe(env, Context.add(tag, service)) as Context.Context<R | R1>)\n    )\n  ))\n\n/* @internal */\nexport const random: Effect.Effect<Random.Random> = defaultServices.randomWith(core.succeed)\n\n/* @internal */\nexport const reduce = dual<\n  <Z, A, E, R>(\n    zero: Z,\n    f: (z: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n  ) => (elements: Iterable<A>) => Effect.Effect<Z, E, R>,\n  <A, Z, E, R>(\n    elements: Iterable<A>,\n    zero: Z,\n    f: (z: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n  ) => Effect.Effect<Z, E, R>\n>(\n  3,\n  <A, Z, E, R>(\n    elements: Iterable<A>,\n    zero: Z,\n    f: (z: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n  ) =>\n    Arr.fromIterable(elements).reduce(\n      (acc, el, i) => core.flatMap(acc, (a) => f(a, el, i)),\n      core.succeed(zero) as Effect.Effect<Z, E, R>\n    )\n)\n\n/* @internal */\nexport const reduceRight = dual<\n  <A, Z, R, E>(\n    zero: Z,\n    f: (a: A, z: Z, i: number) => Effect.Effect<Z, E, R>\n  ) => (elements: Iterable<A>) => Effect.Effect<Z, E, R>,\n  <A, Z, R, E>(\n    elements: Iterable<A>,\n    zero: Z,\n    f: (a: A, z: Z, i: number) => Effect.Effect<Z, E, R>\n  ) => Effect.Effect<Z, E, R>\n>(\n  3,\n  <A, Z, R, E>(elements: Iterable<A>, zero: Z, f: (a: A, z: Z, i: number) => Effect.Effect<Z, E, R>) =>\n    Arr.fromIterable(elements).reduceRight(\n      (acc, el, i) => core.flatMap(acc, (a) => f(el, a, i)),\n      core.succeed(zero) as Effect.Effect<Z, E, R>\n    )\n)\n\n/* @internal */\nexport const reduceWhile = dual<\n  <Z, A, E, R>(\n    zero: Z,\n    options: {\n      readonly while: Predicate.Predicate<Z>\n      readonly body: (s: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n    }\n  ) => (elements: Iterable<A>) => Effect.Effect<Z, E, R>,\n  <A, Z, E, R>(\n    elements: Iterable<A>,\n    zero: Z,\n    options: {\n      readonly while: Predicate.Predicate<Z>\n      readonly body: (s: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n    }\n  ) => Effect.Effect<Z, E, R>\n>(3, <A, Z, E, R>(\n  elements: Iterable<A>,\n  zero: Z,\n  options: {\n    readonly while: Predicate.Predicate<Z>\n    readonly body: (s: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n  }\n) =>\n  core.flatMap(\n    core.sync(() => elements[Symbol.iterator]()),\n    (iterator) => reduceWhileLoop(iterator, 0, zero, options.while, options.body)\n  ))\n\nconst reduceWhileLoop = <A, R, E, Z>(\n  iterator: Iterator<A>,\n  index: number,\n  state: Z,\n  predicate: Predicate.Predicate<Z>,\n  f: (s: Z, a: A, i: number) => Effect.Effect<Z, E, R>\n): Effect.Effect<Z, E, R> => {\n  const next = iterator.next()\n  if (!next.done && predicate(state)) {\n    return core.flatMap(\n      f(state, next.value, index),\n      (nextState) => reduceWhileLoop(iterator, index + 1, nextState, predicate, f)\n    )\n  }\n  return core.succeed(state)\n}\n\n/* @internal */\nexport const repeatN = dual<\n  (n: number) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, n: number) => Effect.Effect<A, E, R>\n>(2, (self, n) => core.suspend(() => repeatNLoop(self, n)))\n\n/* @internal */\nconst repeatNLoop = <A, E, R>(self: Effect.Effect<A, E, R>, n: number): Effect.Effect<A, E, R> =>\n  core.flatMap(self, (a) =>\n    n <= 0\n      ? core.succeed(a)\n      : core.zipRight(core.yieldNow(), repeatNLoop(self, n - 1)))\n\n/* @internal */\nexport const sandbox = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<A, Cause.Cause<E>, R> =>\n  core.matchCauseEffect(self, {\n    onFailure: core.fail,\n    onSuccess: core.succeed\n  })\n\n/* @internal */\nexport const setFiberRefs = (fiberRefs: FiberRefs.FiberRefs): Effect.Effect<void> =>\n  core.suspend(() => FiberRefs.setAll(fiberRefs))\n\n/* @internal */\nexport const sleep: (duration: Duration.DurationInput) => Effect.Effect<void> = Clock.sleep\n\n/* @internal */\nexport const succeedNone: Effect.Effect<Option.Option<never>> = core.succeed(Option.none())\n\n/* @internal */\nexport const succeedSome = <A>(value: A): Effect.Effect<Option.Option<A>> => core.succeed(Option.some(value))\n\n/* @internal */\nexport const summarized: {\n  <B, E2, R2, C>(\n    summary: Effect.Effect<B, E2, R2>,\n    f: (start: B, end: B) => C\n  ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<[C, A], E2 | E, R2 | R>\n  <A, E, R, B, E2, R2, C>(\n    self: Effect.Effect<A, E, R>,\n    summary: Effect.Effect<B, E2, R2>,\n    f: (start: B, end: B) => C\n  ): Effect.Effect<[C, A], E2 | E, R2 | R>\n} = dual(\n  3,\n  <A, E, R, B, E2, R2, C>(\n    self: Effect.Effect<A, E, R>,\n    summary: Effect.Effect<B, E2, R2>,\n    f: (start: B, end: B) => C\n  ): Effect.Effect<[C, A], E2 | E, R2 | R> =>\n    core.flatMap(\n      summary,\n      (start) => core.flatMap(self, (value) => core.map(summary, (end) => [f(start, end), value]))\n    )\n)\n\n/* @internal */\nexport const tagMetrics = dual<\n  {\n    (key: string, value: string): <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n    (\n      values: Record<string, string>\n    ): <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  },\n  {\n    <A, E, R>(effect: Effect.Effect<A, E, R>, key: string, value: string): Effect.Effect<A, E, R>\n    <A, E, R>(effect: Effect.Effect<A, E, R>, values: Record<string, string>): Effect.Effect<A, E, R>\n  }\n>((args) => core.isEffect(args[0]), function() {\n  return labelMetrics(\n    arguments[0],\n    typeof arguments[1] === \"string\"\n      ? [metricLabel.make(arguments[1], arguments[2])]\n      : Object.entries<string>(arguments[1]).map(([k, v]) => metricLabel.make(k, v))\n  )\n})\n\n/* @internal */\nexport const labelMetrics = dual<\n  (labels: Iterable<MetricLabel.MetricLabel>) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, labels: Iterable<MetricLabel.MetricLabel>) => Effect.Effect<A, E, R>\n>(\n  2,\n  (self, labels) => core.fiberRefLocallyWith(self, core.currentMetricLabels, (old) => Arr.union(old, labels))\n)\n\n/* @internal */\nexport const takeUntil: {\n  <A, R, E>(\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): (elements: Iterable<A>) => Effect.Effect<Array<A>, E, R>\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Array<A>, E, R>\n} = dual(\n  2,\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ): Effect.Effect<Array<A>, E, R> =>\n    core.suspend(() => {\n      const iterator = elements[Symbol.iterator]()\n      const builder: Array<A> = []\n      let next: IteratorResult<A, any>\n      let effect: Effect.Effect<boolean, E, R> = core.succeed(false)\n      let i = 0\n      while ((next = iterator.next()) && !next.done) {\n        const a = next.value\n        const index = i++\n        effect = core.flatMap(effect, (bool) => {\n          if (bool) {\n            return core.succeed(true)\n          }\n          builder.push(a)\n          return predicate(a, index)\n        })\n      }\n      return core.map(effect, () => builder)\n    })\n)\n\n/* @internal */\nexport const takeWhile = dual<\n  <A, E, R>(\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ) => (elements: Iterable<A>) => Effect.Effect<Array<A>, E, R>,\n  <A, E, R>(\n    elements: Iterable<A>,\n    predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>\n  ) => Effect.Effect<Array<A>, E, R>\n>(\n  2,\n  <A, E, R>(elements: Iterable<A>, predicate: (a: NoInfer<A>, i: number) => Effect.Effect<boolean, E, R>) =>\n    core.suspend(() => {\n      const iterator = elements[Symbol.iterator]()\n      const builder: Array<A> = []\n      let next: IteratorResult<A, any>\n      let taking: Effect.Effect<boolean, E, R> = core.succeed(true)\n      let i = 0\n      while ((next = iterator.next()) && !next.done) {\n        const a = next.value\n        const index = i++\n        taking = core.flatMap(taking, (taking) =>\n          pipe(\n            taking ? predicate(a, index) : core.succeed(false),\n            core.map((bool) => {\n              if (bool) {\n                builder.push(a)\n              }\n              return bool\n            })\n          ))\n      }\n      return core.map(taking, () => builder)\n    })\n)\n\n/* @internal */\nexport const tapBoth = dual<\n  <E, X, E2, R2, A, X1, E3, R3>(\n    options: {\n      readonly onFailure: (e: NoInfer<E>) => Effect.Effect<X, E2, R2>\n      readonly onSuccess: (a: NoInfer<A>) => Effect.Effect<X1, E3, R3>\n    }\n  ) => <R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2 | E3, R | R2 | R3>,\n  <A, E, R, X, E2, R2, X1, E3, R3>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly onFailure: (e: E) => Effect.Effect<X, E2, R2>\n      readonly onSuccess: (a: A) => Effect.Effect<X1, E3, R3>\n    }\n  ) => Effect.Effect<A, E | E2 | E3, R | R2 | R3>\n>(2, (self, { onFailure, onSuccess }) =>\n  core.matchCauseEffect(self, {\n    onFailure: (cause) => {\n      const either = internalCause.failureOrCause(cause)\n      switch (either._tag) {\n        case \"Left\": {\n          return core.zipRight(onFailure(either.left as any), core.failCause(cause))\n        }\n        case \"Right\": {\n          return core.failCause(cause)\n        }\n      }\n    },\n    onSuccess: (a) => core.as(onSuccess(a as any), a)\n  }))\n\n/* @internal */\nexport const tapDefect = dual<\n  <X, E2, R2>(\n    f: (cause: Cause.Cause<never>) => Effect.Effect<X, E2, R2>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2, R | R2>,\n  <A, E, R, X, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (cause: Cause.Cause<never>) => Effect.Effect<X, E2, R2>\n  ) => Effect.Effect<A, E | E2, R | R2>\n>(2, (self, f) =>\n  core.catchAllCause(self, (cause) =>\n    Option.match(internalCause.keepDefects(cause), {\n      onNone: () => core.failCause(cause),\n      onSome: (a) => core.zipRight(f(a), core.failCause(cause))\n    })))\n\n/* @internal */\nexport const tapError = dual<\n  <E, X, E2, R2>(\n    f: (e: NoInfer<E>) => Effect.Effect<X, E2, R2>\n  ) => <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2, R | R2>,\n  <A, E, R, X, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (e: E) => Effect.Effect<X, E2, R2>\n  ) => Effect.Effect<A, E | E2, R | R2>\n>(2, (self, f) =>\n  core.matchCauseEffect(self, {\n    onFailure: (cause) => {\n      const either = internalCause.failureOrCause(cause)\n      switch (either._tag) {\n        case \"Left\":\n          return core.zipRight(f(either.left as any), core.failCause(cause))\n        case \"Right\":\n          return core.failCause(cause)\n      }\n    },\n    onSuccess: core.succeed\n  }))\n\n/* @internal */\nexport const tapErrorTag = dual<\n  <K extends (E extends { _tag: string } ? E[\"_tag\"] : never), E, A1, E1, R1>(\n    k: K,\n    f: (e: Extract<E, { _tag: K }>) => Effect.Effect<A1, E1, R1>\n  ) => <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E1, R | R1>,\n  <A, E, R, K extends (E extends { _tag: string } ? E[\"_tag\"] : never), A1, E1, R1>(\n    self: Effect.Effect<A, E, R>,\n    k: K,\n    f: (e: Extract<E, { _tag: K }>) => Effect.Effect<A1, E1, R1>\n  ) => Effect.Effect<A, E | E1, R | R1>\n>(3, (self, k, f) =>\n  tapError(self, (e) => {\n    if (Predicate.isTagged(e, k)) {\n      return f(e as any)\n    }\n    return core.void as any\n  }))\n\n/* @internal */\nexport const tapErrorCause = dual<\n  <E, X, E2, R2>(\n    f: (cause: Cause.Cause<NoInfer<E>>) => Effect.Effect<X, E2, R2>\n  ) => <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2, R | R2>,\n  <A, E, R, X, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (cause: Cause.Cause<E>) => Effect.Effect<X, E2, R2>\n  ) => Effect.Effect<A, E | E2, R | R2>\n>(2, (self, f) =>\n  core.matchCauseEffect(self, {\n    onFailure: (cause) => core.zipRight(f(cause), core.failCause(cause)),\n    onSuccess: core.succeed\n  }))\n\n/* @internal */\nexport const timed = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<[Duration.Duration, A], E, R> => timedWith(self, Clock.currentTimeNanos)\n\n/* @internal */\nexport const timedWith = dual<\n  <E1, R1>(\n    nanoseconds: Effect.Effect<bigint, E1, R1>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<[Duration.Duration, A], E | E1, R | R1>,\n  <A, E, R, E1, R1>(\n    self: Effect.Effect<A, E, R>,\n    nanoseconds: Effect.Effect<bigint, E1, R1>\n  ) => Effect.Effect<[Duration.Duration, A], E | E1, R | R1>\n>(\n  2,\n  (self, nanos) => summarized(self, nanos, (start, end) => Duration.nanos(end - start))\n)\n\n/* @internal */\nexport const tracerWith: <A, E, R>(f: (tracer: Tracer.Tracer) => Effect.Effect<A, E, R>) => Effect.Effect<A, E, R> =\n  Tracer.tracerWith\n\n/** @internal */\nexport const tracer: Effect.Effect<Tracer.Tracer> = tracerWith(core.succeed)\n\n/* @internal */\nexport const tryPromise: {\n  <A, E>(\n    options: {\n      readonly try: (signal: AbortSignal) => PromiseLike<A>\n      readonly catch: (error: unknown) => E\n    }\n  ): Effect.Effect<A, E>\n  <A>(evaluate: (signal: AbortSignal) => PromiseLike<A>): Effect.Effect<A, Cause.UnknownException>\n} = <A, E>(\n  arg: ((signal: AbortSignal) => PromiseLike<A>) | {\n    readonly try: (signal: AbortSignal) => PromiseLike<A>\n    readonly catch: (error: unknown) => E\n  }\n): Effect.Effect<A, E | Cause.UnknownException> => {\n  let evaluate: (signal?: AbortSignal) => PromiseLike<A>\n  let catcher: ((error: unknown) => E) | undefined = undefined\n  if (typeof arg === \"function\") {\n    evaluate = arg as (signal?: AbortSignal) => PromiseLike<A>\n  } else {\n    evaluate = arg.try as (signal?: AbortSignal) => PromiseLike<A>\n    catcher = arg.catch\n  }\n\n  if (evaluate.length >= 1) {\n    return core.async((resolve, signal) => {\n      try {\n        evaluate(signal)\n          .then(\n            (a) => resolve(core.exitSucceed(a)),\n            (e) => resolve(catcher ? core.failSync(() => catcher(e)) : core.fail(new core.UnknownException(e)))\n          )\n      } catch (e) {\n        resolve(catcher ? core.failSync(() => catcher(e)) : core.fail(new core.UnknownException(e)))\n      }\n    })\n  }\n\n  return core.async((resolve) => {\n    try {\n      evaluate()\n        .then(\n          (a) => resolve(core.exitSucceed(a)),\n          (e) => resolve(catcher ? core.failSync(() => catcher(e)) : core.fail(new core.UnknownException(e)))\n        )\n    } catch (e) {\n      resolve(catcher ? core.failSync(() => catcher(e)) : core.fail(new core.UnknownException(e)))\n    }\n  })\n}\n\n/* @internal */\nexport const tryMap = dual<\n  <A, B, E1>(\n    options: {\n      readonly try: (a: A) => B\n      readonly catch: (error: unknown) => E1\n    }\n  ) => <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E | E1, R>,\n  <A, E, R, B, E1>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly try: (a: A) => B\n      readonly catch: (error: unknown) => E1\n    }\n  ) => Effect.Effect<B, E | E1, R>\n>(2, (self, options) =>\n  core.flatMap(self, (a) =>\n    try_({\n      try: () => options.try(a),\n      catch: options.catch\n    })))\n\n/* @internal */\nexport const tryMapPromise = dual<\n  <A, B, E1>(\n    options: {\n      readonly try: (a: A, signal: AbortSignal) => PromiseLike<B>\n      readonly catch: (error: unknown) => E1\n    }\n  ) => <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E | E1, R>,\n  <A, E, R, B, E1>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly try: (a: A, signal: AbortSignal) => PromiseLike<B>\n      readonly catch: (error: unknown) => E1\n    }\n  ) => Effect.Effect<B, E | E1, R>\n>(2, <A, E, R, B, E1>(\n  self: Effect.Effect<A, E, R>,\n  options: {\n    readonly try: (a: A, signal: AbortSignal) => PromiseLike<B>\n    readonly catch: (error: unknown) => E1\n  }\n) =>\n  core.flatMap(self, (a) =>\n    tryPromise({\n      try: options.try.length >= 1\n        ? (signal) => options.try(a, signal)\n        : () => (options.try as (a: A) => PromiseLike<B>)(a),\n      catch: options.catch\n    })))\n\n/* @internal */\nexport const unless = dual<\n  (condition: LazyArg<boolean>) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Option.Option<A>, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, condition: LazyArg<boolean>) => Effect.Effect<Option.Option<A>, E, R>\n>(2, (self, condition) =>\n  core.suspend(() =>\n    condition()\n      ? succeedNone\n      : asSome(self)\n  ))\n\n/* @internal */\nexport const unlessEffect = dual<\n  <E2, R2>(\n    condition: Effect.Effect<boolean, E2, R2>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Option.Option<A>, E | E2, R | R2>,\n  <A, E, R, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    condition: Effect.Effect<boolean, E2, R2>\n  ) => Effect.Effect<Option.Option<A>, E | E2, R | R2>\n>(2, (self, condition) => core.flatMap(condition, (b) => (b ? succeedNone : asSome(self))))\n\n/* @internal */\nexport const unsandbox = <A, E, R>(self: Effect.Effect<A, Cause.Cause<E>, R>) =>\n  mapErrorCause(self, internalCause.flatten)\n\n/* @internal */\nexport const updateFiberRefs = (\n  f: (fiberId: FiberId.Runtime, fiberRefs: FiberRefs.FiberRefs) => FiberRefs.FiberRefs\n): Effect.Effect<void> =>\n  core.withFiberRuntime((state) => {\n    state.setFiberRefs(f(state.id(), state.getFiberRefs()))\n    return core.void\n  })\n\n/* @internal */\nexport const updateService = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T,\n    f: (service: Context.Tag.Service<T>) => Context.Tag.Service<T>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R | Context.Tag.Identifier<T>>,\n  <A, E, R, T extends Context.Tag<any, any>>(\n    self: Effect.Effect<A, E, R>,\n    tag: T,\n    f: (service: Context.Tag.Service<T>) => Context.Tag.Service<T>\n  ) => Effect.Effect<A, E, R | Context.Tag.Identifier<T>>\n>(3, <A, E, R, T extends Context.Tag<any, any>>(\n  self: Effect.Effect<A, E, R>,\n  tag: T,\n  f: (service: Context.Tag.Service<T>) => Context.Tag.Service<T>\n) =>\n  core.mapInputContext(self, (context) =>\n    Context.add(\n      context,\n      tag,\n      f(Context.unsafeGet(context, tag))\n    )) as Effect.Effect<A, E, R | Context.Tag.Identifier<T>>)\n\n/* @internal */\nexport const when = dual<\n  (condition: LazyArg<boolean>) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Option.Option<A>, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, condition: LazyArg<boolean>) => Effect.Effect<Option.Option<A>, E, R>\n>(2, (self, condition) =>\n  core.suspend(() =>\n    condition()\n      ? core.map(self, Option.some)\n      : core.succeed(Option.none())\n  ))\n\n/* @internal */\nexport const whenFiberRef = dual<\n  <S>(\n    fiberRef: FiberRef.FiberRef<S>,\n    predicate: Predicate.Predicate<S>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<[S, Option.Option<A>], E, R>,\n  <A, E, R, S>(\n    self: Effect.Effect<A, E, R>,\n    fiberRef: FiberRef.FiberRef<S>,\n    predicate: Predicate.Predicate<S>\n  ) => Effect.Effect<[S, Option.Option<A>], E, R>\n>(\n  3,\n  <A, E, R, S>(\n    self: Effect.Effect<A, E, R>,\n    fiberRef: FiberRef.FiberRef<S>,\n    predicate: Predicate.Predicate<S>\n  ) =>\n    core.flatMap(core.fiberRefGet(fiberRef), (s) =>\n      predicate(s)\n        ? core.map(self, (a) => [s, Option.some(a)])\n        : core.succeed<[S, Option.Option<A>]>([s, Option.none()]))\n)\n\n/* @internal */\nexport const whenRef = dual<\n  <S>(\n    ref: Ref.Ref<S>,\n    predicate: Predicate.Predicate<S>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<[S, Option.Option<A>], E, R>,\n  <A, E, R, S>(\n    self: Effect.Effect<A, E, R>,\n    ref: Ref.Ref<S>,\n    predicate: Predicate.Predicate<S>\n  ) => Effect.Effect<[S, Option.Option<A>], E, R>\n>(\n  3,\n  <A, E, R, S>(self: Effect.Effect<A, E, R>, ref: Ref.Ref<S>, predicate: Predicate.Predicate<S>) =>\n    core.flatMap(Ref.get(ref), (s) =>\n      predicate(s)\n        ? core.map(self, (a) => [s, Option.some(a)])\n        : core.succeed<[S, Option.Option<A>]>([s, Option.none()]))\n)\n\n/* @internal */\nexport const withMetric = dual<\n  <Type, In, Out>(\n    metric: Metric.Metric<Type, In, Out>\n  ) => <A extends In, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A extends In, E, R, Type, In, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>\n  ) => Effect.Effect<A, E, R>\n>(2, (self, metric) => metric(self))\n\n/** @internal */\nexport const serviceFunctionEffect = <T extends Effect.Effect<any, any, any>, Args extends Array<any>, A, E, R>(\n  getService: T,\n  f: (_: Effect.Effect.Success<T>) => (...args: Args) => Effect.Effect<A, E, R>\n) =>\n(...args: Args): Effect.Effect<A, E | Effect.Effect.Error<T>, R | Effect.Effect.Context<T>> =>\n  core.flatMap(getService, (a) => f(a)(...args))\n\n/** @internal */\nexport const serviceFunction = <T extends Effect.Effect<any, any, any>, Args extends Array<any>, A>(\n  getService: T,\n  f: (_: Effect.Effect.Success<T>) => (...args: Args) => A\n) =>\n(...args: Args): Effect.Effect<A, Effect.Effect.Error<T>, Effect.Effect.Context<T>> =>\n  core.map(getService, (a) => f(a)(...args))\n\n/** @internal */\nexport const serviceFunctions = <S, SE, SR>(\n  getService: Effect.Effect<S, SE, SR>\n): {\n  [k in keyof S as S[k] extends (...args: Array<any>) => Effect.Effect<any, any, any> ? k : never]: S[k] extends\n    (...args: infer Args) => Effect.Effect<infer A, infer E, infer R>\n    ? (...args: Args) => Effect.Effect<A, E | SE, R | SR>\n    : never\n} =>\n  new Proxy({} as any, {\n    get(_target: any, prop: any, _receiver) {\n      return (...args: Array<any>) => core.flatMap(getService, (s: any) => s[prop](...args))\n    }\n  })\n\n/** @internal */\nexport const serviceConstants = <S, SE, SR>(\n  getService: Effect.Effect<S, SE, SR>\n): {\n  [k in { [k in keyof S]: k }[keyof S]]: S[k] extends Effect.Effect<infer A, infer E, infer R> ?\n    Effect.Effect<A, E | SE, R | SR> :\n    Effect.Effect<S[k], SE, SR>\n} =>\n  new Proxy({} as any, {\n    get(_target: any, prop: any, _receiver) {\n      return core.flatMap(getService, (s: any) => core.isEffect(s[prop]) ? s[prop] : core.succeed(s[prop]))\n    }\n  })\n\n/** @internal */\nexport const serviceMembers = <S, SE, SR>(getService: Effect.Effect<S, SE, SR>): {\n  functions: {\n    [k in keyof S as S[k] extends (...args: Array<any>) => Effect.Effect<any, any, any> ? k : never]: S[k] extends\n      (...args: infer Args) => Effect.Effect<infer A, infer E, infer R>\n      ? (...args: Args) => Effect.Effect<A, E | SE, R | SR>\n      : never\n  }\n  constants: {\n    [k in { [k in keyof S]: k }[keyof S]]: S[k] extends Effect.Effect<infer A, infer E, infer R> ?\n      Effect.Effect<A, E | SE, R | SR> :\n      Effect.Effect<S[k], SE, SR>\n  }\n} => ({\n  functions: serviceFunctions(getService) as any,\n  constants: serviceConstants(getService)\n})\n\n/** @internal */\nexport const serviceOption = <I, S>(tag: Context.Tag<I, S>) => core.map(core.context<never>(), Context.getOption(tag))\n\n/** @internal */\nexport const serviceOptional = <I, S>(tag: Context.Tag<I, S>) =>\n  core.flatMap(core.context<never>(), Context.getOption(tag))\n\n// -----------------------------------------------------------------------------\n// tracing\n// -----------------------------------------------------------------------------\n\n/* @internal */\nexport const annotateCurrentSpan: {\n  (key: string, value: unknown): Effect.Effect<void>\n  (values: Record<string, unknown>): Effect.Effect<void>\n} = function(): Effect.Effect<void> {\n  const args = arguments\n  return ignore(core.flatMap(\n    currentSpan,\n    (span) =>\n      core.sync(() => {\n        if (typeof args[0] === \"string\") {\n          span.attribute(args[0], args[1])\n        } else {\n          for (const key in args[0]) {\n            span.attribute(key, args[0][key])\n          }\n        }\n      })\n  ))\n}\n\n/* @internal */\nexport const annotateSpans = dual<\n  {\n    (key: string, value: unknown): <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n    (\n      values: Record<string, unknown>\n    ): <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  },\n  {\n    <A, E, R>(effect: Effect.Effect<A, E, R>, key: string, value: unknown): Effect.Effect<A, E, R>\n    <A, E, R>(effect: Effect.Effect<A, E, R>, values: Record<string, unknown>): Effect.Effect<A, E, R>\n  }\n>(\n  (args) => core.isEffect(args[0]),\n  function<A, E, R>() {\n    const args = arguments\n    return core.fiberRefLocallyWith(\n      args[0] as Effect.Effect<A, E, R>,\n      core.currentTracerSpanAnnotations,\n      typeof args[1] === \"string\"\n        ? HashMap.set(args[1], args[2])\n        : (annotations) =>\n          Object.entries(args[1] as Record<string, unknown>).reduce(\n            (acc, [key, value]) => HashMap.set(acc, key, value),\n            annotations\n          )\n    )\n  }\n)\n\n/** @internal */\nexport const currentParentSpan: Effect.Effect<Tracer.AnySpan, Cause.NoSuchElementException> = serviceOptional(\n  internalTracer.spanTag\n)\n\n/** @internal */\nexport const currentSpan: Effect.Effect<Tracer.Span, Cause.NoSuchElementException> = core.flatMap(\n  core.context<never>(),\n  (context) => {\n    const span = context.unsafeMap.get(internalTracer.spanTag.key) as Tracer.AnySpan | undefined\n    return span !== undefined && span._tag === \"Span\"\n      ? core.succeed(span)\n      : core.fail(new core.NoSuchElementException())\n  }\n)\n\n/* @internal */\nexport const linkSpans = dual<\n  (\n    span: Tracer.AnySpan,\n    attributes?: Record<string, unknown>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    span: Tracer.AnySpan,\n    attributes?: Record<string, unknown>\n  ) => Effect.Effect<A, E, R>\n>(\n  (args) => core.isEffect(args[0]),\n  (self, span, attributes) =>\n    core.fiberRefLocallyWith(\n      self,\n      core.currentTracerSpanLinks,\n      Chunk.append(\n        {\n          _tag: \"SpanLink\",\n          span,\n          attributes: attributes ?? {}\n        } as const\n      )\n    )\n)\n\nconst bigint0 = BigInt(0)\n\n/** @internal */\nexport const unsafeMakeSpan = <XA, XE>(\n  fiber: FiberRuntime<XA, XE>,\n  name: string,\n  options: Tracer.SpanOptions\n) => {\n  const enabled = fiber.getFiberRef(core.currentTracerEnabled)\n  if (enabled === false) {\n    return core.noopSpan(name)\n  }\n\n  const context = fiber.getFiberRef(core.currentContext)\n  const services = fiber.getFiberRef(defaultServices.currentServices)\n\n  const tracer = Context.get(services, internalTracer.tracerTag)\n  const clock = Context.get(services, Clock.Clock)\n  const timingEnabled = fiber.getFiberRef(core.currentTracerTimingEnabled)\n\n  const fiberRefs = fiber.getFiberRefs()\n  const annotationsFromEnv = FiberRefs.get(fiberRefs, core.currentTracerSpanAnnotations)\n  const linksFromEnv = FiberRefs.get(fiberRefs, core.currentTracerSpanLinks)\n\n  const parent = options.parent\n    ? Option.some(options.parent)\n    : options.root\n    ? Option.none()\n    : Context.getOption(context, internalTracer.spanTag)\n\n  const links = linksFromEnv._tag === \"Some\" ?\n    options.links !== undefined ?\n      [\n        ...Chunk.toReadonlyArray(linksFromEnv.value),\n        ...(options.links ?? [])\n      ] :\n      Chunk.toReadonlyArray(linksFromEnv.value) :\n    options.links ?? Arr.empty()\n\n  const span = tracer.span(\n    name,\n    parent,\n    options.context ?? Context.empty(),\n    links,\n    timingEnabled ? clock.unsafeCurrentTimeNanos() : bigint0,\n    options.kind ?? \"internal\"\n  )\n\n  if (typeof options.captureStackTrace === \"function\") {\n    internalCause.spanToTrace.set(span, options.captureStackTrace)\n  }\n\n  if (annotationsFromEnv._tag === \"Some\") {\n    HashMap.forEach(annotationsFromEnv.value, (value, key) => span.attribute(key, value))\n  }\n  if (options.attributes !== undefined) {\n    Object.entries(options.attributes).forEach(([k, v]) => span.attribute(k, v))\n  }\n\n  return span\n}\n\n/** @internal */\nexport const makeSpan = (\n  name: string,\n  options?: Tracer.SpanOptions\n): Effect.Effect<Tracer.Span> => {\n  options = internalTracer.addSpanStackTrace(options)\n  return core.withFiberRuntime((fiber) => core.succeed(unsafeMakeSpan(fiber, name, options)))\n}\n\n/* @internal */\nexport const spanAnnotations: Effect.Effect<HashMap.HashMap<string, unknown>> = core\n  .fiberRefGet(core.currentTracerSpanAnnotations)\n\n/* @internal */\nexport const spanLinks: Effect.Effect<Chunk.Chunk<Tracer.SpanLink>> = core\n  .fiberRefGet(core.currentTracerSpanLinks)\n\n/** @internal */\nexport const endSpan = <A, E>(span: Tracer.Span, exit: Exit<A, E>, clock: Clock.Clock, timingEnabled: boolean) =>\n  core.sync(() => {\n    if (span.status._tag === \"Ended\") {\n      return\n    }\n    if (core.exitIsFailure(exit) && internalCause.spanToTrace.has(span)) {\n      span.attribute(\"code.stacktrace\", internalCause.spanToTrace.get(span)!())\n    }\n    span.end(timingEnabled ? clock.unsafeCurrentTimeNanos() : bigint0, exit)\n  })\n\n/** @internal */\nexport const useSpan: {\n  <A, E, R>(name: string, evaluate: (span: Tracer.Span) => Effect.Effect<A, E, R>): Effect.Effect<A, E, R>\n  <A, E, R>(\n    name: string,\n    options: Tracer.SpanOptions,\n    evaluate: (span: Tracer.Span) => Effect.Effect<A, E, R>\n  ): Effect.Effect<A, E, R>\n} = <A, E, R>(\n  name: string,\n  ...args: [evaluate: (span: Tracer.Span) => Effect.Effect<A, E, R>] | [\n    options: any,\n    evaluate: (span: Tracer.Span) => Effect.Effect<A, E, R>\n  ]\n) => {\n  const options = internalTracer.addSpanStackTrace(args.length === 1 ? undefined : args[0])\n  const evaluate: (span: Tracer.Span) => Effect.Effect<A, E, R> = args[args.length - 1]\n\n  return core.withFiberRuntime<A, E, R>((fiber) => {\n    const span = unsafeMakeSpan(fiber, name, options)\n    const timingEnabled = fiber.getFiberRef(core.currentTracerTimingEnabled)\n    const clock = Context.get(fiber.getFiberRef(defaultServices.currentServices), clockTag)\n    return core.onExit(evaluate(span), (exit) => endSpan(span, exit, clock, timingEnabled))\n  })\n}\n\n/** @internal */\nexport const withParentSpan = dual<\n  (\n    span: Tracer.AnySpan\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, Exclude<R, Tracer.ParentSpan>>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, span: Tracer.AnySpan) => Effect.Effect<A, E, Exclude<R, Tracer.ParentSpan>>\n>(2, (self, span) => provideService(self, internalTracer.spanTag, span))\n\n/** @internal */\nexport const withSpan: {\n  (\n    name: string,\n    options?: Tracer.SpanOptions | undefined\n  ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, Exclude<R, Tracer.ParentSpan>>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    name: string,\n    options?: Tracer.SpanOptions | undefined\n  ): Effect.Effect<A, E, Exclude<R, Tracer.ParentSpan>>\n} = function() {\n  const dataFirst = typeof arguments[0] !== \"string\"\n  const name = dataFirst ? arguments[1] : arguments[0]\n  const options = internalTracer.addSpanStackTrace(dataFirst ? arguments[2] : arguments[1])\n  if (dataFirst) {\n    const self = arguments[0]\n    return useSpan(name, options, (span) => withParentSpan(self, span))\n  }\n  return (self: Effect.Effect<any, any, any>) => useSpan(name, options, (span) => withParentSpan(self, span))\n} as any\n\nexport const functionWithSpan = <Args extends Array<any>, Ret extends Effect.Effect<any, any, any>>(\n  options: {\n    readonly body: (...args: Args) => Ret\n    readonly options: Effect.FunctionWithSpanOptions | ((...args: Args) => Effect.FunctionWithSpanOptions)\n    readonly captureStackTrace?: boolean | undefined\n  }\n): (...args: Args) => Unify<Ret> =>\n  (function(this: any) {\n    let captureStackTrace: LazyArg<string | undefined> | boolean = options.captureStackTrace ?? false\n    if (options.captureStackTrace !== false) {\n      const limit = Error.stackTraceLimit\n      Error.stackTraceLimit = 2\n      const error = new Error()\n      Error.stackTraceLimit = limit\n      let cache: false | string = false\n      captureStackTrace = () => {\n        if (cache !== false) {\n          return cache\n        }\n        if (error.stack) {\n          const stack = error.stack.trim().split(\"\\n\")\n          cache = stack.slice(2).join(\"\\n\").trim()\n          return cache\n        }\n      }\n    }\n    return core.suspend(() => {\n      const opts = typeof options.options === \"function\"\n        ? options.options.apply(null, arguments as any)\n        : options.options\n      return withSpan(\n        core.suspend(() => internalCall(() => options.body.apply(this, arguments as any))),\n        opts.name,\n        {\n          ...opts,\n          captureStackTrace\n        }\n      )\n    })\n  }) as any\n\n// -------------------------------------------------------------------------------------\n// optionality\n// -------------------------------------------------------------------------------------\n\n/* @internal */\nexport const fromNullable = <A>(value: A): Effect.Effect<NonNullable<A>, Cause.NoSuchElementException> =>\n  value == null ? core.fail(new core.NoSuchElementException()) : core.succeed(value as NonNullable<A>)\n\n/* @internal */\nexport const optionFromOptional = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<Option.Option<A>, Exclude<E, Cause.NoSuchElementException>, R> =>\n  core.catchAll(\n    core.map(self, Option.some),\n    (error) =>\n      core.isNoSuchElementException(error) ?\n        succeedNone :\n        core.fail(error as Exclude<E, Cause.NoSuchElementException>)\n  )\n"],"names":["internalCall","Arr","Chunk","Clock","Context","Duration","FiberRefs","constFalse","constTrue","constVoid","dual","identity","pipe","HashMap","HashSet","List","LogLevel","LogSpan","Option","Predicate","Ref","Tracer","internalCause","clockTag","core","defaultServices","doNotation","fiberRefsPatch","metricLabel","runtimeFlags","internalTracer","annotateLogs","args","isEffect","arguments","fiberRefLocallyWith","currentLogAnnotations","set","annotations","Object","entries","reduce","acc","key","value","asSome","self","map","some","asSomeError","mapError","try_","arg","evaluate","onFailure","undefined","try","catch","sync","error","makeEffectError","fail","UnknownException","_catch","tag","options","catchAll","e","hasProperty","failure","catchAllDefect","f","catchAllCause","cause","option","find","_","isDieType","none","_tag","failCause","defect","catchSomeCause","matchCauseEffect","onSuccess","succeed","catchSomeDefect","pf","optionEffect","catchTag","k","catchIf","isTagged","catchTags","cases","keys","isString","includes","matchCause","empty","clockWith","clock","delay","duration","zipRight","sleep","descriptorWith","withFiberRuntime","state","status","id","interruptors","getFiberRef","currentInterruptedCause","allowInterrupt","descriptor","size","interrupt","void","diffFiberRefs","summarized","fiberRefs","diff","diffFiberRefsAndRuntimeFlags","zip","refs","flags","refsNew","flagsNew","Do","bind","flatMap","bindTo","let_","dropUntil","elements","predicate","suspend","iterator","Symbol","builder","next","dropping","i","done","a","index","bool","push","dropWhile","d","b","contextWith","context","eventually","orElse","yieldNow","filterMap","forEachSequential","filterOrDie","orDieWith","filterOrElse","dieSync","filterOrDieMessage","message","dieMessage","liftPredicate","orFailWith","filterOrFail","NoSuchElementException","failSync","findFirst","findLoop","result","firstSuccessOf","effects","list","fromIterable","isNonEmpty","IllegalArgumentException","tailNonEmpty","headNonEmpty","left","right","flipWith","flip","match","matchEffect","every","forAllLoop","forever","loop","getFiberRefs","head","as","ignore","ignoreLogged","logDebug","inheritFiberRefs","childFiberRefs","updateFiberRefs","parentFiberId","parentFiberRefs","joinAs","isFailure","isSuccess","iterate","initial","while","body","z2","logWithLevel","level","levelOption","fromNullable","len","length","msg","isCause","sequential","slice","fiberState","log","logTrace","Trace","Debug","logInfo","Info","logWarning","Warning","logError","Error","logFatal","Fatal","withLogSpan","effect","label","currentTimeMillis","now","currentLogSpan","prepend","make","logAnnotations","fiberRefGet","discard","loopDiscard","step","loopInternal","cont","inc","mapAccum","z","mapErrorCause","c","failCauseSync","memoize","deferredMake","deferred","intoDeferred","once","complete","deferredAwait","patch","patchFiberRefs","updateRuntimeFlags","merge","negate","ref","asVoid","whenEffect","getAndSet","orElseFail","orElseSucceed","parallelErrors","errors","failures","fiberId","promise","async","resolve","signal","then","exitSucceed","exitDie","provideService","service","contextWithEffect","env","provideContext","add","provideServiceEffect","random","randomWith","zero","el","reduceRight","reduceWhile","reduceWhileLoop","nextState","repeatN","n","repeatNLoop","sandbox","setFiberRefs","setAll","succeedNone","succeedSome","summary","start","end","tagMetrics","labelMetrics","v","labels","currentMetricLabels","old","union","takeUntil","takeWhile","taking","tapBoth","either","failureOrCause","tapDefect","keepDefects","onNone","onSome","tapError","tapErrorTag","tapErrorCause","timed","timedWith","currentTimeNanos","nanos","tracerWith","tracer","tryPromise","catcher","tryMap","tryMapPromise","unless","condition","unlessEffect","unsandbox","flatten","updateService","mapInputContext","unsafeGet","when","whenFiberRef","fiberRef","s","whenRef","get","withMetric","metric","serviceFunctionEffect","getService","serviceFunction","serviceFunctions","Proxy","_target","prop","_receiver","serviceConstants","serviceMembers","functions","constants","serviceOption","getOption","serviceOptional","annotateCurrentSpan","currentSpan","span","attribute","annotateSpans","currentTracerSpanAnnotations","currentParentSpan","spanTag","unsafeMap","linkSpans","attributes","currentTracerSpanLinks","append","bigint0","BigInt","unsafeMakeSpan","fiber","name","enabled","currentTracerEnabled","noopSpan","currentContext","services","currentServices","tracerTag","timingEnabled","currentTracerTimingEnabled","annotationsFromEnv","linksFromEnv","parent","root","links","toReadonlyArray","unsafeCurrentTimeNanos","kind","captureStackTrace","spanToTrace","forEach","makeSpan","addSpanStackTrace","spanAnnotations","spanLinks","endSpan","exit","exitIsFailure","has","useSpan","onExit","withParentSpan","withSpan","dataFirst","functionWithSpan","limit","stackTraceLimit","cache","stack","trim","split","join","opts","apply","optionFromOptional","isNoSuchElementException"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8468, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8474, "column": 0}, "map": {"version":3,"file":"metric.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/metric.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport * as Clock from \"../Clock.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { constVoid, dual, identity, pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport type * as Metric from \"../Metric.js\"\nimport type * as MetricBoundaries from \"../MetricBoundaries.js\"\nimport type * as MetricHook from \"../MetricHook.js\"\nimport type * as MetricKey from \"../MetricKey.js\"\nimport type * as MetricKeyType from \"../MetricKeyType.js\"\nimport type * as MetricLabel from \"../MetricLabel.js\"\nimport type * as MetricPair from \"../MetricPair.js\"\nimport type * as MetricRegistry from \"../MetricRegistry.js\"\nimport type * as MetricState from \"../MetricState.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport * as Cause from \"./cause.js\"\nimport * as _effect from \"./core-effect.js\"\nimport * as core from \"./core.js\"\nimport * as metricBoundaries from \"./metric/boundaries.js\"\nimport * as metricKey from \"./metric/key.js\"\nimport * as metricKeyType from \"./metric/keyType.js\"\nimport * as metricLabel from \"./metric/label.js\"\nimport * as metricRegistry from \"./metric/registry.js\"\n\n/** @internal */\nconst MetricSymbolKey = \"effect/Metric\"\n\n/** @internal */\nexport const MetricTypeId: Metric.MetricTypeId = Symbol.for(\n  MetricSymbolKey\n) as Metric.MetricTypeId\n\nconst metricVariance = {\n  /* c8 ignore next */\n  _Type: (_: any) => _,\n  /* c8 ignore next */\n  _In: (_: unknown) => _,\n  /* c8 ignore next */\n  _Out: (_: never) => _\n}\n\n/** @internal */\nexport const globalMetricRegistry: MetricRegistry.MetricRegistry = globalValue(\n  Symbol.for(\"effect/Metric/globalMetricRegistry\"),\n  () => metricRegistry.make()\n)\n\n/** @internal */\nexport const make: Metric.MetricApply = function<Type, In, Out>(\n  keyType: Type,\n  unsafeUpdate: (input: In, extraTags: ReadonlyArray<MetricLabel.MetricLabel>) => void,\n  unsafeValue: (extraTags: ReadonlyArray<MetricLabel.MetricLabel>) => Out,\n  unsafeModify: (input: In, extraTags: ReadonlyArray<MetricLabel.MetricLabel>) => void\n): Metric.Metric<Type, In, Out> {\n  const metric: Metric.Metric<Type, In, Out> = Object.assign(\n    <A extends In, E, R>(effect: Effect.Effect<A, E, R>): Effect.Effect<A, E, R> =>\n      core.tap(effect, (a) => update(metric, a)),\n    {\n      [MetricTypeId]: metricVariance,\n      keyType,\n      unsafeUpdate,\n      unsafeValue,\n      unsafeModify,\n      register() {\n        this.unsafeValue([])\n        return this as any\n      },\n      pipe() {\n        return pipeArguments(this, arguments)\n      }\n    } as const\n  )\n  return metric\n}\n\n/** @internal */\nexport const mapInput = dual<\n  <In, In2>(f: (input: In2) => In) => <Type, Out>(self: Metric.Metric<Type, In, Out>) => Metric.Metric<Type, In2, Out>,\n  <Type, In, Out, In2>(self: Metric.Metric<Type, In, Out>, f: (input: In2) => In) => Metric.Metric<Type, In2, Out>\n>(2, (self, f) =>\n  make(\n    self.keyType,\n    (input, extraTags) => self.unsafeUpdate(f(input), extraTags),\n    self.unsafeValue,\n    (input, extraTags) => self.unsafeModify(f(input), extraTags)\n  ))\n\n/** @internal */\nexport const counter: {\n  (name: string, options?: {\n    readonly description?: string | undefined\n    readonly bigint?: false | undefined\n    readonly incremental?: boolean | undefined\n  }): Metric.Metric.Counter<number>\n  (name: string, options: {\n    readonly description?: string | undefined\n    readonly bigint: true\n    readonly incremental?: boolean | undefined\n  }): Metric.Metric.Counter<bigint>\n} = (name, options) => fromMetricKey(metricKey.counter(name, options as any)) as any\n\n/** @internal */\nexport const frequency = (name: string, options?: {\n  readonly description?: string | undefined\n  readonly preregisteredWords?: ReadonlyArray<string> | undefined\n}): Metric.Metric.Frequency<string> => fromMetricKey(metricKey.frequency(name, options))\n\n/** @internal */\nexport const withConstantInput = dual<\n  <In>(input: In) => <Type, Out>(self: Metric.Metric<Type, In, Out>) => Metric.Metric<Type, unknown, Out>,\n  <Type, In, Out>(self: Metric.Metric<Type, In, Out>, input: In) => Metric.Metric<Type, unknown, Out>\n>(2, (self, input) => mapInput(self, () => input))\n\n/** @internal */\nexport const fromMetricKey = <Type extends MetricKeyType.MetricKeyType<any, any>>(\n  key: MetricKey.MetricKey<Type>\n): Metric.Metric<\n  Type,\n  MetricKeyType.MetricKeyType.InType<Type>,\n  MetricKeyType.MetricKeyType.OutType<Type>\n> => {\n  let untaggedHook:\n    | MetricHook.MetricHook<\n      MetricKeyType.MetricKeyType.InType<Type>,\n      MetricKeyType.MetricKeyType.OutType<Type>\n    >\n    | undefined\n  const hookCache = new WeakMap<ReadonlyArray<MetricLabel.MetricLabel>, MetricHook.MetricHook<any, any>>()\n\n  const hook = (extraTags: ReadonlyArray<MetricLabel.MetricLabel>): MetricHook.MetricHook<\n    MetricKeyType.MetricKeyType.InType<Type>,\n    MetricKeyType.MetricKeyType.OutType<Type>\n  > => {\n    if (extraTags.length === 0) {\n      if (untaggedHook !== undefined) {\n        return untaggedHook\n      }\n      untaggedHook = globalMetricRegistry.get(key)\n      return untaggedHook\n    }\n\n    let hook = hookCache.get(extraTags)\n    if (hook !== undefined) {\n      return hook\n    }\n    hook = globalMetricRegistry.get(metricKey.taggedWithLabels(key, extraTags))\n    hookCache.set(extraTags, hook)\n    return hook\n  }\n\n  return make(\n    key.keyType,\n    (input, extraTags) => hook(extraTags).update(input),\n    (extraTags) => hook(extraTags).get(),\n    (input, extraTags) => hook(extraTags).modify(input)\n  )\n}\n\n/** @internal */\nexport const gauge: {\n  (name: string, options?: {\n    readonly description?: string | undefined\n    readonly bigint?: false | undefined\n  }): Metric.Metric.Gauge<number>\n  (name: string, options: {\n    readonly description?: string | undefined\n    readonly bigint: true\n  }): Metric.Metric.Gauge<bigint>\n} = (name, options) => fromMetricKey(metricKey.gauge(name, options as any)) as any\n\n/** @internal */\nexport const histogram = (name: string, boundaries: MetricBoundaries.MetricBoundaries, description?: string) =>\n  fromMetricKey(metricKey.histogram(name, boundaries, description))\n\n/* @internal */\nexport const increment = (\n  self:\n    | Metric.Metric.Counter<number>\n    | Metric.Metric.Counter<bigint>\n    | Metric.Metric.Gauge<number>\n    | Metric.Metric.Gauge<bigint>\n): Effect.Effect<void> =>\n  metricKeyType.isCounterKey(self.keyType)\n    ? update(self as Metric.Metric.Counter<number>, self.keyType.bigint ? BigInt(1) as any : 1)\n    : modify(self as Metric.Metric.Gauge<number>, self.keyType.bigint ? BigInt(1) as any : 1)\n\n/* @internal */\nexport const incrementBy = dual<\n  {\n    (amount: number): (self: Metric.Metric.Counter<number> | Metric.Metric.Counter<number>) => Effect.Effect<void>\n    (amount: bigint): (self: Metric.Metric.Counter<bigint> | Metric.Metric.Gauge<bigint>) => Effect.Effect<void>\n  },\n  {\n    (self: Metric.Metric.Counter<number> | Metric.Metric.Gauge<number>, amount: number): Effect.Effect<void>\n    (self: Metric.Metric.Counter<bigint> | Metric.Metric.Gauge<bigint>, amount: bigint): Effect.Effect<void>\n  }\n>(2, (self, amount) =>\n  metricKeyType.isCounterKey(self.keyType)\n    ? update(self as any, amount)\n    : modify(self as any, amount))\n\n/** @internal */\nexport const map = dual<\n  <Out, Out2>(f: (out: Out) => Out2) => <Type, In>(self: Metric.Metric<Type, In, Out>) => Metric.Metric<Type, In, Out2>,\n  <Type, In, Out, Out2>(self: Metric.Metric<Type, In, Out>, f: (out: Out) => Out2) => Metric.Metric<Type, In, Out2>\n>(2, (self, f) =>\n  make(\n    self.keyType,\n    self.unsafeUpdate,\n    (extraTags) => f(self.unsafeValue(extraTags)),\n    self.unsafeModify\n  ))\n\n/** @internal */\nexport const mapType = dual<\n  <Type, Type2>(\n    f: (type: Type) => Type2\n  ) => <In, Out>(\n    self: Metric.Metric<Type, In, Out>\n  ) => Metric.Metric<Type2, In, Out>,\n  <Type, In, Out, Type2>(\n    self: Metric.Metric<Type, In, Out>,\n    f: (type: Type) => Type2\n  ) => Metric.Metric<Type2, In, Out>\n>(2, (self, f) =>\n  make(\n    f(self.keyType),\n    self.unsafeUpdate,\n    self.unsafeValue,\n    self.unsafeModify\n  ))\n\n/** @internal */\nexport const modify = dual<\n  <In>(input: In) => <Type, Out>(self: Metric.Metric<Type, In, Out>) => Effect.Effect<void>,\n  <Type, In, Out>(self: Metric.Metric<Type, In, Out>, input: In) => Effect.Effect<void>\n>(2, (self, input) =>\n  core.fiberRefGetWith(\n    core.currentMetricLabels,\n    (tags) => core.sync(() => self.unsafeModify(input, tags))\n  ))\n\n/* @internal */\nexport const set = dual<\n  {\n    (value: number): (self: Metric.Metric.Gauge<number>) => Effect.Effect<void>\n    (value: bigint): (self: Metric.Metric.Gauge<bigint>) => Effect.Effect<void>\n  },\n  {\n    (self: Metric.Metric.Gauge<number>, value: number): Effect.Effect<void>\n    (self: Metric.Metric.Gauge<bigint>, value: bigint): Effect.Effect<void>\n  }\n>(2, (self, value) => update(self as any, value))\n\n/** @internal */\nexport const succeed = <Out>(out: Out): Metric.Metric<void, unknown, Out> =>\n  make(void 0 as void, constVoid, () => out, constVoid)\n\n/** @internal */\nexport const sync = <Out>(evaluate: LazyArg<Out>): Metric.Metric<void, unknown, Out> =>\n  make(void 0 as void, constVoid, evaluate, constVoid)\n\n/** @internal */\nexport const summary = (\n  options: {\n    readonly name: string\n    readonly maxAge: Duration.DurationInput\n    readonly maxSize: number\n    readonly error: number\n    readonly quantiles: ReadonlyArray<number>\n    readonly description?: string | undefined\n  }\n): Metric.Metric.Summary<number> => withNow(summaryTimestamp(options))\n\n/** @internal */\nexport const summaryTimestamp = (\n  options: {\n    readonly name: string\n    readonly maxAge: Duration.DurationInput\n    readonly maxSize: number\n    readonly error: number\n    readonly quantiles: ReadonlyArray<number>\n    readonly description?: string | undefined\n  }\n): Metric.Metric.Summary<readonly [value: number, timestamp: number]> => fromMetricKey(metricKey.summary(options))\n\n/** @internal */\nexport const tagged = dual<\n  <Type, In, Out>(key: string, value: string) => (self: Metric.Metric<Type, In, Out>) => Metric.Metric<Type, In, Out>,\n  <Type, In, Out>(self: Metric.Metric<Type, In, Out>, key: string, value: string) => Metric.Metric<Type, In, Out>\n>(3, (self, key, value) => taggedWithLabels(self, [metricLabel.make(key, value)]))\n\n/** @internal */\nexport const taggedWithLabelsInput = dual<\n  <In>(\n    f: (input: In) => Iterable<MetricLabel.MetricLabel>\n  ) => <Type, Out>(self: Metric.Metric<Type, In, Out>) => Metric.Metric<Type, In, void>,\n  <Type, In, Out>(\n    self: Metric.Metric<Type, In, Out>,\n    f: (input: In) => Iterable<MetricLabel.MetricLabel>\n  ) => Metric.Metric<Type, In, void>\n>(2, (self, f) =>\n  map(\n    make(\n      self.keyType,\n      (input, extraTags) =>\n        self.unsafeUpdate(\n          input,\n          Arr.union(f(input), extraTags)\n        ),\n      self.unsafeValue,\n      (input, extraTags) =>\n        self.unsafeModify(\n          input,\n          Arr.union(f(input), extraTags)\n        )\n    ),\n    constVoid\n  ))\n\n/** @internal */\nexport const taggedWithLabels = dual<\n  <Type, In, Out>(\n    extraTags: Iterable<MetricLabel.MetricLabel>\n  ) => (self: Metric.Metric<Type, In, Out>) => Metric.Metric<Type, In, Out>,\n  <Type, In, Out>(\n    self: Metric.Metric<Type, In, Out>,\n    extraTags: Iterable<MetricLabel.MetricLabel>\n  ) => Metric.Metric<Type, In, Out>\n>(2, (self, extraTags) => {\n  return make(\n    self.keyType,\n    (input, extraTags1) => self.unsafeUpdate(input, Arr.union(extraTags, extraTags1)),\n    (extraTags1) => self.unsafeValue(Arr.union(extraTags, extraTags1)),\n    (input, extraTags1) => self.unsafeModify(input, Arr.union(extraTags, extraTags1))\n  )\n})\n\n/** @internal */\nexport const timer = (name: string, description?: string): Metric.Metric<\n  MetricKeyType.MetricKeyType.Histogram,\n  Duration.Duration,\n  MetricState.MetricState.Histogram\n> => {\n  const boundaries = metricBoundaries.exponential({\n    start: 0.5,\n    factor: 2,\n    count: 35\n  })\n  const base = pipe(histogram(name, boundaries, description), tagged(\"time_unit\", \"milliseconds\"))\n  return mapInput(base, Duration.toMillis)\n}\n\n/** @internal */\nexport const timerWithBoundaries = (\n  name: string,\n  boundaries: ReadonlyArray<number>,\n  description?: string\n): Metric.Metric<\n  MetricKeyType.MetricKeyType.Histogram,\n  Duration.Duration,\n  MetricState.MetricState.Histogram\n> => {\n  const base = pipe(\n    histogram(name, metricBoundaries.fromIterable(boundaries), description),\n    tagged(\"time_unit\", \"milliseconds\")\n  )\n  return mapInput(base, Duration.toMillis)\n}\n\n/* @internal */\nexport const trackAll = dual<\n  <In>(\n    input: In\n  ) => <Type, Out>(\n    self: Metric.Metric<Type, In, Out>\n  ) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <Type, In, Out>(\n    self: Metric.Metric<Type, In, Out>,\n    input: In\n  ) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n>(2, (self, input) => (effect) =>\n  core.matchCauseEffect(effect, {\n    onFailure: (cause) => core.zipRight(update(self, input), core.failCause(cause)),\n    onSuccess: (value) => core.zipRight(update(self, input), core.succeed(value))\n  }))\n\n/* @internal */\nexport const trackDefect = dual<\n  <Type, Out>(\n    metric: Metric.Metric<Type, unknown, Out>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R, Type, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, unknown, Out>\n  ) => Effect.Effect<A, E, R>\n>(2, (self, metric) => trackDefectWith(self, metric, identity))\n\n/* @internal */\nexport const trackDefectWith = dual<\n  <Type, In, Out>(\n    metric: Metric.Metric<Type, In, Out>,\n    f: (defect: unknown) => In\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R, Type, In, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>,\n    f: (defect: unknown) => In\n  ) => Effect.Effect<A, E, R>\n>(3, (self, metric, f) => {\n  const updater = (defect: unknown) => update(metric, f(defect))\n  return _effect.tapDefect(self, (cause) => core.forEachSequentialDiscard(Cause.defects(cause), updater))\n})\n\n/* @internal */\nexport const trackDuration = dual<\n  <Type, Out>(\n    metric: Metric.Metric<Type, Duration.Duration, Out>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R, Type, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, Duration.Duration, Out>\n  ) => Effect.Effect<A, E, R>\n>(2, (self, metric) => trackDurationWith(self, metric, identity))\n\n/* @internal */\nexport const trackDurationWith = dual<\n  <Type, In, Out>(\n    metric: Metric.Metric<Type, In, Out>,\n    f: (duration: Duration.Duration) => In\n  ) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R, Type, In, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>,\n    f: (duration: Duration.Duration) => In\n  ) => Effect.Effect<A, E, R>\n>(3, (self, metric, f) =>\n  Clock.clockWith((clock) => {\n    const startTime = clock.unsafeCurrentTimeNanos()\n    return core.tap(self, (_) => {\n      const endTime = clock.unsafeCurrentTimeNanos()\n      const duration = Duration.nanos(endTime - startTime)\n      return update(metric, f(duration))\n    })\n  }))\n\n/* @internal */\nexport const trackError = dual<\n  <Type, In, Out>(\n    metric: Metric.Metric<Type, In, Out>\n  ) => <A, E extends In, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E extends In, R, Type, In, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>\n  ) => Effect.Effect<A, E, R>\n>(2, <A, E extends In, R, Type, In, Out>(\n  self: Effect.Effect<A, E, R>,\n  metric: Metric.Metric<Type, In, Out>\n) => trackErrorWith(self, metric, (a: In) => a))\n\n/* @internal */\nexport const trackErrorWith = dual<\n  <Type, In, Out, In2>(\n    metric: Metric.Metric<Type, In, Out>,\n    f: (error: In2) => In\n  ) => <A, E extends In2, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E extends In2, R, Type, In, Out, In2>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>,\n    f: (error: In2) => In\n  ) => Effect.Effect<A, E, R>\n>(3, <A, E extends In2, R, Type, In, Out, In2>(\n  self: Effect.Effect<A, E, R>,\n  metric: Metric.Metric<Type, In, Out>,\n  f: (error: In2) => In\n) => {\n  const updater = (error: E): Effect.Effect<void> => update(metric, f(error))\n  return _effect.tapError(self, updater)\n})\n\n/* @internal */\nexport const trackSuccess = dual<\n  <Type, In, Out>(\n    metric: Metric.Metric<Type, In, Out>\n  ) => <A extends In, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A extends In, E, R, Type, In, Out>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>\n  ) => Effect.Effect<A, E, R>\n>(2, <A extends In, E, R, Type, In, Out>(\n  self: Effect.Effect<A, E, R>,\n  metric: Metric.Metric<Type, In, Out>\n) => trackSuccessWith(self, metric, (a: In) => a))\n\n/* @internal */\nexport const trackSuccessWith = dual<\n  <Type, In, Out, In2>(\n    metric: Metric.Metric<Type, In, Out>,\n    f: (value: In2) => In\n  ) => <A extends In2, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A extends In2, E, R, Type, In, Out, In2>(\n    self: Effect.Effect<A, E, R>,\n    metric: Metric.Metric<Type, In, Out>,\n    f: (value: In2) => In\n  ) => Effect.Effect<A, E, R>\n>(3, <A extends In2, E, R, Type, In, Out, In2>(\n  self: Effect.Effect<A, E, R>,\n  metric: Metric.Metric<Type, In, Out>,\n  f: (value: In2) => In\n) => {\n  const updater = (value: A): Effect.Effect<void> => update(metric, f(value))\n  return core.tap(self, updater)\n})\n\n/* @internal */\nexport const update = dual<\n  <In>(input: In) => <Type, Out>(self: Metric.Metric<Type, In, Out>) => Effect.Effect<void>,\n  <Type, In, Out>(self: Metric.Metric<Type, In, Out>, input: In) => Effect.Effect<void>\n>(2, (self, input) =>\n  core.fiberRefGetWith(\n    core.currentMetricLabels,\n    (tags) => core.sync(() => self.unsafeUpdate(input, tags))\n  ))\n\n/* @internal */\nexport const value = <Type, In, Out>(\n  self: Metric.Metric<Type, In, Out>\n): Effect.Effect<Out> =>\n  core.fiberRefGetWith(\n    core.currentMetricLabels,\n    (tags) => core.sync(() => self.unsafeValue(tags))\n  )\n\n/** @internal */\nexport const withNow = <Type, In, Out>(\n  self: Metric.Metric<Type, readonly [In, number], Out>\n): Metric.Metric<Type, In, Out> => mapInput(self, (input: In) => [input, Date.now()] as const)\n\n/** @internal */\nexport const zip = dual<\n  <Type2, In2, Out2>(\n    that: Metric.Metric<Type2, In2, Out2>\n  ) => <Type, In, Out>(\n    self: Metric.Metric<Type, In, Out>\n  ) => Metric.Metric<readonly [Type, Type2], readonly [In, In2], [Out, Out2]>,\n  <Type, In, Out, Type2, In2, Out2>(\n    self: Metric.Metric<Type, In, Out>,\n    that: Metric.Metric<Type2, In2, Out2>\n  ) => Metric.Metric<readonly [Type, Type2], readonly [In, In2], [Out, Out2]>\n>(\n  2,\n  <Type, In, Out, Type2, In2, Out2>(self: Metric.Metric<Type, In, Out>, that: Metric.Metric<Type2, In2, Out2>) =>\n    make(\n      [self.keyType, that.keyType] as const,\n      (input: readonly [In, In2], extraTags) => {\n        const [l, r] = input\n        self.unsafeUpdate(l, extraTags)\n        that.unsafeUpdate(r, extraTags)\n      },\n      (extraTags) => [self.unsafeValue(extraTags), that.unsafeValue(extraTags)],\n      (input: readonly [In, In2], extraTags) => {\n        const [l, r] = input\n        self.unsafeModify(l, extraTags)\n        that.unsafeModify(r, extraTags)\n      }\n    )\n)\n\n/** @internal */\nexport const unsafeSnapshot = (): Array<MetricPair.MetricPair.Untyped> => globalMetricRegistry.snapshot()\n\n/** @internal */\nexport const snapshot: Effect.Effect<Array<MetricPair.MetricPair.Untyped>> = core.sync(\n  unsafeSnapshot\n)\n"],"names":["Arr","Clock","Duration","constVoid","dual","identity","pipe","globalValue","pipeArguments","Cause","_effect","core","metricBoundaries","metricKey","metricKeyType","metricLabel","metricRegistry","MetricSymbolKey","MetricTypeId","Symbol","for","metricVariance","_Type","_","_In","_Out","globalMetricRegistry","make","keyType","unsafeUpdate","unsafeValue","unsafeModify","metric","Object","assign","effect","tap","a","update","register","arguments","mapInput","self","f","input","extraTags","counter","name","options","fromMetricKey","frequency","withConstantInput","key","untaggedHook","hookCache","WeakMap","hook","length","undefined","get","taggedWithLabels","set","modify","gauge","histogram","boundaries","description","increment","isCounterKey","bigint","BigInt","incrementBy","amount","map","mapType","fiberRefGetWith","currentMetricLabels","tags","sync","value","succeed","out","evaluate","summary","withNow","summaryTimestamp","tagged","taggedWithLabelsInput","union","extraTags1","timer","exponential","start","factor","count","base","toMillis","timerWithBoundaries","fromIterable","trackAll","matchCauseEffect","onFailure","cause","zipRight","failCause","onSuccess","trackDefect","trackDefectWith","updater","defect","tapDefect","forEachSequentialDiscard","defects","trackDuration","trackDurationWith","clockWith","clock","startTime","unsafeCurrentTimeNanos","endTime","duration","nanos","trackError","trackErrorWith","error","tapError","trackSuccess","trackSuccessWith","Date","now","zip","that","l","r","unsafeSnapshot","snapshot"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 8677, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8683, "column": 0}, "map": {"version":3,"file":"fiberMessage.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiberMessage.ts"],"sourcesContent":["import type * as Cause from \"../Cause.js\"\nimport type * as Effect from \"../Effect.js\"\nimport type * as FiberStatus from \"../FiberStatus.js\"\nimport type * as FiberRuntime from \"./fiberRuntime.js\"\n\n/** @internal */\nexport type FiberMessage = InterruptSignal | Stateful | Resume | YieldNow\n\n/** @internal */\nexport const OP_INTERRUPT_SIGNAL = \"InterruptSignal\" as const\n\n/** @internal */\nexport type OP_INTERRUPT_SIGNAL = typeof OP_INTERRUPT_SIGNAL\n\n/** @internal */\nexport const OP_STATEFUL = \"Stateful\" as const\n\n/** @internal */\nexport type OP_STATEFUL = typeof OP_STATEFUL\n\n/** @internal */\nexport const OP_RESUME = \"Resume\" as const\n\n/** @internal */\nexport type OP_RESUME = typeof OP_RESUME\n\n/** @internal */\nexport const OP_YIELD_NOW = \"YieldNow\" as const\n\n/** @internal */\nexport type OP_YIELD_NOW = typeof OP_YIELD_NOW\n\n/** @internal */\nexport interface InterruptSignal {\n  readonly _tag: OP_INTERRUPT_SIGNAL\n  readonly cause: Cause.Cause<never>\n}\n\n/** @internal */\nexport interface Stateful {\n  readonly _tag: OP_STATEFUL\n  onFiber(fiber: FiberRuntime.FiberRuntime<any, any>, status: FiberStatus.FiberStatus): void\n}\n\n/** @internal */\nexport interface Resume {\n  readonly _tag: OP_RESUME\n  readonly effect: Effect.Effect<any, any, any>\n}\n\n/** @internal */\nexport interface YieldNow {\n  readonly _tag: OP_YIELD_NOW\n}\n\n/** @internal */\nexport const interruptSignal = (cause: Cause.Cause<never>): FiberMessage => ({\n  _tag: OP_INTERRUPT_SIGNAL,\n  cause\n})\n\n/** @internal */\nexport const stateful = (\n  onFiber: (\n    fiber: FiberRuntime.FiberRuntime<any, any>,\n    status: FiberStatus.FiberStatus\n  ) => void\n): FiberMessage => ({\n  _tag: OP_STATEFUL,\n  onFiber\n})\n\n/** @internal */\nexport const resume = (effect: Effect.Effect<any, any, any>): FiberMessage => ({\n  _tag: OP_RESUME,\n  effect\n})\n\n/** @internal */\nexport const yieldNow = (): FiberMessage => ({\n  _tag: OP_YIELD_NOW\n})\n"],"names":["OP_INTERRUPT_SIGNAL","OP_STATEFUL","OP_RESUME","OP_YIELD_NOW","interruptSignal","cause","_tag","stateful","onFiber","resume","effect","yieldNow"],"mappings":"AAQA,cAAA;;;;;;;;;;AACO,MAAMA,mBAAmB,GAAG,iBAA0B;AAMtD,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,SAAS,GAAG,QAAiB;AAMnC,MAAMC,YAAY,GAAG,UAAmB;AA6BxC,MAAMC,eAAe,IAAIC,KAAyB,GAAA,CAAoB;QAC3EC,IAAI,EAAEN,mBAAmB;QACzBK;KACD,CAAC;AAGK,MAAME,QAAQ,IACnBC,OAGS,GAAA,CACS;QAClBF,IAAI,EAAEL,WAAW;QACjBO;KACD,CAAC;AAGK,MAAMC,MAAM,IAAIC,MAAoC,GAAA,CAAoB;QAC7EJ,IAAI,EAAEJ,SAAS;QACfQ;KACD,CAAC;AAGK,MAAMC,QAAQ,GAAGA,CAAA,GAAA,CAAqB;QAC3CL,IAAI,EAAEH;KACP,CAAC","ignoreList":[0]}},
    {"offset": {"line": 8712, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8718, "column": 0}, "map": {"version":3,"file":"fiberStatus.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiberStatus.ts"],"sourcesContent":["import * as Equal from \"../Equal.js\"\nimport type { FiberId } from \"../FiberId.js\"\nimport type * as FiberStatus from \"../FiberStatus.js\"\nimport { pipe } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type { RuntimeFlags } from \"../RuntimeFlags.js\"\n\nconst FiberStatusSymbolKey = \"effect/FiberStatus\"\n\n/** @internal */\nexport const FiberStatusTypeId: FiberStatus.FiberStatusTypeId = Symbol.for(\n  FiberStatusSymbolKey\n) as FiberStatus.FiberStatusTypeId\n\n/** @internal */\nexport const OP_DONE = \"Done\" as const\n\n/** @internal */\nexport type OP_DONE = typeof OP_DONE\n\n/** @internal */\nexport const OP_RUNNING = \"Running\" as const\n\n/** @internal */\nexport type OP_RUNNING = typeof OP_RUNNING\n\n/** @internal */\nexport const OP_SUSPENDED = \"Suspended\" as const\n\n/** @internal */\nexport type OP_SUSPENDED = typeof OP_SUSPENDED\n\nconst DoneHash = Hash.string(`${FiberStatusSymbolKey}-${OP_DONE}`)\n\n/** @internal */\nclass Done implements FiberStatus.Done {\n  readonly [FiberStatusTypeId]: FiberStatus.FiberStatusTypeId = FiberStatusTypeId\n  readonly _tag = OP_DONE;\n  [Hash.symbol](): number {\n    return DoneHash\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return isFiberStatus(that) && that._tag === OP_DONE\n  }\n}\n\n/** @internal */\nclass Running implements FiberStatus.Running {\n  readonly [FiberStatusTypeId]: FiberStatus.FiberStatusTypeId = FiberStatusTypeId\n  readonly _tag = OP_RUNNING\n  constructor(readonly runtimeFlags: RuntimeFlags) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(FiberStatusSymbolKey),\n      Hash.combine(Hash.hash(this._tag)),\n      Hash.combine(Hash.hash(this.runtimeFlags)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return (\n      isFiberStatus(that) &&\n      that._tag === OP_RUNNING &&\n      this.runtimeFlags === that.runtimeFlags\n    )\n  }\n}\n\n/** @internal */\nclass Suspended implements FiberStatus.Suspended {\n  readonly [FiberStatusTypeId]: FiberStatus.FiberStatusTypeId = FiberStatusTypeId\n  readonly _tag = OP_SUSPENDED\n  constructor(\n    readonly runtimeFlags: RuntimeFlags,\n    readonly blockingOn: FiberId\n  ) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(FiberStatusSymbolKey),\n      Hash.combine(Hash.hash(this._tag)),\n      Hash.combine(Hash.hash(this.runtimeFlags)),\n      Hash.combine(Hash.hash(this.blockingOn)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    return (\n      isFiberStatus(that) &&\n      that._tag === OP_SUSPENDED &&\n      this.runtimeFlags === that.runtimeFlags &&\n      Equal.equals(this.blockingOn, that.blockingOn)\n    )\n  }\n}\n\n/** @internal */\nexport const done: FiberStatus.FiberStatus = new Done()\n\n/** @internal */\nexport const running = (runtimeFlags: RuntimeFlags): FiberStatus.FiberStatus => new Running(runtimeFlags)\n\n/** @internal */\nexport const suspended = (\n  runtimeFlags: RuntimeFlags,\n  blockingOn: FiberId\n): FiberStatus.FiberStatus => new Suspended(runtimeFlags, blockingOn)\n\n/** @internal */\nexport const isFiberStatus = (u: unknown): u is FiberStatus.FiberStatus => hasProperty(u, FiberStatusTypeId)\n\n/** @internal */\nexport const isDone = (self: FiberStatus.FiberStatus): self is FiberStatus.Done => self._tag === OP_DONE\n\n/** @internal */\nexport const isRunning = (self: FiberStatus.FiberStatus): self is FiberStatus.Running => self._tag === OP_RUNNING\n\n/** @internal */\nexport const isSuspended = (self: FiberStatus.FiberStatus): self is FiberStatus.Suspended => self._tag === OP_SUSPENDED\n"],"names":["Equal","pipe","Hash","hasProperty","FiberStatusSymbolKey","FiberStatusTypeId","Symbol","for","OP_DONE","OP_RUNNING","OP_SUSPENDED","DoneHash","string","Done","_tag","symbol","that","isFiberStatus","Running","runtimeFlags","constructor","hash","combine","cached","Suspended","blockingOn","equals","done","running","suspended","u","isDone","self","isRunning","isSuspended"],"mappings":";;;;;;;;;;;;;AAIA,OAAO,KAAKE,IAAI,MAAM,YAAY;AAJlC,OAAO,KAAKF,KAAK,MAAM,aAAa;AAGpC,SAASC,IAAI,QAAQ,gBAAgB;AAErC,SAASE,WAAW,QAAQ,iBAAiB;;;;;AAG7C,MAAMC,oBAAoB,GAAG,oBAAoB;AAG1C,MAAMC,iBAAiB,GAAA,WAAA,GAAkCC,MAAM,CAACC,GAAG,CACxEH,oBAAoB,CACY;AAG3B,MAAMI,OAAO,GAAG,MAAe;AAM/B,MAAMC,UAAU,GAAG,SAAkB;AAMrC,MAAMC,YAAY,GAAG,WAAoB;AAKhD,MAAMC,QAAQ,GAAA,WAAA,GAAGT,IAAI,4IAACU,MAAM,CAAC,GAAGR,oBAAoB,CAAA,CAAA,EAAII,OAAO,EAAE,CAAC;AAElE,cAAA,GACA,MAAMK,IAAI;IACC,CAACR,iBAAiB,CAAA,GAAmCA,iBAAiB,CAAA;IACtES,IAAI,GAAGN,OAAO,CAAA;IACvB,CAACN,IAAI,4IAACa,MAAM,CAAA,GAAC;QACX,OAAOJ,QAAQ;IACjB;IACA,CAACX,KAAK,4IAACe,MAAM,CAAA,CAAEC,IAAa,EAAA;QAC1B,OAAOC,aAAa,CAACD,IAAI,CAAC,IAAIA,IAAI,CAACF,IAAI,KAAKN,OAAO;IACrD;;AAGF,cAAA,GACA,MAAMU,OAAO;IAGUC,YAAA,CAAA;IAFZ,CAACd,iBAAiB,CAAA,GAAmCA,iBAAiB,CAAA;IACtES,IAAI,GAAGL,UAAU,CAAA;IAC1BW,YAAqBD,YAA0B,CAAA;QAA1B,IAAA,CAAAA,YAAY,GAAZA,YAAY;IAAiB;IAClD,CAACjB,IAAI,4IAACa,MAAM,CAAA,GAAC;QACX,QAAOd,8JAAAA,AAAI,EACTC,IAAI,4IAACmB,IAAI,CAACjB,oBAAoB,CAAC,EAC/BF,IAAI,4IAACoB,OAAO,CAACpB,IAAI,4IAACmB,IAAI,CAAC,IAAI,CAACP,IAAI,CAAC,CAAC,EAClCZ,IAAI,4IAACoB,OAAO,CAACpB,IAAI,4IAACmB,IAAI,CAAC,IAAI,CAACF,YAAY,CAAC,CAAC,EAC1CjB,IAAI,4IAACqB,MAAM,CAAC,IAAI,CAAC,CAClB;IACH;IACA,CAACvB,KAAK,4IAACe,MAAM,CAAA,CAAEC,IAAa,EAAA;QAC1B,OACEC,aAAa,CAACD,IAAI,CAAC,IACnBA,IAAI,CAACF,IAAI,KAAKL,UAAU,IACxB,IAAI,CAACU,YAAY,KAAKH,IAAI,CAACG,YAAY;IAE3C;;AAGF,cAAA,GACA,MAAMK,SAAS;IAIFL,YAAA,CAAA;IACAM,UAAA,CAAA;IAJF,CAACpB,iBAAiB,CAAA,GAAmCA,iBAAiB,CAAA;IACtES,IAAI,GAAGJ,YAAY,CAAA;IAC5BU,YACWD,YAA0B,EAC1BM,UAAmB,CAAA;QADnB,IAAA,CAAAN,YAAY,GAAZA,YAAY;QACZ,IAAA,CAAAM,UAAU,GAAVA,UAAU;IAClB;IACH,CAACvB,IAAI,4IAACa,MAAM,CAAA,GAAC;QACX,+JAAOd,OAAAA,AAAI,EACTC,IAAI,4IAACmB,IAAI,CAACjB,oBAAoB,CAAC,EAC/BF,IAAI,4IAACoB,OAAO,CAACpB,IAAI,4IAACmB,IAAI,CAAC,IAAI,CAACP,IAAI,CAAC,CAAC,EAClCZ,IAAI,4IAACoB,OAAO,CAACpB,IAAI,4IAACmB,IAAI,CAAC,IAAI,CAACF,YAAY,CAAC,CAAC,EAC1CjB,IAAI,4IAACoB,OAAO,CAACpB,IAAI,4IAACmB,IAAI,CAAC,IAAI,CAACI,UAAU,CAAC,CAAC,EACxCvB,IAAI,4IAACqB,MAAM,CAAC,IAAI,CAAC,CAClB;IACH;IACA,CAACvB,KAAK,4IAACe,MAAM,CAAA,CAAEC,IAAa,EAAA;QAC1B,OACEC,aAAa,CAACD,IAAI,CAAC,IACnBA,IAAI,CAACF,IAAI,KAAKJ,YAAY,IAC1B,IAAI,CAACS,YAAY,KAAKH,IAAI,CAACG,YAAY,IACvCnB,KAAK,4IAAC0B,MAAM,CAAC,IAAI,CAACD,UAAU,EAAET,IAAI,CAACS,UAAU,CAAC;IAElD;;AAIK,MAAME,IAAI,GAAA,WAAA,GAA4B,IAAId,IAAI,EAAE;AAGhD,MAAMe,OAAO,GAAIT,YAA0B,IAA8B,IAAID,OAAO,CAACC,YAAY,CAAC;AAGlG,MAAMU,SAAS,GAAGA,CACvBV,YAA0B,EAC1BM,UAAmB,GACS,IAAID,SAAS,CAACL,YAAY,EAAEM,UAAU,CAAC;AAG9D,MAAMR,aAAa,IAAIa,CAAU,IAAmC3B,sKAAAA,AAAW,EAAC2B,CAAC,EAAEzB,iBAAiB,CAAC;AAGrG,MAAM0B,MAAM,IAAIC,IAA6B,GAA+BA,IAAI,CAAClB,IAAI,KAAKN,OAAO;AAGjG,MAAMyB,SAAS,IAAID,IAA6B,GAAkCA,IAAI,CAAClB,IAAI,KAAKL,UAAU;AAG1G,MAAMyB,WAAW,IAAIF,IAA6B,GAAoCA,IAAI,CAAClB,IAAI,KAAKJ,YAAY","ignoreList":[0]}},
    {"offset": {"line": 8792, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8798, "column": 0}, "map": {"version":3,"file":"completedRequestMap.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/completedRequestMap.ts"],"sourcesContent":["import { globalValue } from \"../GlobalValue.js\"\nimport type * as Request from \"../Request.js\"\nimport { fiberRefUnsafeMake } from \"./core.js\"\n\n/** @internal */\nexport const currentRequestMap = globalValue(\n  Symbol.for(\"effect/FiberRef/currentRequestMap\"),\n  () => fiberRefUnsafeMake(new Map<any, Request.Entry<any>>())\n)\n"],"names":["globalValue","fiberRefUnsafeMake","currentRequestMap","Symbol","for","Map"],"mappings":";;;AAAA,SAASA,WAAW,QAAQ,mBAAmB;AAE/C,SAASC,kBAAkB,QAAQ,WAAW;;;AAGvC,MAAMC,iBAAiB,GAAA,WAAA,8JAAGF,cAAAA,AAAW,EAAA,WAAA,GAC1CG,MAAM,CAACC,GAAG,CAAC,mCAAmC,CAAC,EAC/C,oKAAMH,qBAAAA,AAAkB,EAAC,IAAII,GAAG,EAA2B,CAAC,CAC7D","ignoreList":[0]}},
    {"offset": {"line": 8806, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8812, "column": 0}, "map": {"version":3,"file":"fiberScope.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiberScope.ts"],"sourcesContent":["import * as FiberId from \"../FiberId.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport type * as RuntimeFlags from \"../RuntimeFlags.js\"\nimport * as FiberMessage from \"./fiberMessage.js\"\nimport type * as FiberRuntime from \"./fiberRuntime.js\"\nimport * as _runtimeFlags from \"./runtimeFlags.js\"\n\n/** @internal */\nconst FiberScopeSymbolKey = \"effect/FiberScope\"\n\n/** @internal */\nexport const FiberScopeTypeId = Symbol.for(FiberScopeSymbolKey)\n\nexport type FiberScopeTypeId = typeof FiberScopeTypeId\n\n/**\n * A `FiberScope` represents the scope of a fiber lifetime. The scope of a\n * fiber can be retrieved using `Effect.descriptor`, and when forking fibers,\n * you can specify a custom scope to fork them on by using the `forkIn`.\n *\n * @since 2.0.0\n * @category models\n */\nexport interface FiberScope {\n  readonly [FiberScopeTypeId]: FiberScopeTypeId\n  get fiberId(): FiberId.FiberId\n  add(runtimeFlags: RuntimeFlags.RuntimeFlags, child: FiberRuntime.FiberRuntime<any, any>): void\n}\n\n/** @internal */\nclass Global implements FiberScope {\n  readonly [FiberScopeTypeId]: FiberScopeTypeId = FiberScopeTypeId\n  readonly fiberId = FiberId.none\n  readonly roots = new Set<FiberRuntime.FiberRuntime<any, any>>()\n  add(_runtimeFlags: RuntimeFlags.RuntimeFlags, child: FiberRuntime.FiberRuntime<any, any>): void {\n    this.roots.add(child)\n    child.addObserver(() => {\n      this.roots.delete(child)\n    })\n  }\n}\n\n/** @internal */\nclass Local implements FiberScope {\n  readonly [FiberScopeTypeId]: FiberScopeTypeId = FiberScopeTypeId\n  constructor(\n    readonly fiberId: FiberId.FiberId,\n    readonly parent: FiberRuntime.FiberRuntime<any, any>\n  ) {\n  }\n  add(_runtimeFlags: RuntimeFlags.RuntimeFlags, child: FiberRuntime.FiberRuntime<any, any>): void {\n    this.parent.tell(\n      FiberMessage.stateful((parentFiber) => {\n        parentFiber.addChild(child)\n        child.addObserver(() => {\n          parentFiber.removeChild(child)\n        })\n      })\n    )\n  }\n}\n\n/** @internal */\nexport const unsafeMake = (fiber: FiberRuntime.FiberRuntime<any, any>): FiberScope => {\n  return new Local(fiber.id(), fiber)\n}\n\n/** @internal */\nexport const globalScope = globalValue(\n  Symbol.for(\"effect/FiberScope/Global\"),\n  () => new Global()\n)\n"],"names":["FiberId","globalValue","FiberMessage","FiberScopeSymbolKey","FiberScopeTypeId","Symbol","for","Global","fiberId","none","roots","Set","add","_runtimeFlags","child","addObserver","delete","Local","parent","constructor","tell","stateful","parentFiber","addChild","removeChild","unsafeMake","fiber","id","globalScope"],"mappings":";;;;;AAAA,OAAO,KAAKA,OAAO,MAAM,eAAe;AAGxC,OAAO,KAAKE,YAAY,MAAM,mBAAmB;AAFjD,SAASD,WAAW,QAAQ,mBAAmB;;;;AAM/C,cAAA,GACA,MAAME,mBAAmB,GAAG,mBAAmB;AAGxC,MAAMC,gBAAgB,GAAA,WAAA,GAAGC,MAAM,CAACC,GAAG,CAACH,mBAAmB,CAAC;AAkB/D,cAAA,GACA,MAAMI,MAAM;IACD,CAACH,gBAAgB,CAAA,GAAsBA,gBAAgB,CAAA;IACvDI,OAAO,GAAGR,OAAO,4IAACS,IAAI,CAAA;IACtBC,KAAK,GAAA,WAAA,GAAG,IAAIC,GAAG,EAAuC,CAAA;IAC/DC,GAAGA,CAACC,aAAwC,EAAEC,KAA0C,EAAA;QACtF,IAAI,CAACJ,KAAK,CAACE,GAAG,CAACE,KAAK,CAAC;QACrBA,KAAK,CAACC,WAAW,CAAC,MAAK;YACrB,IAAI,CAACL,KAAK,CAACM,MAAM,CAACF,KAAK,CAAC;QAC1B,CAAC,CAAC;IACJ;;AAGF,cAAA,GACA,MAAMG,KAAK;IAGET,OAAA,CAAA;IACAU,MAAA,CAAA;IAHF,CAACd,gBAAgB,CAAA,GAAsBA,gBAAgB,CAAA;IAChEe,YACWX,OAAwB,EACxBU,MAA2C,CAAA;QAD3C,IAAA,CAAAV,OAAO,GAAPA,OAAO;QACP,IAAA,CAAAU,MAAM,GAANA,MAAM;IAEjB;IACAN,GAAGA,CAACC,aAAwC,EAAEC,KAA0C,EAAA;QACtF,IAAI,CAACI,MAAM,CAACE,IAAI,CACdlB,YAAY,wJAACmB,QAAQ,EAAEC,WAAW,IAAI;YACpCA,WAAW,CAACC,QAAQ,CAACT,KAAK,CAAC;YAC3BA,KAAK,CAACC,WAAW,CAAC,MAAK;gBACrBO,WAAW,CAACE,WAAW,CAACV,KAAK,CAAC;YAChC,CAAC,CAAC;QACJ,CAAC,CAAC,CACH;IACH;;AAIK,MAAMW,UAAU,IAAIC,KAA0C,IAAgB;IACnF,OAAO,IAAIT,KAAK,CAACS,KAAK,CAACC,EAAE,EAAE,EAAED,KAAK,CAAC;AACrC,CAAC;AAGM,MAAME,WAAW,GAAA,WAAA,8JAAG3B,cAAAA,AAAW,EAAA,WAAA,GACpCI,MAAM,CAACC,GAAG,CAAC,0BAA0B,CAAC,EACtC,IAAM,IAAIC,MAAM,EAAE,CACnB","ignoreList":[0]}},
    {"offset": {"line": 8857, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 8863, "column": 0}, "map": {"version":3,"file":"fiber.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/fiber.ts"],"sourcesContent":["import type * as Cause from \"../Cause.js\"\nimport * as Clock from \"../Clock.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Either from \"../Either.js\"\nimport * as Exit from \"../Exit.js\"\nimport type * as Fiber from \"../Fiber.js\"\nimport * as FiberId from \"../FiberId.js\"\nimport * as FiberStatus from \"../FiberStatus.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport * as number from \"../Number.js\"\nimport * as Option from \"../Option.js\"\nimport * as order from \"../Order.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport * as core from \"./core.js\"\nimport * as effectable from \"./effectable.js\"\nimport * as fiberScope from \"./fiberScope.js\"\nimport * as runtimeFlags from \"./runtimeFlags.js\"\n\n/** @internal */\nconst FiberSymbolKey = \"effect/Fiber\"\n\n/** @internal */\nexport const FiberTypeId: Fiber.FiberTypeId = Symbol.for(\n  FiberSymbolKey\n) as Fiber.FiberTypeId\n\n/** @internal */\nexport const fiberVariance = {\n  /* c8 ignore next */\n  _E: (_: never) => _,\n  /* c8 ignore next */\n  _A: (_: never) => _\n}\n\n/** @internal */\nconst fiberProto = {\n  [FiberTypeId]: fiberVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nconst RuntimeFiberSymbolKey = \"effect/Fiber\"\n\n/** @internal */\nexport const RuntimeFiberTypeId: Fiber.RuntimeFiberTypeId = Symbol.for(\n  RuntimeFiberSymbolKey\n) as Fiber.RuntimeFiberTypeId\n\n/** @internal */\nexport const Order: order.Order<Fiber.RuntimeFiber<unknown, unknown>> = pipe(\n  order.tuple(number.Order, number.Order),\n  order.mapInput((fiber: Fiber.RuntimeFiber<unknown, unknown>) =>\n    [\n      (fiber.id() as FiberId.Runtime).startTimeMillis,\n      (fiber.id() as FiberId.Runtime).id\n    ] as const\n  )\n)\n\n/** @internal */\nexport const isFiber = (u: unknown): u is Fiber.Fiber<unknown, unknown> => hasProperty(u, FiberTypeId)\n\n/** @internal */\nexport const isRuntimeFiber = <A, E>(self: Fiber.Fiber<A, E>): self is Fiber.RuntimeFiber<A, E> =>\n  RuntimeFiberTypeId in self\n\n/** @internal */\nexport const _await = <A, E>(self: Fiber.Fiber<A, E>): Effect.Effect<Exit.Exit<A, E>> => self.await\n\n/** @internal */\nexport const children = <A, E>(\n  self: Fiber.Fiber<A, E>\n): Effect.Effect<Array<Fiber.RuntimeFiber<any, any>>> => self.children\n\n/** @internal */\nexport const done = <A, E>(exit: Exit.Exit<A, E>): Fiber.Fiber<A, E> => {\n  const _fiber = {\n    ...effectable.CommitPrototype,\n    commit() {\n      return join(this)\n    },\n    ...fiberProto,\n    id: () => FiberId.none,\n    await: core.succeed(exit),\n    children: core.succeed([]),\n    inheritAll: core.void,\n    poll: core.succeed(Option.some(exit)),\n    interruptAsFork: () => core.void\n  }\n\n  return _fiber\n}\n\n/** @internal */\nexport const dump = <A, E>(self: Fiber.RuntimeFiber<A, E>): Effect.Effect<Fiber.Fiber.Dump> =>\n  core.map(self.status, (status) => ({ id: self.id(), status }))\n\n/** @internal */\nexport const dumpAll = (\n  fibers: Iterable<Fiber.RuntimeFiber<unknown, unknown>>\n): Effect.Effect<Array<Fiber.Fiber.Dump>> => core.forEachSequential(fibers, dump)\n\n/** @internal */\nexport const fail = <E>(error: E): Fiber.Fiber<never, E> => done(Exit.fail(error))\n\n/** @internal */\nexport const failCause = <E>(cause: Cause.Cause<E>): Fiber.Fiber<never, E> => done(Exit.failCause(cause))\n\n/** @internal */\nexport const fromEffect = <A, E>(effect: Effect.Effect<A, E>): Effect.Effect<Fiber.Fiber<A, E>> =>\n  core.map(core.exit(effect), done)\n\n/** @internal */\nexport const id = <A, E>(self: Fiber.Fiber<A, E>): FiberId.FiberId => self.id()\n\n/** @internal */\nexport const inheritAll = <A, E>(self: Fiber.Fiber<A, E>): Effect.Effect<void> => self.inheritAll\n\n/** @internal */\nexport const interrupted = (fiberId: FiberId.FiberId): Fiber.Fiber<never> => done(Exit.interrupt(fiberId))\n\n/** @internal */\nexport const interruptAll = (fibers: Iterable<Fiber.Fiber<any, any>>): Effect.Effect<void> =>\n  core.flatMap(core.fiberId, (fiberId) => pipe(fibers, interruptAllAs(fiberId)))\n\n/** @internal */\nexport const interruptAllAs = dual<\n  (fiberId: FiberId.FiberId) => (fibers: Iterable<Fiber.Fiber<any, any>>) => Effect.Effect<void>,\n  (fibers: Iterable<Fiber.Fiber<any, any>>, fiberId: FiberId.FiberId) => Effect.Effect<void>\n>(2, (fibers, fiberId) =>\n  pipe(\n    core.forEachSequentialDiscard(fibers, interruptAsFork(fiberId)),\n    core.zipRight(pipe(fibers, core.forEachSequentialDiscard(_await)))\n  ))\n\n/** @internal */\nexport const interruptAsFork = dual<\n  (fiberId: FiberId.FiberId) => <A, E>(self: Fiber.Fiber<A, E>) => Effect.Effect<void>,\n  <A, E>(self: Fiber.Fiber<A, E>, fiberId: FiberId.FiberId) => Effect.Effect<void>\n>(2, (self, fiberId) => self.interruptAsFork(fiberId))\n\n/** @internal */\nexport const join = <A, E>(self: Fiber.Fiber<A, E>): Effect.Effect<A, E> =>\n  core.zipLeft(core.flatten(self.await), self.inheritAll)\n\n/** @internal */\nexport const map = dual<\n  <A, B>(f: (a: A) => B) => <E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<B, E>,\n  <A, E, B>(self: Fiber.Fiber<A, E>, f: (a: A) => B) => Fiber.Fiber<B, E>\n>(2, (self, f) => mapEffect(self, (a) => core.sync(() => f(a))))\n\n/** @internal */\nexport const mapEffect = dual<\n  <A, A2, E2>(f: (a: A) => Effect.Effect<A2, E2>) => <E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<A2, E | E2>,\n  <A, E, A2, E2>(self: Fiber.Fiber<A, E>, f: (a: A) => Effect.Effect<A2, E2>) => Fiber.Fiber<A2, E | E2>\n>(2, (self, f) => {\n  const _fiber = {\n    ...effectable.CommitPrototype,\n    commit() {\n      return join(this)\n    },\n    ...fiberProto,\n    id: () => self.id(),\n    await: core.flatMap(self.await, Exit.forEachEffect(f)),\n    children: self.children,\n    inheritAll: self.inheritAll,\n    poll: core.flatMap(self.poll, (result) => {\n      switch (result._tag) {\n        case \"None\":\n          return core.succeed(Option.none())\n        case \"Some\":\n          return pipe(\n            Exit.forEachEffect(result.value, f),\n            core.map(Option.some)\n          )\n      }\n    }),\n    interruptAsFork: (id: FiberId.FiberId) => self.interruptAsFork(id)\n  }\n  return _fiber\n})\n\n/** @internal */\nexport const mapFiber = dual<\n  <E, E2, A, B>(\n    f: (a: A) => Fiber.Fiber<B, E2>\n  ) => (self: Fiber.Fiber<A, E>) => Effect.Effect<Fiber.Fiber<B, E | E2>>,\n  <A, E, E2, B>(\n    self: Fiber.Fiber<A, E>,\n    f: (a: A) => Fiber.Fiber<B, E2>\n  ) => Effect.Effect<Fiber.Fiber<B, E | E2>>\n>(2, <A, E, E2, B>(\n  self: Fiber.Fiber<A, E>,\n  f: (a: A) => Fiber.Fiber<B, E2>\n) =>\n  core.map(\n    self.await,\n    Exit.match({\n      onFailure: (cause): Fiber.Fiber<B, E | E2> => failCause(cause),\n      onSuccess: (a) => f(a)\n    })\n  ))\n\n/** @internal */\nexport const match = dual<\n  <A, E, Z>(\n    options: {\n      readonly onFiber: (fiber: Fiber.Fiber<A, E>) => Z\n      readonly onRuntimeFiber: (fiber: Fiber.RuntimeFiber<A, E>) => Z\n    }\n  ) => (self: Fiber.Fiber<A, E>) => Z,\n  <A, E, Z>(\n    self: Fiber.Fiber<A, E>,\n    options: {\n      readonly onFiber: (fiber: Fiber.Fiber<A, E>) => Z\n      readonly onRuntimeFiber: (fiber: Fiber.RuntimeFiber<A, E>) => Z\n    }\n  ) => Z\n>(2, (self, { onFiber, onRuntimeFiber }) => {\n  if (isRuntimeFiber(self)) {\n    return onRuntimeFiber(self)\n  }\n  return onFiber(self)\n})\n\n/** @internal */\nconst _never = {\n  ...effectable.CommitPrototype,\n  commit() {\n    return join(this)\n  },\n  ...fiberProto,\n  id: () => FiberId.none,\n  await: core.never,\n  children: core.succeed([]),\n  inheritAll: core.never,\n  poll: core.succeed(Option.none()),\n  interruptAsFork: () => core.never\n}\n\n/** @internal */\nexport const never: Fiber.Fiber<never> = _never\n\n/** @internal */\nexport const orElse = dual<\n  <A2, E2>(that: Fiber.Fiber<A2, E2>) => <A, E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<A | A2, E | E2>,\n  <A, E, A2, E2>(self: Fiber.Fiber<A, E>, that: Fiber.Fiber<A2, E2>) => Fiber.Fiber<A | A2, E | E2>\n>(2, (self, that) => ({\n  ...effectable.CommitPrototype,\n  commit() {\n    return join(this)\n  },\n  ...fiberProto,\n  id: () => FiberId.getOrElse(self.id(), that.id()),\n  await: core.zipWith(\n    self.await,\n    that.await,\n    (exit1, exit2) => (Exit.isSuccess(exit1) ? exit1 : exit2)\n  ),\n  children: self.children,\n  inheritAll: core.zipRight(that.inheritAll, self.inheritAll),\n  poll: core.zipWith(\n    self.poll,\n    that.poll,\n    (option1, option2) => {\n      switch (option1._tag) {\n        case \"None\": {\n          return Option.none()\n        }\n        case \"Some\": {\n          return Exit.isSuccess(option1.value) ? option1 : option2\n        }\n      }\n    }\n  ),\n  interruptAsFork: (id) =>\n    pipe(\n      core.interruptAsFiber(self, id),\n      core.zipRight(pipe(that, core.interruptAsFiber(id))),\n      core.asVoid\n    )\n}))\n\n/** @internal */\nexport const orElseEither = dual<\n  <A2, E2>(that: Fiber.Fiber<A2, E2>) => <A, E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<Either.Either<A2, A>, E | E2>,\n  <A, E, A2, E2>(self: Fiber.Fiber<A, E>, that: Fiber.Fiber<A2, E2>) => Fiber.Fiber<Either.Either<A2, A>, E | E2>\n>(2, (self, that) => orElse(map(self, Either.left), map(that, Either.right)))\n\n/** @internal */\nexport const poll = <A, E>(self: Fiber.Fiber<A, E>): Effect.Effect<Option.Option<Exit.Exit<A, E>>> => self.poll\n\n// forked from https://github.com/sindresorhus/parse-ms/blob/4da2ffbdba02c6e288c08236695bdece0adca173/index.js\n// MIT License\n// Copyright (c) Sindre Sorhus <sindresorhus@gmail.com> (sindresorhus.com)\n/** @internal */\nconst parseMs = (milliseconds: number) => {\n  const roundTowardsZero = milliseconds > 0 ? Math.floor : Math.ceil\n  return {\n    days: roundTowardsZero(milliseconds / 86400000),\n    hours: roundTowardsZero(milliseconds / 3600000) % 24,\n    minutes: roundTowardsZero(milliseconds / 60000) % 60,\n    seconds: roundTowardsZero(milliseconds / 1000) % 60,\n    milliseconds: roundTowardsZero(milliseconds) % 1000,\n    microseconds: roundTowardsZero(milliseconds * 1000) % 1000,\n    nanoseconds: roundTowardsZero(milliseconds * 1e6) % 1000\n  }\n}\n\n/** @internal */\nconst renderStatus = (status: FiberStatus.FiberStatus): string => {\n  if (FiberStatus.isDone(status)) {\n    return \"Done\"\n  }\n  if (FiberStatus.isRunning(status)) {\n    return \"Running\"\n  }\n\n  const isInterruptible = runtimeFlags.interruptible(status.runtimeFlags) ?\n    \"interruptible\" :\n    \"uninterruptible\"\n  return `Suspended(${isInterruptible})`\n}\n\n/** @internal */\nexport const pretty = <A, E>(self: Fiber.RuntimeFiber<A, E>): Effect.Effect<string> =>\n  core.flatMap(Clock.currentTimeMillis, (now) =>\n    core.map(dump(self), (dump) => {\n      const time = now - dump.id.startTimeMillis\n      const { days, hours, milliseconds, minutes, seconds } = parseMs(time)\n      const lifeMsg = (days === 0 ? \"\" : `${days}d`) +\n        (days === 0 && hours === 0 ? \"\" : `${hours}h`) +\n        (days === 0 && hours === 0 && minutes === 0 ? \"\" : `${minutes}m`) +\n        (days === 0 && hours === 0 && minutes === 0 && seconds === 0 ? \"\" : `${seconds}s`) +\n        `${milliseconds}ms`\n      const waitMsg = FiberStatus.isSuspended(dump.status) ?\n        (() => {\n          const ids = FiberId.ids(dump.status.blockingOn)\n          return HashSet.size(ids) > 0\n            ? `waiting on ` + Array.from(ids).map((id) => `${id}`).join(\", \")\n            : \"\"\n        })() :\n        \"\"\n      const statusMsg = renderStatus(dump.status)\n      return `[Fiber](#${dump.id.id}) (${lifeMsg}) ${waitMsg}\\n   Status: ${statusMsg}`\n    }))\n\n/** @internal */\nexport const unsafeRoots = (): Array<Fiber.RuntimeFiber<any, any>> => Array.from(fiberScope.globalScope.roots)\n\n/** @internal */\nexport const roots: Effect.Effect<Array<Fiber.RuntimeFiber<any, any>>> = core.sync(unsafeRoots)\n\n/** @internal */\nexport const status = <A, E>(self: Fiber.RuntimeFiber<A, E>): Effect.Effect<FiberStatus.FiberStatus> => self.status\n\n/** @internal */\nexport const succeed = <A>(value: A): Fiber.Fiber<A> => done(Exit.succeed(value))\n\nconst void_: Fiber.Fiber<void> = succeed(void 0)\nexport {\n  /** @internal */\n  void_ as void\n}\n\n/** @internal */\nexport const currentFiberURI = \"effect/FiberCurrent\"\n\n/** @internal */\nexport const getCurrentFiber = (): Option.Option<Fiber.RuntimeFiber<any, any>> =>\n  Option.fromNullable((globalThis as any)[currentFiberURI])\n"],"names":["Clock","Either","Exit","FiberId","FiberStatus","dual","pipe","HashSet","number","Option","order","pipeArguments","hasProperty","core","effectable","fiberScope","runtimeFlags","FiberSymbolKey","FiberTypeId","Symbol","for","fiberVariance","_E","_","_A","fiberProto","arguments","RuntimeFiberSymbolKey","RuntimeFiberTypeId","Order","tuple","mapInput","fiber","id","startTimeMillis","isFiber","u","isRuntimeFiber","self","_await","await","children","done","exit","_fiber","CommitPrototype","commit","join","none","succeed","inheritAll","void","poll","some","interruptAsFork","dump","map","status","dumpAll","fibers","forEachSequential","fail","error","failCause","cause","fromEffect","effect","interrupted","fiberId","interrupt","interruptAll","flatMap","interruptAllAs","forEachSequentialDiscard","zipRight","zipLeft","flatten","f","mapEffect","a","sync","forEachEffect","result","_tag","value","mapFiber","match","onFailure","onSuccess","onFiber","onRuntimeFiber","_never","never","orElse","that","getOrElse","zipWith","exit1","exit2","isSuccess","option1","option2","interruptAsFiber","asVoid","orElseEither","left","right","parseMs","milliseconds","roundTowardsZero","Math","floor","ceil","days","hours","minutes","seconds","microseconds","nanoseconds","renderStatus","isDone","isRunning","isInterruptible","interruptible","pretty","currentTimeMillis","now","time","lifeMsg","waitMsg","isSuspended","ids","blockingOn","size","Array","from","statusMsg","unsafeRoots","globalScope","roots","void_","currentFiberURI","getCurrentFiber","fromNullable","globalThis"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9105, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9111, "column": 0}, "map": {"version":3,"file":"logger.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/logger.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport * as Context from \"../Context.js\"\nimport * as FiberRefs from \"../FiberRefs.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { constVoid, dual, pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as HashMap from \"../HashMap.js\"\nimport * as Inspectable from \"../Inspectable.js\"\nimport * as List from \"../List.js\"\nimport type * as Logger from \"../Logger.js\"\nimport type * as LogLevel from \"../LogLevel.js\"\nimport * as LogSpan from \"../LogSpan.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport * as Cause from \"./cause.js\"\nimport * as defaultServices from \"./defaultServices.js\"\nimport { consoleTag } from \"./defaultServices/console.js\"\nimport * as _fiberId from \"./fiberId.js\"\n\n/** @internal */\nconst LoggerSymbolKey = \"effect/Logger\"\n\n/** @internal */\nexport const LoggerTypeId: Logger.LoggerTypeId = Symbol.for(\n  LoggerSymbolKey\n) as Logger.LoggerTypeId\n\nconst loggerVariance = {\n  /* c8 ignore next */\n  _Message: (_: unknown) => _,\n  /* c8 ignore next */\n  _Output: (_: never) => _\n}\n\n/** @internal */\nexport const makeLogger = <Message, Output>(\n  log: (options: Logger.Logger.Options<Message>) => Output\n): Logger.Logger<Message, Output> => ({\n  [LoggerTypeId]: loggerVariance,\n  log,\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n})\n\n/** @internal */\nexport const mapInput = dual<\n  <Message, Message2>(\n    f: (message: Message2) => Message\n  ) => <Output>(self: Logger.Logger<Message, Output>) => Logger.Logger<Message2, Output>,\n  <Output, Message, Message2>(\n    self: Logger.Logger<Message, Output>,\n    f: (message: Message2) => Message\n  ) => Logger.Logger<Message2, Output>\n>(2, (self, f) =>\n  makeLogger(\n    (options) => self.log({ ...options, message: f(options.message) })\n  ))\n\n/** @internal */\nexport const mapInputOptions = dual<\n  <Message, Message2>(\n    f: (options: Logger.Logger.Options<Message2>) => Logger.Logger.Options<Message>\n  ) => <Output>(self: Logger.Logger<Message, Output>) => Logger.Logger<Message2, Output>,\n  <Output, Message, Message2>(\n    self: Logger.Logger<Message, Output>,\n    f: (options: Logger.Logger.Options<Message2>) => Logger.Logger.Options<Message>\n  ) => Logger.Logger<Message2, Output>\n>(2, (self, f) => makeLogger((options) => self.log(f(options))))\n\n/** @internal */\nexport const filterLogLevel = dual<\n  (\n    f: (logLevel: LogLevel.LogLevel) => boolean\n  ) => <Message, Output>(self: Logger.Logger<Message, Output>) => Logger.Logger<Message, Option.Option<Output>>,\n  <Message, Output>(\n    self: Logger.Logger<Message, Output>,\n    f: (logLevel: LogLevel.LogLevel) => boolean\n  ) => Logger.Logger<Message, Option.Option<Output>>\n>(2, (self, f) =>\n  makeLogger((options) =>\n    f(options.logLevel)\n      ? Option.some(self.log(options))\n      : Option.none()\n  ))\n\n/** @internal */\nexport const map = dual<\n  <Output, Output2>(\n    f: (output: Output) => Output2\n  ) => <Message>(self: Logger.Logger<Message, Output>) => Logger.Logger<Message, Output2>,\n  <Message, Output, Output2>(\n    self: Logger.Logger<Message, Output>,\n    f: (output: Output) => Output2\n  ) => Logger.Logger<Message, Output2>\n>(2, (self, f) => makeLogger((options) => f(self.log(options))))\n\n/** @internal */\nexport const none: Logger.Logger<unknown, void> = {\n  [LoggerTypeId]: loggerVariance,\n  log: constVoid,\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n} as Logger.Logger<unknown, void>\n\n/** @internal */\nexport const simple = <A, B>(log: (a: A) => B): Logger.Logger<A, B> => ({\n  [LoggerTypeId]: loggerVariance,\n  log: ({ message }) => log(message),\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n})\n\n/** @internal */\nexport const succeed = <A>(value: A): Logger.Logger<unknown, A> => {\n  return simple(() => value)\n}\n\n/** @internal */\nexport const sync = <A>(evaluate: LazyArg<A>): Logger.Logger<unknown, A> => {\n  return simple(evaluate)\n}\n\n/** @internal */\nexport const zip = dual<\n  <Message2, Output2>(\n    that: Logger.Logger<Message2, Output2>\n  ) => <Message, Output>(\n    self: Logger.Logger<Message, Output>\n  ) => Logger.Logger<Message & Message2, [Output, Output2]>,\n  <Message, Output, Message2, Output2>(\n    self: Logger.Logger<Message, Output>,\n    that: Logger.Logger<Message2, Output2>\n  ) => Logger.Logger<Message & Message2, [Output, Output2]>\n>(2, (self, that) => makeLogger((options) => [self.log(options), that.log(options)]))\n\n/** @internal */\nexport const zipLeft = dual<\n  <Message2, Output2>(\n    that: Logger.Logger<Message2, Output2>\n  ) => <Message, Output>(\n    self: Logger.Logger<Message, Output>\n  ) => Logger.Logger<Message & Message2, Output>,\n  <Message, Output, Message2, Output2>(\n    self: Logger.Logger<Message, Output>,\n    that: Logger.Logger<Message2, Output2>\n  ) => Logger.Logger<Message & Message2, Output>\n>(2, (self, that) => map(zip(self, that), (tuple) => tuple[0]))\n\n/** @internal */\nexport const zipRight = dual<\n  <Message2, Output2>(\n    that: Logger.Logger<Message2, Output2>\n  ) => <Message, Output>(\n    self: Logger.Logger<Message, Output>\n  ) => Logger.Logger<Message & Message2, Output2>,\n  <Message, Output, Message2, Output2>(\n    self: Logger.Logger<Message, Output>,\n    that: Logger.Logger<Message2, Output2>\n  ) => Logger.Logger<Message & Message2, Output2>\n>(2, (self, that) => map(zip(self, that), (tuple) => tuple[1]))\n\n/** @internal */\nexport const stringLogger: Logger.Logger<unknown, string> = makeLogger(\n  ({ annotations, cause, date, fiberId, logLevel, message, spans }) => {\n    const nowMillis = date.getTime()\n\n    const outputArray = [\n      `timestamp=${date.toISOString()}`,\n      `level=${logLevel.label}`,\n      `fiber=${_fiberId.threadName(fiberId)}`\n    ]\n\n    let output = outputArray.join(\" \")\n\n    const messageArr = Arr.ensure(message)\n    for (let i = 0; i < messageArr.length; i++) {\n      const stringMessage = Inspectable.toStringUnknown(messageArr[i])\n      if (stringMessage.length > 0) {\n        output = output + \" message=\"\n        output = appendQuoted(stringMessage, output)\n      }\n    }\n\n    if (cause != null && cause._tag !== \"Empty\") {\n      output = output + \" cause=\"\n      output = appendQuoted(Cause.pretty(cause, { renderErrorCause: true }), output)\n    }\n\n    if (List.isCons(spans)) {\n      output = output + \" \"\n\n      let first = true\n      for (const span of spans) {\n        if (first) {\n          first = false\n        } else {\n          output = output + \" \"\n        }\n        output = output + pipe(span, LogSpan.render(nowMillis))\n      }\n    }\n\n    if (HashMap.size(annotations) > 0) {\n      output = output + \" \"\n\n      let first = true\n      for (const [key, value] of annotations) {\n        if (first) {\n          first = false\n        } else {\n          output = output + \" \"\n        }\n        output = output + filterKeyName(key)\n        output = output + \"=\"\n        output = appendQuoted(Inspectable.toStringUnknown(value), output)\n      }\n    }\n\n    return output\n  }\n)\n\n/** @internal */\nconst escapeDoubleQuotes = (str: string) => `\"${str.replace(/\\\\([\\s\\S])|(\")/g, \"\\\\$1$2\")}\"`\n\nconst textOnly = /^[^\\s\"=]+$/\n\n/** @internal */\nconst appendQuoted = (label: string, output: string): string =>\n  output + (label.match(textOnly) ? label : escapeDoubleQuotes(label))\n\n/** @internal */\nexport const logfmtLogger = makeLogger<unknown, string>(\n  ({ annotations, cause, date, fiberId, logLevel, message, spans }) => {\n    const nowMillis = date.getTime()\n\n    const outputArray = [\n      `timestamp=${date.toISOString()}`,\n      `level=${logLevel.label}`,\n      `fiber=${_fiberId.threadName(fiberId)}`\n    ]\n\n    let output = outputArray.join(\" \")\n\n    const messageArr = Arr.ensure(message)\n    for (let i = 0; i < messageArr.length; i++) {\n      const stringMessage = Inspectable.toStringUnknown(messageArr[i], 0)\n      if (stringMessage.length > 0) {\n        output = output + \" message=\"\n        output = appendQuotedLogfmt(stringMessage, output)\n      }\n    }\n\n    if (cause != null && cause._tag !== \"Empty\") {\n      output = output + \" cause=\"\n      output = appendQuotedLogfmt(Cause.pretty(cause, { renderErrorCause: true }), output)\n    }\n\n    if (List.isCons(spans)) {\n      output = output + \" \"\n\n      let first = true\n      for (const span of spans) {\n        if (first) {\n          first = false\n        } else {\n          output = output + \" \"\n        }\n        output = output + pipe(span, renderLogSpanLogfmt(nowMillis))\n      }\n    }\n\n    if (HashMap.size(annotations) > 0) {\n      output = output + \" \"\n\n      let first = true\n      for (const [key, value] of annotations) {\n        if (first) {\n          first = false\n        } else {\n          output = output + \" \"\n        }\n        output = output + filterKeyName(key)\n        output = output + \"=\"\n        output = appendQuotedLogfmt(Inspectable.toStringUnknown(value, 0), output)\n      }\n    }\n\n    return output\n  }\n)\n\n/** @internal */\nexport const structuredLogger = makeLogger<unknown, {\n  readonly logLevel: string\n  readonly fiberId: string\n  readonly timestamp: string\n  readonly message: unknown\n  readonly cause: string | undefined\n  readonly annotations: Record<string, unknown>\n  readonly spans: Record<string, number>\n}>(\n  ({ annotations, cause, date, fiberId, logLevel, message, spans }) => {\n    const now = date.getTime()\n    const annotationsObj: Record<string, unknown> = {}\n    const spansObj: Record<string, number> = {}\n\n    if (HashMap.size(annotations) > 0) {\n      for (const [k, v] of annotations) {\n        annotationsObj[k] = structuredMessage(v)\n      }\n    }\n\n    if (List.isCons(spans)) {\n      for (const span of spans) {\n        spansObj[span.label] = now - span.startTime\n      }\n    }\n\n    const messageArr = Arr.ensure(message)\n    return {\n      message: messageArr.length === 1 ? structuredMessage(messageArr[0]) : messageArr.map(structuredMessage),\n      logLevel: logLevel.label,\n      timestamp: date.toISOString(),\n      cause: Cause.isEmpty(cause) ? undefined : Cause.pretty(cause, { renderErrorCause: true }),\n      annotations: annotationsObj,\n      spans: spansObj,\n      fiberId: _fiberId.threadName(fiberId)\n    }\n  }\n)\n\nexport const structuredMessage = (u: unknown): unknown => {\n  switch (typeof u) {\n    case \"bigint\":\n    case \"function\":\n    case \"symbol\": {\n      return String(u)\n    }\n    default: {\n      return Inspectable.toJSON(u)\n    }\n  }\n}\n\n/** @internal */\nexport const jsonLogger = map(structuredLogger, Inspectable.stringifyCircular)\n\n/** @internal */\nconst filterKeyName = (key: string) => key.replace(/[\\s=\"]/g, \"_\")\n\n/** @internal */\nconst escapeDoubleQuotesLogfmt = (str: string) => JSON.stringify(str)\n\n/** @internal */\nconst appendQuotedLogfmt = (label: string, output: string): string =>\n  output + (label.match(textOnly) ? label : escapeDoubleQuotesLogfmt(label))\n\n/** @internal */\nconst renderLogSpanLogfmt = (now: number) => (self: LogSpan.LogSpan): string => {\n  const label = filterKeyName(self.label)\n  return `${label}=${now - self.startTime}ms`\n}\n\n/** @internal */\nexport const isLogger = (u: unknown): u is Logger.Logger<unknown, unknown> => {\n  return typeof u === \"object\" && u != null && LoggerTypeId in u\n}\n\nconst withColor = (text: string, ...colors: ReadonlyArray<string>) => {\n  let out = \"\"\n  for (let i = 0; i < colors.length; i++) {\n    out += `\\x1b[${colors[i]}m`\n  }\n  return out + text + \"\\x1b[0m\"\n}\nconst withColorNoop = (text: string, ..._colors: ReadonlyArray<string>) => text\nconst colors = {\n  bold: \"1\",\n  red: \"31\",\n  green: \"32\",\n  yellow: \"33\",\n  blue: \"34\",\n  cyan: \"36\",\n  white: \"37\",\n  gray: \"90\",\n  black: \"30\",\n  bgBrightRed: \"101\"\n} as const\n\nconst logLevelColors: Record<LogLevel.LogLevel[\"_tag\"], ReadonlyArray<string>> = {\n  None: [],\n  All: [],\n  Trace: [colors.gray],\n  Debug: [colors.blue],\n  Info: [colors.green],\n  Warning: [colors.yellow],\n  Error: [colors.red],\n  Fatal: [colors.bgBrightRed, colors.black]\n}\nconst logLevelStyle: Record<LogLevel.LogLevel[\"_tag\"], string> = {\n  None: \"\",\n  All: \"\",\n  Trace: \"color:gray\",\n  Debug: \"color:blue\",\n  Info: \"color:green\",\n  Warning: \"color:orange\",\n  Error: \"color:red\",\n  Fatal: \"background-color:red;color:white\"\n}\n\nconst defaultDateFormat = (date: Date): string =>\n  `${date.getHours().toString().padStart(2, \"0\")}:${date.getMinutes().toString().padStart(2, \"0\")}:${\n    date.getSeconds().toString().padStart(2, \"0\")\n  }.${date.getMilliseconds().toString().padStart(3, \"0\")}`\n\nconst hasProcessStdout = typeof process === \"object\" &&\n  process !== null &&\n  typeof process.stdout === \"object\" &&\n  process.stdout !== null\nconst processStdoutIsTTY = hasProcessStdout &&\n  process.stdout.isTTY === true\nconst hasProcessStdoutOrDeno = hasProcessStdout || \"Deno\" in globalThis\n\n/** @internal */\nexport const prettyLogger = (options?: {\n  readonly colors?: \"auto\" | boolean | undefined\n  readonly stderr?: boolean | undefined\n  readonly formatDate?: ((date: Date) => string) | undefined\n  readonly mode?: \"browser\" | \"tty\" | \"auto\" | undefined\n}) => {\n  const mode_ = options?.mode ?? \"auto\"\n  const mode = mode_ === \"auto\" ? (hasProcessStdoutOrDeno ? \"tty\" : \"browser\") : mode_\n  const isBrowser = mode === \"browser\"\n  const showColors = typeof options?.colors === \"boolean\" ? options.colors : processStdoutIsTTY || isBrowser\n  const formatDate = options?.formatDate ?? defaultDateFormat\n  return isBrowser\n    ? prettyLoggerBrowser({ colors: showColors, formatDate })\n    : prettyLoggerTty({ colors: showColors, formatDate, stderr: options?.stderr === true })\n}\n\nconst prettyLoggerTty = (options: {\n  readonly colors: boolean\n  readonly stderr: boolean\n  readonly formatDate: (date: Date) => string\n}) => {\n  const processIsBun = typeof process === \"object\" && \"isBun\" in process && process.isBun === true\n  const color = options.colors && processStdoutIsTTY ? withColor : withColorNoop\n  return makeLogger<unknown, void>(\n    ({ annotations, cause, context, date, fiberId, logLevel, message: message_, spans }) => {\n      const services = FiberRefs.getOrDefault(context, defaultServices.currentServices)\n      const console = Context.get(services, consoleTag).unsafe\n      const log = options.stderr === true ? console.error : console.log\n\n      const message = Arr.ensure(message_)\n\n      let firstLine = color(`[${options.formatDate(date)}]`, colors.white)\n        + ` ${color(logLevel.label, ...logLevelColors[logLevel._tag])}`\n        + ` (${_fiberId.threadName(fiberId)})`\n\n      if (List.isCons(spans)) {\n        const now = date.getTime()\n        const render = renderLogSpanLogfmt(now)\n        for (const span of spans) {\n          firstLine += \" \" + render(span)\n        }\n      }\n\n      firstLine += \":\"\n      let messageIndex = 0\n      if (message.length > 0) {\n        const firstMaybeString = structuredMessage(message[0])\n        if (typeof firstMaybeString === \"string\") {\n          firstLine += \" \" + color(firstMaybeString, colors.bold, colors.cyan)\n          messageIndex++\n        }\n      }\n\n      log(firstLine)\n      if (!processIsBun) console.group()\n\n      if (!Cause.isEmpty(cause)) {\n        log(Cause.pretty(cause, { renderErrorCause: true }))\n      }\n\n      if (messageIndex < message.length) {\n        for (; messageIndex < message.length; messageIndex++) {\n          log(Inspectable.redact(message[messageIndex]))\n        }\n      }\n\n      if (HashMap.size(annotations) > 0) {\n        for (const [key, value] of annotations) {\n          log(color(`${key}:`, colors.bold, colors.white), Inspectable.redact(value))\n        }\n      }\n\n      if (!processIsBun) console.groupEnd()\n    }\n  )\n}\n\nconst prettyLoggerBrowser = (options: {\n  readonly colors: boolean\n  readonly formatDate: (date: Date) => string\n}) => {\n  const color = options.colors ? \"%c\" : \"\"\n  return makeLogger<unknown, void>(\n    ({ annotations, cause, context, date, fiberId, logLevel, message: message_, spans }) => {\n      const services = FiberRefs.getOrDefault(context, defaultServices.currentServices)\n      const console = Context.get(services, consoleTag).unsafe\n      const message = Arr.ensure(message_)\n\n      let firstLine = `${color}[${options.formatDate(date)}]`\n      const firstParams = []\n      if (options.colors) {\n        firstParams.push(\"color:gray\")\n      }\n      firstLine += ` ${color}${logLevel.label}${color} (${_fiberId.threadName(fiberId)})`\n      if (options.colors) {\n        firstParams.push(logLevelStyle[logLevel._tag], \"\")\n      }\n      if (List.isCons(spans)) {\n        const now = date.getTime()\n        const render = renderLogSpanLogfmt(now)\n        for (const span of spans) {\n          firstLine += \" \" + render(span)\n        }\n      }\n\n      firstLine += \":\"\n\n      let messageIndex = 0\n      if (message.length > 0) {\n        const firstMaybeString = structuredMessage(message[0])\n        if (typeof firstMaybeString === \"string\") {\n          firstLine += ` ${color}${firstMaybeString}`\n          if (options.colors) {\n            firstParams.push(\"color:deepskyblue\")\n          }\n          messageIndex++\n        }\n      }\n\n      console.groupCollapsed(firstLine, ...firstParams)\n\n      if (!Cause.isEmpty(cause)) {\n        console.error(Cause.pretty(cause, { renderErrorCause: true }))\n      }\n\n      if (messageIndex < message.length) {\n        for (; messageIndex < message.length; messageIndex++) {\n          console.log(Inspectable.redact(message[messageIndex]))\n        }\n      }\n\n      if (HashMap.size(annotations) > 0) {\n        for (const [key, value] of annotations) {\n          const redacted = Inspectable.redact(value)\n          if (options.colors) {\n            console.log(`%c${key}:`, \"color:gray\", redacted)\n          } else {\n            console.log(`${key}:`, redacted)\n          }\n        }\n      }\n\n      console.groupEnd()\n    }\n  )\n}\n\n/** @internal */\nexport const prettyLoggerDefault = globalValue(\"effect/Logger/prettyLoggerDefault\", () => prettyLogger())\n"],"names":["Arr","Context","FiberRefs","constVoid","dual","pipe","globalValue","HashMap","Inspectable","List","LogSpan","Option","pipeArguments","Cause","defaultServices","consoleTag","_fiberId","LoggerSymbolKey","LoggerTypeId","Symbol","for","loggerVariance","_Message","_","_Output","makeLogger","log","arguments","mapInput","self","f","options","message","mapInputOptions","filterLogLevel","logLevel","some","none","map","simple","succeed","value","sync","evaluate","zip","that","zipLeft","tuple","zipRight","stringLogger","annotations","cause","date","fiberId","spans","nowMillis","getTime","outputArray","toISOString","label","threadName","output","join","messageArr","ensure","i","length","stringMessage","toStringUnknown","appendQuoted","_tag","pretty","renderErrorCause","isCons","first","span","render","size","key","filterKeyName","escapeDoubleQuotes","str","replace","textOnly","match","logfmtLogger","appendQuotedLogfmt","renderLogSpanLogfmt","structuredLogger","now","annotationsObj","spansObj","k","v","structuredMessage","startTime","timestamp","isEmpty","undefined","u","String","toJSON","jsonLogger","stringifyCircular","escapeDoubleQuotesLogfmt","JSON","stringify","isLogger","withColor","text","colors","out","withColorNoop","_colors","bold","red","green","yellow","blue","cyan","white","gray","black","bgBrightRed","logLevelColors","None","All","Trace","Debug","Info","Warning","Error","Fatal","logLevelStyle","defaultDateFormat","getHours","toString","padStart","getMinutes","getSeconds","getMilliseconds","hasProcessStdout","process","stdout","processStdoutIsTTY","isTTY","hasProcessStdoutOrDeno","globalThis","prettyLogger","mode_","mode","isBrowser","showColors","formatDate","prettyLoggerBrowser","prettyLoggerTty","stderr","processIsBun","isBun","color","context","message_","services","getOrDefault","currentServices","console","get","unsafe","error","firstLine","messageIndex","firstMaybeString","group","redact","groupEnd","firstParams","push","groupCollapsed","redacted","prettyLoggerDefault"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9541, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9547, "column": 0}, "map": {"version":3,"file":"concurrency.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/concurrency.ts"],"sourcesContent":["import type { Effect } from \"../Effect.js\"\nimport type { Concurrency } from \"../Types.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nexport const match = <A, E, R>(\n  concurrency: Concurrency | undefined,\n  sequential: () => Effect<A, E, R>,\n  unbounded: () => Effect<A, E, R>,\n  bounded: (limit: number) => Effect<A, E, R>\n): Effect<A, E, R> => {\n  switch (concurrency) {\n    case undefined:\n      return sequential()\n    case \"unbounded\":\n      return unbounded()\n    case \"inherit\":\n      return core.fiberRefGetWith(\n        core.currentConcurrency,\n        (concurrency) =>\n          concurrency === \"unbounded\" ?\n            unbounded() :\n            concurrency > 1 ?\n            bounded(concurrency) :\n            sequential()\n      )\n    default:\n      return concurrency > 1 ? bounded(concurrency) : sequential()\n  }\n}\n\n/** @internal */\nexport const matchSimple = <A, E, R>(\n  concurrency: Concurrency | undefined,\n  sequential: () => Effect<A, E, R>,\n  concurrent: () => Effect<A, E, R>\n): Effect<A, E, R> => {\n  switch (concurrency) {\n    case undefined:\n      return sequential()\n    case \"unbounded\":\n      return concurrent()\n    case \"inherit\":\n      return core.fiberRefGetWith(\n        core.currentConcurrency,\n        (concurrency) =>\n          concurrency === \"unbounded\" || concurrency > 1 ?\n            concurrent() :\n            sequential()\n      )\n    default:\n      return concurrency > 1 ? concurrent() : sequential()\n  }\n}\n"],"names":["core","match","concurrency","sequential","unbounded","bounded","undefined","fiberRefGetWith","currentConcurrency","matchSimple","concurrent"],"mappings":";;;;AAEA,OAAO,KAAKA,IAAI,MAAM,WAAW;;AAG1B,MAAMC,KAAK,GAAGA,CACnBC,WAAoC,EACpCC,UAAiC,EACjCC,SAAgC,EAChCC,OAA2C,KACxB;IACnB,OAAQH,WAAW;QACjB,KAAKI,SAAS;YACZ,OAAOH,UAAU,EAAE;QACrB,KAAK,WAAW;YACd,OAAOC,SAAS,EAAE;QACpB,KAAK,SAAS;YACZ,OAAOJ,IAAI,wJAACO,eAAe,CACzBP,IAAI,wJAACQ,kBAAkB,GACtBN,WAAW,GACVA,WAAW,KAAK,WAAW,GACzBE,SAAS,EAAE,GACXF,WAAW,GAAG,CAAC,GACfG,OAAO,CAACH,WAAW,CAAC,GACpBC,UAAU,EAAE,CACjB;QACH;YACE,OAAOD,WAAW,GAAG,CAAC,GAAGG,OAAO,CAACH,WAAW,CAAC,GAAGC,UAAU,EAAE;IAChE;AACF,CAAC;AAGM,MAAMM,WAAW,GAAGA,CACzBP,WAAoC,EACpCC,UAAiC,EACjCO,UAAiC,KACd;IACnB,OAAQR,WAAW;QACjB,KAAKI,SAAS;YACZ,OAAOH,UAAU,EAAE;QACrB,KAAK,WAAW;YACd,OAAOO,UAAU,EAAE;QACrB,KAAK,SAAS;YACZ,OAAOV,IAAI,wJAACO,eAAe,CACzBP,IAAI,wJAACQ,kBAAkB,GACtBN,WAAW,GACVA,WAAW,KAAK,WAAW,IAAIA,WAAW,GAAG,CAAC,GAC5CQ,UAAU,EAAE,GACZP,UAAU,EAAE,CACjB;QACH;YACE,OAAOD,WAAW,GAAG,CAAC,GAAGQ,UAAU,EAAE,GAAGP,UAAU,EAAE;IACxD;AACF,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9577, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9583, "column": 0}, "map": {"version":3,"file":"executionStrategy.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/executionStrategy.ts"],"sourcesContent":["import type * as ExecutionStrategy from \"../ExecutionStrategy.js\"\nimport { dual } from \"../Function.js\"\nimport type { LazyArg } from \"../Function.js\"\n\n/** @internal */\nexport const OP_SEQUENTIAL = \"Sequential\" as const\n\n/** @internal */\nexport type OP_SEQUENTIAL = typeof OP_SEQUENTIAL\n\n/** @internal */\nexport const OP_PARALLEL = \"Parallel\" as const\n\n/** @internal */\nexport type OP_PARALLEL = typeof OP_PARALLEL\n\n/** @internal */\nexport const OP_PARALLEL_N = \"ParallelN\" as const\n\n/** @internal */\nexport type OP_PARALLEL_N = typeof OP_PARALLEL_N\n\n/** @internal */\nexport const sequential: ExecutionStrategy.ExecutionStrategy = { _tag: OP_SEQUENTIAL }\n\n/** @internal */\nexport const parallel: ExecutionStrategy.ExecutionStrategy = { _tag: OP_PARALLEL }\n\n/** @internal */\nexport const parallelN = (parallelism: number): ExecutionStrategy.ExecutionStrategy => ({\n  _tag: OP_PARALLEL_N,\n  parallelism\n})\n\n/** @internal */\nexport const isSequential = (self: ExecutionStrategy.ExecutionStrategy): self is ExecutionStrategy.Sequential =>\n  self._tag === OP_SEQUENTIAL\n\n/** @internal */\nexport const isParallel = (self: ExecutionStrategy.ExecutionStrategy): self is ExecutionStrategy.Parallel =>\n  self._tag === OP_PARALLEL\n\n/** @internal */\nexport const isParallelN = (self: ExecutionStrategy.ExecutionStrategy): self is ExecutionStrategy.ParallelN =>\n  self._tag === OP_PARALLEL_N\n\n/** @internal */\nexport const match = dual<\n  <A>(options: {\n    readonly onSequential: LazyArg<A>\n    readonly onParallel: LazyArg<A>\n    readonly onParallelN: (n: number) => A\n  }) => (self: ExecutionStrategy.ExecutionStrategy) => A,\n  <A>(\n    self: ExecutionStrategy.ExecutionStrategy,\n    options: {\n      readonly onSequential: LazyArg<A>\n      readonly onParallel: LazyArg<A>\n      readonly onParallelN: (n: number) => A\n    }\n  ) => A\n>(2, (self, options) => {\n  switch (self._tag) {\n    case OP_SEQUENTIAL: {\n      return options.onSequential()\n    }\n    case OP_PARALLEL: {\n      return options.onParallel()\n    }\n    case OP_PARALLEL_N: {\n      return options.onParallelN(self.parallelism)\n    }\n  }\n})\n"],"names":["dual","OP_SEQUENTIAL","OP_PARALLEL","OP_PARALLEL_N","sequential","_tag","parallel","parallelN","parallelism","isSequential","self","isParallel","isParallelN","match","options","onSequential","onParallel","onParallelN"],"mappings":";;;;;;;;;;;;AACA,SAASA,IAAI,QAAQ,gBAAgB;;AAI9B,MAAMC,aAAa,GAAG,YAAqB;AAM3C,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,aAAa,GAAG,WAAoB;AAM1C,MAAMC,UAAU,GAAwC;IAAEC,IAAI,EAAEJ;AAAa,CAAE;AAG/E,MAAMK,QAAQ,GAAwC;IAAED,IAAI,EAAEH;AAAW,CAAE;AAG3E,MAAMK,SAAS,IAAIC,WAAmB,GAAA,CAA2C;QACtFH,IAAI,EAAEF,aAAa;QACnBK;KACD,CAAC;AAGK,MAAMC,YAAY,IAAIC,IAAyC,GACpEA,IAAI,CAACL,IAAI,KAAKJ,aAAa;AAGtB,MAAMU,UAAU,IAAID,IAAyC,GAClEA,IAAI,CAACL,IAAI,KAAKH,WAAW;AAGpB,MAAMU,WAAW,IAAIF,IAAyC,GACnEA,IAAI,CAACL,IAAI,KAAKF,aAAa;AAGtB,MAAMU,KAAK,GAAA,WAAA,2JAAGb,OAAAA,AAAI,EAcvB,CAAC,EAAE,CAACU,IAAI,EAAEI,OAAO,KAAI;IACrB,OAAQJ,IAAI,CAACL,IAAI;QACf,KAAKJ,aAAa;YAAE;gBAClB,OAAOa,OAAO,CAACC,YAAY,EAAE;YAC/B;QACA,KAAKb,WAAW;YAAE;gBAChB,OAAOY,OAAO,CAACE,UAAU,EAAE;YAC7B;QACA,KAAKb,aAAa;YAAE;gBAClB,OAAOW,OAAO,CAACG,WAAW,CAACP,IAAI,CAACF,WAAW,CAAC;YAC9C;IACF;AACF,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9629, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9635, "column": 0}, "map": {"version":3,"file":"iterator.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/redBlackTree/iterator.ts"],"sourcesContent":["import * as Arr from \"../../Array.js\"\nimport * as Option from \"../../Option.js\"\nimport type * as RBT from \"../../RedBlackTree.js\"\nimport type { RedBlackTreeImpl } from \"../redBlackTree.js\"\nimport type * as Node from \"./node.js\"\n\n/** @internal */\nexport const Direction = {\n  Forward: 0 as RBT.RedBlackTree.Direction,\n  Backward: 1 << 0 as RBT.RedBlackTree.Direction\n} as const\n\n/** @internal */\nexport class RedBlackTreeIterator<in out K, out V> implements Iterator<[K, V]> {\n  private count = 0\n\n  constructor(\n    readonly self: RBT.RedBlackTree<K, V>,\n    readonly stack: Array<Node.Node<K, V>>,\n    readonly direction: RBT.RedBlackTree.Direction\n  ) {}\n\n  /**\n   * Clones the iterator\n   */\n  clone(): RedBlackTreeIterator<K, V> {\n    return new RedBlackTreeIterator(this.self, this.stack.slice(), this.direction)\n  }\n\n  /**\n   * Reverse the traversal direction\n   */\n  reversed(): RedBlackTreeIterator<K, V> {\n    return new RedBlackTreeIterator(\n      this.self,\n      this.stack.slice(),\n      this.direction === Direction.Forward ? Direction.Backward : Direction.Forward\n    )\n  }\n\n  /**\n   * Iterator next\n   */\n  next(): IteratorResult<[K, V], number> {\n    const entry = this.entry\n    this.count++\n    if (this.direction === Direction.Forward) {\n      this.moveNext()\n    } else {\n      this.movePrev()\n    }\n    switch (entry._tag) {\n      case \"None\": {\n        return { done: true, value: this.count }\n      }\n      case \"Some\": {\n        return { done: false, value: entry.value }\n      }\n    }\n  }\n\n  /**\n   * Returns the key\n   */\n  get key(): Option.Option<K> {\n    if (this.stack.length > 0) {\n      return Option.some(this.stack[this.stack.length - 1]!.key)\n    }\n    return Option.none()\n  }\n\n  /**\n   * Returns the value\n   */\n  get value(): Option.Option<V> {\n    if (this.stack.length > 0) {\n      return Option.some(this.stack[this.stack.length - 1]!.value)\n    }\n    return Option.none()\n  }\n\n  /**\n   * Returns the key\n   */\n  get entry(): Option.Option<[K, V]> {\n    return Option.map(Arr.last(this.stack), (node) => [node.key, node.value])\n  }\n\n  /**\n   * Returns the position of this iterator in the sorted list\n   */\n  get index(): number {\n    let idx = 0\n    const stack = this.stack\n    if (stack.length === 0) {\n      const r = (this.self as RedBlackTreeImpl<K, V>)._root\n      if (r != null) {\n        return r.count\n      }\n      return 0\n    } else if (stack[stack.length - 1]!.left != null) {\n      idx = stack[stack.length - 1]!.left!.count\n    }\n    for (let s = stack.length - 2; s >= 0; --s) {\n      if (stack[s + 1] === stack[s]!.right) {\n        ;++idx\n        if (stack[s]!.left != null) {\n          idx += stack[s]!.left!.count\n        }\n      }\n    }\n    return idx\n  }\n\n  /**\n   * Advances iterator to next element in list\n   */\n  moveNext() {\n    const stack = this.stack\n    if (stack.length === 0) {\n      return\n    }\n    let n: Node.Node<K, V> | undefined = stack[stack.length - 1]!\n    if (n.right != null) {\n      n = n.right\n      while (n != null) {\n        stack.push(n)\n        n = n.left\n      }\n    } else {\n      stack.pop()\n      while (stack.length > 0 && stack[stack.length - 1]!.right === n) {\n        n = stack[stack.length - 1]\n        stack.pop()\n      }\n    }\n  }\n\n  /**\n   * Checks if there is a next element\n   */\n  get hasNext() {\n    const stack = this.stack\n    if (stack.length === 0) {\n      return false\n    }\n    if (stack[stack.length - 1]!.right != null) {\n      return true\n    }\n    for (let s = stack.length - 1; s > 0; --s) {\n      if (stack[s - 1]!.left === stack[s]) {\n        return true\n      }\n    }\n    return false\n  }\n\n  /**\n   * Advances iterator to previous element in list\n   */\n  movePrev() {\n    const stack = this.stack\n    if (stack.length === 0) {\n      return\n    }\n    let n: Node.Node<K, V> | undefined = stack[stack.length - 1]\n    if (n != null && n.left != null) {\n      n = n.left\n      while (n != null) {\n        stack.push(n)\n        n = n.right\n      }\n    } else {\n      stack.pop()\n      while (stack.length > 0 && stack[stack.length - 1]!.left === n) {\n        n = stack[stack.length - 1]\n        stack.pop()\n      }\n    }\n  }\n\n  /**\n   * Checks if there is a previous element\n   */\n  get hasPrev() {\n    const stack = this.stack\n    if (stack.length === 0) {\n      return false\n    }\n    if (stack[stack.length - 1]!.left != null) {\n      return true\n    }\n    for (let s = stack.length - 1; s > 0; --s) {\n      if (stack[s - 1]!.right === stack[s]) {\n        return true\n      }\n    }\n    return false\n  }\n}\n"],"names":["Arr","Option","Direction","Forward","Backward","RedBlackTreeIterator","self","stack","direction","count","constructor","clone","slice","reversed","next","entry","moveNext","movePrev","_tag","done","value","key","length","some","none","map","last","node","index","idx","r","_root","left","s","right","n","push","pop","hasNext","hasPrev"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 9822, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9828, "column": 0}, "map": {"version":3,"file":"node.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/redBlackTree/node.ts"],"sourcesContent":["/** @internal */\nexport const Color = {\n  Red: 0 as Node.Color,\n  Black: 1 << 0 as Node.Color\n} as const\n\nexport declare namespace Node {\n  export type Color = number & {\n    readonly Color: unique symbol\n  }\n}\n\nexport interface Node<out K, out V> {\n  color: Node.Color\n  key: K\n  value: V\n  left: Node<K, V> | undefined\n  right: Node<K, V> | undefined\n  count: number\n}\n\n/** @internal */\nexport const clone = <K, V>({\n  color,\n  count,\n  key,\n  left,\n  right,\n  value\n}: Node<K, V>) => ({\n  color,\n  key,\n  value,\n  left,\n  right,\n  count\n})\n\n/** @internal */\nexport function swap<K, V>(n: Node<K, V>, v: Node<K, V>) {\n  n.key = v.key\n  n.value = v.value\n  n.left = v.left\n  n.right = v.right\n  n.color = v.color\n  n.count = v.count\n}\n\n/** @internal */\nexport const repaint = <K, V>({\n  count,\n  key,\n  left,\n  right,\n  value\n}: Node<K, V>, color: Node.Color) => ({\n  color,\n  key,\n  value,\n  left,\n  right,\n  count\n})\n\n/** @internal */\nexport const recount = <K, V>(node: Node<K, V>) => {\n  node.count = 1 + (node.left?.count ?? 0) + (node.right?.count ?? 0)\n}\n"],"names":["Color","Red","Black","clone","color","count","key","left","right","value","swap","n","v","repaint","recount","node"],"mappings":"AAAA,cAAA;;;;;;;AACO,MAAMA,KAAK,GAAG;IACnBC,GAAG,EAAE,CAAe;IACpBC,KAAK,EAAE,CAAC,IAAI;CACJ;AAkBH,MAAMC,KAAK,GAAGA,CAAO,EAC1BC,KAAK,EACLC,KAAK,EACLC,GAAG,EACHC,IAAI,EACJC,KAAK,EACLC,KAAAA,EACW,GAAA,CAAM;QACjBL,KAAK;QACLE,GAAG;QACHG,KAAK;QACLF,IAAI;QACJC,KAAK;QACLH;KACD,CAAC;AAGI,SAAUK,IAAIA,CAAOC,CAAa,EAAEC,CAAa;IACrDD,CAAC,CAACL,GAAG,GAAGM,CAAC,CAACN,GAAG;IACbK,CAAC,CAACF,KAAK,GAAGG,CAAC,CAACH,KAAK;IACjBE,CAAC,CAACJ,IAAI,GAAGK,CAAC,CAACL,IAAI;IACfI,CAAC,CAACH,KAAK,GAAGI,CAAC,CAACJ,KAAK;IACjBG,CAAC,CAACP,KAAK,GAAGQ,CAAC,CAACR,KAAK;IACjBO,CAAC,CAACN,KAAK,GAAGO,CAAC,CAACP,KAAK;AACnB;AAGO,MAAMQ,OAAO,GAAGA,CAAO,EAC5BR,KAAK,EACLC,GAAG,EACHC,IAAI,EACJC,KAAK,EACLC,KAAAA,EACW,EAAEL,KAAiB,GAAA,CAAM;QACpCA,KAAK;QACLE,GAAG;QACHG,KAAK;QACLF,IAAI;QACJC,KAAK;QACLH;KACD,CAAC;AAGK,MAAMS,OAAO,IAAUC,IAAgB,IAAI;IAChDA,IAAI,CAACV,KAAK,GAAG,CAAC,GAAA,CAAIU,IAAI,CAACR,IAAI,EAAEF,KAAK,IAAI,CAAC,CAAC,GAAA,CAAIU,IAAI,CAACP,KAAK,EAAEH,KAAK,IAAI,CAAC,CAAC;AACrE,CAAC","ignoreList":[0]}},
    {"offset": {"line": 9866, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 9872, "column": 0}, "map": {"version":3,"file":"redBlackTree.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/redBlackTree.ts"],"sourcesContent":["import * as Chunk from \"../Chunk.js\"\nimport * as Equal from \"../Equal.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport { format, NodeInspectSymbol, toJSON } from \"../Inspectable.js\"\nimport * as Option from \"../Option.js\"\nimport type * as Order from \"../Order.js\"\nimport type * as Ordering from \"../Ordering.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as RBT from \"../RedBlackTree.js\"\nimport { Direction, RedBlackTreeIterator } from \"./redBlackTree/iterator.js\"\nimport * as Node from \"./redBlackTree/node.js\"\nimport * as Stack from \"./stack.js\"\n\nconst RedBlackTreeSymbolKey = \"effect/RedBlackTree\"\n\n/** @internal */\nexport const RedBlackTreeTypeId: RBT.TypeId = Symbol.for(RedBlackTreeSymbolKey) as RBT.TypeId\n\n/** @internal */\nexport interface RedBlackTreeImpl<in out K, out V> extends RBT.RedBlackTree<K, V> {\n  readonly _ord: Order.Order<K>\n  readonly _root: Node.Node<K, V> | undefined\n}\n\nconst redBlackTreeVariance = {\n  /* c8 ignore next */\n  _Key: (_: any) => _,\n  /* c8 ignore next */\n  _Value: (_: never) => _\n}\n\nconst RedBlackTreeProto: RBT.RedBlackTree<unknown, unknown> = {\n  [RedBlackTreeTypeId]: redBlackTreeVariance,\n  [Hash.symbol](this: RBT.RedBlackTree<unknown, unknown>): number {\n    let hash = Hash.hash(RedBlackTreeSymbolKey)\n    for (const item of this) {\n      hash ^= pipe(Hash.hash(item[0]), Hash.combine(Hash.hash(item[1])))\n    }\n    return Hash.cached(this, hash)\n  },\n  [Equal.symbol]<K, V>(this: RedBlackTreeImpl<K, V>, that: unknown): boolean {\n    if (isRedBlackTree(that)) {\n      if ((this._root?.count ?? 0) !== ((that as RedBlackTreeImpl<K, V>)._root?.count ?? 0)) {\n        return false\n      }\n      const entries = Array.from(that)\n      return Array.from(this).every((itemSelf, i) => {\n        const itemThat = entries[i]\n        return Equal.equals(itemSelf[0], itemThat[0]) && Equal.equals(itemSelf[1], itemThat[1])\n      })\n    }\n    return false\n  },\n  [Symbol.iterator]<K, V>(this: RedBlackTreeImpl<K, V>): RedBlackTreeIterator<K, V> {\n    const stack: Array<Node.Node<K, V>> = []\n    let n = this._root\n    while (n != null) {\n      stack.push(n)\n      n = n.left\n    }\n    return new RedBlackTreeIterator(this, stack, Direction.Forward)\n  },\n  toString() {\n    return format(this.toJSON())\n  },\n  toJSON() {\n    return {\n      _id: \"RedBlackTree\",\n      values: Array.from(this).map(toJSON)\n    }\n  },\n  [NodeInspectSymbol]() {\n    return this.toJSON()\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nconst makeImpl = <K, V>(ord: Order.Order<K>, root: Node.Node<K, V> | undefined): RedBlackTreeImpl<K, V> => {\n  const tree = Object.create(RedBlackTreeProto)\n  tree._ord = ord\n  tree._root = root\n  return tree\n}\n\n/** @internal */\nexport const isRedBlackTree: {\n  <K, V>(u: Iterable<readonly [K, V]>): u is RBT.RedBlackTree<K, V>\n  (u: unknown): u is RBT.RedBlackTree<unknown, unknown>\n} = (u: unknown): u is RBT.RedBlackTree<unknown, unknown> => hasProperty(u, RedBlackTreeTypeId)\n\n/** @internal */\nexport const empty = <K, V = never>(ord: Order.Order<K>): RBT.RedBlackTree<K, V> => makeImpl<K, V>(ord, undefined)\n\n/** @internal */\nexport const fromIterable = dual<\n  <B>(ord: Order.Order<B>) => <K extends B, V>(entries: Iterable<readonly [K, V]>) => RBT.RedBlackTree<K, V>,\n  <K extends B, V, B>(entries: Iterable<readonly [K, V]>, ord: Order.Order<B>) => RBT.RedBlackTree<K, V>\n>(2, <K extends B, V, B>(entries: Iterable<readonly [K, V]>, ord: Order.Order<B>) => {\n  let tree = empty<K, V>(ord)\n  for (const [key, value] of entries) {\n    tree = insert(tree, key, value)\n  }\n  return tree\n})\n\n/** @internal */\nexport const make =\n  <K>(ord: Order.Order<K>) =>\n  <Entries extends Array<readonly [K, any]>>(...entries: Entries): RBT.RedBlackTree<\n    K,\n    Entries[number] extends readonly [any, infer V] ? V : never\n  > => {\n    return fromIterable(entries, ord)\n  }\n\n/** @internal */\nexport const atBackwards = dual<\n  (index: number) => <K, V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, index: number) => Iterable<[K, V]>\n>(2, (self, index) => at(self, index, Direction.Backward))\n\n/** @internal */\nexport const atForwards = dual<\n  (index: number) => <K, V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, index: number) => Iterable<[K, V]>\n>(2, (self, index) => at(self, index, Direction.Forward))\n\nconst at = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  index: number,\n  direction: RBT.RedBlackTree.Direction\n): Iterable<[K, V]> => {\n  return {\n    [Symbol.iterator]: () => {\n      if (index < 0) {\n        return new RedBlackTreeIterator(self, [], direction)\n      }\n      let node = (self as RedBlackTreeImpl<K, V>)._root\n      const stack: Array<Node.Node<K, V>> = []\n      while (node !== undefined) {\n        stack.push(node)\n        if (node.left !== undefined) {\n          if (index < node.left.count) {\n            node = node.left\n            continue\n          }\n          index -= node.left.count\n        }\n        if (!index) {\n          return new RedBlackTreeIterator(self, stack, direction)\n        }\n        index -= 1\n        if (node.right !== undefined) {\n          if (index >= node.right.count) {\n            break\n          }\n          node = node.right\n        } else {\n          break\n        }\n      }\n      return new RedBlackTreeIterator(self, [], direction)\n    }\n  }\n}\n\n/** @internal */\nexport const findAll = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Chunk.Chunk<V>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Chunk.Chunk<V>\n>(2, <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => {\n  const stack: Array<Node.Node<K, V>> = []\n  let node = (self as RedBlackTreeImpl<K, V>)._root\n  let result = Chunk.empty<V>()\n  while (node !== undefined || stack.length > 0) {\n    if (node) {\n      stack.push(node)\n      node = node.left\n    } else {\n      const current = stack.pop()!\n      if (Equal.equals(key, current.key)) {\n        result = Chunk.prepend(current.value)(result)\n      }\n      node = current.right\n    }\n  }\n  return result\n})\n\n/** @internal */\nexport const findFirst = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Option.Option<V>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Option.Option<V>\n>(2, <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => {\n  const cmp = (self as RedBlackTreeImpl<K, V>)._ord\n  let node = (self as RedBlackTreeImpl<K, V>)._root\n  while (node !== undefined) {\n    const d = cmp(key, node.key)\n    if (Equal.equals(key, node.key)) {\n      return Option.some(node.value)\n    }\n    if (d <= 0) {\n      node = node.left\n    } else {\n      node = node.right\n    }\n  }\n  return Option.none()\n})\n\n/** @internal */\nexport const first = <K, V>(self: RBT.RedBlackTree<K, V>): Option.Option<[K, V]> => {\n  let node: Node.Node<K, V> | undefined = (self as RedBlackTreeImpl<K, V>)._root\n  let current: Node.Node<K, V> | undefined = (self as RedBlackTreeImpl<K, V>)._root\n  while (node !== undefined) {\n    current = node\n    node = node.left\n  }\n  return current ? Option.some([current.key, current.value]) : Option.none()\n}\n\n/** @internal */\nexport const getAt = dual<\n  (index: number) => <K, V>(self: RBT.RedBlackTree<K, V>) => Option.Option<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, index: number) => Option.Option<[K, V]>\n>(2, <K, V>(self: RBT.RedBlackTree<K, V>, index: number) => {\n  if (index < 0) {\n    return Option.none()\n  }\n  let root = (self as RedBlackTreeImpl<K, V>)._root\n  let node: Node.Node<K, V> | undefined = undefined\n  while (root !== undefined) {\n    node = root\n    if (root.left) {\n      if (index < root.left.count) {\n        root = root.left\n        continue\n      }\n      index -= root.left.count\n    }\n    if (!index) {\n      return Option.some([node.key, node.value])\n    }\n    index -= 1\n    if (root.right) {\n      if (index >= root.right.count) {\n        break\n      }\n      root = root.right\n    } else {\n      break\n    }\n  }\n  return Option.none()\n})\n\n/** @internal */\nexport const getOrder = <K, V>(tree: RBT.RedBlackTree<K, V>): Order.Order<K> => (tree as RedBlackTreeImpl<K, V>)._ord\n\n/** @internal */\nexport const has = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => boolean,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => boolean\n>(2, (self, key) => Option.isSome(findFirst(self, key)))\n\n/** @internal */\nexport const insert = dual<\n  <K, V>(key: K, value: V) => (self: RBT.RedBlackTree<K, V>) => RBT.RedBlackTree<K, V>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K, value: V) => RBT.RedBlackTree<K, V>\n>(3, <K, V>(self: RBT.RedBlackTree<K, V>, key: K, value: V) => {\n  const cmp = (self as RedBlackTreeImpl<K, V>)._ord\n  // Find point to insert new node at\n  let n: Node.Node<K, V> | undefined = (self as RedBlackTreeImpl<K, V>)._root\n  const n_stack: Array<Node.Node<K, V>> = []\n  const d_stack: Array<Ordering.Ordering> = []\n  while (n != null) {\n    const d = cmp(key, n.key)\n    n_stack.push(n)\n    d_stack.push(d)\n    if (d <= 0) {\n      n = n.left\n    } else {\n      n = n.right\n    }\n  }\n  // Rebuild path to leaf node\n  n_stack.push({\n    color: Node.Color.Red,\n    key,\n    value,\n    left: undefined,\n    right: undefined,\n    count: 1\n  })\n  for (let s = n_stack.length - 2; s >= 0; --s) {\n    const n2 = n_stack[s]!\n    if (d_stack[s]! <= 0) {\n      n_stack[s] = {\n        color: n2.color,\n        key: n2.key,\n        value: n2.value,\n        left: n_stack[s + 1],\n        right: n2.right,\n        count: n2.count + 1\n      }\n    } else {\n      n_stack[s] = {\n        color: n2.color,\n        key: n2.key,\n        value: n2.value,\n        left: n2.left,\n        right: n_stack[s + 1],\n        count: n2.count + 1\n      }\n    }\n  }\n  // Rebalance tree using rotations\n  for (let s = n_stack.length - 1; s > 1; --s) {\n    const p = n_stack[s - 1]!\n    const n3 = n_stack[s]!\n    if (p.color === Node.Color.Black || n3.color === Node.Color.Black) {\n      break\n    }\n    const pp = n_stack[s - 2]!\n    if (pp.left === p) {\n      if (p.left === n3) {\n        const y = pp.right\n        if (y && y.color === Node.Color.Red) {\n          p.color = Node.Color.Black\n          pp.right = Node.repaint(y, Node.Color.Black)\n          pp.color = Node.Color.Red\n          s -= 1\n        } else {\n          pp.color = Node.Color.Red\n          pp.left = p.right\n          p.color = Node.Color.Black\n          p.right = pp\n          n_stack[s - 2] = p\n          n_stack[s - 1] = n3\n          Node.recount(pp)\n          Node.recount(p)\n          if (s >= 3) {\n            const ppp = n_stack[s - 3]!\n            if (ppp.left === pp) {\n              ppp.left = p\n            } else {\n              ppp.right = p\n            }\n          }\n          break\n        }\n      } else {\n        const y = pp.right\n        if (y && y.color === Node.Color.Red) {\n          p.color = Node.Color.Black\n          pp.right = Node.repaint(y, Node.Color.Black)\n          pp.color = Node.Color.Red\n          s -= 1\n        } else {\n          p.right = n3.left\n          pp.color = Node.Color.Red\n          pp.left = n3.right\n          n3.color = Node.Color.Black\n          n3.left = p\n          n3.right = pp\n          n_stack[s - 2] = n3\n          n_stack[s - 1] = p\n          Node.recount(pp)\n          Node.recount(p)\n          Node.recount(n3)\n          if (s >= 3) {\n            const ppp = n_stack[s - 3]!\n            if (ppp.left === pp) {\n              ppp.left = n3\n            } else {\n              ppp.right = n3\n            }\n          }\n          break\n        }\n      }\n    } else {\n      if (p.right === n3) {\n        const y = pp.left\n        if (y && y.color === Node.Color.Red) {\n          p.color = Node.Color.Black\n          pp.left = Node.repaint(y, Node.Color.Black)\n          pp.color = Node.Color.Red\n          s -= 1\n        } else {\n          pp.color = Node.Color.Red\n          pp.right = p.left\n          p.color = Node.Color.Black\n          p.left = pp\n          n_stack[s - 2] = p\n          n_stack[s - 1] = n3\n          Node.recount(pp)\n          Node.recount(p)\n          if (s >= 3) {\n            const ppp = n_stack[s - 3]!\n            if (ppp.right === pp) {\n              ppp.right = p\n            } else {\n              ppp.left = p\n            }\n          }\n          break\n        }\n      } else {\n        const y = pp.left\n        if (y && y.color === Node.Color.Red) {\n          p.color = Node.Color.Black\n          pp.left = Node.repaint(y, Node.Color.Black)\n          pp.color = Node.Color.Red\n          s -= 1\n        } else {\n          p.left = n3.right\n          pp.color = Node.Color.Red\n          pp.right = n3.left\n          n3.color = Node.Color.Black\n          n3.right = p\n          n3.left = pp\n          n_stack[s - 2] = n3\n          n_stack[s - 1] = p\n          Node.recount(pp)\n          Node.recount(p)\n          Node.recount(n3)\n          if (s >= 3) {\n            const ppp = n_stack[s - 3]!\n            if (ppp.right === pp) {\n              ppp.right = n3\n            } else {\n              ppp.left = n3\n            }\n          }\n          break\n        }\n      }\n    }\n  }\n  // Return new tree\n  n_stack[0]!.color = Node.Color.Black\n  return makeImpl((self as RedBlackTreeImpl<K, V>)._ord, n_stack[0])\n})\n\n/** @internal */\nexport const keysForward = <K, V>(self: RBT.RedBlackTree<K, V>): IterableIterator<K> => keys(self, Direction.Forward)\n\n/** @internal */\nexport const keysBackward = <K, V>(self: RBT.RedBlackTree<K, V>): IterableIterator<K> => keys(self, Direction.Backward)\n\nconst keys = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  direction: RBT.RedBlackTree.Direction\n): IterableIterator<K> => {\n  const begin: RedBlackTreeIterator<K, V> = self[Symbol.iterator]() as RedBlackTreeIterator<K, V>\n  let count = 0\n  return {\n    [Symbol.iterator]: () => keys(self, direction),\n    next: (): IteratorResult<K, number> => {\n      count++\n      const entry = begin.key\n      if (direction === Direction.Forward) {\n        begin.moveNext()\n      } else {\n        begin.movePrev()\n      }\n      switch (entry._tag) {\n        case \"None\": {\n          return { done: true, value: count }\n        }\n        case \"Some\": {\n          return { done: false, value: entry.value }\n        }\n      }\n    }\n  }\n}\n\n/** @internal */\nexport const last = <K, V>(self: RBT.RedBlackTree<K, V>): Option.Option<[K, V]> => {\n  let node: Node.Node<K, V> | undefined = (self as RedBlackTreeImpl<K, V>)._root\n  let current: Node.Node<K, V> | undefined = (self as RedBlackTreeImpl<K, V>)._root\n  while (node !== undefined) {\n    current = node\n    node = node.right\n  }\n  return current ? Option.some([current.key, current.value]) : Option.none()\n}\n\n/** @internal */\nexport const reversed = <K, V>(self: RBT.RedBlackTree<K, V>): Iterable<[K, V]> => {\n  return {\n    [Symbol.iterator]: () => {\n      const stack: Array<Node.Node<K, V>> = []\n      let node = (self as RedBlackTreeImpl<K, V>)._root\n      while (node !== undefined) {\n        stack.push(node)\n        node = node.right\n      }\n      return new RedBlackTreeIterator(self, stack, Direction.Backward)\n    }\n  }\n}\n\n/** @internal */\nexport const greaterThanBackwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => greaterThan(self, key, Direction.Backward))\n\n/** @internal */\nexport const greaterThanForwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => greaterThan(self, key, Direction.Forward))\n\nconst greaterThan = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  key: K,\n  direction: RBT.RedBlackTree.Direction\n): Iterable<[K, V]> => {\n  return {\n    [Symbol.iterator]: () => {\n      const cmp = (self as RedBlackTreeImpl<K, V>)._ord\n      let node = (self as RedBlackTreeImpl<K, V>)._root\n      const stack = []\n      let last_ptr = 0\n      while (node !== undefined) {\n        const d = cmp(key, node.key)\n        stack.push(node)\n        if (d < 0) {\n          last_ptr = stack.length\n        }\n        if (d < 0) {\n          node = node.left\n        } else {\n          node = node.right\n        }\n      }\n      stack.length = last_ptr\n      return new RedBlackTreeIterator(self, stack, direction)\n    }\n  }\n}\n\n/** @internal */\nexport const greaterThanEqualBackwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => greaterThanEqual(self, key, Direction.Backward))\n\n/** @internal */\nexport const greaterThanEqualForwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => greaterThanEqual(self, key, Direction.Forward))\n\nconst greaterThanEqual = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  key: K,\n  direction: RBT.RedBlackTree.Direction = Direction.Forward\n): Iterable<[K, V]> => {\n  return {\n    [Symbol.iterator]: () => {\n      const cmp = (self as RedBlackTreeImpl<K, V>)._ord\n      let node = (self as RedBlackTreeImpl<K, V>)._root\n      const stack = []\n      let last_ptr = 0\n      while (node !== undefined) {\n        const d = cmp(key, node.key)\n        stack.push(node)\n        if (d <= 0) {\n          last_ptr = stack.length\n        }\n        if (d <= 0) {\n          node = node.left\n        } else {\n          node = node.right\n        }\n      }\n      stack.length = last_ptr\n      return new RedBlackTreeIterator(self, stack, direction)\n    }\n  }\n}\n\n/** @internal */\nexport const lessThanBackwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => lessThan(self, key, Direction.Backward))\n\n/** @internal */\nexport const lessThanForwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => lessThan(self, key, Direction.Forward))\n\nconst lessThan = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  key: K,\n  direction: RBT.RedBlackTree.Direction\n): Iterable<[K, V]> => {\n  return {\n    [Symbol.iterator]: () => {\n      const cmp = (self as RedBlackTreeImpl<K, V>)._ord\n      let node = (self as RedBlackTreeImpl<K, V>)._root\n      const stack = []\n      let last_ptr = 0\n      while (node !== undefined) {\n        const d = cmp(key, node.key)\n        stack.push(node)\n        if (d > 0) {\n          last_ptr = stack.length\n        }\n        if (d <= 0) {\n          node = node.left\n        } else {\n          node = node.right\n        }\n      }\n      stack.length = last_ptr\n      return new RedBlackTreeIterator(self, stack, direction)\n    }\n  }\n}\n\n/** @internal */\nexport const lessThanEqualBackwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => lessThanEqual(self, key, Direction.Backward))\n\n/** @internal */\nexport const lessThanEqualForwards = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => Iterable<[K, V]>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => Iterable<[K, V]>\n>(2, (self, key) => lessThanEqual(self, key, Direction.Forward))\n\nconst lessThanEqual = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  key: K,\n  direction: RBT.RedBlackTree.Direction\n): Iterable<[K, V]> => {\n  return {\n    [Symbol.iterator]: () => {\n      const cmp = (self as RedBlackTreeImpl<K, V>)._ord\n      let node = (self as RedBlackTreeImpl<K, V>)._root\n      const stack = []\n      let last_ptr = 0\n      while (node !== undefined) {\n        const d = cmp(key, node.key)\n        stack.push(node)\n        if (d >= 0) {\n          last_ptr = stack.length\n        }\n        if (d < 0) {\n          node = node.left\n        } else {\n          node = node.right\n        }\n      }\n      stack.length = last_ptr\n      return new RedBlackTreeIterator(self, stack, direction)\n    }\n  }\n}\n\n/** @internal */\nexport const forEach = dual<\n  <K, V>(f: (key: K, value: V) => void) => (self: RBT.RedBlackTree<K, V>) => void,\n  <K, V>(self: RBT.RedBlackTree<K, V>, f: (key: K, value: V) => void) => void\n>(2, <K, V>(self: RBT.RedBlackTree<K, V>, f: (key: K, value: V) => void) => {\n  const root = (self as RedBlackTreeImpl<K, V>)._root\n  if (root !== undefined) {\n    visitFull(root, (key, value) => {\n      f(key, value)\n      return Option.none()\n    })\n  }\n})\n\n/** @internal */\nexport const forEachGreaterThanEqual = dual<\n  <K, V>(min: K, f: (key: K, value: V) => void) => (self: RBT.RedBlackTree<K, V>) => void,\n  <K, V>(self: RBT.RedBlackTree<K, V>, min: K, f: (key: K, value: V) => void) => void\n>(3, <K, V>(self: RBT.RedBlackTree<K, V>, min: K, f: (key: K, value: V) => void) => {\n  const root = (self as RedBlackTreeImpl<K, V>)._root\n  const ord = (self as RedBlackTreeImpl<K, V>)._ord\n  if (root !== undefined) {\n    visitGreaterThanEqual(root, min, ord, (key, value) => {\n      f(key, value)\n      return Option.none()\n    })\n  }\n})\n\n/** @internal */\nexport const forEachLessThan = dual<\n  <K, V>(max: K, f: (key: K, value: V) => void) => (self: RBT.RedBlackTree<K, V>) => void,\n  <K, V>(self: RBT.RedBlackTree<K, V>, max: K, f: (key: K, value: V) => void) => void\n>(3, <K, V>(self: RBT.RedBlackTree<K, V>, max: K, f: (key: K, value: V) => void) => {\n  const root = (self as RedBlackTreeImpl<K, V>)._root\n  const ord = (self as RedBlackTreeImpl<K, V>)._ord\n  if (root !== undefined) {\n    visitLessThan(root, max, ord, (key, value) => {\n      f(key, value)\n      return Option.none()\n    })\n  }\n})\n\n/** @internal */\nexport const forEachBetween = dual<\n  <K, V>(options: {\n    readonly min: K\n    readonly max: K\n    readonly body: (key: K, value: V) => void\n  }) => (self: RBT.RedBlackTree<K, V>) => void,\n  <K, V>(self: RBT.RedBlackTree<K, V>, options: {\n    readonly min: K\n    readonly max: K\n    readonly body: (key: K, value: V) => void\n  }) => void\n>(2, <K, V>(self: RBT.RedBlackTree<K, V>, { body, max, min }: {\n  readonly min: K\n  readonly max: K\n  readonly body: (key: K, value: V) => void\n}) => {\n  const root = (self as RedBlackTreeImpl<K, V>)._root\n  const ord = (self as RedBlackTreeImpl<K, V>)._ord\n  if (root) {\n    visitBetween(root, min, max, ord, (key, value) => {\n      body(key, value)\n      return Option.none()\n    })\n  }\n})\n\n/** @internal */\nexport const reduce = dual<\n  <Z, V, K>(\n    zero: Z,\n    f: (accumulator: Z, value: V, key: K) => Z\n  ) => (self: RBT.RedBlackTree<K, V>) => Z,\n  <Z, V, K>(self: RBT.RedBlackTree<K, V>, zero: Z, f: (accumulator: Z, value: V, key: K) => Z) => Z\n>(3, (self, zero, f) => {\n  let accumulator = zero\n  for (const entry of self) {\n    accumulator = f(accumulator, entry[1], entry[0])\n  }\n  return accumulator\n})\n\n/** @internal */\nexport const removeFirst = dual<\n  <K>(key: K) => <V>(self: RBT.RedBlackTree<K, V>) => RBT.RedBlackTree<K, V>,\n  <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => RBT.RedBlackTree<K, V>\n>(2, <K, V>(self: RBT.RedBlackTree<K, V>, key: K) => {\n  if (!has(self, key)) {\n    return self\n  }\n  const ord = (self as RedBlackTreeImpl<K, V>)._ord\n  const cmp = ord\n  let node: Node.Node<K, V> | undefined = (self as RedBlackTreeImpl<K, V>)._root\n  const stack = []\n  while (node !== undefined) {\n    const d = cmp(key, node.key)\n    stack.push(node)\n    if (Equal.equals(key, node.key)) {\n      node = undefined\n    } else if (d <= 0) {\n      node = node.left\n    } else {\n      node = node.right\n    }\n  }\n  if (stack.length === 0) {\n    return self\n  }\n  const cstack = new Array<Node.Node<K, V>>(stack.length)\n  let n = stack[stack.length - 1]!\n  cstack[cstack.length - 1] = {\n    color: n.color,\n    key: n.key,\n    value: n.value,\n    left: n.left,\n    right: n.right,\n    count: n.count\n  }\n  for (let i = stack.length - 2; i >= 0; --i) {\n    n = stack[i]!\n    if (n.left === stack[i + 1]) {\n      cstack[i] = {\n        color: n.color,\n        key: n.key,\n        value: n.value,\n        left: cstack[i + 1],\n        right: n.right,\n        count: n.count\n      }\n    } else {\n      cstack[i] = {\n        color: n.color,\n        key: n.key,\n        value: n.value,\n        left: n.left,\n        right: cstack[i + 1],\n        count: n.count\n      }\n    }\n  }\n  // Get node\n  n = cstack[cstack.length - 1]!\n  // If not leaf, then swap with previous node\n  if (n.left !== undefined && n.right !== undefined) {\n    // First walk to previous leaf\n    const split = cstack.length\n    n = n.left\n    while (n.right != null) {\n      cstack.push(n)\n      n = n.right\n    }\n    // Copy path to leaf\n    const v = cstack[split - 1]\n    cstack.push({\n      color: n.color,\n      key: v!.key,\n      value: v!.value,\n      left: n.left,\n      right: n.right,\n      count: n.count\n    })\n    cstack[split - 1]!.key = n.key\n    cstack[split - 1]!.value = n.value\n    // Fix up stack\n    for (let i = cstack.length - 2; i >= split; --i) {\n      n = cstack[i]!\n      cstack[i] = {\n        color: n.color,\n        key: n.key,\n        value: n.value,\n        left: n.left,\n        right: cstack[i + 1],\n        count: n.count\n      }\n    }\n    cstack[split - 1]!.left = cstack[split]\n  }\n\n  // Remove leaf node\n  n = cstack[cstack.length - 1]!\n  if (n.color === Node.Color.Red) {\n    // Easy case: removing red leaf\n    const p = cstack[cstack.length - 2]!\n    if (p.left === n) {\n      p.left = undefined\n    } else if (p.right === n) {\n      p.right = undefined\n    }\n    cstack.pop()\n    for (let i = 0; i < cstack.length; ++i) {\n      cstack[i]!.count--\n    }\n    return makeImpl(ord, cstack[0])\n  } else {\n    if (n.left !== undefined || n.right !== undefined) {\n      // Second easy case:  Single child black parent\n      if (n.left !== undefined) {\n        Node.swap(n, n.left)\n      } else if (n.right !== undefined) {\n        Node.swap(n, n.right)\n      }\n      // Child must be red, so repaint it black to balance color\n      n.color = Node.Color.Black\n      for (let i = 0; i < cstack.length - 1; ++i) {\n        cstack[i]!.count--\n      }\n      return makeImpl(ord, cstack[0])\n    } else if (cstack.length === 1) {\n      // Third easy case: root\n      return makeImpl(ord, undefined)\n    } else {\n      // Hard case: Repaint n, and then do some nasty stuff\n      for (let i = 0; i < cstack.length; ++i) {\n        cstack[i]!.count--\n      }\n      const parent = cstack[cstack.length - 2]\n      fixDoubleBlack(cstack)\n      // Fix up links\n      if (parent!.left === n) {\n        parent!.left = undefined\n      } else {\n        parent!.right = undefined\n      }\n    }\n  }\n  return makeImpl(ord, cstack[0])\n})\n\n/** @internal */\nexport const size = <K, V>(self: RBT.RedBlackTree<K, V>): number => (self as RedBlackTreeImpl<K, V>)._root?.count ?? 0\n\n/** @internal */\nexport const valuesForward = <K, V>(self: RBT.RedBlackTree<K, V>): IterableIterator<V> =>\n  values(self, Direction.Forward)\n\n/** @internal */\nexport const valuesBackward = <K, V>(self: RBT.RedBlackTree<K, V>): IterableIterator<V> =>\n  values(self, Direction.Backward)\n\n/** @internal */\nconst values = <K, V>(\n  self: RBT.RedBlackTree<K, V>,\n  direction: RBT.RedBlackTree.Direction\n): IterableIterator<V> => {\n  const begin: RedBlackTreeIterator<K, V> = self[Symbol.iterator]() as RedBlackTreeIterator<K, V>\n  let count = 0\n  return {\n    [Symbol.iterator]: () => values(self, direction),\n    next: (): IteratorResult<V, number> => {\n      count++\n      const entry = begin.value\n      if (direction === Direction.Forward) {\n        begin.moveNext()\n      } else {\n        begin.movePrev()\n      }\n      switch (entry._tag) {\n        case \"None\": {\n          return { done: true, value: count }\n        }\n        case \"Some\": {\n          return { done: false, value: entry.value }\n        }\n      }\n    }\n  }\n}\n\nconst visitFull = <K, V, A>(\n  node: Node.Node<K, V>,\n  visit: (key: K, value: V) => Option.Option<A>\n): Option.Option<A> => {\n  let current: Node.Node<K, V> | undefined = node\n  let stack: Stack.Stack<Node.Node<K, V>> | undefined = undefined\n  let done = false\n  while (!done) {\n    if (current != null) {\n      stack = Stack.make(current, stack)\n      current = current.left\n    } else if (stack != null) {\n      const value = visit(stack.value.key, stack.value.value)\n      if (Option.isSome(value)) {\n        return value\n      }\n      current = stack.value.right\n      stack = stack.previous\n    } else {\n      done = true\n    }\n  }\n  return Option.none()\n}\n\nconst visitGreaterThanEqual = <K, V, A>(\n  node: Node.Node<K, V>,\n  min: K,\n  ord: Order.Order<K>,\n  visit: (key: K, value: V) => Option.Option<A>\n): Option.Option<A> => {\n  let current: Node.Node<K, V> | undefined = node\n  let stack: Stack.Stack<Node.Node<K, V>> | undefined = undefined\n  let done = false\n  while (!done) {\n    if (current !== undefined) {\n      stack = Stack.make(current, stack)\n      if (ord(min, current.key) <= 0) {\n        current = current.left\n      } else {\n        current = undefined\n      }\n    } else if (stack !== undefined) {\n      if (ord(min, stack.value.key) <= 0) {\n        const value = visit(stack.value.key, stack.value.value)\n        if (Option.isSome(value)) {\n          return value\n        }\n      }\n      current = stack.value.right\n      stack = stack.previous\n    } else {\n      done = true\n    }\n  }\n  return Option.none()\n}\n\nconst visitLessThan = <K, V, A>(\n  node: Node.Node<K, V>,\n  max: K,\n  ord: Order.Order<K>,\n  visit: (key: K, value: V) => Option.Option<A>\n): Option.Option<A> => {\n  let current: Node.Node<K, V> | undefined = node\n  let stack: Stack.Stack<Node.Node<K, V>> | undefined = undefined\n  let done = false\n  while (!done) {\n    if (current !== undefined) {\n      stack = Stack.make(current, stack)\n      current = current.left\n    } else if (stack !== undefined && ord(max, stack.value.key) > 0) {\n      const value = visit(stack.value.key, stack.value.value)\n      if (Option.isSome(value)) {\n        return value\n      }\n      current = stack.value.right\n      stack = stack.previous\n    } else {\n      done = true\n    }\n  }\n  return Option.none()\n}\n\nconst visitBetween = <K, V, A>(\n  node: Node.Node<K, V>,\n  min: K,\n  max: K,\n  ord: Order.Order<K>,\n  visit: (key: K, value: V) => Option.Option<A>\n): Option.Option<A> => {\n  let current: Node.Node<K, V> | undefined = node\n  let stack: Stack.Stack<Node.Node<K, V>> | undefined = undefined\n  let done = false\n  while (!done) {\n    if (current !== undefined) {\n      stack = Stack.make(current, stack)\n      if (ord(min, current.key) <= 0) {\n        current = current.left\n      } else {\n        current = undefined\n      }\n    } else if (stack !== undefined && ord(max, stack.value.key) > 0) {\n      if (ord(min, stack.value.key) <= 0) {\n        const value = visit(stack.value.key, stack.value.value)\n        if (Option.isSome(value)) {\n          return value\n        }\n      }\n      current = stack.value.right\n      stack = stack.previous\n    } else {\n      done = true\n    }\n  }\n  return Option.none()\n}\n\n/**\n * Fix up a double black node in a Red-Black Tree.\n */\nconst fixDoubleBlack = <K, V>(stack: Array<Node.Node<K, V>>) => {\n  let n, p, s, z\n  for (let i = stack.length - 1; i >= 0; --i) {\n    n = stack[i]!\n    if (i === 0) {\n      n.color = Node.Color.Black\n      return\n    }\n    p = stack[i - 1]!\n    if (p.left === n) {\n      s = p.right\n      if (s !== undefined && s.right !== undefined && s.right.color === Node.Color.Red) {\n        s = p.right = Node.clone(s)\n        z = s.right = Node.clone(s.right!)\n        p.right = s.left\n        s.left = p\n        s.right = z\n        s.color = p.color\n        n.color = Node.Color.Black\n        p.color = Node.Color.Black\n        z.color = Node.Color.Black\n        Node.recount(p)\n        Node.recount(s)\n        if (i > 1) {\n          const pp = stack[i - 2]!\n          if (pp.left === p) {\n            pp.left = s\n          } else {\n            pp.right = s\n          }\n        }\n        stack[i - 1] = s\n        return\n      } else if (s !== undefined && s.left !== undefined && s.left.color === Node.Color.Red) {\n        s = p.right = Node.clone(s)\n        z = s.left = Node.clone(s.left!)\n        p.right = z.left\n        s.left = z.right\n        z.left = p\n        z.right = s\n        z.color = p.color\n        p.color = Node.Color.Black\n        s.color = Node.Color.Black\n        n.color = Node.Color.Black\n        Node.recount(p)\n        Node.recount(s)\n        Node.recount(z)\n        if (i > 1) {\n          const pp = stack[i - 2]!\n          if (pp.left === p) {\n            pp.left = z\n          } else {\n            pp.right = z\n          }\n        }\n        stack[i - 1] = z\n        return\n      }\n      if (s !== undefined && s.color === Node.Color.Black) {\n        if (p.color === Node.Color.Red) {\n          p.color = Node.Color.Black\n          p.right = Node.repaint(s, Node.Color.Red)\n          return\n        } else {\n          p.right = Node.repaint(s, Node.Color.Red)\n          continue\n        }\n      } else if (s !== undefined) {\n        s = Node.clone(s)\n        p.right = s.left\n        s.left = p\n        s.color = p.color\n        p.color = Node.Color.Red\n        Node.recount(p)\n        Node.recount(s)\n        if (i > 1) {\n          const pp = stack[i - 2]!\n          if (pp.left === p) {\n            pp.left = s\n          } else {\n            pp.right = s\n          }\n        }\n        stack[i - 1] = s\n        stack[i] = p\n        if (i + 1 < stack.length) {\n          stack[i + 1] = n\n        } else {\n          stack.push(n)\n        }\n        i = i + 2\n      }\n    } else {\n      s = p.left\n      if (s !== undefined && s.left !== undefined && s.left.color === Node.Color.Red) {\n        s = p.left = Node.clone(s)\n        z = s.left = Node.clone(s.left!)\n        p.left = s.right\n        s.right = p\n        s.left = z\n        s.color = p.color\n        n.color = Node.Color.Black\n        p.color = Node.Color.Black\n        z.color = Node.Color.Black\n        Node.recount(p)\n        Node.recount(s)\n        if (i > 1) {\n          const pp = stack[i - 2]!\n          if (pp.right === p) {\n            pp.right = s\n          } else {\n            pp.left = s\n          }\n        }\n        stack[i - 1] = s\n        return\n      } else if (s !== undefined && s.right !== undefined && s.right.color === Node.Color.Red) {\n        s = p.left = Node.clone(s)\n        z = s.right = Node.clone(s.right!)\n        p.left = z.right\n        s.right = z.left\n        z.right = p\n        z.left = s\n        z.color = p.color\n        p.color = Node.Color.Black\n        s.color = Node.Color.Black\n        n.color = Node.Color.Black\n        Node.recount(p)\n        Node.recount(s)\n        Node.recount(z)\n        if (i > 1) {\n          const pp = stack[i - 2]!\n          if (pp.right === p) {\n            pp.right = z\n          } else {\n            pp.left = z\n          }\n        }\n        stack[i - 1] = z\n        return\n      }\n      if (s !== undefined && s.color === Node.Color.Black) {\n        if (p.color === Node.Color.Red) {\n          p.color = Node.Color.Black\n          p.left = Node.repaint(s, Node.Color.Red)\n          return\n        } else {\n          p.left = Node.repaint(s, Node.Color.Red)\n          continue\n        }\n      } else if (s !== undefined) {\n        s = Node.clone(s)\n        p.left = s.right\n        s.right = p\n        s.color = p.color\n        p.color = Node.Color.Red\n        Node.recount(p)\n        Node.recount(s)\n        if (i > 1) {\n          const pp = stack[i - 2]!\n          if (pp.right === p) {\n            pp.right = s\n          } else {\n            pp.left = s\n          }\n        }\n        stack[i - 1] = s\n        stack[i] = p\n        if (i + 1 < stack.length) {\n          stack[i + 1] = n\n        } else {\n          stack.push(n)\n        }\n        i = i + 2\n      }\n    }\n  }\n}\n"],"names":["Chunk","Equal","dual","pipe","Hash","format","NodeInspectSymbol","toJSON","Option","pipeArguments","hasProperty","Direction","RedBlackTreeIterator","Node","Stack","RedBlackTreeSymbolKey","RedBlackTreeTypeId","Symbol","for","redBlackTreeVariance","_Key","_","_Value","RedBlackTreeProto","symbol","hash","item","combine","cached","that","isRedBlackTree","_root","count","entries","Array","from","every","itemSelf","i","itemThat","equals","iterator","stack","n","push","left","Forward","toString","_id","values","map","arguments","makeImpl","ord","root","tree","Object","create","_ord","u","empty","undefined","fromIterable","key","value","insert","make","atBackwards","self","index","at","Backward","atForwards","direction","node","right","findAll","result","length","current","pop","prepend","findFirst","cmp","d","some","none","first","getAt","getOrder","has","isSome","n_stack","d_stack","color","Color","Red","s","n2","p","n3","Black","pp","y","repaint","recount","ppp","keysForward","keys","keysBackward","begin","next","entry","moveNext","movePrev","_tag","done","last","reversed","greaterThanBackwards","greaterThan","greaterThanForwards","last_ptr","greaterThanEqualBackwards","greaterThanEqual","greaterThanEqualForwards","lessThanBackwards","lessThan","lessThanForwards","lessThanEqualBackwards","lessThanEqual","lessThanEqualForwards","forEach","f","visitFull","forEachGreaterThanEqual","min","visitGreaterThanEqual","forEachLessThan","max","visitLessThan","forEachBetween","body","visitBetween","reduce","zero","accumulator","removeFirst","cstack","split","v","swap","parent","fixDoubleBlack","size","valuesForward","valuesBackward","visit","previous","z","clone"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,OAAO,KAAKI,IAAI,MAAM,YAAY;AADlC,SAASF,IAAI,EAAEC,IAAI,QAAQ,gBAAgB;AAD3C,OAAO,KAAKF,KAAK,MAAM,aAAa;AAUpC,SAASU,SAAS,EAAEC,oBAAoB,QAAQ,4BAA4B;AAP5E,SAASP,MAAM,EAAEC,iBAAiB,EAAEC,MAAM,QAAQ,mBAAmB;AAIrE,SAASE,aAAa,QAAQ,gBAAgB;AAC9C,SAASC,WAAW,QAAQ,iBAAiB;AAT7C,OAAO,KAAKV,KAAK,MAAM,aAAa;AAKpC,OAAO,KAAKQ,MAAM,MAAM,cAAc;AAOtC,OAAO,KAAKK,IAAI,MAAM,wBAAwB;AAC9C,OAAO,KAAKC,KAAK,MAAM,YAAY;;;;;;;;;;;;AAEnC,MAAMC,qBAAqB,GAAG,qBAAqB;AAG5C,MAAMC,kBAAkB,GAAA,WAAA,GAAeC,MAAM,CAACC,GAAG,CAACH,qBAAqB,CAAe;AAQ7F,MAAMI,oBAAoB,GAAG;IAC3B,kBAAA,GACAC,IAAI,GAAGC,CAAM,GAAKA,CAAC;IACnB,kBAAA,GACAC,MAAM,GAAGD,CAAQ,GAAKA;CACvB;AAED,MAAME,iBAAiB,GAAuC;IAC5D,CAACP,kBAAkB,CAAA,EAAGG,oBAAoB;IAC1C,CAACf,IAAI,4IAACoB,MAAM,CAAA,GAAC;QACX,IAAIC,IAAI,GAAGrB,IAAI,4IAACqB,IAAI,CAACV,qBAAqB,CAAC;QAC3C,KAAK,MAAMW,IAAI,IAAI,IAAI,CAAE;YACvBD,IAAI,4JAAItB,OAAAA,AAAI,EAACC,IAAI,4IAACqB,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAEtB,IAAI,4IAACuB,OAAO,CAACvB,IAAI,4IAACqB,IAAI,CAACC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACpE;QACA,OAAOtB,IAAI,4IAACwB,MAAM,CAAC,IAAI,EAAEH,IAAI,CAAC;IAChC,CAAC;IACD,CAACxB,KAAK,4IAACuB,MAAM,CAAA,EAAsCK,IAAa;QAC9D,IAAIC,cAAc,CAACD,IAAI,CAAC,EAAE;YACxB,IAAI,CAAC,IAAI,CAACE,KAAK,EAAEC,KAAK,IAAI,CAAC,MAAA,CAAQH,IAA+B,CAACE,KAAK,EAAEC,KAAK,IAAI,CAAC,CAAC,EAAE;gBACrF,OAAO,KAAK;YACd;YACA,MAAMC,OAAO,GAAGC,KAAK,CAACC,IAAI,CAACN,IAAI,CAAC;YAChC,OAAOK,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC,CAACC,KAAK,CAAC,CAACC,QAAQ,EAAEC,CAAC,KAAI;gBAC5C,MAAMC,QAAQ,GAAGN,OAAO,CAACK,CAAC,CAAC;gBAC3B,OAAOrC,KAAK,4IAACuC,MAAM,CAACH,QAAQ,CAAC,CAAC,CAAC,EAAEE,QAAQ,CAAC,CAAC,CAAC,CAAC,IAAItC,KAAK,4IAACuC,MAAM,CAACH,QAAQ,CAAC,CAAC,CAAC,EAAEE,QAAQ,CAAC,CAAC,CAAC,CAAC;YACzF,CAAC,CAAC;QACJ;QACA,OAAO,KAAK;IACd,CAAC;IACD,CAACtB,MAAM,CAACwB,QAAQ,CAAA,GAAC;QACf,MAAMC,KAAK,GAA2B,EAAE;QACxC,IAAIC,CAAC,GAAG,IAAI,CAACZ,KAAK;QAClB,MAAOY,CAAC,IAAI,IAAI,CAAE;YAChBD,KAAK,CAACE,IAAI,CAACD,CAAC,CAAC;YACbA,CAAC,GAAGA,CAAC,CAACE,IAAI;QACZ;QACA,OAAO,oLAAIjC,uBAAoB,CAAC,IAAI,EAAE8B,KAAK,kLAAE/B,YAAS,CAACmC,OAAO,CAAC;IACjE,CAAC;IACDC,QAAQA,CAAA;QACN,kKAAO1C,SAAAA,AAAM,EAAC,IAAI,CAACE,MAAM,EAAE,CAAC;IAC9B,CAAC;IACDA,MAAMA,CAAA;QACJ,OAAO;YACLyC,GAAG,EAAE,cAAc;YACnBC,MAAM,EAAEf,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC,CAACe,GAAG,wJAAC3C,SAAM;SACpC;IACH,CAAC;IACD,wJAACD,oBAAiB,CAAA,GAAC;QACjB,OAAO,IAAI,CAACC,MAAM,EAAE;IACtB,CAAC;IACDJ,IAAIA,CAAA;QACF,+JAAOM,gBAAAA,AAAa,EAAC,IAAI,EAAE0C,SAAS,CAAC;IACvC;CACD;AAED,MAAMC,QAAQ,GAAGA,CAAOC,GAAmB,EAAEC,IAAiC,KAA4B;IACxG,MAAMC,IAAI,GAAGC,MAAM,CAACC,MAAM,CAAClC,iBAAiB,CAAC;IAC7CgC,IAAI,CAACG,IAAI,GAAGL,GAAG;IACfE,IAAI,CAACxB,KAAK,GAAGuB,IAAI;IACjB,OAAOC,IAAI;AACb,CAAC;AAGM,MAAMzB,cAAc,IAGtB6B,CAAU,4JAA8CjD,cAAW,AAAXA,EAAYiD,CAAC,EAAE3C,kBAAkB,CAAC;AAGxF,MAAM4C,KAAK,GAAkBP,GAAmB,IAA6BD,QAAQ,CAAOC,GAAG,EAAEQ,SAAS,CAAC;AAG3G,MAAMC,YAAY,GAAA,WAAA,2JAAG5D,OAAAA,AAAI,EAG9B,CAAC,EAAE,CAAoB+B,OAAkC,EAAEoB,GAAmB,KAAI;IAClF,IAAIE,IAAI,GAAGK,KAAK,CAAOP,GAAG,CAAC;IAC3B,KAAK,MAAM,CAACU,GAAG,EAAEC,KAAK,CAAC,IAAI/B,OAAO,CAAE;QAClCsB,IAAI,GAAGU,MAAM,CAACV,IAAI,EAAEQ,GAAG,EAAEC,KAAK,CAAC;IACjC;IACA,OAAOT,IAAI;AACb,CAAC,CAAC;AAGK,MAAMW,IAAI,IACXb,GAAmB,GACvB,CAA2C,GAAGpB,OAAgB,KAG1D;QACF,OAAO6B,YAAY,CAAC7B,OAAO,EAAEoB,GAAG,CAAC;IACnC,CAAC;AAGI,MAAMc,WAAW,GAAA,WAAA,2JAAGjE,OAAAA,AAAI,EAG7B,CAAC,EAAE,CAACkE,IAAI,EAAEC,KAAK,GAAKC,EAAE,CAACF,IAAI,EAAEC,KAAK,kLAAE1D,YAAS,CAAC4D,QAAQ,CAAC,CAAC;AAGnD,MAAMC,UAAU,GAAA,WAAA,2JAAGtE,OAAAA,AAAI,EAG5B,CAAC,EAAE,CAACkE,IAAI,EAAEC,KAAK,GAAKC,EAAE,CAACF,IAAI,EAAEC,KAAK,kLAAE1D,YAAS,CAACmC,OAAO,CAAC,CAAC;AAEzD,MAAMwB,EAAE,GAAGA,CACTF,IAA4B,EAC5BC,KAAa,EACbI,SAAqC,KACjB;IACpB,OAAO;QACL,CAACxD,MAAM,CAACwB,QAAQ,CAAA,EAAG,MAAK;YACtB,IAAI4B,KAAK,GAAG,CAAC,EAAE;gBACb,OAAO,oLAAIzD,uBAAoB,CAACwD,IAAI,EAAE,EAAE,EAAEK,SAAS,CAAC;YACtD;YACA,IAAIC,IAAI,GAAIN,IAA+B,CAACrC,KAAK;YACjD,MAAMW,KAAK,GAA2B,EAAE;YACxC,MAAOgC,IAAI,KAAKb,SAAS,CAAE;gBACzBnB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;gBAChB,IAAIA,IAAI,CAAC7B,IAAI,KAAKgB,SAAS,EAAE;oBAC3B,IAAIQ,KAAK,GAAGK,IAAI,CAAC7B,IAAI,CAACb,KAAK,EAAE;wBAC3B0C,IAAI,GAAGA,IAAI,CAAC7B,IAAI;wBAChB;oBACF;oBACAwB,KAAK,IAAIK,IAAI,CAAC7B,IAAI,CAACb,KAAK;gBAC1B;gBACA,IAAI,CAACqC,KAAK,EAAE;oBACV,OAAO,mLAAIzD,wBAAoB,CAACwD,IAAI,EAAE1B,KAAK,EAAE+B,SAAS,CAAC;gBACzD;gBACAJ,KAAK,IAAI,CAAC;gBACV,IAAIK,IAAI,CAACC,KAAK,KAAKd,SAAS,EAAE;oBAC5B,IAAIQ,KAAK,IAAIK,IAAI,CAACC,KAAK,CAAC3C,KAAK,EAAE;wBAC7B;oBACF;oBACA0C,IAAI,GAAGA,IAAI,CAACC,KAAK;gBACnB,CAAC,MAAM;oBACL;gBACF;YACF;YACA,OAAO,oLAAI/D,uBAAoB,CAACwD,IAAI,EAAE,EAAE,EAAEK,SAAS,CAAC;QACtD;KACD;AACH,CAAC;AAGM,MAAMG,OAAO,GAAA,WAAA,2JAAG1E,OAAAA,AAAI,EAGzB,CAAC,EAAE,CAAOkE,IAA4B,EAAEL,GAAM,KAAI;IAClD,MAAMrB,KAAK,GAA2B,EAAE;IACxC,IAAIgC,IAAI,GAAIN,IAA+B,CAACrC,KAAK;IACjD,IAAI8C,MAAM,GAAG7E,KAAK,4IAAC4D,KAAK,EAAK;IAC7B,MAAOc,IAAI,KAAKb,SAAS,IAAInB,KAAK,CAACoC,MAAM,GAAG,CAAC,CAAE;QAC7C,IAAIJ,IAAI,EAAE;YACRhC,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;YAChBA,IAAI,GAAGA,IAAI,CAAC7B,IAAI;QAClB,CAAC,MAAM;YACL,MAAMkC,OAAO,GAAGrC,KAAK,CAACsC,GAAG,EAAG;YAC5B,IAAI/E,KAAK,4IAACuC,MAAM,CAACuB,GAAG,EAAEgB,OAAO,CAAChB,GAAG,CAAC,EAAE;gBAClCc,MAAM,GAAG7E,KAAK,4IAACiF,OAAO,CAACF,OAAO,CAACf,KAAK,CAAC,CAACa,MAAM,CAAC;YAC/C;YACAH,IAAI,GAAGK,OAAO,CAACJ,KAAK;QACtB;IACF;IACA,OAAOE,MAAM;AACf,CAAC,CAAC;AAGK,MAAMK,SAAS,GAAA,WAAA,2JAAGhF,OAAI,AAAJA,EAGvB,CAAC,EAAE,CAAOkE,IAA4B,EAAEL,GAAM,KAAI;IAClD,MAAMoB,GAAG,GAAIf,IAA+B,CAACV,IAAI;IACjD,IAAIgB,IAAI,GAAIN,IAA+B,CAACrC,KAAK;IACjD,MAAO2C,IAAI,KAAKb,SAAS,CAAE;QACzB,MAAMuB,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC;QAC5B,IAAI9D,KAAK,4IAACuC,MAAM,CAACuB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC,EAAE;YAC/B,OAAOvD,MAAM,4IAAC6E,IAAI,CAACX,IAAI,CAACV,KAAK,CAAC;QAChC;QACA,IAAIoB,CAAC,IAAI,CAAC,EAAE;YACVV,IAAI,GAAGA,IAAI,CAAC7B,IAAI;QAClB,CAAC,MAAM;YACL6B,IAAI,GAAGA,IAAI,CAACC,KAAK;QACnB;IACF;IACA,OAAOnE,MAAM,4IAAC8E,IAAI,EAAE;AACtB,CAAC,CAAC;AAGK,MAAMC,KAAK,IAAUnB,IAA4B,IAA2B;IACjF,IAAIM,IAAI,GAAiCN,IAA+B,CAACrC,KAAK;IAC9E,IAAIgD,OAAO,GAAiCX,IAA+B,CAACrC,KAAK;IACjF,MAAO2C,IAAI,KAAKb,SAAS,CAAE;QACzBkB,OAAO,GAAGL,IAAI;QACdA,IAAI,GAAGA,IAAI,CAAC7B,IAAI;IAClB;IACA,OAAOkC,OAAO,GAAGvE,MAAM,4IAAC6E,IAAI,CAAC;QAACN,OAAO,CAAChB,GAAG;QAAEgB,OAAO,CAACf,KAAK;KAAC,CAAC,GAAGxD,MAAM,4IAAC8E,IAAI,EAAE;AAC5E,CAAC;AAGM,MAAME,KAAK,GAAA,WAAA,2JAAGtF,OAAAA,AAAI,EAGvB,CAAC,EAAE,CAAOkE,IAA4B,EAAEC,KAAa,KAAI;IACzD,IAAIA,KAAK,GAAG,CAAC,EAAE;QACb,OAAO7D,MAAM,4IAAC8E,IAAI,EAAE;IACtB;IACA,IAAIhC,IAAI,GAAIc,IAA+B,CAACrC,KAAK;IACjD,IAAI2C,IAAI,GAAgCb,SAAS;IACjD,MAAOP,IAAI,KAAKO,SAAS,CAAE;QACzBa,IAAI,GAAGpB,IAAI;QACX,IAAIA,IAAI,CAACT,IAAI,EAAE;YACb,IAAIwB,KAAK,GAAGf,IAAI,CAACT,IAAI,CAACb,KAAK,EAAE;gBAC3BsB,IAAI,GAAGA,IAAI,CAACT,IAAI;gBAChB;YACF;YACAwB,KAAK,IAAIf,IAAI,CAACT,IAAI,CAACb,KAAK;QAC1B;QACA,IAAI,CAACqC,KAAK,EAAE;YACV,OAAO7D,MAAM,4IAAC6E,IAAI,CAAC;gBAACX,IAAI,CAACX,GAAG;gBAAEW,IAAI,CAACV,KAAK;aAAC,CAAC;QAC5C;QACAK,KAAK,IAAI,CAAC;QACV,IAAIf,IAAI,CAACqB,KAAK,EAAE;YACd,IAAIN,KAAK,IAAIf,IAAI,CAACqB,KAAK,CAAC3C,KAAK,EAAE;gBAC7B;YACF;YACAsB,IAAI,GAAGA,IAAI,CAACqB,KAAK;QACnB,CAAC,MAAM;YACL;QACF;IACF;IACA,OAAOnE,MAAM,4IAAC8E,IAAI,EAAE;AACtB,CAAC,CAAC;AAGK,MAAMG,QAAQ,IAAUlC,IAA4B,GAAsBA,IAA+B,CAACG,IAAI;AAG9G,MAAMgC,GAAG,GAAA,WAAA,2JAAGxF,OAAAA,AAAI,EAGrB,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKvD,MAAM,4IAACmF,MAAM,CAACT,SAAS,CAACd,IAAI,EAAEL,GAAG,CAAC,CAAC,CAAC;AAGjD,MAAME,MAAM,GAAA,WAAA,GAAG/D,+JAAAA,AAAI,EAGxB,CAAC,EAAE,CAAOkE,IAA4B,EAAEL,GAAM,EAAEC,KAAQ,KAAI;IAC5D,MAAMmB,GAAG,GAAIf,IAA+B,CAACV,IAAI;IACjD,mCAAA;IACA,IAAIf,CAAC,GAAiCyB,IAA+B,CAACrC,KAAK;IAC3E,MAAM6D,OAAO,GAA2B,EAAE;IAC1C,MAAMC,OAAO,GAA6B,EAAE;IAC5C,MAAOlD,CAAC,IAAI,IAAI,CAAE;QAChB,MAAMyC,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEpB,CAAC,CAACoB,GAAG,CAAC;QACzB6B,OAAO,CAAChD,IAAI,CAACD,CAAC,CAAC;QACfkD,OAAO,CAACjD,IAAI,CAACwC,CAAC,CAAC;QACf,IAAIA,CAAC,IAAI,CAAC,EAAE;YACVzC,CAAC,GAAGA,CAAC,CAACE,IAAI;QACZ,CAAC,MAAM;YACLF,CAAC,GAAGA,CAAC,CAACgC,KAAK;QACb;IACF;IACA,4BAAA;IACAiB,OAAO,CAAChD,IAAI,CAAC;QACXkD,KAAK,EAAEjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;QACrBjC,GAAG;QACHC,KAAK;QACLnB,IAAI,EAAEgB,SAAS;QACfc,KAAK,EAAEd,SAAS;QAChB7B,KAAK,EAAE;KACR,CAAC;IACF,IAAK,IAAIiE,CAAC,GAAGL,OAAO,CAACd,MAAM,GAAG,CAAC,EAAEmB,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,CAAE;QAC5C,MAAMC,EAAE,GAAGN,OAAO,CAACK,CAAC,CAAE;QACtB,IAAIJ,OAAO,CAACI,CAAC,CAAE,IAAI,CAAC,EAAE;YACpBL,OAAO,CAACK,CAAC,CAAC,GAAG;gBACXH,KAAK,EAAEI,EAAE,CAACJ,KAAK;gBACf/B,GAAG,EAAEmC,EAAE,CAACnC,GAAG;gBACXC,KAAK,EAAEkC,EAAE,CAAClC,KAAK;gBACfnB,IAAI,EAAE+C,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC;gBACpBtB,KAAK,EAAEuB,EAAE,CAACvB,KAAK;gBACf3C,KAAK,EAAEkE,EAAE,CAAClE,KAAK,GAAG;aACnB;QACH,CAAC,MAAM;YACL4D,OAAO,CAACK,CAAC,CAAC,GAAG;gBACXH,KAAK,EAAEI,EAAE,CAACJ,KAAK;gBACf/B,GAAG,EAAEmC,EAAE,CAACnC,GAAG;gBACXC,KAAK,EAAEkC,EAAE,CAAClC,KAAK;gBACfnB,IAAI,EAAEqD,EAAE,CAACrD,IAAI;gBACb8B,KAAK,EAAEiB,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC;gBACrBjE,KAAK,EAAEkE,EAAE,CAAClE,KAAK,GAAG;aACnB;QACH;IACF;IACA,iCAAA;IACA,IAAK,IAAIiE,CAAC,GAAGL,OAAO,CAACd,MAAM,GAAG,CAAC,EAAEmB,CAAC,GAAG,CAAC,EAAE,EAAEA,CAAC,CAAE;QAC3C,MAAME,CAAC,GAAGP,OAAO,CAACK,CAAC,GAAG,CAAC,CAAE;QACzB,MAAMG,EAAE,GAAGR,OAAO,CAACK,CAAC,CAAE;QACtB,IAAIE,CAAC,CAACL,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACM,KAAK,IAAID,EAAE,CAACN,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACM,KAAK,EAAE;YACjE;QACF;QACA,MAAMC,EAAE,GAAGV,OAAO,CAACK,CAAC,GAAG,CAAC,CAAE;QAC1B,IAAIK,EAAE,CAACzD,IAAI,KAAKsD,CAAC,EAAE;YACjB,IAAIA,CAAC,CAACtD,IAAI,KAAKuD,EAAE,EAAE;gBACjB,MAAMG,CAAC,GAAGD,EAAE,CAAC3B,KAAK;gBAClB,IAAI4B,CAAC,IAAIA,CAAC,CAACT,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;oBACnCG,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BC,EAAE,CAAC3B,KAAK,GAAG9D,IAAI,wKAAC2F,OAAO,CAACD,CAAC,EAAE1F,IAAI,wKAACkF,KAAK,CAACM,KAAK,CAAC;oBAC5CC,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBC,CAAC,IAAI,CAAC;gBACR,CAAC,MAAM;oBACLK,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBM,EAAE,CAACzD,IAAI,GAAGsD,CAAC,CAACxB,KAAK;oBACjBwB,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BF,CAAC,CAACxB,KAAK,GAAG2B,EAAE;oBACZV,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGE,CAAC;oBAClBP,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGG,EAAE;oBACnBvF,IAAI,wKAAC4F,OAAO,CAACH,EAAE,CAAC;oBAChBzF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;oBACf,IAAIF,CAAC,IAAI,CAAC,EAAE;wBACV,MAAMS,GAAG,GAAGd,OAAO,CAACK,CAAC,GAAG,CAAC,CAAE;wBAC3B,IAAIS,GAAG,CAAC7D,IAAI,KAAKyD,EAAE,EAAE;4BACnBI,GAAG,CAAC7D,IAAI,GAAGsD,CAAC;wBACd,CAAC,MAAM;4BACLO,GAAG,CAAC/B,KAAK,GAAGwB,CAAC;wBACf;oBACF;oBACA;gBACF;YACF,CAAC,MAAM;gBACL,MAAMI,CAAC,GAAGD,EAAE,CAAC3B,KAAK;gBAClB,IAAI4B,CAAC,IAAIA,CAAC,CAACT,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;oBACnCG,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BC,EAAE,CAAC3B,KAAK,GAAG9D,IAAI,wKAAC2F,OAAO,CAACD,CAAC,EAAE1F,IAAI,wKAACkF,KAAK,CAACM,KAAK,CAAC;oBAC5CC,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBC,CAAC,IAAI,CAAC;gBACR,CAAC,MAAM;oBACLE,CAAC,CAACxB,KAAK,GAAGyB,EAAE,CAACvD,IAAI;oBACjByD,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBM,EAAE,CAACzD,IAAI,GAAGuD,EAAE,CAACzB,KAAK;oBAClByB,EAAE,CAACN,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC3BD,EAAE,CAACvD,IAAI,GAAGsD,CAAC;oBACXC,EAAE,CAACzB,KAAK,GAAG2B,EAAE;oBACbV,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGG,EAAE;oBACnBR,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGE,CAAC;oBAClBtF,IAAI,wKAAC4F,OAAO,CAACH,EAAE,CAAC;oBAChBzF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;oBACftF,IAAI,wKAAC4F,OAAO,CAACL,EAAE,CAAC;oBAChB,IAAIH,CAAC,IAAI,CAAC,EAAE;wBACV,MAAMS,GAAG,GAAGd,OAAO,CAACK,CAAC,GAAG,CAAC,CAAE;wBAC3B,IAAIS,GAAG,CAAC7D,IAAI,KAAKyD,EAAE,EAAE;4BACnBI,GAAG,CAAC7D,IAAI,GAAGuD,EAAE;wBACf,CAAC,MAAM;4BACLM,GAAG,CAAC/B,KAAK,GAAGyB,EAAE;wBAChB;oBACF;oBACA;gBACF;YACF;QACF,CAAC,MAAM;YACL,IAAID,CAAC,CAACxB,KAAK,KAAKyB,EAAE,EAAE;gBAClB,MAAMG,CAAC,GAAGD,EAAE,CAACzD,IAAI;gBACjB,IAAI0D,CAAC,IAAIA,CAAC,CAACT,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;oBACnCG,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BC,EAAE,CAACzD,IAAI,GAAGhC,IAAI,wKAAC2F,OAAO,CAACD,CAAC,EAAE1F,IAAI,wKAACkF,KAAK,CAACM,KAAK,CAAC;oBAC3CC,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBC,CAAC,IAAI,CAAC;gBACR,CAAC,MAAM;oBACLK,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBM,EAAE,CAAC3B,KAAK,GAAGwB,CAAC,CAACtD,IAAI;oBACjBsD,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BF,CAAC,CAACtD,IAAI,GAAGyD,EAAE;oBACXV,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGE,CAAC;oBAClBP,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGG,EAAE;oBACnBvF,IAAI,wKAAC4F,OAAO,CAACH,EAAE,CAAC;oBAChBzF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;oBACf,IAAIF,CAAC,IAAI,CAAC,EAAE;wBACV,MAAMS,GAAG,GAAGd,OAAO,CAACK,CAAC,GAAG,CAAC,CAAE;wBAC3B,IAAIS,GAAG,CAAC/B,KAAK,KAAK2B,EAAE,EAAE;4BACpBI,GAAG,CAAC/B,KAAK,GAAGwB,CAAC;wBACf,CAAC,MAAM;4BACLO,GAAG,CAAC7D,IAAI,GAAGsD,CAAC;wBACd;oBACF;oBACA;gBACF;YACF,CAAC,MAAM;gBACL,MAAMI,CAAC,GAAGD,EAAE,CAACzD,IAAI;gBACjB,IAAI0D,CAAC,IAAIA,CAAC,CAACT,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;oBACnCG,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BC,EAAE,CAACzD,IAAI,GAAGhC,IAAI,wKAAC2F,OAAO,CAACD,CAAC,EAAE1F,IAAI,wKAACkF,KAAK,CAACM,KAAK,CAAC;oBAC3CC,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBC,CAAC,IAAI,CAAC;gBACR,CAAC,MAAM;oBACLE,CAAC,CAACtD,IAAI,GAAGuD,EAAE,CAACzB,KAAK;oBACjB2B,EAAE,CAACR,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;oBACzBM,EAAE,CAAC3B,KAAK,GAAGyB,EAAE,CAACvD,IAAI;oBAClBuD,EAAE,CAACN,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC3BD,EAAE,CAACzB,KAAK,GAAGwB,CAAC;oBACZC,EAAE,CAACvD,IAAI,GAAGyD,EAAE;oBACZV,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGG,EAAE;oBACnBR,OAAO,CAACK,CAAC,GAAG,CAAC,CAAC,GAAGE,CAAC;oBAClBtF,IAAI,wKAAC4F,OAAO,CAACH,EAAE,CAAC;oBAChBzF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;oBACftF,IAAI,wKAAC4F,OAAO,CAACL,EAAE,CAAC;oBAChB,IAAIH,CAAC,IAAI,CAAC,EAAE;wBACV,MAAMS,GAAG,GAAGd,OAAO,CAACK,CAAC,GAAG,CAAC,CAAE;wBAC3B,IAAIS,GAAG,CAAC/B,KAAK,KAAK2B,EAAE,EAAE;4BACpBI,GAAG,CAAC/B,KAAK,GAAGyB,EAAE;wBAChB,CAAC,MAAM;4BACLM,GAAG,CAAC7D,IAAI,GAAGuD,EAAE;wBACf;oBACF;oBACA;gBACF;YACF;QACF;IACF;IACA,kBAAA;IACAR,OAAO,CAAC,CAAC,CAAE,CAACE,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;IACpC,OAAOjD,QAAQ,CAAEgB,IAA+B,CAACV,IAAI,EAAEkC,OAAO,CAAC,CAAC,CAAC,CAAC;AACpE,CAAC,CAAC;AAGK,MAAMe,WAAW,IAAUvC,IAA4B,GAA0BwC,IAAI,CAACxC,IAAI,kLAAEzD,YAAS,CAACmC,OAAO,CAAC;AAG9G,MAAM+D,YAAY,IAAUzC,IAA4B,GAA0BwC,IAAI,CAACxC,IAAI,kLAAEzD,YAAS,CAAC4D,QAAQ,CAAC;AAEvH,MAAMqC,IAAI,GAAGA,CACXxC,IAA4B,EAC5BK,SAAqC,KACd;IACvB,MAAMqC,KAAK,GAA+B1C,IAAI,CAACnD,MAAM,CAACwB,QAAQ,CAAC,EAAgC;IAC/F,IAAIT,KAAK,GAAG,CAAC;IACb,OAAO;QACL,CAACf,MAAM,CAACwB,QAAQ,CAAA,EAAG,IAAMmE,IAAI,CAACxC,IAAI,EAAEK,SAAS,CAAC;QAC9CsC,IAAI,EAAEA,CAAA,KAAgC;YACpC/E,KAAK,EAAE;YACP,MAAMgF,KAAK,GAAGF,KAAK,CAAC/C,GAAG;YACvB,IAAIU,SAAS,qLAAK9D,YAAS,CAACmC,OAAO,EAAE;gBACnCgE,KAAK,CAACG,QAAQ,EAAE;YAClB,CAAC,MAAM;gBACLH,KAAK,CAACI,QAAQ,EAAE;YAClB;YACA,OAAQF,KAAK,CAACG,IAAI;gBAChB,KAAK,MAAM;oBAAE;wBACX,OAAO;4BAAEC,IAAI,EAAE,IAAI;4BAAEpD,KAAK,EAAEhC;wBAAK,CAAE;oBACrC;gBACA,KAAK,MAAM;oBAAE;wBACX,OAAO;4BAAEoF,IAAI,EAAE,KAAK;4BAAEpD,KAAK,EAAEgD,KAAK,CAAChD,KAAAA;wBAAK,CAAE;oBAC5C;YACF;QACF;KACD;AACH,CAAC;AAGM,MAAMqD,IAAI,IAAUjD,IAA4B,IAA2B;IAChF,IAAIM,IAAI,GAAiCN,IAA+B,CAACrC,KAAK;IAC9E,IAAIgD,OAAO,GAAiCX,IAA+B,CAACrC,KAAK;IACjF,MAAO2C,IAAI,KAAKb,SAAS,CAAE;QACzBkB,OAAO,GAAGL,IAAI;QACdA,IAAI,GAAGA,IAAI,CAACC,KAAK;IACnB;IACA,OAAOI,OAAO,GAAGvE,MAAM,4IAAC6E,IAAI,CAAC;QAACN,OAAO,CAAChB,GAAG;QAAEgB,OAAO,CAACf,KAAK;KAAC,CAAC,GAAGxD,MAAM,4IAAC8E,IAAI,EAAE;AAC5E,CAAC;AAGM,MAAMgC,QAAQ,IAAUlD,IAA4B,IAAsB;IAC/E,OAAO;QACL,CAACnD,MAAM,CAACwB,QAAQ,CAAA,EAAG,MAAK;YACtB,MAAMC,KAAK,GAA2B,EAAE;YACxC,IAAIgC,IAAI,GAAIN,IAA+B,CAACrC,KAAK;YACjD,MAAO2C,IAAI,KAAKb,SAAS,CAAE;gBACzBnB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;gBAChBA,IAAI,GAAGA,IAAI,CAACC,KAAK;YACnB;YACA,OAAO,oLAAI/D,uBAAoB,CAACwD,IAAI,EAAE1B,KAAK,kLAAE/B,YAAS,CAAC4D,QAAQ,CAAC;QAClE;KACD;AACH,CAAC;AAGM,MAAMgD,oBAAoB,GAAA,WAAA,2JAAGrH,OAAAA,AAAI,EAGtC,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKyD,WAAW,CAACpD,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAAC4D,QAAQ,CAAC,CAAC;AAGxD,MAAMkD,mBAAmB,GAAA,WAAA,2JAAGvH,OAAAA,AAAI,EAGrC,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKyD,WAAW,CAACpD,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAACmC,OAAO,CAAC,CAAC;AAE9D,MAAM0E,WAAW,GAAGA,CAClBpD,IAA4B,EAC5BL,GAAM,EACNU,SAAqC,KACjB;IACpB,OAAO;QACL,CAACxD,MAAM,CAACwB,QAAQ,CAAA,EAAG,MAAK;YACtB,MAAM0C,GAAG,GAAIf,IAA+B,CAACV,IAAI;YACjD,IAAIgB,IAAI,GAAIN,IAA+B,CAACrC,KAAK;YACjD,MAAMW,KAAK,GAAG,EAAE;YAChB,IAAIgF,QAAQ,GAAG,CAAC;YAChB,MAAOhD,IAAI,KAAKb,SAAS,CAAE;gBACzB,MAAMuB,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC;gBAC5BrB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;gBAChB,IAAIU,CAAC,GAAG,CAAC,EAAE;oBACTsC,QAAQ,GAAGhF,KAAK,CAACoC,MAAM;gBACzB;gBACA,IAAIM,CAAC,GAAG,CAAC,EAAE;oBACTV,IAAI,GAAGA,IAAI,CAAC7B,IAAI;gBAClB,CAAC,MAAM;oBACL6B,IAAI,GAAGA,IAAI,CAACC,KAAK;gBACnB;YACF;YACAjC,KAAK,CAACoC,MAAM,GAAG4C,QAAQ;YACvB,OAAO,oLAAI9G,uBAAoB,CAACwD,IAAI,EAAE1B,KAAK,EAAE+B,SAAS,CAAC;QACzD;KACD;AACH,CAAC;AAGM,MAAMkD,yBAAyB,GAAA,WAAA,IAAGzH,8JAAAA,AAAI,EAG3C,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAK6D,gBAAgB,CAACxD,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAAC4D,QAAQ,CAAC,CAAC;AAG7D,MAAMsD,wBAAwB,GAAA,WAAA,2JAAG3H,OAAAA,AAAI,EAG1C,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAK6D,gBAAgB,CAACxD,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAACmC,OAAO,CAAC,CAAC;AAEnE,MAAM8E,gBAAgB,GAAGA,CACvBxD,IAA4B,EAC5BL,GAAM,EACNU,SAAA,mLAAwC9D,YAAS,CAACmC,OAAO,KACrC;IACpB,OAAO;QACL,CAAC7B,MAAM,CAACwB,QAAQ,CAAA,EAAG,MAAK;YACtB,MAAM0C,GAAG,GAAIf,IAA+B,CAACV,IAAI;YACjD,IAAIgB,IAAI,GAAIN,IAA+B,CAACrC,KAAK;YACjD,MAAMW,KAAK,GAAG,EAAE;YAChB,IAAIgF,QAAQ,GAAG,CAAC;YAChB,MAAOhD,IAAI,KAAKb,SAAS,CAAE;gBACzB,MAAMuB,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC;gBAC5BrB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;gBAChB,IAAIU,CAAC,IAAI,CAAC,EAAE;oBACVsC,QAAQ,GAAGhF,KAAK,CAACoC,MAAM;gBACzB;gBACA,IAAIM,CAAC,IAAI,CAAC,EAAE;oBACVV,IAAI,GAAGA,IAAI,CAAC7B,IAAI;gBAClB,CAAC,MAAM;oBACL6B,IAAI,GAAGA,IAAI,CAACC,KAAK;gBACnB;YACF;YACAjC,KAAK,CAACoC,MAAM,GAAG4C,QAAQ;YACvB,OAAO,oLAAI9G,uBAAoB,CAACwD,IAAI,EAAE1B,KAAK,EAAE+B,SAAS,CAAC;QACzD;KACD;AACH,CAAC;AAGM,MAAMqD,iBAAiB,GAAA,WAAA,2JAAG5H,OAAAA,AAAI,EAGnC,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKgE,QAAQ,CAAC3D,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAAC4D,QAAQ,CAAC,CAAC;AAGrD,MAAMyD,gBAAgB,GAAA,WAAA,2JAAG9H,OAAAA,AAAI,EAGlC,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKgE,QAAQ,CAAC3D,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAACmC,OAAO,CAAC,CAAC;AAE3D,MAAMiF,QAAQ,GAAGA,CACf3D,IAA4B,EAC5BL,GAAM,EACNU,SAAqC,KACjB;IACpB,OAAO;QACL,CAACxD,MAAM,CAACwB,QAAQ,CAAA,EAAG,MAAK;YACtB,MAAM0C,GAAG,GAAIf,IAA+B,CAACV,IAAI;YACjD,IAAIgB,IAAI,GAAIN,IAA+B,CAACrC,KAAK;YACjD,MAAMW,KAAK,GAAG,EAAE;YAChB,IAAIgF,QAAQ,GAAG,CAAC;YAChB,MAAOhD,IAAI,KAAKb,SAAS,CAAE;gBACzB,MAAMuB,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC;gBAC5BrB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;gBAChB,IAAIU,CAAC,GAAG,CAAC,EAAE;oBACTsC,QAAQ,GAAGhF,KAAK,CAACoC,MAAM;gBACzB;gBACA,IAAIM,CAAC,IAAI,CAAC,EAAE;oBACVV,IAAI,GAAGA,IAAI,CAAC7B,IAAI;gBAClB,CAAC,MAAM;oBACL6B,IAAI,GAAGA,IAAI,CAACC,KAAK;gBACnB;YACF;YACAjC,KAAK,CAACoC,MAAM,GAAG4C,QAAQ;YACvB,OAAO,oLAAI9G,uBAAoB,CAACwD,IAAI,EAAE1B,KAAK,EAAE+B,SAAS,CAAC;QACzD;KACD;AACH,CAAC;AAGM,MAAMwD,sBAAsB,GAAA,WAAA,2JAAG/H,OAAAA,AAAI,EAGxC,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKmE,aAAa,CAAC9D,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAAC4D,QAAQ,CAAC,CAAC;AAG1D,MAAM4D,qBAAqB,GAAA,WAAA,2JAAGjI,OAAAA,AAAI,EAGvC,CAAC,EAAE,CAACkE,IAAI,EAAEL,GAAG,GAAKmE,aAAa,CAAC9D,IAAI,EAAEL,GAAG,kLAAEpD,YAAS,CAACmC,OAAO,CAAC,CAAC;AAEhE,MAAMoF,aAAa,GAAGA,CACpB9D,IAA4B,EAC5BL,GAAM,EACNU,SAAqC,KACjB;IACpB,OAAO;QACL,CAACxD,MAAM,CAACwB,QAAQ,CAAA,EAAG,MAAK;YACtB,MAAM0C,GAAG,GAAIf,IAA+B,CAACV,IAAI;YACjD,IAAIgB,IAAI,GAAIN,IAA+B,CAACrC,KAAK;YACjD,MAAMW,KAAK,GAAG,EAAE;YAChB,IAAIgF,QAAQ,GAAG,CAAC;YAChB,MAAOhD,IAAI,KAAKb,SAAS,CAAE;gBACzB,MAAMuB,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC;gBAC5BrB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;gBAChB,IAAIU,CAAC,IAAI,CAAC,EAAE;oBACVsC,QAAQ,GAAGhF,KAAK,CAACoC,MAAM;gBACzB;gBACA,IAAIM,CAAC,GAAG,CAAC,EAAE;oBACTV,IAAI,GAAGA,IAAI,CAAC7B,IAAI;gBAClB,CAAC,MAAM;oBACL6B,IAAI,GAAGA,IAAI,CAACC,KAAK;gBACnB;YACF;YACAjC,KAAK,CAACoC,MAAM,GAAG4C,QAAQ;YACvB,OAAO,oLAAI9G,uBAAoB,CAACwD,IAAI,EAAE1B,KAAK,EAAE+B,SAAS,CAAC;QACzD;KACD;AACH,CAAC;AAGM,MAAM2D,OAAO,GAAA,WAAA,OAAGlI,2JAAAA,AAAI,EAGzB,CAAC,EAAE,CAAOkE,IAA4B,EAAEiE,CAA6B,KAAI;IACzE,MAAM/E,IAAI,GAAIc,IAA+B,CAACrC,KAAK;IACnD,IAAIuB,IAAI,KAAKO,SAAS,EAAE;QACtByE,SAAS,CAAChF,IAAI,EAAE,CAACS,GAAG,EAAEC,KAAK,KAAI;YAC7BqE,CAAC,CAACtE,GAAG,EAAEC,KAAK,CAAC;YACb,OAAOxD,MAAM,4IAAC8E,IAAI,EAAE;QACtB,CAAC,CAAC;IACJ;AACF,CAAC,CAAC;AAGK,MAAMiD,uBAAuB,GAAA,WAAA,2JAAGrI,OAAAA,AAAI,EAGzC,CAAC,EAAE,CAAOkE,IAA4B,EAAEoE,GAAM,EAAEH,CAA6B,KAAI;IACjF,MAAM/E,IAAI,GAAIc,IAA+B,CAACrC,KAAK;IACnD,MAAMsB,GAAG,GAAIe,IAA+B,CAACV,IAAI;IACjD,IAAIJ,IAAI,KAAKO,SAAS,EAAE;QACtB4E,qBAAqB,CAACnF,IAAI,EAAEkF,GAAG,EAAEnF,GAAG,EAAE,CAACU,GAAG,EAAEC,KAAK,KAAI;YACnDqE,CAAC,CAACtE,GAAG,EAAEC,KAAK,CAAC;YACb,OAAOxD,MAAM,4IAAC8E,IAAI,EAAE;QACtB,CAAC,CAAC;IACJ;AACF,CAAC,CAAC;AAGK,MAAMoD,eAAe,GAAA,WAAA,2JAAGxI,OAAAA,AAAI,EAGjC,CAAC,EAAE,CAAOkE,IAA4B,EAAEuE,GAAM,EAAEN,CAA6B,KAAI;IACjF,MAAM/E,IAAI,GAAIc,IAA+B,CAACrC,KAAK;IACnD,MAAMsB,GAAG,GAAIe,IAA+B,CAACV,IAAI;IACjD,IAAIJ,IAAI,KAAKO,SAAS,EAAE;QACtB+E,aAAa,CAACtF,IAAI,EAAEqF,GAAG,EAAEtF,GAAG,EAAE,CAACU,GAAG,EAAEC,KAAK,KAAI;YAC3CqE,CAAC,CAACtE,GAAG,EAAEC,KAAK,CAAC;YACb,OAAOxD,MAAM,4IAAC8E,IAAI,EAAE;QACtB,CAAC,CAAC;IACJ;AACF,CAAC,CAAC;AAGK,MAAMuD,cAAc,GAAA,WAAA,2JAAG3I,OAAAA,AAAI,EAWhC,CAAC,EAAE,CAAOkE,IAA4B,EAAE,EAAE0E,IAAI,EAAEH,GAAG,EAAEH,GAAAA,EAItD,KAAI;IACH,MAAMlF,IAAI,GAAIc,IAA+B,CAACrC,KAAK;IACnD,MAAMsB,GAAG,GAAIe,IAA+B,CAACV,IAAI;IACjD,IAAIJ,IAAI,EAAE;QACRyF,YAAY,CAACzF,IAAI,EAAEkF,GAAG,EAAEG,GAAG,EAAEtF,GAAG,EAAE,CAACU,GAAG,EAAEC,KAAK,KAAI;YAC/C8E,IAAI,CAAC/E,GAAG,EAAEC,KAAK,CAAC;YAChB,OAAOxD,MAAM,4IAAC8E,IAAI,EAAE;QACtB,CAAC,CAAC;IACJ;AACF,CAAC,CAAC;AAGK,MAAM0D,MAAM,GAAA,WAAA,2JAAG9I,OAAAA,AAAI,EAMxB,CAAC,EAAE,CAACkE,IAAI,EAAE6E,IAAI,EAAEZ,CAAC,KAAI;IACrB,IAAIa,WAAW,GAAGD,IAAI;IACtB,KAAK,MAAMjC,KAAK,IAAI5C,IAAI,CAAE;QACxB8E,WAAW,GAAGb,CAAC,CAACa,WAAW,EAAElC,KAAK,CAAC,CAAC,CAAC,EAAEA,KAAK,CAAC,CAAC,CAAC,CAAC;IAClD;IACA,OAAOkC,WAAW;AACpB,CAAC,CAAC;AAGK,MAAMC,WAAW,GAAA,WAAA,IAAGjJ,8JAAAA,AAAI,EAG7B,CAAC,EAAE,CAAOkE,IAA4B,EAAEL,GAAM,KAAI;IAClD,IAAI,CAAC2B,GAAG,CAACtB,IAAI,EAAEL,GAAG,CAAC,EAAE;QACnB,OAAOK,IAAI;IACb;IACA,MAAMf,GAAG,GAAIe,IAA+B,CAACV,IAAI;IACjD,MAAMyB,GAAG,GAAG9B,GAAG;IACf,IAAIqB,IAAI,GAAiCN,IAA+B,CAACrC,KAAK;IAC9E,MAAMW,KAAK,GAAG,EAAE;IAChB,MAAOgC,IAAI,KAAKb,SAAS,CAAE;QACzB,MAAMuB,CAAC,GAAGD,GAAG,CAACpB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC;QAC5BrB,KAAK,CAACE,IAAI,CAAC8B,IAAI,CAAC;QAChB,IAAIzE,KAAK,4IAACuC,MAAM,CAACuB,GAAG,EAAEW,IAAI,CAACX,GAAG,CAAC,EAAE;YAC/BW,IAAI,GAAGb,SAAS;QAClB,CAAC,MAAM,IAAIuB,CAAC,IAAI,CAAC,EAAE;YACjBV,IAAI,GAAGA,IAAI,CAAC7B,IAAI;QAClB,CAAC,MAAM;YACL6B,IAAI,GAAGA,IAAI,CAACC,KAAK;QACnB;IACF;IACA,IAAIjC,KAAK,CAACoC,MAAM,KAAK,CAAC,EAAE;QACtB,OAAOV,IAAI;IACb;IACA,MAAMgF,MAAM,GAAG,IAAIlH,KAAK,CAAkBQ,KAAK,CAACoC,MAAM,CAAC;IACvD,IAAInC,CAAC,GAAGD,KAAK,CAACA,KAAK,CAACoC,MAAM,GAAG,CAAC,CAAE;IAChCsE,MAAM,CAACA,MAAM,CAACtE,MAAM,GAAG,CAAC,CAAC,GAAG;QAC1BgB,KAAK,EAAEnD,CAAC,CAACmD,KAAK;QACd/B,GAAG,EAAEpB,CAAC,CAACoB,GAAG;QACVC,KAAK,EAAErB,CAAC,CAACqB,KAAK;QACdnB,IAAI,EAAEF,CAAC,CAACE,IAAI;QACZ8B,KAAK,EAAEhC,CAAC,CAACgC,KAAK;QACd3C,KAAK,EAAEW,CAAC,CAACX,KAAAA;KACV;IACD,IAAK,IAAIM,CAAC,GAAGI,KAAK,CAACoC,MAAM,GAAG,CAAC,EAAExC,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,CAAE;QAC1CK,CAAC,GAAGD,KAAK,CAACJ,CAAC,CAAE;QACb,IAAIK,CAAC,CAACE,IAAI,KAAKH,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,EAAE;YAC3B8G,MAAM,CAAC9G,CAAC,CAAC,GAAG;gBACVwD,KAAK,EAAEnD,CAAC,CAACmD,KAAK;gBACd/B,GAAG,EAAEpB,CAAC,CAACoB,GAAG;gBACVC,KAAK,EAAErB,CAAC,CAACqB,KAAK;gBACdnB,IAAI,EAAEuG,MAAM,CAAC9G,CAAC,GAAG,CAAC,CAAC;gBACnBqC,KAAK,EAAEhC,CAAC,CAACgC,KAAK;gBACd3C,KAAK,EAAEW,CAAC,CAACX,KAAAA;aACV;QACH,CAAC,MAAM;YACLoH,MAAM,CAAC9G,CAAC,CAAC,GAAG;gBACVwD,KAAK,EAAEnD,CAAC,CAACmD,KAAK;gBACd/B,GAAG,EAAEpB,CAAC,CAACoB,GAAG;gBACVC,KAAK,EAAErB,CAAC,CAACqB,KAAK;gBACdnB,IAAI,EAAEF,CAAC,CAACE,IAAI;gBACZ8B,KAAK,EAAEyE,MAAM,CAAC9G,CAAC,GAAG,CAAC,CAAC;gBACpBN,KAAK,EAAEW,CAAC,CAACX,KAAAA;aACV;QACH;IACF;IACA,WAAA;IACAW,CAAC,GAAGyG,MAAM,CAACA,MAAM,CAACtE,MAAM,GAAG,CAAC,CAAE;IAC9B,4CAAA;IACA,IAAInC,CAAC,CAACE,IAAI,KAAKgB,SAAS,IAAIlB,CAAC,CAACgC,KAAK,KAAKd,SAAS,EAAE;QACjD,8BAAA;QACA,MAAMwF,KAAK,GAAGD,MAAM,CAACtE,MAAM;QAC3BnC,CAAC,GAAGA,CAAC,CAACE,IAAI;QACV,MAAOF,CAAC,CAACgC,KAAK,IAAI,IAAI,CAAE;YACtByE,MAAM,CAACxG,IAAI,CAACD,CAAC,CAAC;YACdA,CAAC,GAAGA,CAAC,CAACgC,KAAK;QACb;QACA,oBAAA;QACA,MAAM2E,CAAC,GAAGF,MAAM,CAACC,KAAK,GAAG,CAAC,CAAC;QAC3BD,MAAM,CAACxG,IAAI,CAAC;YACVkD,KAAK,EAAEnD,CAAC,CAACmD,KAAK;YACd/B,GAAG,EAAEuF,CAAE,CAACvF,GAAG;YACXC,KAAK,EAAEsF,CAAE,CAACtF,KAAK;YACfnB,IAAI,EAAEF,CAAC,CAACE,IAAI;YACZ8B,KAAK,EAAEhC,CAAC,CAACgC,KAAK;YACd3C,KAAK,EAAEW,CAAC,CAACX,KAAAA;SACV,CAAC;QACFoH,MAAM,CAACC,KAAK,GAAG,CAAC,CAAE,CAACtF,GAAG,GAAGpB,CAAC,CAACoB,GAAG;QAC9BqF,MAAM,CAACC,KAAK,GAAG,CAAC,CAAE,CAACrF,KAAK,GAAGrB,CAAC,CAACqB,KAAK;QAClC,eAAA;QACA,IAAK,IAAI1B,CAAC,GAAG8G,MAAM,CAACtE,MAAM,GAAG,CAAC,EAAExC,CAAC,IAAI+G,KAAK,EAAE,EAAE/G,CAAC,CAAE;YAC/CK,CAAC,GAAGyG,MAAM,CAAC9G,CAAC,CAAE;YACd8G,MAAM,CAAC9G,CAAC,CAAC,GAAG;gBACVwD,KAAK,EAAEnD,CAAC,CAACmD,KAAK;gBACd/B,GAAG,EAAEpB,CAAC,CAACoB,GAAG;gBACVC,KAAK,EAAErB,CAAC,CAACqB,KAAK;gBACdnB,IAAI,EAAEF,CAAC,CAACE,IAAI;gBACZ8B,KAAK,EAAEyE,MAAM,CAAC9G,CAAC,GAAG,CAAC,CAAC;gBACpBN,KAAK,EAAEW,CAAC,CAACX,KAAAA;aACV;QACH;QACAoH,MAAM,CAACC,KAAK,GAAG,CAAC,CAAE,CAACxG,IAAI,GAAGuG,MAAM,CAACC,KAAK,CAAC;IACzC;IAEA,mBAAA;IACA1G,CAAC,GAAGyG,MAAM,CAACA,MAAM,CAACtE,MAAM,GAAG,CAAC,CAAE;IAC9B,IAAInC,CAAC,CAACmD,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;QAC9B,+BAAA;QACA,MAAMG,CAAC,GAAGiD,MAAM,CAACA,MAAM,CAACtE,MAAM,GAAG,CAAC,CAAE;QACpC,IAAIqB,CAAC,CAACtD,IAAI,KAAKF,CAAC,EAAE;YAChBwD,CAAC,CAACtD,IAAI,GAAGgB,SAAS;QACpB,CAAC,MAAM,IAAIsC,CAAC,CAACxB,KAAK,KAAKhC,CAAC,EAAE;YACxBwD,CAAC,CAACxB,KAAK,GAAGd,SAAS;QACrB;QACAuF,MAAM,CAACpE,GAAG,EAAE;QACZ,IAAK,IAAI1C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8G,MAAM,CAACtE,MAAM,EAAE,EAAExC,CAAC,CAAE;YACtC8G,MAAM,CAAC9G,CAAC,CAAE,CAACN,KAAK,EAAE;QACpB;QACA,OAAOoB,QAAQ,CAACC,GAAG,EAAE+F,MAAM,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC,MAAM;QACL,IAAIzG,CAAC,CAACE,IAAI,KAAKgB,SAAS,IAAIlB,CAAC,CAACgC,KAAK,KAAKd,SAAS,EAAE;YACjD,+CAAA;YACA,IAAIlB,CAAC,CAACE,IAAI,KAAKgB,SAAS,EAAE;gBACxBhD,IAAI,wKAAC0I,IAAI,CAAC5G,CAAC,EAAEA,CAAC,CAACE,IAAI,CAAC;YACtB,CAAC,MAAM,IAAIF,CAAC,CAACgC,KAAK,KAAKd,SAAS,EAAE;gBAChChD,IAAI,wKAAC0I,IAAI,CAAC5G,CAAC,EAAEA,CAAC,CAACgC,KAAK,CAAC;YACvB;YACA,0DAAA;YACAhC,CAAC,CAACmD,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;YAC1B,IAAK,IAAI/D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8G,MAAM,CAACtE,MAAM,GAAG,CAAC,EAAE,EAAExC,CAAC,CAAE;gBAC1C8G,MAAM,CAAC9G,CAAC,CAAE,CAACN,KAAK,EAAE;YACpB;YACA,OAAOoB,QAAQ,CAACC,GAAG,EAAE+F,MAAM,CAAC,CAAC,CAAC,CAAC;QACjC,CAAC,MAAM,IAAIA,MAAM,CAACtE,MAAM,KAAK,CAAC,EAAE;YAC9B,wBAAA;YACA,OAAO1B,QAAQ,CAACC,GAAG,EAAEQ,SAAS,CAAC;QACjC,CAAC,MAAM;YACL,qDAAA;YACA,IAAK,IAAIvB,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8G,MAAM,CAACtE,MAAM,EAAE,EAAExC,CAAC,CAAE;gBACtC8G,MAAM,CAAC9G,CAAC,CAAE,CAACN,KAAK,EAAE;YACpB;YACA,MAAMwH,MAAM,GAAGJ,MAAM,CAACA,MAAM,CAACtE,MAAM,GAAG,CAAC,CAAC;YACxC2E,cAAc,CAACL,MAAM,CAAC;YACtB,eAAA;YACA,IAAII,MAAO,CAAC3G,IAAI,KAAKF,CAAC,EAAE;gBACtB6G,MAAO,CAAC3G,IAAI,GAAGgB,SAAS;YAC1B,CAAC,MAAM;gBACL2F,MAAO,CAAC7E,KAAK,GAAGd,SAAS;YAC3B;QACF;IACF;IACA,OAAOT,QAAQ,CAACC,GAAG,EAAE+F,MAAM,CAAC,CAAC,CAAC,CAAC;AACjC,CAAC,CAAC;AAGK,MAAMM,IAAI,IAAUtF,IAA4B,GAAcA,IAA+B,CAACrC,KAAK,EAAEC,KAAK,IAAI,CAAC;AAG/G,MAAM2H,aAAa,IAAUvF,IAA4B,GAC9DnB,MAAM,CAACmB,IAAI,kLAAEzD,YAAS,CAACmC,OAAO,CAAC;AAG1B,MAAM8G,cAAc,IAAUxF,IAA4B,GAC/DnB,MAAM,CAACmB,IAAI,kLAAEzD,YAAS,CAAC4D,QAAQ,CAAC;AAElC,cAAA,GACA,MAAMtB,MAAM,GAAGA,CACbmB,IAA4B,EAC5BK,SAAqC,KACd;IACvB,MAAMqC,KAAK,GAA+B1C,IAAI,CAACnD,MAAM,CAACwB,QAAQ,CAAC,EAAgC;IAC/F,IAAIT,KAAK,GAAG,CAAC;IACb,OAAO;QACL,CAACf,MAAM,CAACwB,QAAQ,CAAA,EAAG,IAAMQ,MAAM,CAACmB,IAAI,EAAEK,SAAS,CAAC;QAChDsC,IAAI,EAAEA,CAAA,KAAgC;YACpC/E,KAAK,EAAE;YACP,MAAMgF,KAAK,GAAGF,KAAK,CAAC9C,KAAK;YACzB,IAAIS,SAAS,qLAAK9D,YAAS,CAACmC,OAAO,EAAE;gBACnCgE,KAAK,CAACG,QAAQ,EAAE;YAClB,CAAC,MAAM;gBACLH,KAAK,CAACI,QAAQ,EAAE;YAClB;YACA,OAAQF,KAAK,CAACG,IAAI;gBAChB,KAAK,MAAM;oBAAE;wBACX,OAAO;4BAAEC,IAAI,EAAE,IAAI;4BAAEpD,KAAK,EAAEhC;wBAAK,CAAE;oBACrC;gBACA,KAAK,MAAM;oBAAE;wBACX,OAAO;4BAAEoF,IAAI,EAAE,KAAK;4BAAEpD,KAAK,EAAEgD,KAAK,CAAChD,KAAAA;wBAAK,CAAE;oBAC5C;YACF;QACF;KACD;AACH,CAAC;AAED,MAAMsE,SAAS,GAAGA,CAChB5D,IAAqB,EACrBmF,KAA6C,KACzB;IACpB,IAAI9E,OAAO,GAAgCL,IAAI;IAC/C,IAAIhC,KAAK,GAA6CmB,SAAS;IAC/D,IAAIuD,IAAI,GAAG,KAAK;IAChB,MAAO,CAACA,IAAI,CAAE;QACZ,IAAIrC,OAAO,IAAI,IAAI,EAAE;YACnBrC,KAAK,GAAG5B,KAAK,wJAACoD,IAAI,CAACa,OAAO,EAAErC,KAAK,CAAC;YAClCqC,OAAO,GAAGA,OAAO,CAAClC,IAAI;QACxB,CAAC,MAAM,IAAIH,KAAK,IAAI,IAAI,EAAE;YACxB,MAAMsB,KAAK,GAAG6F,KAAK,CAACnH,KAAK,CAACsB,KAAK,CAACD,GAAG,EAAErB,KAAK,CAACsB,KAAK,CAACA,KAAK,CAAC;YACvD,IAAIxD,MAAM,4IAACmF,MAAM,CAAC3B,KAAK,CAAC,EAAE;gBACxB,OAAOA,KAAK;YACd;YACAe,OAAO,GAAGrC,KAAK,CAACsB,KAAK,CAACW,KAAK;YAC3BjC,KAAK,GAAGA,KAAK,CAACoH,QAAQ;QACxB,CAAC,MAAM;YACL1C,IAAI,GAAG,IAAI;QACb;IACF;IACA,OAAO5G,MAAM,4IAAC8E,IAAI,EAAE;AACtB,CAAC;AAED,MAAMmD,qBAAqB,GAAGA,CAC5B/D,IAAqB,EACrB8D,GAAM,EACNnF,GAAmB,EACnBwG,KAA6C,KACzB;IACpB,IAAI9E,OAAO,GAAgCL,IAAI;IAC/C,IAAIhC,KAAK,GAA6CmB,SAAS;IAC/D,IAAIuD,IAAI,GAAG,KAAK;IAChB,MAAO,CAACA,IAAI,CAAE;QACZ,IAAIrC,OAAO,KAAKlB,SAAS,EAAE;YACzBnB,KAAK,GAAG5B,KAAK,wJAACoD,IAAI,CAACa,OAAO,EAAErC,KAAK,CAAC;YAClC,IAAIW,GAAG,CAACmF,GAAG,EAAEzD,OAAO,CAAChB,GAAG,CAAC,IAAI,CAAC,EAAE;gBAC9BgB,OAAO,GAAGA,OAAO,CAAClC,IAAI;YACxB,CAAC,MAAM;gBACLkC,OAAO,GAAGlB,SAAS;YACrB;QACF,CAAC,MAAM,IAAInB,KAAK,KAAKmB,SAAS,EAAE;YAC9B,IAAIR,GAAG,CAACmF,GAAG,EAAE9F,KAAK,CAACsB,KAAK,CAACD,GAAG,CAAC,IAAI,CAAC,EAAE;gBAClC,MAAMC,KAAK,GAAG6F,KAAK,CAACnH,KAAK,CAACsB,KAAK,CAACD,GAAG,EAAErB,KAAK,CAACsB,KAAK,CAACA,KAAK,CAAC;gBACvD,IAAIxD,MAAM,4IAACmF,MAAM,CAAC3B,KAAK,CAAC,EAAE;oBACxB,OAAOA,KAAK;gBACd;YACF;YACAe,OAAO,GAAGrC,KAAK,CAACsB,KAAK,CAACW,KAAK;YAC3BjC,KAAK,GAAGA,KAAK,CAACoH,QAAQ;QACxB,CAAC,MAAM;YACL1C,IAAI,GAAG,IAAI;QACb;IACF;IACA,OAAO5G,MAAM,4IAAC8E,IAAI,EAAE;AACtB,CAAC;AAED,MAAMsD,aAAa,GAAGA,CACpBlE,IAAqB,EACrBiE,GAAM,EACNtF,GAAmB,EACnBwG,KAA6C,KACzB;IACpB,IAAI9E,OAAO,GAAgCL,IAAI;IAC/C,IAAIhC,KAAK,GAA6CmB,SAAS;IAC/D,IAAIuD,IAAI,GAAG,KAAK;IAChB,MAAO,CAACA,IAAI,CAAE;QACZ,IAAIrC,OAAO,KAAKlB,SAAS,EAAE;YACzBnB,KAAK,GAAG5B,KAAK,wJAACoD,IAAI,CAACa,OAAO,EAAErC,KAAK,CAAC;YAClCqC,OAAO,GAAGA,OAAO,CAAClC,IAAI;QACxB,CAAC,MAAM,IAAIH,KAAK,KAAKmB,SAAS,IAAIR,GAAG,CAACsF,GAAG,EAAEjG,KAAK,CAACsB,KAAK,CAACD,GAAG,CAAC,GAAG,CAAC,EAAE;YAC/D,MAAMC,KAAK,GAAG6F,KAAK,CAACnH,KAAK,CAACsB,KAAK,CAACD,GAAG,EAAErB,KAAK,CAACsB,KAAK,CAACA,KAAK,CAAC;YACvD,IAAIxD,MAAM,4IAACmF,MAAM,CAAC3B,KAAK,CAAC,EAAE;gBACxB,OAAOA,KAAK;YACd;YACAe,OAAO,GAAGrC,KAAK,CAACsB,KAAK,CAACW,KAAK;YAC3BjC,KAAK,GAAGA,KAAK,CAACoH,QAAQ;QACxB,CAAC,MAAM;YACL1C,IAAI,GAAG,IAAI;QACb;IACF;IACA,OAAO5G,MAAM,4IAAC8E,IAAI,EAAE;AACtB,CAAC;AAED,MAAMyD,YAAY,GAAGA,CACnBrE,IAAqB,EACrB8D,GAAM,EACNG,GAAM,EACNtF,GAAmB,EACnBwG,KAA6C,KACzB;IACpB,IAAI9E,OAAO,GAAgCL,IAAI;IAC/C,IAAIhC,KAAK,GAA6CmB,SAAS;IAC/D,IAAIuD,IAAI,GAAG,KAAK;IAChB,MAAO,CAACA,IAAI,CAAE;QACZ,IAAIrC,OAAO,KAAKlB,SAAS,EAAE;YACzBnB,KAAK,GAAG5B,KAAK,wJAACoD,IAAI,CAACa,OAAO,EAAErC,KAAK,CAAC;YAClC,IAAIW,GAAG,CAACmF,GAAG,EAAEzD,OAAO,CAAChB,GAAG,CAAC,IAAI,CAAC,EAAE;gBAC9BgB,OAAO,GAAGA,OAAO,CAAClC,IAAI;YACxB,CAAC,MAAM;gBACLkC,OAAO,GAAGlB,SAAS;YACrB;QACF,CAAC,MAAM,IAAInB,KAAK,KAAKmB,SAAS,IAAIR,GAAG,CAACsF,GAAG,EAAEjG,KAAK,CAACsB,KAAK,CAACD,GAAG,CAAC,GAAG,CAAC,EAAE;YAC/D,IAAIV,GAAG,CAACmF,GAAG,EAAE9F,KAAK,CAACsB,KAAK,CAACD,GAAG,CAAC,IAAI,CAAC,EAAE;gBAClC,MAAMC,KAAK,GAAG6F,KAAK,CAACnH,KAAK,CAACsB,KAAK,CAACD,GAAG,EAAErB,KAAK,CAACsB,KAAK,CAACA,KAAK,CAAC;gBACvD,IAAIxD,MAAM,4IAACmF,MAAM,CAAC3B,KAAK,CAAC,EAAE;oBACxB,OAAOA,KAAK;gBACd;YACF;YACAe,OAAO,GAAGrC,KAAK,CAACsB,KAAK,CAACW,KAAK;YAC3BjC,KAAK,GAAGA,KAAK,CAACoH,QAAQ;QACxB,CAAC,MAAM;YACL1C,IAAI,GAAG,IAAI;QACb;IACF;IACA,OAAO5G,MAAM,4IAAC8E,IAAI,EAAE;AACtB,CAAC;AAED;;IAGA,MAAMmE,cAAc,IAAU/G,KAA6B,IAAI;IAC7D,IAAIC,CAAC,EAAEwD,CAAC,EAAEF,CAAC,EAAE8D,CAAC;IACd,IAAK,IAAIzH,CAAC,GAAGI,KAAK,CAACoC,MAAM,GAAG,CAAC,EAAExC,CAAC,IAAI,CAAC,EAAE,EAAEA,CAAC,CAAE;QAC1CK,CAAC,GAAGD,KAAK,CAACJ,CAAC,CAAE;QACb,IAAIA,CAAC,KAAK,CAAC,EAAE;YACXK,CAAC,CAACmD,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;YAC1B;QACF;QACAF,CAAC,GAAGzD,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;QACjB,IAAI6D,CAAC,CAACtD,IAAI,KAAKF,CAAC,EAAE;YAChBsD,CAAC,GAAGE,CAAC,CAACxB,KAAK;YACX,IAAIsB,CAAC,KAAKpC,SAAS,IAAIoC,CAAC,CAACtB,KAAK,KAAKd,SAAS,IAAIoC,CAAC,CAACtB,KAAK,CAACmB,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;gBAChFC,CAAC,GAAGE,CAAC,CAACxB,KAAK,GAAG9D,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAAC;gBAC3B8D,CAAC,GAAG9D,CAAC,CAACtB,KAAK,GAAG9D,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAACtB,KAAM,CAAC;gBAClCwB,CAAC,CAACxB,KAAK,GAAGsB,CAAC,CAACpD,IAAI;gBAChBoD,CAAC,CAACpD,IAAI,GAAGsD,CAAC;gBACVF,CAAC,CAACtB,KAAK,GAAGoF,CAAC;gBACX9D,CAAC,CAACH,KAAK,GAAGK,CAAC,CAACL,KAAK;gBACjBnD,CAAC,CAACmD,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BF,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1B0D,CAAC,CAACjE,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BxF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;gBACftF,IAAI,wKAAC4F,OAAO,CAACR,CAAC,CAAC;gBACf,IAAI3D,CAAC,GAAG,CAAC,EAAE;oBACT,MAAMgE,EAAE,GAAG5D,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;oBACxB,IAAIgE,EAAE,CAACzD,IAAI,KAAKsD,CAAC,EAAE;wBACjBG,EAAE,CAACzD,IAAI,GAAGoD,CAAC;oBACb,CAAC,MAAM;wBACLK,EAAE,CAAC3B,KAAK,GAAGsB,CAAC;oBACd;gBACF;gBACAvD,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAG2D,CAAC;gBAChB;YACF,CAAC,MAAM,IAAIA,CAAC,KAAKpC,SAAS,IAAIoC,CAAC,CAACpD,IAAI,KAAKgB,SAAS,IAAIoC,CAAC,CAACpD,IAAI,CAACiD,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;gBACrFC,CAAC,GAAGE,CAAC,CAACxB,KAAK,GAAG9D,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAAC;gBAC3B8D,CAAC,GAAG9D,CAAC,CAACpD,IAAI,GAAGhC,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAACpD,IAAK,CAAC;gBAChCsD,CAAC,CAACxB,KAAK,GAAGoF,CAAC,CAAClH,IAAI;gBAChBoD,CAAC,CAACpD,IAAI,GAAGkH,CAAC,CAACpF,KAAK;gBAChBoF,CAAC,CAAClH,IAAI,GAAGsD,CAAC;gBACV4D,CAAC,CAACpF,KAAK,GAAGsB,CAAC;gBACX8D,CAAC,CAACjE,KAAK,GAAGK,CAAC,CAACL,KAAK;gBACjBK,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BJ,CAAC,CAACH,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1B1D,CAAC,CAACmD,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BxF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;gBACftF,IAAI,wKAAC4F,OAAO,CAACR,CAAC,CAAC;gBACfpF,IAAI,wKAAC4F,OAAO,CAACsD,CAAC,CAAC;gBACf,IAAIzH,CAAC,GAAG,CAAC,EAAE;oBACT,MAAMgE,EAAE,GAAG5D,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;oBACxB,IAAIgE,EAAE,CAACzD,IAAI,KAAKsD,CAAC,EAAE;wBACjBG,EAAE,CAACzD,IAAI,GAAGkH,CAAC;oBACb,CAAC,MAAM;wBACLzD,EAAE,CAAC3B,KAAK,GAAGoF,CAAC;oBACd;gBACF;gBACArH,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAGyH,CAAC;gBAChB;YACF;YACA,IAAI9D,CAAC,KAAKpC,SAAS,IAAIoC,CAAC,CAACH,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACM,KAAK,EAAE;gBACnD,IAAIF,CAAC,CAACL,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;oBAC9BG,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BF,CAAC,CAACxB,KAAK,GAAG9D,IAAI,wKAAC2F,OAAO,CAACP,CAAC,EAAEpF,IAAI,wKAACkF,KAAK,CAACC,GAAG,CAAC;oBACzC;gBACF,CAAC,MAAM;oBACLG,CAAC,CAACxB,KAAK,GAAG9D,IAAI,wKAAC2F,OAAO,CAACP,CAAC,EAAEpF,IAAI,wKAACkF,KAAK,CAACC,GAAG,CAAC;oBACzC;gBACF;YACF,CAAC,MAAM,IAAIC,CAAC,KAAKpC,SAAS,EAAE;gBAC1BoC,CAAC,GAAGpF,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAAC;gBACjBE,CAAC,CAACxB,KAAK,GAAGsB,CAAC,CAACpD,IAAI;gBAChBoD,CAAC,CAACpD,IAAI,GAAGsD,CAAC;gBACVF,CAAC,CAACH,KAAK,GAAGK,CAAC,CAACL,KAAK;gBACjBK,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;gBACxBnF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;gBACftF,IAAI,wKAAC4F,OAAO,CAACR,CAAC,CAAC;gBACf,IAAI3D,CAAC,GAAG,CAAC,EAAE;oBACT,MAAMgE,EAAE,GAAG5D,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;oBACxB,IAAIgE,EAAE,CAACzD,IAAI,KAAKsD,CAAC,EAAE;wBACjBG,EAAE,CAACzD,IAAI,GAAGoD,CAAC;oBACb,CAAC,MAAM;wBACLK,EAAE,CAAC3B,KAAK,GAAGsB,CAAC;oBACd;gBACF;gBACAvD,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAG2D,CAAC;gBAChBvD,KAAK,CAACJ,CAAC,CAAC,GAAG6D,CAAC;gBACZ,IAAI7D,CAAC,GAAG,CAAC,GAAGI,KAAK,CAACoC,MAAM,EAAE;oBACxBpC,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAGK,CAAC;gBAClB,CAAC,MAAM;oBACLD,KAAK,CAACE,IAAI,CAACD,CAAC,CAAC;gBACf;gBACAL,CAAC,GAAGA,CAAC,GAAG,CAAC;YACX;QACF,CAAC,MAAM;YACL2D,CAAC,GAAGE,CAAC,CAACtD,IAAI;YACV,IAAIoD,CAAC,KAAKpC,SAAS,IAAIoC,CAAC,CAACpD,IAAI,KAAKgB,SAAS,IAAIoC,CAAC,CAACpD,IAAI,CAACiD,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;gBAC9EC,CAAC,GAAGE,CAAC,CAACtD,IAAI,GAAGhC,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAAC;gBAC1B8D,CAAC,GAAG9D,CAAC,CAACpD,IAAI,GAAGhC,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAACpD,IAAK,CAAC;gBAChCsD,CAAC,CAACtD,IAAI,GAAGoD,CAAC,CAACtB,KAAK;gBAChBsB,CAAC,CAACtB,KAAK,GAAGwB,CAAC;gBACXF,CAAC,CAACpD,IAAI,GAAGkH,CAAC;gBACV9D,CAAC,CAACH,KAAK,GAAGK,CAAC,CAACL,KAAK;gBACjBnD,CAAC,CAACmD,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BF,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1B0D,CAAC,CAACjE,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BxF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;gBACftF,IAAI,wKAAC4F,OAAO,CAACR,CAAC,CAAC;gBACf,IAAI3D,CAAC,GAAG,CAAC,EAAE;oBACT,MAAMgE,EAAE,GAAG5D,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;oBACxB,IAAIgE,EAAE,CAAC3B,KAAK,KAAKwB,CAAC,EAAE;wBAClBG,EAAE,CAAC3B,KAAK,GAAGsB,CAAC;oBACd,CAAC,MAAM;wBACLK,EAAE,CAACzD,IAAI,GAAGoD,CAAC;oBACb;gBACF;gBACAvD,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAG2D,CAAC;gBAChB;YACF,CAAC,MAAM,IAAIA,CAAC,KAAKpC,SAAS,IAAIoC,CAAC,CAACtB,KAAK,KAAKd,SAAS,IAAIoC,CAAC,CAACtB,KAAK,CAACmB,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;gBACvFC,CAAC,GAAGE,CAAC,CAACtD,IAAI,GAAGhC,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAAC;gBAC1B8D,CAAC,GAAG9D,CAAC,CAACtB,KAAK,GAAG9D,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAACtB,KAAM,CAAC;gBAClCwB,CAAC,CAACtD,IAAI,GAAGkH,CAAC,CAACpF,KAAK;gBAChBsB,CAAC,CAACtB,KAAK,GAAGoF,CAAC,CAAClH,IAAI;gBAChBkH,CAAC,CAACpF,KAAK,GAAGwB,CAAC;gBACX4D,CAAC,CAAClH,IAAI,GAAGoD,CAAC;gBACV8D,CAAC,CAACjE,KAAK,GAAGK,CAAC,CAACL,KAAK;gBACjBK,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BJ,CAAC,CAACH,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1B1D,CAAC,CAACmD,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;gBAC1BxF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;gBACftF,IAAI,wKAAC4F,OAAO,CAACR,CAAC,CAAC;gBACfpF,IAAI,wKAAC4F,OAAO,CAACsD,CAAC,CAAC;gBACf,IAAIzH,CAAC,GAAG,CAAC,EAAE;oBACT,MAAMgE,EAAE,GAAG5D,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;oBACxB,IAAIgE,EAAE,CAAC3B,KAAK,KAAKwB,CAAC,EAAE;wBAClBG,EAAE,CAAC3B,KAAK,GAAGoF,CAAC;oBACd,CAAC,MAAM;wBACLzD,EAAE,CAACzD,IAAI,GAAGkH,CAAC;oBACb;gBACF;gBACArH,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAGyH,CAAC;gBAChB;YACF;YACA,IAAI9D,CAAC,KAAKpC,SAAS,IAAIoC,CAAC,CAACH,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACM,KAAK,EAAE;gBACnD,IAAIF,CAAC,CAACL,KAAK,KAAKjF,IAAI,wKAACkF,KAAK,CAACC,GAAG,EAAE;oBAC9BG,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACM,KAAK;oBAC1BF,CAAC,CAACtD,IAAI,GAAGhC,IAAI,wKAAC2F,OAAO,CAACP,CAAC,EAAEpF,IAAI,wKAACkF,KAAK,CAACC,GAAG,CAAC;oBACxC;gBACF,CAAC,MAAM;oBACLG,CAAC,CAACtD,IAAI,GAAGhC,IAAI,wKAAC2F,OAAO,CAACP,CAAC,EAAEpF,IAAI,wKAACkF,KAAK,CAACC,GAAG,CAAC;oBACxC;gBACF;YACF,CAAC,MAAM,IAAIC,CAAC,KAAKpC,SAAS,EAAE;gBAC1BoC,CAAC,GAAGpF,IAAI,wKAACmJ,KAAK,CAAC/D,CAAC,CAAC;gBACjBE,CAAC,CAACtD,IAAI,GAAGoD,CAAC,CAACtB,KAAK;gBAChBsB,CAAC,CAACtB,KAAK,GAAGwB,CAAC;gBACXF,CAAC,CAACH,KAAK,GAAGK,CAAC,CAACL,KAAK;gBACjBK,CAAC,CAACL,KAAK,GAAGjF,IAAI,wKAACkF,KAAK,CAACC,GAAG;gBACxBnF,IAAI,wKAAC4F,OAAO,CAACN,CAAC,CAAC;gBACftF,IAAI,wKAAC4F,OAAO,CAACR,CAAC,CAAC;gBACf,IAAI3D,CAAC,GAAG,CAAC,EAAE;oBACT,MAAMgE,EAAE,GAAG5D,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAE;oBACxB,IAAIgE,EAAE,CAAC3B,KAAK,KAAKwB,CAAC,EAAE;wBAClBG,EAAE,CAAC3B,KAAK,GAAGsB,CAAC;oBACd,CAAC,MAAM;wBACLK,EAAE,CAACzD,IAAI,GAAGoD,CAAC;oBACb;gBACF;gBACAvD,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAG2D,CAAC;gBAChBvD,KAAK,CAACJ,CAAC,CAAC,GAAG6D,CAAC;gBACZ,IAAI7D,CAAC,GAAG,CAAC,GAAGI,KAAK,CAACoC,MAAM,EAAE;oBACxBpC,KAAK,CAACJ,CAAC,GAAG,CAAC,CAAC,GAAGK,CAAC;gBAClB,CAAC,MAAM;oBACLD,KAAK,CAACE,IAAI,CAACD,CAAC,CAAC;gBACf;gBACAL,CAAC,GAAGA,CAAC,GAAG,CAAC;YACX;QACF;IACF;AACF,CAAC","ignoreList":[0]}},
    {"offset": {"line": 10954, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 10960, "column": 0}, "map": {"version":3,"file":"supervisor.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/supervisor.ts"],"sourcesContent":["import type * as Context from \"../Context.js\"\nimport type * as Effect from \"../Effect.js\"\nimport type * as Exit from \"../Exit.js\"\nimport type * as Fiber from \"../Fiber.js\"\nimport { pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as MutableRef from \"../MutableRef.js\"\nimport type * as Option from \"../Option.js\"\nimport { hasProperty, isTagged } from \"../Predicate.js\"\nimport * as SortedSet from \"../SortedSet.js\"\nimport type * as Supervisor from \"../Supervisor.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nconst SupervisorSymbolKey = \"effect/Supervisor\"\n\n/** @internal */\nexport const SupervisorTypeId: Supervisor.SupervisorTypeId = Symbol.for(\n  SupervisorSymbolKey\n) as Supervisor.SupervisorTypeId\n\n/** @internal */\nexport const supervisorVariance = {\n  /* c8 ignore next */\n  _T: (_: never) => _\n}\n\n/** @internal */\nexport class ProxySupervisor<out T> implements Supervisor.Supervisor<T> {\n  readonly [SupervisorTypeId] = supervisorVariance\n\n  constructor(\n    readonly underlying: Supervisor.Supervisor<any>,\n    readonly value0: Effect.Effect<T>\n  ) {\n  }\n\n  get value(): Effect.Effect<T> {\n    return this.value0\n  }\n\n  onStart<A, E, R>(\n    context: Context.Context<R>,\n    effect: Effect.Effect<A, E, R>,\n    parent: Option.Option<Fiber.RuntimeFiber<any, any>>,\n    fiber: Fiber.RuntimeFiber<A, E>\n  ): void {\n    this.underlying.onStart(context, effect, parent, fiber)\n  }\n\n  onEnd<A, E>(value: Exit.Exit<A, E>, fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.underlying.onEnd(value, fiber)\n  }\n\n  onEffect<A, E>(fiber: Fiber.RuntimeFiber<A, E>, effect: Effect.Effect<any, any, any>): void {\n    this.underlying.onEffect(fiber, effect)\n  }\n\n  onSuspend<A, E>(fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.underlying.onSuspend(fiber)\n  }\n\n  onResume<A, E>(fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.underlying.onResume(fiber)\n  }\n\n  map<B>(f: (a: T) => B): Supervisor.Supervisor<B> {\n    return new ProxySupervisor(this, pipe(this.value, core.map(f)))\n  }\n\n  zip<B>(right: Supervisor.Supervisor<B>): Supervisor.Supervisor<[T, B]> {\n    return new Zip(this, right)\n  }\n}\n\n/** @internal */\nexport class Zip<out T0, out T1> implements Supervisor.Supervisor<readonly [T0, T1]> {\n  readonly _tag = \"Zip\"\n  readonly [SupervisorTypeId] = supervisorVariance\n\n  constructor(\n    readonly left: Supervisor.Supervisor<T0>,\n    readonly right: Supervisor.Supervisor<T1>\n  ) {\n  }\n\n  get value(): Effect.Effect<[T0, T1]> {\n    return core.zip(this.left.value, this.right.value)\n  }\n\n  onStart<A, E, R>(\n    context: Context.Context<R>,\n    effect: Effect.Effect<A, E, R>,\n    parent: Option.Option<Fiber.RuntimeFiber<any, any>>,\n    fiber: Fiber.RuntimeFiber<A, E>\n  ): void {\n    this.left.onStart(context, effect, parent, fiber)\n    this.right.onStart(context, effect, parent, fiber)\n  }\n\n  onEnd<A, E>(value: Exit.Exit<A, E>, fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.left.onEnd(value, fiber)\n    this.right.onEnd(value, fiber)\n  }\n\n  onEffect<A, E>(fiber: Fiber.RuntimeFiber<A, E>, effect: Effect.Effect<any, any, any>): void {\n    this.left.onEffect(fiber, effect)\n    this.right.onEffect(fiber, effect)\n  }\n\n  onSuspend<A, E>(fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.left.onSuspend(fiber)\n    this.right.onSuspend(fiber)\n  }\n\n  onResume<A, E>(fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.left.onResume(fiber)\n    this.right.onResume(fiber)\n  }\n\n  map<B>(f: (a: [T0, T1]) => B): Supervisor.Supervisor<B> {\n    return new ProxySupervisor(this, pipe(this.value, core.map(f)))\n  }\n\n  zip<A>(right: Supervisor.Supervisor<A>): Supervisor.Supervisor<[[T0, T1], A]> {\n    return new Zip(this, right)\n  }\n}\n\n/** @internal */\nexport const isZip = (self: unknown): self is Zip<any, any> =>\n  hasProperty(self, SupervisorTypeId) && isTagged(self, \"Zip\")\n\n/** @internal */\nexport class Track implements Supervisor.Supervisor<Array<Fiber.RuntimeFiber<any, any>>> {\n  readonly [SupervisorTypeId] = supervisorVariance\n\n  readonly fibers: Set<Fiber.RuntimeFiber<any, any>> = new Set()\n\n  get value(): Effect.Effect<Array<Fiber.RuntimeFiber<any, any>>> {\n    return core.sync(() => Array.from(this.fibers))\n  }\n\n  onStart<A, E, R>(\n    _context: Context.Context<R>,\n    _effect: Effect.Effect<A, E, R>,\n    _parent: Option.Option<Fiber.RuntimeFiber<any, any>>,\n    fiber: Fiber.RuntimeFiber<A, E>\n  ): void {\n    this.fibers.add(fiber)\n  }\n\n  onEnd<A, E>(_value: Exit.Exit<A, E>, fiber: Fiber.RuntimeFiber<A, E>): void {\n    this.fibers.delete(fiber)\n  }\n\n  onEffect<A, E>(_fiber: Fiber.RuntimeFiber<A, E>, _effect: Effect.Effect<any, any, any>): void {\n    //\n  }\n\n  onSuspend<A, E>(_fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  onResume<A, E>(_fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  map<B>(f: (a: Array<Fiber.RuntimeFiber<any, any>>) => B): Supervisor.Supervisor<B> {\n    return new ProxySupervisor(this, pipe(this.value, core.map(f)))\n  }\n\n  zip<A>(\n    right: Supervisor.Supervisor<A>\n  ): Supervisor.Supervisor<[Array<Fiber.RuntimeFiber<any, any>>, A]> {\n    return new Zip(this, right)\n  }\n\n  onRun<E, A, X>(execution: () => X, _fiber: Fiber.RuntimeFiber<A, E>): X {\n    return execution()\n  }\n}\n\n/** @internal */\nexport class Const<out T> implements Supervisor.Supervisor<T> {\n  readonly [SupervisorTypeId] = supervisorVariance\n\n  constructor(readonly effect: Effect.Effect<T>) {\n  }\n\n  get value(): Effect.Effect<T> {\n    return this.effect\n  }\n\n  onStart<A, E, R>(\n    _context: Context.Context<R>,\n    _effect: Effect.Effect<A, E, R>,\n    _parent: Option.Option<Fiber.RuntimeFiber<any, any>>,\n    _fiber: Fiber.RuntimeFiber<A, E>\n  ): void {\n    //\n  }\n\n  onEnd<A, E>(_value: Exit.Exit<A, E>, _fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  onEffect<A, E>(_fiber: Fiber.RuntimeFiber<A, E>, _effect: Effect.Effect<any, any, any>): void {\n    //\n  }\n\n  onSuspend<A, E>(_fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  onResume<A, E>(_fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  map<B>(f: (a: T) => B): Supervisor.Supervisor<B> {\n    return new ProxySupervisor(this, pipe(this.value, core.map(f)))\n  }\n\n  zip<A>(right: Supervisor.Supervisor<A>): Supervisor.Supervisor<[T, A]> {\n    return new Zip(this, right)\n  }\n\n  onRun<E, A, X>(execution: () => X, _fiber: Fiber.RuntimeFiber<A, E>): X {\n    return execution()\n  }\n}\n\nclass FibersIn implements Supervisor.Supervisor<SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>> {\n  readonly [SupervisorTypeId] = supervisorVariance\n\n  constructor(readonly ref: MutableRef.MutableRef<SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>>) {\n  }\n\n  get value(): Effect.Effect<SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>> {\n    return core.sync(() => MutableRef.get(this.ref))\n  }\n\n  onStart<A, E, R>(\n    _context: Context.Context<R>,\n    _effect: Effect.Effect<A, E, R>,\n    _parent: Option.Option<Fiber.RuntimeFiber<any, any>>,\n    fiber: Fiber.RuntimeFiber<A, E>\n  ): void {\n    pipe(this.ref, MutableRef.set(pipe(MutableRef.get(this.ref), SortedSet.add(fiber))))\n  }\n\n  onEnd<A, E>(_value: Exit.Exit<A, E>, fiber: Fiber.RuntimeFiber<A, E>): void {\n    pipe(this.ref, MutableRef.set(pipe(MutableRef.get(this.ref), SortedSet.remove(fiber))))\n  }\n\n  onEffect<A, E>(_fiber: Fiber.RuntimeFiber<A, E>, _effect: Effect.Effect<any, any, any>): void {\n    //\n  }\n\n  onSuspend<A, E>(_fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  onResume<A, E>(_fiber: Fiber.RuntimeFiber<A, E>): void {\n    //\n  }\n\n  map<B>(f: (a: SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>) => B): Supervisor.Supervisor<B> {\n    return new ProxySupervisor(this, pipe(this.value, core.map(f)))\n  }\n\n  zip<A>(\n    right: Supervisor.Supervisor<A>\n  ): Supervisor.Supervisor<[SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>, A]> {\n    return new Zip(this, right)\n  }\n\n  onRun<E, A, X>(execution: () => X, _fiber: Fiber.RuntimeFiber<A, E>): X {\n    return execution()\n  }\n}\n\n/** @internal */\nexport const unsafeTrack = (): Supervisor.Supervisor<Array<Fiber.RuntimeFiber<any, any>>> => {\n  return new Track()\n}\n\n/** @internal */\nexport const track: Effect.Effect<Supervisor.Supervisor<Array<Fiber.RuntimeFiber<any, any>>>> = core.sync(unsafeTrack)\n\n/** @internal */\nexport const fromEffect = <A>(effect: Effect.Effect<A>): Supervisor.Supervisor<A> => {\n  return new Const(effect)\n}\n\n/** @internal */\nexport const none = globalValue(\"effect/Supervisor/none\", () => fromEffect(core.void))\n\n/** @internal */\nexport const fibersIn = (\n  ref: MutableRef.MutableRef<SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>>\n): Effect.Effect<Supervisor.Supervisor<SortedSet.SortedSet<Fiber.RuntimeFiber<any, any>>>> =>\n  core.sync(() => new FibersIn(ref))\n"],"names":["pipe","globalValue","MutableRef","hasProperty","isTagged","SortedSet","core","SupervisorSymbolKey","SupervisorTypeId","Symbol","for","supervisorVariance","_T","_","ProxySupervisor","underlying","value0","constructor","value","onStart","context","effect","parent","fiber","onEnd","onEffect","onSuspend","onResume","map","f","zip","right","Zip","left","_tag","isZip","self","Track","fibers","Set","sync","Array","from","_context","_effect","_parent","add","_value","delete","_fiber","onRun","execution","Const","FibersIn","ref","get","set","remove","unsafeTrack","track","fromEffect","none","void","fibersIn"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11172, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 11178, "column": 0}, "map": {"version":3,"file":"patch.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/supervisor/patch.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport * as Differ from \"../../Differ.js\"\nimport * as Equal from \"../../Equal.js\"\nimport { pipe } from \"../../Function.js\"\nimport * as HashSet from \"../../HashSet.js\"\nimport type * as Supervisor from \"../../Supervisor.js\"\nimport * as supervisor from \"../supervisor.js\"\n\n/** @internal */\nexport type SupervisorPatch = Empty | AddSupervisor | RemoveSupervisor | AndThen\n\n/** @internal */\nexport const OP_EMPTY = \"Empty\" as const\n\n/** @internal */\nexport type OP_EMPTY = typeof OP_EMPTY\n\n/** @internal */\nexport const OP_ADD_SUPERVISOR = \"AddSupervisor\" as const\n\n/** @internal */\nexport type OP_ADD_SUPERVISOR = typeof OP_ADD_SUPERVISOR\n\n/** @internal */\nexport const OP_REMOVE_SUPERVISOR = \"RemoveSupervisor\" as const\n\n/** @internal */\nexport type OP_REMOVE_SUPERVISOR = typeof OP_REMOVE_SUPERVISOR\n\n/** @internal */\nexport const OP_AND_THEN = \"AndThen\" as const\n\n/** @internal */\nexport type OP_AND_THEN = typeof OP_AND_THEN\n\n/** @internal */\nexport interface Empty {\n  readonly _tag: OP_EMPTY\n}\n\n/** @internal */\nexport interface AddSupervisor {\n  readonly _tag: OP_ADD_SUPERVISOR\n  readonly supervisor: Supervisor.Supervisor<any>\n}\n\n/** @internal */\nexport interface RemoveSupervisor {\n  readonly _tag: OP_REMOVE_SUPERVISOR\n  readonly supervisor: Supervisor.Supervisor<any>\n}\n\n/** @internal */\nexport interface AndThen {\n  readonly _tag: OP_AND_THEN\n  readonly first: SupervisorPatch\n  readonly second: SupervisorPatch\n}\n\n/**\n * The empty `SupervisorPatch`.\n *\n * @internal\n */\nexport const empty: SupervisorPatch = { _tag: OP_EMPTY }\n\n/**\n * Combines two patches to produce a new patch that describes applying the\n * updates from this patch and then the updates from the specified patch.\n *\n * @internal\n */\nexport const combine = (self: SupervisorPatch, that: SupervisorPatch): SupervisorPatch => {\n  return {\n    _tag: OP_AND_THEN,\n    first: self,\n    second: that\n  }\n}\n\n/**\n * Applies a `SupervisorPatch` to a `Supervisor` to produce a new `Supervisor`.\n *\n * @internal\n */\nexport const patch = (\n  self: SupervisorPatch,\n  supervisor: Supervisor.Supervisor<any>\n): Supervisor.Supervisor<any> => {\n  return patchLoop(supervisor, Chunk.of(self))\n}\n\n/** @internal */\nconst patchLoop = (\n  _supervisor: Supervisor.Supervisor<any>,\n  _patches: Chunk.Chunk<SupervisorPatch>\n): Supervisor.Supervisor<any> => {\n  let supervisor = _supervisor\n  let patches = _patches\n  while (Chunk.isNonEmpty(patches)) {\n    const head = Chunk.headNonEmpty(patches)\n    switch (head._tag) {\n      case OP_EMPTY: {\n        patches = Chunk.tailNonEmpty(patches)\n        break\n      }\n      case OP_ADD_SUPERVISOR: {\n        supervisor = supervisor.zip(head.supervisor)\n        patches = Chunk.tailNonEmpty(patches)\n        break\n      }\n      case OP_REMOVE_SUPERVISOR: {\n        supervisor = removeSupervisor(supervisor, head.supervisor)\n        patches = Chunk.tailNonEmpty(patches)\n        break\n      }\n      case OP_AND_THEN: {\n        patches = Chunk.prepend(head.first)(Chunk.prepend(head.second)(Chunk.tailNonEmpty(patches)))\n        break\n      }\n    }\n  }\n  return supervisor\n}\n\n/** @internal */\nconst removeSupervisor = (\n  self: Supervisor.Supervisor<any>,\n  that: Supervisor.Supervisor<any>\n): Supervisor.Supervisor<any> => {\n  if (Equal.equals(self, that)) {\n    return supervisor.none\n  } else {\n    if (supervisor.isZip(self)) {\n      return removeSupervisor(self.left, that).zip(removeSupervisor(self.right, that))\n    } else {\n      return self\n    }\n  }\n}\n\n/** @internal */\nconst toSet = (self: Supervisor.Supervisor<any>): HashSet.HashSet<Supervisor.Supervisor<any>> => {\n  if (Equal.equals(self, supervisor.none)) {\n    return HashSet.empty()\n  } else {\n    if (supervisor.isZip(self)) {\n      return pipe(toSet(self.left), HashSet.union(toSet(self.right)))\n    } else {\n      return HashSet.make(self)\n    }\n  }\n}\n\n/** @internal */\nexport const diff = (\n  oldValue: Supervisor.Supervisor<any>,\n  newValue: Supervisor.Supervisor<any>\n): SupervisorPatch => {\n  if (Equal.equals(oldValue, newValue)) {\n    return empty\n  }\n  const oldSupervisors = toSet(oldValue)\n  const newSupervisors = toSet(newValue)\n  const added = pipe(\n    newSupervisors,\n    HashSet.difference(oldSupervisors),\n    HashSet.reduce(\n      empty as SupervisorPatch,\n      (patch, supervisor) => combine(patch, { _tag: OP_ADD_SUPERVISOR, supervisor })\n    )\n  )\n  const removed = pipe(\n    oldSupervisors,\n    HashSet.difference(newSupervisors),\n    HashSet.reduce(\n      empty as SupervisorPatch,\n      (patch, supervisor) => combine(patch, { _tag: OP_REMOVE_SUPERVISOR, supervisor })\n    )\n  )\n  return combine(added, removed)\n}\n\n/** @internal */\nexport const differ = Differ.make<Supervisor.Supervisor<any>, SupervisorPatch>({\n  empty,\n  patch,\n  combine,\n  diff\n})\n"],"names":["Chunk","Differ","Equal","pipe","HashSet","supervisor","OP_EMPTY","OP_ADD_SUPERVISOR","OP_REMOVE_SUPERVISOR","OP_AND_THEN","empty","_tag","combine","self","that","first","second","patch","patchLoop","of","_supervisor","_patches","patches","isNonEmpty","head","headNonEmpty","tailNonEmpty","zip","removeSupervisor","prepend","equals","none","isZip","left","right","toSet","union","make","diff","oldValue","newValue","oldSupervisors","newSupervisors","added","difference","reduce","removed","differ"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11294, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 11300, "column": 0}, "map": {"version":3,"file":"request.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/request.ts"],"sourcesContent":["import type * as Cause from \"../Cause.js\"\nimport type * as Effect from \"../Effect.js\"\nimport { dual } from \"../Function.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Request from \"../Request.js\"\nimport type * as Types from \"../Types.js\"\nimport * as completedRequestMap from \"./completedRequestMap.js\"\nimport * as core from \"./core.js\"\nimport { StructuralPrototype } from \"./effectable.js\"\n\n/** @internal */\nconst RequestSymbolKey = \"effect/Request\"\n\n/** @internal */\nexport const RequestTypeId: Request.RequestTypeId = Symbol.for(\n  RequestSymbolKey\n) as Request.RequestTypeId\n\nconst requestVariance = {\n  /* c8 ignore next */\n  _E: (_: never) => _,\n  /* c8 ignore next */\n  _A: (_: never) => _\n}\n\nconst RequestPrototype = {\n  ...StructuralPrototype,\n  [RequestTypeId]: requestVariance\n}\n\n/** @internal */\nexport const isRequest = (u: unknown): u is Request.Request<unknown, unknown> => hasProperty(u, RequestTypeId)\n\n/** @internal */\nexport const of = <R extends Request.Request<any, any>>(): Request.Request.Constructor<R> => (args) =>\n  Object.assign(Object.create(RequestPrototype), args)\n\n/** @internal */\nexport const tagged = <R extends Request.Request<any, any> & { _tag: string }>(\n  tag: R[\"_tag\"]\n): Request.Request.Constructor<R, \"_tag\"> =>\n(args) => {\n  const request = Object.assign(Object.create(RequestPrototype), args)\n  request._tag = tag\n  return request\n}\n\n/** @internal */\nexport const Class: new<Success, Error, A extends Record<string, any>>(\n  args: Types.Equals<Omit<A, keyof Request.Request<unknown, unknown>>, {}> extends true ? void\n    : { readonly [P in keyof A as P extends keyof Request.Request<unknown, unknown> ? never : P]: A[P] }\n) => Request.Request<Success, Error> & Readonly<A> = (function() {\n  function Class(this: any, args: any) {\n    if (args) {\n      Object.assign(this, args)\n    }\n  }\n  Class.prototype = RequestPrototype\n  return Class as any\n})()\n\n/** @internal */\nexport const TaggedClass = <Tag extends string>(\n  tag: Tag\n): new<Success, Error, A extends Record<string, any>>(\n  args: Types.Equals<Omit<A, keyof Request.Request<unknown, unknown>>, {}> extends true ? void\n    : { readonly [P in keyof A as P extends \"_tag\" | keyof Request.Request<unknown, unknown> ? never : P]: A[P] }\n) => Request.Request<Success, Error> & Readonly<A> & { readonly _tag: Tag } => {\n  return class TaggedClass extends Class<any, any, any> {\n    readonly _tag = tag\n  } as any\n}\n\n/** @internal */\nexport const complete = dual<\n  <A extends Request.Request<any, any>>(\n    result: Request.Request.Result<A>\n  ) => (self: A) => Effect.Effect<void>,\n  <A extends Request.Request<any, any>>(\n    self: A,\n    result: Request.Request.Result<A>\n  ) => Effect.Effect<void>\n>(2, (self, result) =>\n  core.fiberRefGetWith(\n    completedRequestMap.currentRequestMap,\n    (map) =>\n      core.sync(() => {\n        if (map.has(self)) {\n          const entry = map.get(self)!\n          if (!entry.state.completed) {\n            entry.state.completed = true\n            core.deferredUnsafeDone(entry.result, result)\n          }\n        }\n      })\n  ))\n\n/** @internal */\nexport const completeEffect = dual<\n  <A extends Request.Request<any, any>, R>(\n    effect: Effect.Effect<Request.Request.Success<A>, Request.Request.Error<A>, R>\n  ) => (self: A) => Effect.Effect<void, never, R>,\n  <A extends Request.Request<any, any>, R>(\n    self: A,\n    effect: Effect.Effect<Request.Request.Success<A>, Request.Request.Error<A>, R>\n  ) => Effect.Effect<void, never, R>\n>(2, (self, effect) =>\n  core.matchEffect(effect, {\n    onFailure: (error) => complete(self, core.exitFail(error) as any),\n    onSuccess: (value) => complete(self, core.exitSucceed(value) as any)\n  }))\n\n/** @internal */\nexport const fail = dual<\n  <A extends Request.Request<any, any>>(\n    error: Request.Request.Error<A>\n  ) => (self: A) => Effect.Effect<void>,\n  <A extends Request.Request<any, any>>(\n    self: A,\n    error: Request.Request.Error<A>\n  ) => Effect.Effect<void>\n>(2, (self, error) => complete(self, core.exitFail(error) as any))\n\n/** @internal */\nexport const failCause = dual<\n  <A extends Request.Request<any, any>>(\n    cause: Cause.Cause<Request.Request.Error<A>>\n  ) => (self: A) => Effect.Effect<void>,\n  <A extends Request.Request<any, any>>(\n    self: A,\n    cause: Cause.Cause<Request.Request.Error<A>>\n  ) => Effect.Effect<void>\n>(2, (self, cause) => complete(self, core.exitFailCause(cause) as any))\n\n/** @internal */\nexport const succeed = dual<\n  <A extends Request.Request<any, any>>(\n    value: Request.Request.Success<A>\n  ) => (self: A) => Effect.Effect<void>,\n  <A extends Request.Request<any, any>>(\n    self: A,\n    value: Request.Request.Success<A>\n  ) => Effect.Effect<void>\n>(2, (self, value) => complete(self, core.exitSucceed(value) as any))\n\n/** @internal */\nexport class Listeners {\n  count = 0\n  observers: Set<(count: number) => void> = new Set()\n  interrupted = false\n  addObserver(f: (count: number) => void): void {\n    this.observers.add(f)\n  }\n  removeObserver(f: (count: number) => void): void {\n    this.observers.delete(f)\n  }\n  increment() {\n    this.count++\n    this.observers.forEach((f) => f(this.count))\n  }\n  decrement() {\n    this.count--\n    this.observers.forEach((f) => f(this.count))\n  }\n}\n\n/**\n * @internal\n */\nexport const filterOutCompleted = <A extends Request.Request<any, any>>(requests: Array<A>) =>\n  core.fiberRefGetWith(\n    completedRequestMap.currentRequestMap,\n    (map) =>\n      core.succeed(\n        requests.filter((request) => !(map.get(request)?.state.completed === true))\n      )\n  )\n"],"names":["dual","hasProperty","completedRequestMap","core","StructuralPrototype","RequestSymbolKey","RequestTypeId","Symbol","for","requestVariance","_E","_","_A","RequestPrototype","isRequest","u","of","args","Object","assign","create","tagged","tag","request","_tag","Class","prototype","TaggedClass","complete","self","result","fiberRefGetWith","currentRequestMap","map","sync","has","entry","get","state","completed","deferredUnsafeDone","completeEffect","effect","matchEffect","onFailure","error","exitFail","onSuccess","value","exitSucceed","fail","failCause","cause","exitFailCause","succeed","Listeners","count","observers","Set","interrupted","addObserver","f","add","removeObserver","delete","increment","forEach","decrement","filterOutCompleted","requests","filter"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11392, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 11398, "column": 0}, "map": {"version":3,"file":"interval.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schedule/interval.ts"],"sourcesContent":["import * as Duration from \"../../Duration.js\"\nimport { dual } from \"../../Function.js\"\nimport * as Option from \"../../Option.js\"\nimport type * as Interval from \"../../ScheduleInterval.js\"\n\n/** @internal */\nconst IntervalSymbolKey = \"effect/ScheduleInterval\"\n\n/** @internal */\nexport const IntervalTypeId: Interval.IntervalTypeId = Symbol.for(\n  IntervalSymbolKey\n) as Interval.IntervalTypeId\n\n/** @internal */\nexport const empty: Interval.Interval = {\n  [IntervalTypeId]: IntervalTypeId,\n  startMillis: 0,\n  endMillis: 0\n}\n\n/** @internal */\nexport const make = (startMillis: number, endMillis: number): Interval.Interval => {\n  if (startMillis > endMillis) {\n    return empty\n  }\n  return {\n    [IntervalTypeId]: IntervalTypeId,\n    startMillis,\n    endMillis\n  }\n}\n\n/** @internal */\nexport const lessThan = dual<\n  (that: Interval.Interval) => (self: Interval.Interval) => boolean,\n  (self: Interval.Interval, that: Interval.Interval) => boolean\n>(2, (self, that) => min(self, that) === self)\n\n/** @internal */\nexport const min = dual<\n  (that: Interval.Interval) => (self: Interval.Interval) => Interval.Interval,\n  (self: Interval.Interval, that: Interval.Interval) => Interval.Interval\n>(2, (self, that) => {\n  if (self.endMillis <= that.startMillis) return self\n  if (that.endMillis <= self.startMillis) return that\n  if (self.startMillis < that.startMillis) return self\n  if (that.startMillis < self.startMillis) return that\n  if (self.endMillis <= that.endMillis) return self\n  return that\n})\n\n/** @internal */\nexport const max = dual<\n  (that: Interval.Interval) => (self: Interval.Interval) => Interval.Interval,\n  (self: Interval.Interval, that: Interval.Interval) => Interval.Interval\n>(2, (self, that) => min(self, that) === self ? that : self)\n\n/** @internal */\nexport const isEmpty = (self: Interval.Interval): boolean => {\n  return self.startMillis >= self.endMillis\n}\n\n/** @internal */\nexport const isNonEmpty = (self: Interval.Interval): boolean => {\n  return !isEmpty(self)\n}\n\n/** @internal */\nexport const intersect = dual<\n  (that: Interval.Interval) => (self: Interval.Interval) => Interval.Interval,\n  (self: Interval.Interval, that: Interval.Interval) => Interval.Interval\n>(2, (self, that) => {\n  const start = Math.max(self.startMillis, that.startMillis)\n  const end = Math.min(self.endMillis, that.endMillis)\n  return make(start, end)\n})\n\n/** @internal */\nexport const size = (self: Interval.Interval): Duration.Duration => {\n  return Duration.millis(self.endMillis - self.startMillis)\n}\n\n/** @internal */\nexport const union = dual<\n  (that: Interval.Interval) => (self: Interval.Interval) => Option.Option<Interval.Interval>,\n  (self: Interval.Interval, that: Interval.Interval) => Option.Option<Interval.Interval>\n>(2, (self, that) => {\n  const start = Math.max(self.startMillis, that.startMillis)\n  const end = Math.min(self.endMillis, that.endMillis)\n  return start < end ? Option.none() : Option.some(make(start, end))\n})\n\n/** @internal */\nexport const after = (startMilliseconds: number): Interval.Interval => {\n  return make(startMilliseconds, Number.POSITIVE_INFINITY)\n}\n\n/** @internal */\nexport const before = (endMilliseconds: number): Interval.Interval => {\n  return make(Number.NEGATIVE_INFINITY, endMilliseconds)\n}\n"],"names":["Duration","dual","Option","IntervalSymbolKey","IntervalTypeId","Symbol","for","empty","startMillis","endMillis","make","lessThan","self","that","min","max","isEmpty","isNonEmpty","intersect","start","Math","end","size","millis","union","none","some","after","startMilliseconds","Number","POSITIVE_INFINITY","before","endMilliseconds","NEGATIVE_INFINITY"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11471, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 11477, "column": 0}, "map": {"version":3,"file":"intervals.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schedule/intervals.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport { dual, pipe } from \"../../Function.js\"\nimport * as Option from \"../../Option.js\"\nimport * as Interval from \"../../ScheduleInterval.js\"\nimport type * as Intervals from \"../../ScheduleIntervals.js\"\nimport { getBugErrorMessage } from \"../errors.js\"\n\n/** @internal */\nconst IntervalsSymbolKey = \"effect/ScheduleIntervals\"\n\n/** @internal */\nexport const IntervalsTypeId: Intervals.IntervalsTypeId = Symbol.for(\n  IntervalsSymbolKey\n) as Intervals.IntervalsTypeId\n\n/** @internal */\nexport const make = (intervals: Chunk.Chunk<Interval.Interval>): Intervals.Intervals => {\n  return {\n    [IntervalsTypeId]: IntervalsTypeId,\n    intervals\n  }\n}\n/** @internal */\nexport const empty: Intervals.Intervals = make(Chunk.empty())\n\n/** @internal */\nexport const fromIterable = (intervals: Iterable<Interval.Interval>): Intervals.Intervals =>\n  Array.from(intervals).reduce(\n    (intervals, interval) => pipe(intervals, union(make(Chunk.of(interval)))),\n    empty\n  )\n\n/** @internal */\nexport const union = dual<\n  (that: Intervals.Intervals) => (self: Intervals.Intervals) => Intervals.Intervals,\n  (self: Intervals.Intervals, that: Intervals.Intervals) => Intervals.Intervals\n>(2, (self, that) => {\n  if (!Chunk.isNonEmpty(that.intervals)) {\n    return self\n  }\n  if (!Chunk.isNonEmpty(self.intervals)) {\n    return that\n  }\n  if (Chunk.headNonEmpty(self.intervals).startMillis < Chunk.headNonEmpty(that.intervals).startMillis) {\n    return unionLoop(\n      Chunk.tailNonEmpty(self.intervals),\n      that.intervals,\n      Chunk.headNonEmpty(self.intervals),\n      Chunk.empty()\n    )\n  }\n  return unionLoop(\n    self.intervals,\n    Chunk.tailNonEmpty(that.intervals),\n    Chunk.headNonEmpty(that.intervals),\n    Chunk.empty()\n  )\n})\n\n/** @internal */\nconst unionLoop = (\n  _self: Chunk.Chunk<Interval.Interval>,\n  _that: Chunk.Chunk<Interval.Interval>,\n  _interval: Interval.Interval,\n  _acc: Chunk.Chunk<Interval.Interval>\n): Intervals.Intervals => {\n  let self = _self\n  let that = _that\n  let interval = _interval\n  let acc = _acc\n  while (Chunk.isNonEmpty(self) || Chunk.isNonEmpty(that)) {\n    if (!Chunk.isNonEmpty(self) && Chunk.isNonEmpty(that)) {\n      if (interval.endMillis < Chunk.headNonEmpty(that).startMillis) {\n        acc = pipe(acc, Chunk.prepend(interval))\n        interval = Chunk.headNonEmpty(that)\n        that = Chunk.tailNonEmpty(that)\n        self = Chunk.empty()\n      } else {\n        interval = Interval.make(interval.startMillis, Chunk.headNonEmpty(that).endMillis)\n        that = Chunk.tailNonEmpty(that)\n        self = Chunk.empty()\n      }\n    } else if (Chunk.isNonEmpty(self) && Chunk.isEmpty(that)) {\n      if (interval.endMillis < Chunk.headNonEmpty(self).startMillis) {\n        acc = pipe(acc, Chunk.prepend(interval))\n        interval = Chunk.headNonEmpty(self)\n        that = Chunk.empty()\n        self = Chunk.tailNonEmpty(self)\n      } else {\n        interval = Interval.make(interval.startMillis, Chunk.headNonEmpty(self).endMillis)\n        that = Chunk.empty()\n        self = Chunk.tailNonEmpty(self)\n      }\n    } else if (Chunk.isNonEmpty(self) && Chunk.isNonEmpty(that)) {\n      if (Chunk.headNonEmpty(self).startMillis < Chunk.headNonEmpty(that).startMillis) {\n        if (interval.endMillis < Chunk.headNonEmpty(self).startMillis) {\n          acc = pipe(acc, Chunk.prepend(interval))\n          interval = Chunk.headNonEmpty(self)\n          self = Chunk.tailNonEmpty(self)\n        } else {\n          interval = Interval.make(interval.startMillis, Chunk.headNonEmpty(self).endMillis)\n          self = Chunk.tailNonEmpty(self)\n        }\n      } else if (interval.endMillis < Chunk.headNonEmpty(that).startMillis) {\n        acc = pipe(acc, Chunk.prepend(interval))\n        interval = Chunk.headNonEmpty(that)\n        that = Chunk.tailNonEmpty(that)\n      } else {\n        interval = Interval.make(interval.startMillis, Chunk.headNonEmpty(that).endMillis)\n        that = Chunk.tailNonEmpty(that)\n      }\n    } else {\n      throw new Error(getBugErrorMessage(\"Intervals.unionLoop\"))\n    }\n  }\n  return make(pipe(acc, Chunk.prepend(interval), Chunk.reverse))\n}\n\n/** @internal */\nexport const intersect = dual<\n  (that: Intervals.Intervals) => (self: Intervals.Intervals) => Intervals.Intervals,\n  (self: Intervals.Intervals, that: Intervals.Intervals) => Intervals.Intervals\n>(2, (self, that) => intersectLoop(self.intervals, that.intervals, Chunk.empty()))\n\n/** @internal */\nconst intersectLoop = (\n  _left: Chunk.Chunk<Interval.Interval>,\n  _right: Chunk.Chunk<Interval.Interval>,\n  _acc: Chunk.Chunk<Interval.Interval>\n): Intervals.Intervals => {\n  let left = _left\n  let right = _right\n  let acc = _acc\n  while (Chunk.isNonEmpty(left) && Chunk.isNonEmpty(right)) {\n    const interval = pipe(Chunk.headNonEmpty(left), Interval.intersect(Chunk.headNonEmpty(right)))\n    const intervals = Interval.isEmpty(interval) ? acc : pipe(acc, Chunk.prepend(interval))\n    if (pipe(Chunk.headNonEmpty(left), Interval.lessThan(Chunk.headNonEmpty(right)))) {\n      left = Chunk.tailNonEmpty(left)\n    } else {\n      right = Chunk.tailNonEmpty(right)\n    }\n    acc = intervals\n  }\n  return make(Chunk.reverse(acc))\n}\n\n/** @internal */\nexport const start = (self: Intervals.Intervals): number => {\n  return pipe(\n    self.intervals,\n    Chunk.head,\n    Option.getOrElse(() => Interval.empty)\n  ).startMillis\n}\n\n/** @internal */\nexport const end = (self: Intervals.Intervals): number => {\n  return pipe(\n    self.intervals,\n    Chunk.head,\n    Option.getOrElse(() => Interval.empty)\n  ).endMillis\n}\n\n/** @internal */\nexport const lessThan = dual<\n  (that: Intervals.Intervals) => (self: Intervals.Intervals) => boolean,\n  (self: Intervals.Intervals, that: Intervals.Intervals) => boolean\n>(2, (self, that) => start(self) < start(that))\n\n/** @internal */\nexport const isNonEmpty = (self: Intervals.Intervals): boolean => {\n  return Chunk.isNonEmpty(self.intervals)\n}\n\n/** @internal */\nexport const max = dual<\n  (that: Intervals.Intervals) => (self: Intervals.Intervals) => Intervals.Intervals,\n  (self: Intervals.Intervals, that: Intervals.Intervals) => Intervals.Intervals\n>(2, (self, that) => lessThan(self, that) ? that : self)\n"],"names":["Chunk","dual","pipe","Option","Interval","getBugErrorMessage","IntervalsSymbolKey","IntervalsTypeId","Symbol","for","make","intervals","empty","fromIterable","Array","from","reduce","interval","union","of","self","that","isNonEmpty","headNonEmpty","startMillis","unionLoop","tailNonEmpty","_self","_that","_interval","_acc","acc","endMillis","prepend","isEmpty","Error","reverse","intersect","intersectLoop","_left","_right","left","right","lessThan","start","head","getOrElse","end","max"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11602, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 11608, "column": 0}, "map": {"version":3,"file":"decision.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schedule/decision.ts"],"sourcesContent":["import * as Chunk from \"../../Chunk.js\"\nimport type * as ScheduleDecision from \"../../ScheduleDecision.js\"\nimport type * as Interval from \"../../ScheduleInterval.js\"\nimport * as Intervals from \"../../ScheduleIntervals.js\"\n\n/** @internal */\nexport const OP_CONTINUE = \"Continue\" as const\n\n/** @internal */\nexport type OP_CONTINUE = typeof OP_CONTINUE\n\n/** @internal */\nexport const OP_DONE = \"Done\" as const\n\n/** @internal */\nexport type OP_DONE = typeof OP_DONE\n\n/** @internal */\nexport const _continue = (intervals: Intervals.Intervals): ScheduleDecision.ScheduleDecision => {\n  return {\n    _tag: OP_CONTINUE,\n    intervals\n  }\n}\n\n/** @internal */\nexport const continueWith = (interval: Interval.Interval): ScheduleDecision.ScheduleDecision => {\n  return {\n    _tag: OP_CONTINUE,\n    intervals: Intervals.make(Chunk.of(interval))\n  }\n}\n\n/** @internal */\nexport const done: ScheduleDecision.ScheduleDecision = {\n  _tag: OP_DONE\n}\n\n/** @internal */\nexport const isContinue = (self: ScheduleDecision.ScheduleDecision): self is ScheduleDecision.Continue => {\n  return self._tag === OP_CONTINUE\n}\n\n/** @internal */\nexport const isDone = (self: ScheduleDecision.ScheduleDecision): self is ScheduleDecision.Done => {\n  return self._tag === OP_DONE\n}\n"],"names":["Chunk","Intervals","OP_CONTINUE","OP_DONE","_continue","intervals","_tag","continueWith","interval","make","of","done","isContinue","self","isDone"],"mappings":";;;;;;;;;AAGA,OAAO,KAAKC,SAAS,MAAM,4BAA4B;AAHvD,OAAO,KAAKD,KAAK,MAAM,gBAAgB;;;AAMhC,MAAME,WAAW,GAAG,UAAmB;AAMvC,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,SAAS,IAAIC,SAA8B,IAAuC;IAC7F,OAAO;QACLC,IAAI,EAAEJ,WAAW;QACjBG;KACD;AACH,CAAC;AAGM,MAAME,YAAY,IAAIC,QAA2B,IAAuC;IAC7F,OAAO;QACLF,IAAI,EAAEJ,WAAW;QACjBG,SAAS,EAAEJ,SAAS,oJAACQ,IAAI,CAACT,KAAK,4IAACU,EAAE,CAACF,QAAQ,CAAC;KAC7C;AACH,CAAC;AAGM,MAAMG,IAAI,GAAsC;IACrDL,IAAI,EAAEH;CACP;AAGM,MAAMS,UAAU,IAAIC,IAAuC,IAAuC;IACvG,OAAOA,IAAI,CAACP,IAAI,KAAKJ,WAAW;AAClC,CAAC;AAGM,MAAMY,MAAM,IAAID,IAAuC,IAAmC;IAC/F,OAAOA,IAAI,CAACP,IAAI,KAAKH,OAAO;AAC9B,CAAC","ignoreList":[0]}},
    {"offset": {"line": 11644, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 11650, "column": 0}, "map": {"version":3,"file":"dateTime.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/dateTime.ts"],"sourcesContent":["import { IllegalArgumentException } from \"../Cause.js\"\nimport * as Clock from \"../Clock.js\"\nimport type * as DateTime from \"../DateTime.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Either from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport * as equivalence from \"../Equivalence.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as Hash from \"../Hash.js\"\nimport * as Inspectable from \"../Inspectable.js\"\nimport * as Option from \"../Option.js\"\nimport * as order from \"../Order.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport * as Predicate from \"../Predicate.js\"\nimport type { Mutable } from \"../Types.js\"\nimport * as internalEffect from \"./core-effect.js\"\nimport * as core from \"./core.js\"\n\n/** @internal */\nexport const TypeId: DateTime.TypeId = Symbol.for(\"effect/DateTime\") as DateTime.TypeId\n\n/** @internal */\nexport const TimeZoneTypeId: DateTime.TimeZoneTypeId = Symbol.for(\"effect/DateTime/TimeZone\") as DateTime.TimeZoneTypeId\n\nconst Proto = {\n  [TypeId]: TypeId,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  [Inspectable.NodeInspectSymbol](this: DateTime.DateTime) {\n    return this.toString()\n  },\n  toJSON(this: DateTime.DateTime) {\n    return toDateUtc(this).toJSON()\n  }\n}\n\nconst ProtoUtc = {\n  ...Proto,\n  _tag: \"Utc\",\n  [Hash.symbol](this: DateTime.Utc) {\n    return Hash.cached(this, Hash.number(this.epochMillis))\n  },\n  [Equal.symbol](this: DateTime.Utc, that: unknown) {\n    return isDateTime(that) && that._tag === \"Utc\" && this.epochMillis === that.epochMillis\n  },\n  toString(this: DateTime.Utc) {\n    return `DateTime.Utc(${toDateUtc(this).toJSON()})`\n  }\n}\n\nconst ProtoZoned = {\n  ...Proto,\n  _tag: \"Zoned\",\n  [Hash.symbol](this: DateTime.Zoned) {\n    return pipe(\n      Hash.number(this.epochMillis),\n      Hash.combine(Hash.hash(this.zone)),\n      Hash.cached(this)\n    )\n  },\n  [Equal.symbol](this: DateTime.Zoned, that: unknown) {\n    return isDateTime(that) && that._tag === \"Zoned\" && this.epochMillis === that.epochMillis &&\n      Equal.equals(this.zone, that.zone)\n  },\n  toString(this: DateTime.Zoned) {\n    return `DateTime.Zoned(${formatIsoZoned(this)})`\n  }\n}\n\nconst ProtoTimeZone = {\n  [TimeZoneTypeId]: TimeZoneTypeId,\n  [Inspectable.NodeInspectSymbol](this: DateTime.TimeZone) {\n    return this.toString()\n  }\n}\n\nconst ProtoTimeZoneNamed = {\n  ...ProtoTimeZone,\n  _tag: \"Named\",\n  [Hash.symbol](this: DateTime.TimeZone.Named) {\n    return Hash.cached(this, Hash.string(`Named:${this.id}`))\n  },\n  [Equal.symbol](this: DateTime.TimeZone.Named, that: unknown) {\n    return isTimeZone(that) && that._tag === \"Named\" && this.id === that.id\n  },\n  toString(this: DateTime.TimeZone.Named) {\n    return `TimeZone.Named(${this.id})`\n  },\n  toJSON(this: DateTime.TimeZone.Named) {\n    return {\n      _id: \"TimeZone\",\n      _tag: \"Named\",\n      id: this.id\n    }\n  }\n}\n\nconst ProtoTimeZoneOffset = {\n  ...ProtoTimeZone,\n  _tag: \"Offset\",\n  [Hash.symbol](this: DateTime.TimeZone.Offset) {\n    return Hash.cached(this, Hash.string(`Offset:${this.offset}`))\n  },\n  [Equal.symbol](this: DateTime.TimeZone.Offset, that: unknown) {\n    return isTimeZone(that) && that._tag === \"Offset\" && this.offset === that.offset\n  },\n  toString(this: DateTime.TimeZone.Offset) {\n    return `TimeZone.Offset(${offsetToString(this.offset)})`\n  },\n  toJSON(this: DateTime.TimeZone.Offset) {\n    return {\n      _id: \"TimeZone\",\n      _tag: \"Offset\",\n      offset: this.offset\n    }\n  }\n}\n\n/** @internal */\nexport const makeZonedProto = (\n  epochMillis: number,\n  zone: DateTime.TimeZone,\n  partsUtc?: DateTime.DateTime.PartsWithWeekday\n): DateTime.Zoned => {\n  const self = Object.create(ProtoZoned)\n  self.epochMillis = epochMillis\n  self.zone = zone\n  self.partsUtc = partsUtc\n  return self\n}\n\n// =============================================================================\n// guards\n// =============================================================================\n\n/** @internal */\nexport const isDateTime = (u: unknown): u is DateTime.DateTime => Predicate.hasProperty(u, TypeId)\n\nconst isDateTimeArgs = (args: IArguments) => isDateTime(args[0])\n\n/** @internal */\nexport const isTimeZone = (u: unknown): u is DateTime.TimeZone => Predicate.hasProperty(u, TimeZoneTypeId)\n\n/** @internal */\nexport const isTimeZoneOffset = (u: unknown): u is DateTime.TimeZone.Offset => isTimeZone(u) && u._tag === \"Offset\"\n\n/** @internal */\nexport const isTimeZoneNamed = (u: unknown): u is DateTime.TimeZone.Named => isTimeZone(u) && u._tag === \"Named\"\n\n/** @internal */\nexport const isUtc = (self: DateTime.DateTime): self is DateTime.Utc => self._tag === \"Utc\"\n\n/** @internal */\nexport const isZoned = (self: DateTime.DateTime): self is DateTime.Zoned => self._tag === \"Zoned\"\n\n// =============================================================================\n// instances\n// =============================================================================\n\n/** @internal */\nexport const Equivalence: equivalence.Equivalence<DateTime.DateTime> = equivalence.make((a, b) =>\n  a.epochMillis === b.epochMillis\n)\n\n/** @internal */\nexport const Order: order.Order<DateTime.DateTime> = order.make((self, that) =>\n  self.epochMillis < that.epochMillis ? -1 : self.epochMillis > that.epochMillis ? 1 : 0\n)\n\n/** @internal */\nexport const clamp: {\n  (options: { minimum: DateTime.DateTime; maximum: DateTime.DateTime }): (self: DateTime.DateTime) => DateTime.DateTime\n  (self: DateTime.DateTime, options: { minimum: DateTime.DateTime; maximum: DateTime.DateTime }): DateTime.DateTime\n} = order.clamp(Order)\n\n// =============================================================================\n// constructors\n// =============================================================================\n\nconst makeUtc = (epochMillis: number): DateTime.Utc => {\n  const self = Object.create(ProtoUtc)\n  self.epochMillis = epochMillis\n  return self\n}\n\n/** @internal */\nexport const unsafeFromDate = (date: Date): DateTime.Utc => {\n  const epochMillis = date.getTime()\n  if (Number.isNaN(epochMillis)) {\n    throw new IllegalArgumentException(\"Invalid date\")\n  }\n  return makeUtc(epochMillis)\n}\n\n/** @internal */\nexport const unsafeMake = <A extends DateTime.DateTime.Input>(input: A): DateTime.DateTime.PreserveZone<A> => {\n  if (isDateTime(input)) {\n    return input as DateTime.DateTime.PreserveZone<A>\n  } else if (input instanceof Date) {\n    return unsafeFromDate(input) as DateTime.DateTime.PreserveZone<A>\n  } else if (typeof input === \"object\") {\n    const date = new Date(0)\n    setPartsDate(date, input)\n    return unsafeFromDate(date) as DateTime.DateTime.PreserveZone<A>\n  }\n  return unsafeFromDate(new Date(input)) as DateTime.DateTime.PreserveZone<A>\n}\n\n/** @internal */\nexport const unsafeMakeZoned = (input: DateTime.DateTime.Input, options?: {\n  readonly timeZone?: number | string | DateTime.TimeZone | undefined\n  readonly adjustForTimeZone?: boolean | undefined\n}): DateTime.Zoned => {\n  if (options?.timeZone === undefined && isDateTime(input) && isZoned(input)) {\n    return input\n  }\n  const self = unsafeMake(input)\n  let zone: DateTime.TimeZone\n  if (options?.timeZone === undefined) {\n    const offset = new Date(self.epochMillis).getTimezoneOffset() * -60 * 1000\n    zone = zoneMakeOffset(offset)\n  } else if (isTimeZone(options?.timeZone)) {\n    zone = options.timeZone\n  } else if (typeof options?.timeZone === \"number\") {\n    zone = zoneMakeOffset(options.timeZone)\n  } else {\n    const parsedZone = zoneFromString(options.timeZone)\n    if (Option.isNone(parsedZone)) {\n      throw new IllegalArgumentException(`Invalid time zone: ${options.timeZone}`)\n    }\n    zone = parsedZone.value\n  }\n  if (options?.adjustForTimeZone !== true) {\n    return makeZonedProto(self.epochMillis, zone, self.partsUtc)\n  }\n  return makeZonedFromAdjusted(self.epochMillis, zone)\n}\n\n/** @internal */\nexport const makeZoned: (\n  input: DateTime.DateTime.Input,\n  options?: {\n    readonly timeZone?: number | string | DateTime.TimeZone | undefined\n    readonly adjustForTimeZone?: boolean | undefined\n  }\n) => Option.Option<DateTime.Zoned> = Option.liftThrowable(unsafeMakeZoned)\n\n/** @internal */\nexport const make: <A extends DateTime.DateTime.Input>(input: A) => Option.Option<DateTime.DateTime.PreserveZone<A>> =\n  Option.liftThrowable(unsafeMake)\n\nconst zonedStringRegex = /^(.{17,35})\\[(.+)\\]$/\n\n/** @internal */\nexport const makeZonedFromString = (input: string): Option.Option<DateTime.Zoned> => {\n  const match = zonedStringRegex.exec(input)\n  if (match === null) {\n    const offset = parseOffset(input)\n    return offset !== null ? makeZoned(input, { timeZone: offset }) : Option.none()\n  }\n  const [, isoString, timeZone] = match\n  return makeZoned(isoString, { timeZone })\n}\n\n/** @internal */\nexport const now: Effect.Effect<DateTime.Utc> = core.map(Clock.currentTimeMillis, makeUtc)\n\n/** @internal */\nexport const unsafeNow: LazyArg<DateTime.Utc> = () => makeUtc(Date.now())\n\n// =============================================================================\n// time zones\n// =============================================================================\n\n/** @internal */\nexport const setZone: {\n  (zone: DateTime.TimeZone, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): (self: DateTime.DateTime) => DateTime.Zoned\n  (self: DateTime.DateTime, zone: DateTime.TimeZone, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): DateTime.Zoned\n} = dual(isDateTimeArgs, (self: DateTime.DateTime, zone: DateTime.TimeZone, options?: {\n  readonly adjustForTimeZone?: boolean | undefined\n}): DateTime.Zoned =>\n  options?.adjustForTimeZone === true\n    ? makeZonedFromAdjusted(self.epochMillis, zone)\n    : makeZonedProto(self.epochMillis, zone, self.partsUtc))\n\n/** @internal */\nexport const setZoneOffset: {\n  (offset: number, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): (self: DateTime.DateTime) => DateTime.Zoned\n  (self: DateTime.DateTime, offset: number, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): DateTime.Zoned\n} = dual(isDateTimeArgs, (self: DateTime.DateTime, offset: number, options?: {\n  readonly adjustForTimeZone?: boolean | undefined\n}): DateTime.Zoned => setZone(self, zoneMakeOffset(offset), options))\n\nconst validZoneCache = globalValue(\"effect/DateTime/validZoneCache\", () => new Map<string, DateTime.TimeZone.Named>())\n\nconst formatOptions: Intl.DateTimeFormatOptions = {\n  day: \"numeric\",\n  month: \"numeric\",\n  year: \"numeric\",\n  hour: \"numeric\",\n  minute: \"numeric\",\n  second: \"numeric\",\n  timeZoneName: \"longOffset\",\n  fractionalSecondDigits: 3,\n  hourCycle: \"h23\"\n}\n\nconst zoneMakeIntl = (format: Intl.DateTimeFormat): DateTime.TimeZone.Named => {\n  const zoneId = format.resolvedOptions().timeZone\n  if (validZoneCache.has(zoneId)) {\n    return validZoneCache.get(zoneId)!\n  }\n  const zone = Object.create(ProtoTimeZoneNamed)\n  zone.id = zoneId\n  zone.format = format\n  validZoneCache.set(zoneId, zone)\n  return zone\n}\n\n/** @internal */\nexport const zoneUnsafeMakeNamed = (zoneId: string): DateTime.TimeZone.Named => {\n  if (validZoneCache.has(zoneId)) {\n    return validZoneCache.get(zoneId)!\n  }\n  try {\n    return zoneMakeIntl(\n      new Intl.DateTimeFormat(\"en-US\", {\n        ...formatOptions,\n        timeZone: zoneId\n      })\n    )\n  } catch (_) {\n    throw new IllegalArgumentException(`Invalid time zone: ${zoneId}`)\n  }\n}\n\n/** @internal */\nexport const zoneMakeOffset = (offset: number): DateTime.TimeZone.Offset => {\n  const zone = Object.create(ProtoTimeZoneOffset)\n  zone.offset = offset\n  return zone\n}\n\n/** @internal */\nexport const zoneMakeNamed: (zoneId: string) => Option.Option<DateTime.TimeZone.Named> = Option.liftThrowable(\n  zoneUnsafeMakeNamed\n)\n\n/** @internal */\nexport const zoneMakeNamedEffect = (zoneId: string): Effect.Effect<DateTime.TimeZone.Named, IllegalArgumentException> =>\n  internalEffect.try_({\n    try: () => zoneUnsafeMakeNamed(zoneId),\n    catch: (e) => e as IllegalArgumentException\n  })\n\n/** @internal */\nexport const zoneMakeLocal = (): DateTime.TimeZone.Named =>\n  zoneMakeIntl(new Intl.DateTimeFormat(\"en-US\", formatOptions))\n\nconst offsetZoneRegex = /^(?:GMT|[+-])/\n\n/** @internal */\nexport const zoneFromString = (zone: string): Option.Option<DateTime.TimeZone> => {\n  if (offsetZoneRegex.test(zone)) {\n    const offset = parseOffset(zone)\n    return offset === null ? Option.none() : Option.some(zoneMakeOffset(offset))\n  }\n  return zoneMakeNamed(zone)\n}\n\n/** @internal */\nexport const zoneToString = (self: DateTime.TimeZone): string => {\n  if (self._tag === \"Offset\") {\n    return offsetToString(self.offset)\n  }\n  return self.id\n}\n\n/** @internal */\nexport const setZoneNamed: {\n  (zoneId: string, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): (self: DateTime.DateTime) => Option.Option<DateTime.Zoned>\n  (self: DateTime.DateTime, zoneId: string, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): Option.Option<DateTime.Zoned>\n} = dual(\n  isDateTimeArgs,\n  (self: DateTime.DateTime, zoneId: string, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): Option.Option<DateTime.Zoned> => Option.map(zoneMakeNamed(zoneId), (zone) => setZone(self, zone, options))\n)\n\n/** @internal */\nexport const unsafeSetZoneNamed: {\n  (zoneId: string, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): (self: DateTime.DateTime) => DateTime.Zoned\n  (self: DateTime.DateTime, zoneId: string, options?: {\n    readonly adjustForTimeZone?: boolean | undefined\n  }): DateTime.Zoned\n} = dual(isDateTimeArgs, (self: DateTime.DateTime, zoneId: string, options?: {\n  readonly adjustForTimeZone?: boolean | undefined\n}): DateTime.Zoned => setZone(self, zoneUnsafeMakeNamed(zoneId), options))\n\n// =============================================================================\n// comparisons\n// =============================================================================\n\n/** @internal */\nexport const distance: {\n  (other: DateTime.DateTime): (self: DateTime.DateTime) => number\n  (self: DateTime.DateTime, other: DateTime.DateTime): number\n} = dual(2, (self: DateTime.DateTime, other: DateTime.DateTime): number => toEpochMillis(other) - toEpochMillis(self))\n\n/** @internal */\nexport const distanceDurationEither: {\n  (other: DateTime.DateTime): (self: DateTime.DateTime) => Either.Either<Duration.Duration, Duration.Duration>\n  (self: DateTime.DateTime, other: DateTime.DateTime): Either.Either<Duration.Duration, Duration.Duration>\n} = dual(\n  2,\n  (self: DateTime.DateTime, other: DateTime.DateTime): Either.Either<Duration.Duration, Duration.Duration> => {\n    const diffMillis = distance(self, other)\n    return diffMillis > 0\n      ? Either.right(Duration.millis(diffMillis))\n      : Either.left(Duration.millis(-diffMillis))\n  }\n)\n\n/** @internal */\nexport const distanceDuration: {\n  (other: DateTime.DateTime): (self: DateTime.DateTime) => Duration.Duration\n  (self: DateTime.DateTime, other: DateTime.DateTime): Duration.Duration\n} = dual(\n  2,\n  (self: DateTime.DateTime, other: DateTime.DateTime): Duration.Duration =>\n    Duration.millis(Math.abs(distance(self, other)))\n)\n\n/** @internal */\nexport const min: {\n  (that: DateTime.DateTime): (self: DateTime.DateTime) => DateTime.DateTime\n  (self: DateTime.DateTime, that: DateTime.DateTime): DateTime.DateTime\n} = order.min(Order)\n\n/** @internal */\nexport const max: {\n  (that: DateTime.DateTime): (self: DateTime.DateTime) => DateTime.DateTime\n  (self: DateTime.DateTime, that: DateTime.DateTime): DateTime.DateTime\n} = order.max(Order)\n\n/** @internal */\nexport const greaterThan: {\n  (that: DateTime.DateTime): (self: DateTime.DateTime) => boolean\n  (self: DateTime.DateTime, that: DateTime.DateTime): boolean\n} = order.greaterThan(Order)\n\n/** @internal */\nexport const greaterThanOrEqualTo: {\n  (that: DateTime.DateTime): (self: DateTime.DateTime) => boolean\n  (self: DateTime.DateTime, that: DateTime.DateTime): boolean\n} = order.greaterThanOrEqualTo(Order)\n\n/** @internal */\nexport const lessThan: {\n  (that: DateTime.DateTime): (self: DateTime.DateTime) => boolean\n  (self: DateTime.DateTime, that: DateTime.DateTime): boolean\n} = order.lessThan(Order)\n\n/** @internal */\nexport const lessThanOrEqualTo: {\n  (that: DateTime.DateTime): (self: DateTime.DateTime) => boolean\n  (self: DateTime.DateTime, that: DateTime.DateTime): boolean\n} = order.lessThanOrEqualTo(Order)\n\n/** @internal */\nexport const between: {\n  (options: { minimum: DateTime.DateTime; maximum: DateTime.DateTime }): (self: DateTime.DateTime) => boolean\n  (self: DateTime.DateTime, options: { minimum: DateTime.DateTime; maximum: DateTime.DateTime }): boolean\n} = order.between(Order)\n\n/** @internal */\nexport const isFuture = (self: DateTime.DateTime): Effect.Effect<boolean> => core.map(now, lessThan(self))\n\n/** @internal */\nexport const unsafeIsFuture = (self: DateTime.DateTime): boolean => lessThan(unsafeNow(), self)\n\n/** @internal */\nexport const isPast = (self: DateTime.DateTime): Effect.Effect<boolean> => core.map(now, greaterThan(self))\n\n/** @internal */\nexport const unsafeIsPast = (self: DateTime.DateTime): boolean => greaterThan(unsafeNow(), self)\n\n// =============================================================================\n// conversions\n// =============================================================================\n\n/** @internal */\nexport const toDateUtc = (self: DateTime.DateTime): Date => new Date(self.epochMillis)\n\n/** @internal */\nexport const toDate = (self: DateTime.DateTime): Date => {\n  if (self._tag === \"Utc\") {\n    return new Date(self.epochMillis)\n  } else if (self.zone._tag === \"Offset\") {\n    return new Date(self.epochMillis + self.zone.offset)\n  } else if (self.adjustedEpochMillis !== undefined) {\n    return new Date(self.adjustedEpochMillis)\n  }\n  const parts = self.zone.format.formatToParts(self.epochMillis).filter((_) => _.type !== \"literal\")\n  const date = new Date(0)\n  date.setUTCFullYear(\n    Number(parts[2].value),\n    Number(parts[0].value) - 1,\n    Number(parts[1].value)\n  )\n  date.setUTCHours(\n    Number(parts[3].value),\n    Number(parts[4].value),\n    Number(parts[5].value),\n    Number(parts[6].value)\n  )\n  self.adjustedEpochMillis = date.getTime()\n  return date\n}\n\n/** @internal */\nexport const zonedOffset = (self: DateTime.Zoned): number => {\n  const date = toDate(self)\n  return date.getTime() - toEpochMillis(self)\n}\n\nconst offsetToString = (offset: number): string => {\n  const abs = Math.abs(offset)\n  const hours = Math.floor(abs / (60 * 60 * 1000))\n  const minutes = Math.round((abs % (60 * 60 * 1000)) / (60 * 1000))\n  return `${offset < 0 ? \"-\" : \"+\"}${String(hours).padStart(2, \"0\")}:${String(minutes).padStart(2, \"0\")}`\n}\n\n/** @internal */\nexport const zonedOffsetIso = (self: DateTime.Zoned): string => offsetToString(zonedOffset(self))\n\n/** @internal */\nexport const toEpochMillis = (self: DateTime.DateTime): number => self.epochMillis\n\n/** @internal */\nexport const removeTime = (self: DateTime.DateTime): DateTime.Utc =>\n  withDate(self, (date) => {\n    date.setUTCHours(0, 0, 0, 0)\n    return makeUtc(date.getTime())\n  })\n\n// =============================================================================\n// parts\n// =============================================================================\n\nconst dateToParts = (date: Date): DateTime.DateTime.PartsWithWeekday => ({\n  millis: date.getUTCMilliseconds(),\n  seconds: date.getUTCSeconds(),\n  minutes: date.getUTCMinutes(),\n  hours: date.getUTCHours(),\n  day: date.getUTCDate(),\n  weekDay: date.getUTCDay(),\n  month: date.getUTCMonth() + 1,\n  year: date.getUTCFullYear()\n})\n\n/** @internal */\nexport const toParts = (self: DateTime.DateTime): DateTime.DateTime.PartsWithWeekday => {\n  if (self._tag === \"Utc\") {\n    return toPartsUtc(self)\n  } else if (self.partsAdjusted !== undefined) {\n    return self.partsAdjusted\n  }\n  self.partsAdjusted = withDate(self, dateToParts)\n  return self.partsAdjusted\n}\n\n/** @internal */\nexport const toPartsUtc = (self: DateTime.DateTime): DateTime.DateTime.PartsWithWeekday => {\n  if (self.partsUtc !== undefined) {\n    return self.partsUtc\n  }\n  self.partsUtc = withDateUtc(self, dateToParts)\n  return self.partsUtc\n}\n\n/** @internal */\nexport const getPartUtc: {\n  (part: keyof DateTime.DateTime.PartsWithWeekday): (self: DateTime.DateTime) => number\n  (self: DateTime.DateTime, part: keyof DateTime.DateTime.PartsWithWeekday): number\n} = dual(2, (self: DateTime.DateTime, part: keyof DateTime.DateTime.PartsWithWeekday): number => toPartsUtc(self)[part])\n\n/** @internal */\nexport const getPart: {\n  (part: keyof DateTime.DateTime.PartsWithWeekday): (self: DateTime.DateTime) => number\n  (self: DateTime.DateTime, part: keyof DateTime.DateTime.PartsWithWeekday): number\n} = dual(2, (self: DateTime.DateTime, part: keyof DateTime.DateTime.PartsWithWeekday): number => toParts(self)[part])\n\nconst setPartsDate = (date: Date, parts: Partial<DateTime.DateTime.PartsWithWeekday>): void => {\n  if (parts.year !== undefined) {\n    date.setUTCFullYear(parts.year)\n  }\n  if (parts.month !== undefined) {\n    date.setUTCMonth(parts.month - 1)\n  }\n  if (parts.day !== undefined) {\n    date.setUTCDate(parts.day)\n  }\n  if (parts.weekDay !== undefined) {\n    const diff = parts.weekDay - date.getUTCDay()\n    date.setUTCDate(date.getUTCDate() + diff)\n  }\n  if (parts.hours !== undefined) {\n    date.setUTCHours(parts.hours)\n  }\n  if (parts.minutes !== undefined) {\n    date.setUTCMinutes(parts.minutes)\n  }\n  if (parts.seconds !== undefined) {\n    date.setUTCSeconds(parts.seconds)\n  }\n  if (parts.millis !== undefined) {\n    date.setUTCMilliseconds(parts.millis)\n  }\n}\n\n/** @internal */\nexport const setParts: {\n  (\n    parts: Partial<DateTime.DateTime.PartsWithWeekday>\n  ): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(\n    self: A,\n    parts: Partial<DateTime.DateTime.PartsWithWeekday>\n  ): DateTime.DateTime.PreserveZone<A>\n} = dual(\n  2,\n  (self: DateTime.DateTime, parts: Partial<DateTime.DateTime.PartsWithWeekday>): DateTime.DateTime =>\n    mutate(self, (date) => setPartsDate(date, parts))\n)\n\n/** @internal */\nexport const setPartsUtc: {\n  (\n    parts: Partial<DateTime.DateTime.PartsWithWeekday>\n  ): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(\n    self: A,\n    parts: Partial<DateTime.DateTime.PartsWithWeekday>\n  ): DateTime.DateTime.PreserveZone<A>\n} = dual(\n  2,\n  (self: DateTime.DateTime, parts: Partial<DateTime.DateTime.PartsWithWeekday>): DateTime.DateTime =>\n    mutateUtc(self, (date) => setPartsDate(date, parts))\n)\n\n// =============================================================================\n// mapping\n// =============================================================================\n\nconst makeZonedFromAdjusted = (adjustedMillis: number, zone: DateTime.TimeZone): DateTime.Zoned => {\n  const offset = zone._tag === \"Offset\" ? zone.offset : calculateNamedOffset(adjustedMillis, zone)\n  return makeZonedProto(adjustedMillis - offset, zone)\n}\n\nconst offsetRegex = /([+-])(\\d{2}):(\\d{2})$/\nconst parseOffset = (offset: string): number | null => {\n  const match = offsetRegex.exec(offset)\n  if (match === null) {\n    return null\n  }\n  const [, sign, hours, minutes] = match\n  return (sign === \"+\" ? 1 : -1) * (Number(hours) * 60 + Number(minutes)) * 60 * 1000\n}\n\nconst calculateNamedOffset = (adjustedMillis: number, zone: DateTime.TimeZone.Named): number => {\n  const offset = zone.format.formatToParts(adjustedMillis).find((_) => _.type === \"timeZoneName\")?.value ?? \"\"\n  if (offset === \"GMT\") {\n    return 0\n  }\n  const result = parseOffset(offset)\n  if (result === null) {\n    // fallback to using the adjusted date\n    return zonedOffset(makeZonedProto(adjustedMillis, zone))\n  }\n  return result\n}\n\n/** @internal */\nexport const mutate: {\n  (f: (date: Date) => void): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, f: (date: Date) => void): DateTime.DateTime.PreserveZone<A>\n} = dual(2, (self: DateTime.DateTime, f: (date: Date) => void): DateTime.DateTime => {\n  if (self._tag === \"Utc\") {\n    const date = toDateUtc(self)\n    f(date)\n    return makeUtc(date.getTime())\n  }\n  const adjustedDate = toDate(self)\n  const newAdjustedDate = new Date(adjustedDate.getTime())\n  f(newAdjustedDate)\n  return makeZonedFromAdjusted(newAdjustedDate.getTime(), self.zone)\n})\n\n/** @internal */\nexport const mutateUtc: {\n  (f: (date: Date) => void): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, f: (date: Date) => void): DateTime.DateTime.PreserveZone<A>\n} = dual(2, (self: DateTime.DateTime, f: (date: Date) => void): DateTime.DateTime =>\n  mapEpochMillis(self, (millis) => {\n    const date = new Date(millis)\n    f(date)\n    return date.getTime()\n  }))\n\n/** @internal */\nexport const mapEpochMillis: {\n  (f: (millis: number) => number): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, f: (millis: number) => number): DateTime.DateTime.PreserveZone<A>\n} = dual(2, (self: DateTime.DateTime, f: (millis: number) => number): DateTime.DateTime => {\n  const millis = f(toEpochMillis(self))\n  return self._tag === \"Utc\" ? makeUtc(millis) : makeZonedProto(millis, self.zone)\n})\n\n/** @internal */\nexport const withDate: {\n  <A>(f: (date: Date) => A): (self: DateTime.DateTime) => A\n  <A>(self: DateTime.DateTime, f: (date: Date) => A): A\n} = dual(2, <A>(self: DateTime.DateTime, f: (date: Date) => A): A => f(toDate(self)))\n\n/** @internal */\nexport const withDateUtc: {\n  <A>(f: (date: Date) => A): (self: DateTime.DateTime) => A\n  <A>(self: DateTime.DateTime, f: (date: Date) => A): A\n} = dual(2, <A>(self: DateTime.DateTime, f: (date: Date) => A): A => f(toDateUtc(self)))\n\n/** @internal */\nexport const match: {\n  <A, B>(options: {\n    readonly onUtc: (_: DateTime.Utc) => A\n    readonly onZoned: (_: DateTime.Zoned) => B\n  }): (self: DateTime.DateTime) => A | B\n  <A, B>(self: DateTime.DateTime, options: {\n    readonly onUtc: (_: DateTime.Utc) => A\n    readonly onZoned: (_: DateTime.Zoned) => B\n  }): A | B\n} = dual(2, <A, B>(self: DateTime.DateTime, options: {\n  readonly onUtc: (_: DateTime.Utc) => A\n  readonly onZoned: (_: DateTime.Zoned) => B\n}): A | B => self._tag === \"Utc\" ? options.onUtc(self) : options.onZoned(self))\n\n// =============================================================================\n// math\n// =============================================================================\n\n/** @internal */\nexport const addDuration: {\n  (duration: Duration.DurationInput): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, duration: Duration.DurationInput): DateTime.DateTime.PreserveZone<A>\n} = dual(\n  2,\n  (self: DateTime.DateTime, duration: Duration.DurationInput): DateTime.DateTime =>\n    mapEpochMillis(self, (millis) => millis + Duration.toMillis(duration))\n)\n\n/** @internal */\nexport const subtractDuration: {\n  (duration: Duration.DurationInput): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, duration: Duration.DurationInput): DateTime.DateTime.PreserveZone<A>\n} = dual(\n  2,\n  (self: DateTime.DateTime, duration: Duration.DurationInput): DateTime.DateTime =>\n    mapEpochMillis(self, (millis) => millis - Duration.toMillis(duration))\n)\n\nconst addMillis = (date: Date, amount: number): void => {\n  date.setTime(date.getTime() + amount)\n}\n\n/** @internal */\nexport const add: {\n  (\n    parts: Partial<DateTime.DateTime.PartsForMath>\n  ): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(\n    self: A,\n    parts: Partial<DateTime.DateTime.PartsForMath>\n  ): DateTime.DateTime.PreserveZone<A>\n} = dual(\n  2,\n  (self: DateTime.DateTime, parts: Partial<DateTime.DateTime.PartsForMath>): DateTime.DateTime =>\n    mutate(self, (date) => {\n      if (parts.millis) {\n        addMillis(date, parts.millis)\n      }\n      if (parts.seconds) {\n        addMillis(date, parts.seconds * 1000)\n      }\n      if (parts.minutes) {\n        addMillis(date, parts.minutes * 60 * 1000)\n      }\n      if (parts.hours) {\n        addMillis(date, parts.hours * 60 * 60 * 1000)\n      }\n      if (parts.days) {\n        date.setUTCDate(date.getUTCDate() + parts.days)\n      }\n      if (parts.weeks) {\n        date.setUTCDate(date.getUTCDate() + parts.weeks * 7)\n      }\n      if (parts.months) {\n        const day = date.getUTCDate()\n        date.setUTCMonth(date.getUTCMonth() + parts.months + 1, 0)\n        if (day < date.getUTCDate()) {\n          date.setUTCDate(day)\n        }\n      }\n      if (parts.years) {\n        const day = date.getUTCDate()\n        const month = date.getUTCMonth()\n        date.setUTCFullYear(\n          date.getUTCFullYear() + parts.years,\n          month + 1,\n          0\n        )\n        if (day < date.getUTCDate()) {\n          date.setUTCDate(day)\n        }\n      }\n    })\n)\n\n/** @internal */\nexport const subtract: {\n  (\n    parts: Partial<DateTime.DateTime.PartsForMath>\n  ): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(\n    self: A,\n    parts: Partial<DateTime.DateTime.PartsForMath>\n  ): DateTime.DateTime.PreserveZone<A>\n} = dual(2, (self: DateTime.DateTime, parts: Partial<DateTime.DateTime.PartsForMath>): DateTime.DateTime => {\n  const newParts = {} as Partial<Mutable<DateTime.DateTime.PartsForMath>>\n  for (const key in parts) {\n    newParts[key as keyof DateTime.DateTime.PartsForMath] = -1 * parts[key as keyof DateTime.DateTime.PartsForMath]!\n  }\n  return add(self, newParts)\n})\n\nconst startOfDate = (date: Date, part: DateTime.DateTime.UnitSingular, options?: {\n  readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n}) => {\n  switch (part) {\n    case \"second\": {\n      date.setUTCMilliseconds(0)\n      break\n    }\n    case \"minute\": {\n      date.setUTCSeconds(0, 0)\n      break\n    }\n    case \"hour\": {\n      date.setUTCMinutes(0, 0, 0)\n      break\n    }\n    case \"day\": {\n      date.setUTCHours(0, 0, 0, 0)\n      break\n    }\n    case \"week\": {\n      const weekStartsOn = options?.weekStartsOn ?? 0\n      const day = date.getUTCDay()\n      const diff = (day - weekStartsOn + 7) % 7\n      date.setUTCDate(date.getUTCDate() - diff)\n      date.setUTCHours(0, 0, 0, 0)\n      break\n    }\n    case \"month\": {\n      date.setUTCDate(1)\n      date.setUTCHours(0, 0, 0, 0)\n      break\n    }\n    case \"year\": {\n      date.setUTCMonth(0, 1)\n      date.setUTCHours(0, 0, 0, 0)\n      break\n    }\n  }\n}\n\n/** @internal */\nexport const startOf: {\n  (part: DateTime.DateTime.UnitSingular, options?: {\n    readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n  }): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, part: DateTime.DateTime.UnitSingular, options?: {\n    readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n  }): DateTime.DateTime.PreserveZone<A>\n} = dual(isDateTimeArgs, (self: DateTime.DateTime, part: DateTime.DateTime.UnitSingular, options?: {\n  readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n}): DateTime.DateTime => mutate(self, (date) => startOfDate(date, part, options)))\n\nconst endOfDate = (date: Date, part: DateTime.DateTime.UnitSingular, options?: {\n  readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n}) => {\n  switch (part) {\n    case \"second\": {\n      date.setUTCMilliseconds(999)\n      break\n    }\n    case \"minute\": {\n      date.setUTCSeconds(59, 999)\n      break\n    }\n    case \"hour\": {\n      date.setUTCMinutes(59, 59, 999)\n      break\n    }\n    case \"day\": {\n      date.setUTCHours(23, 59, 59, 999)\n      break\n    }\n    case \"week\": {\n      const weekStartsOn = options?.weekStartsOn ?? 0\n      const day = date.getUTCDay()\n      const diff = (day - weekStartsOn + 7) % 7\n      date.setUTCDate(date.getUTCDate() - diff + 6)\n      date.setUTCHours(23, 59, 59, 999)\n      break\n    }\n    case \"month\": {\n      date.setUTCMonth(date.getUTCMonth() + 1, 0)\n      date.setUTCHours(23, 59, 59, 999)\n      break\n    }\n    case \"year\": {\n      date.setUTCMonth(11, 31)\n      date.setUTCHours(23, 59, 59, 999)\n      break\n    }\n  }\n}\n\n/** @internal */\nexport const endOf: {\n  (part: DateTime.DateTime.UnitSingular, options?: {\n    readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n  }): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, part: DateTime.DateTime.UnitSingular, options?: {\n    readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n  }): DateTime.DateTime.PreserveZone<A>\n} = dual(isDateTimeArgs, (self: DateTime.DateTime, part: DateTime.DateTime.UnitSingular, options?: {\n  readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n}): DateTime.DateTime => mutate(self, (date) => endOfDate(date, part, options)))\n\n/** @internal */\nexport const nearest: {\n  (part: DateTime.DateTime.UnitSingular, options?: {\n    readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n  }): <A extends DateTime.DateTime>(self: A) => DateTime.DateTime.PreserveZone<A>\n  <A extends DateTime.DateTime>(self: A, part: DateTime.DateTime.UnitSingular, options?: {\n    readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n  }): DateTime.DateTime.PreserveZone<A>\n} = dual(isDateTimeArgs, (self: DateTime.DateTime, part: DateTime.DateTime.UnitSingular, options?: {\n  readonly weekStartsOn?: 0 | 1 | 2 | 3 | 4 | 5 | 6 | undefined\n}): DateTime.DateTime =>\n  mutate(self, (date) => {\n    if (part === \"milli\") return\n    const millis = date.getTime()\n    const start = new Date(millis)\n    startOfDate(start, part, options)\n    const startMillis = start.getTime()\n    const end = new Date(millis)\n    endOfDate(end, part, options)\n    const endMillis = end.getTime() + 1\n    const diffStart = millis - startMillis\n    const diffEnd = endMillis - millis\n    if (diffStart < diffEnd) {\n      date.setTime(startMillis)\n    } else {\n      date.setTime(endMillis)\n    }\n  }))\n\n// =============================================================================\n// formatting\n// =============================================================================\n\nconst intlTimeZone = (self: DateTime.TimeZone): string => {\n  if (self._tag === \"Named\") {\n    return self.id\n  }\n  return offsetToString(self.offset)\n}\n\n/** @internal */\nexport const format: {\n  (\n    options?:\n      | Intl.DateTimeFormatOptions & {\n        readonly locale?: string | undefined\n      }\n      | undefined\n  ): (self: DateTime.DateTime) => string\n  (\n    self: DateTime.DateTime,\n    options?:\n      | Intl.DateTimeFormatOptions & {\n        readonly locale?: string | undefined\n      }\n      | undefined\n  ): string\n} = dual(isDateTimeArgs, (\n  self: DateTime.DateTime,\n  options?:\n    | Intl.DateTimeFormatOptions & {\n      readonly locale?: string | undefined\n    }\n    | undefined\n): string => {\n  try {\n    return new Intl.DateTimeFormat(options?.locale, {\n      timeZone: self._tag === \"Utc\" ? \"UTC\" : intlTimeZone(self.zone),\n      ...options\n    }).format(self.epochMillis)\n  } catch (_) {\n    return new Intl.DateTimeFormat(options?.locale, {\n      timeZone: \"UTC\",\n      ...options\n    }).format(toDate(self))\n  }\n})\n\n/** @internal */\nexport const formatLocal: {\n  (\n    options?:\n      | Intl.DateTimeFormatOptions & {\n        readonly locale?: string | undefined\n      }\n      | undefined\n  ): (self: DateTime.DateTime) => string\n  (\n    self: DateTime.DateTime,\n    options?:\n      | Intl.DateTimeFormatOptions & {\n        readonly locale?: string | undefined\n      }\n      | undefined\n  ): string\n} = dual(isDateTimeArgs, (\n  self: DateTime.DateTime,\n  options?:\n    | Intl.DateTimeFormatOptions & {\n      readonly locale?: string | undefined\n    }\n    | undefined\n): string => new Intl.DateTimeFormat(options?.locale, options).format(self.epochMillis))\n\n/** @internal */\nexport const formatUtc: {\n  (\n    options?:\n      | Intl.DateTimeFormatOptions & {\n        readonly locale?: string | undefined\n      }\n      | undefined\n  ): (self: DateTime.DateTime) => string\n  (\n    self: DateTime.DateTime,\n    options?:\n      | Intl.DateTimeFormatOptions & {\n        readonly locale?: string | undefined\n      }\n      | undefined\n  ): string\n} = dual(isDateTimeArgs, (\n  self: DateTime.DateTime,\n  options?:\n    | Intl.DateTimeFormatOptions & {\n      readonly locale?: string | undefined\n    }\n    | undefined\n): string =>\n  new Intl.DateTimeFormat(options?.locale, {\n    ...options,\n    timeZone: \"UTC\"\n  }).format(self.epochMillis))\n\n/** @internal */\nexport const formatIntl: {\n  (format: Intl.DateTimeFormat): (self: DateTime.DateTime) => string\n  (self: DateTime.DateTime, format: Intl.DateTimeFormat): string\n} = dual(2, (self: DateTime.DateTime, format: Intl.DateTimeFormat): string => format.format(self.epochMillis))\n\n/** @internal */\nexport const formatIso = (self: DateTime.DateTime): string => toDateUtc(self).toISOString()\n\n/** @internal */\nexport const formatIsoDate = (self: DateTime.DateTime): string => toDate(self).toISOString().slice(0, 10)\n\n/** @internal */\nexport const formatIsoDateUtc = (self: DateTime.DateTime): string => toDateUtc(self).toISOString().slice(0, 10)\n\n/** @internal */\nexport const formatIsoOffset = (self: DateTime.DateTime): string => {\n  const date = toDate(self)\n  return self._tag === \"Utc\" ? date.toISOString() : `${date.toISOString().slice(0, -1)}${zonedOffsetIso(self)}`\n}\n\n/** @internal */\nexport const formatIsoZoned = (self: DateTime.Zoned): string =>\n  self.zone._tag === \"Offset\" ? formatIsoOffset(self) : `${formatIsoOffset(self)}[${self.zone.id}]`\n"],"names":["IllegalArgumentException","Clock","Duration","Either","Equal","equivalence","dual","pipe","globalValue","Hash","Inspectable","Option","order","pipeArguments","Predicate","internalEffect","core","TypeId","Symbol","for","TimeZoneTypeId","Proto","arguments","NodeInspectSymbol","toString","toJSON","toDateUtc","ProtoUtc","_tag","symbol","cached","number","epochMillis","that","isDateTime","ProtoZoned","combine","hash","zone","equals","formatIsoZoned","ProtoTimeZone","ProtoTimeZoneNamed","string","id","isTimeZone","_id","ProtoTimeZoneOffset","offset","offsetToString","makeZonedProto","partsUtc","self","Object","create","u","hasProperty","isDateTimeArgs","args","isTimeZoneOffset","isTimeZoneNamed","isUtc","isZoned","Equivalence","make","a","b","Order","clamp","makeUtc","unsafeFromDate","date","getTime","Number","isNaN","unsafeMake","input","Date","setPartsDate","unsafeMakeZoned","options","timeZone","undefined","getTimezoneOffset","zoneMakeOffset","parsedZone","zoneFromString","isNone","value","adjustForTimeZone","makeZonedFromAdjusted","makeZoned","liftThrowable","zonedStringRegex","makeZonedFromString","match","exec","parseOffset","none","isoString","now","map","currentTimeMillis","unsafeNow","setZone","setZoneOffset","validZoneCache","Map","formatOptions","day","month","year","hour","minute","second","timeZoneName","fractionalSecondDigits","hourCycle","zoneMakeIntl","format","zoneId","resolvedOptions","has","get","set","zoneUnsafeMakeNamed","Intl","DateTimeFormat","_","zoneMakeNamed","zoneMakeNamedEffect","try_","try","catch","e","zoneMakeLocal","offsetZoneRegex","test","some","zoneToString","setZoneNamed","unsafeSetZoneNamed","distance","other","toEpochMillis","distanceDurationEither","diffMillis","right","millis","left","distanceDuration","Math","abs","min","max","greaterThan","greaterThanOrEqualTo","lessThan","lessThanOrEqualTo","between","isFuture","unsafeIsFuture","isPast","unsafeIsPast","toDate","adjustedEpochMillis","parts","formatToParts","filter","type","setUTCFullYear","setUTCHours","zonedOffset","hours","floor","minutes","round","String","padStart","zonedOffsetIso","removeTime","withDate","dateToParts","getUTCMilliseconds","seconds","getUTCSeconds","getUTCMinutes","getUTCHours","getUTCDate","weekDay","getUTCDay","getUTCMonth","getUTCFullYear","toParts","toPartsUtc","partsAdjusted","withDateUtc","getPartUtc","part","getPart","setUTCMonth","setUTCDate","diff","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","setParts","mutate","setPartsUtc","mutateUtc","adjustedMillis","calculateNamedOffset","offsetRegex","sign","find","result","f","adjustedDate","newAdjustedDate","mapEpochMillis","onUtc","onZoned","addDuration","duration","toMillis","subtractDuration","addMillis","amount","setTime","add","days","weeks","months","years","subtract","newParts","key","startOfDate","weekStartsOn","startOf","endOfDate","endOf","nearest","start","startMillis","end","endMillis","diffStart","diffEnd","intlTimeZone","locale","formatLocal","formatUtc","formatIntl","formatIso","toISOString","formatIsoDate","slice","formatIsoDateUtc","formatIsoOffset"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 12353, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 12359, "column": 0}, "map": {"version":3,"file":"schedule.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schedule.ts"],"sourcesContent":["import type * as Cause from \"../Cause.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport * as Clock from \"../Clock.js\"\nimport * as Context from \"../Context.js\"\nimport * as Cron from \"../Cron.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Either from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { constVoid, dual, pipe } from \"../Function.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty, type Predicate } from \"../Predicate.js\"\nimport * as Random from \"../Random.js\"\nimport type * as Ref from \"../Ref.js\"\nimport type * as Schedule from \"../Schedule.js\"\nimport * as ScheduleDecision from \"../ScheduleDecision.js\"\nimport * as Interval from \"../ScheduleInterval.js\"\nimport * as Intervals from \"../ScheduleIntervals.js\"\nimport type * as Types from \"../Types.js\"\nimport * as internalCause from \"./cause.js\"\nimport * as effect from \"./core-effect.js\"\nimport * as core from \"./core.js\"\nimport * as ref from \"./ref.js\"\n\n/** @internal */\nconst ScheduleSymbolKey = \"effect/Schedule\"\n\n/** @internal */\nexport const ScheduleTypeId: Schedule.ScheduleTypeId = Symbol.for(\n  ScheduleSymbolKey\n) as Schedule.ScheduleTypeId\n\n/** @internal */\nexport const isSchedule = (u: unknown): u is Schedule.Schedule<any, any, any> => hasProperty(u, ScheduleTypeId)\n\n/** @internal */\nconst ScheduleDriverSymbolKey = \"effect/ScheduleDriver\"\n\n/** @internal */\nexport const ScheduleDriverTypeId: Schedule.ScheduleDriverTypeId = Symbol.for(\n  ScheduleDriverSymbolKey\n) as Schedule.ScheduleDriverTypeId\n\nconst scheduleVariance = {\n  /* c8 ignore next */\n  _Out: (_: never) => _,\n  /* c8 ignore next */\n  _In: (_: unknown) => _,\n  /* c8 ignore next */\n  _R: (_: never) => _\n}\n\nconst scheduleDriverVariance = {\n  /* c8 ignore next */\n  _Out: (_: never) => _,\n  /* c8 ignore next */\n  _In: (_: unknown) => _,\n  /* c8 ignore next */\n  _R: (_: never) => _\n}\n\n/** @internal */\nclass ScheduleImpl<S, Out, In, R> implements Schedule.Schedule<Out, In, R> {\n  [ScheduleTypeId] = scheduleVariance\n  constructor(\n    readonly initial: S,\n    readonly step: (\n      now: number,\n      input: In,\n      state: S\n    ) => Effect.Effect<readonly [S, Out, ScheduleDecision.ScheduleDecision], never, R>\n  ) {\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nclass ScheduleDriverImpl<Out, In, R> implements Schedule.ScheduleDriver<Out, In, R> {\n  [ScheduleDriverTypeId] = scheduleDriverVariance\n\n  constructor(\n    readonly schedule: Schedule.Schedule<Out, In, R>,\n    readonly ref: Ref.Ref<readonly [Option.Option<Out>, any]>\n  ) {}\n\n  get state(): Effect.Effect<unknown> {\n    return core.map(ref.get(this.ref), (tuple) => tuple[1])\n  }\n\n  get last(): Effect.Effect<Out, Cause.NoSuchElementException> {\n    return core.flatMap(ref.get(this.ref), ([element, _]) => {\n      switch (element._tag) {\n        case \"None\": {\n          return core.failSync(() => new core.NoSuchElementException())\n        }\n        case \"Some\": {\n          return core.succeed(element.value)\n        }\n      }\n    })\n  }\n\n  get reset(): Effect.Effect<void> {\n    return ref.set(this.ref, [Option.none(), this.schedule.initial])\n  }\n\n  next(input: In): Effect.Effect<Out, Option.Option<never>, R> {\n    return pipe(\n      core.map(ref.get(this.ref), (tuple) => tuple[1]),\n      core.flatMap((state) =>\n        pipe(\n          Clock.currentTimeMillis,\n          core.flatMap((now) =>\n            pipe(\n              core.suspend(() => this.schedule.step(now, input, state)),\n              core.flatMap(([state, out, decision]) => {\n                const setState = ref.set(this.ref, [Option.some(out), state] as const)\n                if (ScheduleDecision.isDone(decision)) {\n                  return core.zipRight(setState, core.fail(Option.none()))\n                }\n                const millis = Intervals.start(decision.intervals) - now\n                if (millis <= 0) {\n                  return core.as(setState, out)\n                }\n                return pipe(\n                  setState,\n                  core.zipRight(effect.sleep(Duration.millis(millis))),\n                  core.as(out)\n                )\n              })\n            )\n          )\n        )\n      )\n    )\n  }\n}\n\n/** @internal */\nexport const makeWithState = <S, In, Out, R = never>(\n  initial: S,\n  step: (\n    now: number,\n    input: In,\n    state: S\n  ) => Effect.Effect<readonly [S, Out, ScheduleDecision.ScheduleDecision], never, R>\n): Schedule.Schedule<Out, In, R> => new ScheduleImpl(initial, step)\n\n/** @internal */\nexport const addDelay = dual<\n  <Out>(\n    f: (out: Out) => Duration.DurationInput\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out) => Duration.DurationInput\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => addDelayEffect(self, (out) => core.sync(() => f(out))))\n\n/** @internal */\nexport const addDelayEffect = dual<\n  <Out, R2>(\n    f: (out: Out) => Effect.Effect<Duration.DurationInput, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out) => Effect.Effect<Duration.DurationInput, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) =>\n  modifyDelayEffect(self, (out, duration) =>\n    core.map(\n      f(out),\n      (delay) => Duration.sum(duration, Duration.decode(delay))\n    )))\n\n/** @internal */\nexport const andThen = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<\n    Out | Out2,\n    In & In2,\n    R | R2\n  >,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<\n    Out | Out2,\n    In & In2,\n    R | R2\n  >\n>(2, (self, that) => map(andThenEither(self, that), Either.merge))\n\n/** @internal */\nexport const andThenEither = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>\n  ) => Schedule.Schedule<Either.Either<Out2, Out>, In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<Either.Either<Out2, Out>, In & In2, R | R2>\n>(2, <Out, In, R, Out2, In2, R2>(\n  self: Schedule.Schedule<Out, In, R>,\n  that: Schedule.Schedule<Out2, In2, R2>\n): Schedule.Schedule<Either.Either<Out2, Out>, In & In2, R | R2> =>\n  makeWithState(\n    [self.initial, that.initial, true as boolean] as const,\n    (now, input, state) =>\n      state[2] ?\n        core.flatMap(self.step(now, input, state[0]), ([lState, out, decision]) => {\n          if (ScheduleDecision.isDone(decision)) {\n            return core.map(that.step(now, input, state[1]), ([rState, out, decision]) =>\n              [\n                [lState, rState, false as boolean] as const,\n                Either.right(out) as Either.Either<Out2, Out>,\n                decision as ScheduleDecision.ScheduleDecision\n              ] as const)\n          }\n          return core.succeed(\n            [\n              [lState, state[1], true as boolean] as const,\n              Either.left(out),\n              decision\n            ] as const\n          )\n        }) :\n        core.map(that.step(now, input, state[1]), ([rState, out, decision]) =>\n          [\n            [state[0], rState, false as boolean] as const,\n            Either.right(out) as Either.Either<Out2, Out>,\n            decision\n          ] as const)\n  ))\n\n/** @internal */\nexport const as = dual<\n  <Out2>(out: Out2) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In, R>,\n  <Out, In, R, Out2>(self: Schedule.Schedule<Out, In, R>, out: Out2) => Schedule.Schedule<Out2, In, R>\n>(2, (self, out) => map(self, () => out))\n\n/** @internal */\nexport const asVoid = <Out, In, R>(\n  self: Schedule.Schedule<Out, In, R>\n): Schedule.Schedule<void, In, R> => map(self, constVoid)\n\n/** @internal */\nexport const bothInOut = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>\n  ) => Schedule.Schedule<[Out, Out2], readonly [In, In2], R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<[Out, Out2], readonly [In, In2], R | R2>\n>(2, (self, that) =>\n  makeWithState([self.initial, that.initial], (now, [in1, in2], state) =>\n    core.zipWith(\n      self.step(now, in1, state[0]),\n      that.step(now, in2, state[1]),\n      ([lState, out, lDecision], [rState, out2, rDecision]) => {\n        if (ScheduleDecision.isContinue(lDecision) && ScheduleDecision.isContinue(rDecision)) {\n          const interval = pipe(lDecision.intervals, Intervals.union(rDecision.intervals))\n          return [\n            [lState, rState],\n            [out, out2],\n            ScheduleDecision.continue(interval)\n          ]\n        }\n        return [[lState, rState], [out, out2], ScheduleDecision.done]\n      }\n    )))\n\n/** @internal */\nexport const check = dual<\n  <In, Out>(\n    test: (input: In, output: Out) => boolean\n  ) => <R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    test: (input: In, output: Out) => boolean\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, test) => checkEffect(self, (input, out) => core.sync(() => test(input, out))))\n\n/** @internal */\nexport const checkEffect = dual<\n  <In, Out, R2>(\n    test: (input: In, output: Out) => Effect.Effect<boolean, never, R2>\n  ) => <R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    test: (input: In, output: Out) => Effect.Effect<boolean, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, test) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) =>\n      core.flatMap(self.step(now, input, state), ([state, out, decision]) => {\n        if (ScheduleDecision.isDone(decision)) {\n          return core.succeed([state, out, ScheduleDecision.done] as const)\n        }\n        return core.map(test(input, out), (cont) =>\n          cont ?\n            [state, out, decision] as const :\n            [state, out, ScheduleDecision.done] as const)\n      })\n  ))\n/** @internal */\nexport const collectAllInputs = <A>(): Schedule.Schedule<Chunk.Chunk<A>, A> => collectAllOutputs(identity<A>())\n\n/** @internal */\nexport const collectAllOutputs = <Out, In, R>(\n  self: Schedule.Schedule<Out, In, R>\n): Schedule.Schedule<Chunk.Chunk<Out>, In, R> =>\n  reduce(self, Chunk.empty<Out>(), (outs, out) => pipe(outs, Chunk.append(out)))\n\n/** @internal */\nexport const collectUntil = <A>(f: Predicate<A>): Schedule.Schedule<Chunk.Chunk<A>, A> =>\n  collectAllOutputs(recurUntil(f))\n\n/** @internal */\nexport const collectUntilEffect = <A, R>(\n  f: (a: A) => Effect.Effect<boolean, never, R>\n): Schedule.Schedule<Chunk.Chunk<A>, A, R> => collectAllOutputs(recurUntilEffect(f))\n\n/** @internal */\nexport const collectWhile = <A>(f: Predicate<A>): Schedule.Schedule<Chunk.Chunk<A>, A> =>\n  collectAllOutputs(recurWhile(f))\n\n/** @internal */\nexport const collectWhileEffect = <A, R>(\n  f: (a: A) => Effect.Effect<boolean, never, R>\n): Schedule.Schedule<Chunk.Chunk<A>, A, R> => collectAllOutputs(recurWhileEffect(f))\n\n/** @internal */\nexport const compose = dual<\n  <Out2, Out, R2>(\n    that: Schedule.Schedule<Out2, Out, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In, R | R2>,\n  <Out, In, R, Out2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, Out, R2>\n  ) => Schedule.Schedule<Out2, In, R | R2>\n>(2, (self, that) =>\n  makeWithState(\n    [self.initial, that.initial] as const,\n    (now, input, state) =>\n      core.flatMap(\n        self.step(now, input, state[0]),\n        ([lState, out, lDecision]) =>\n          core.map(that.step(now, out, state[1]), ([rState, out2, rDecision]) =>\n            ScheduleDecision.isDone(lDecision)\n              ? [[lState, rState] as const, out2, ScheduleDecision.done] as const\n              : ScheduleDecision.isDone(rDecision)\n              ? [[lState, rState] as const, out2, ScheduleDecision.done] as const\n              : [\n                [lState, rState] as const,\n                out2,\n                ScheduleDecision.continue(pipe(lDecision.intervals, Intervals.max(rDecision.intervals)))\n              ] as const)\n      )\n  ))\n\n/** @internal */\nexport const mapInput = dual<\n  <In, In2>(\n    f: (in2: In2) => In\n  ) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In2, R>,\n  <Out, In, R, In2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (in2: In2) => In\n  ) => Schedule.Schedule<Out, In2, R>\n>(2, (self, f) => mapInputEffect(self, (input2) => core.sync(() => f(input2))))\n\n/** @internal */\nexport const mapInputContext = dual<\n  <R0, R>(\n    f: (env0: Context.Context<R0>) => Context.Context<R>\n  ) => <Out, In>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R0>,\n  <Out, In, R, R0>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (env0: Context.Context<R0>) => Context.Context<R>\n  ) => Schedule.Schedule<Out, In, R0>\n>(2, (self, f) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) => core.mapInputContext(self.step(now, input, state), f)\n  ))\n\n/** @internal */\nexport const mapInputEffect = dual<\n  <In2, In, R2>(\n    f: (in2: In2) => Effect.Effect<In, never, R2>\n  ) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In2, R | R2>,\n  <Out, In, R, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (in2: In2) => Effect.Effect<In, never, R2>\n  ) => Schedule.Schedule<Out, In2, R | R2>\n>(2, (self, f) =>\n  makeWithState(self.initial, (now, input2, state) =>\n    core.flatMap(\n      f(input2),\n      (input) => self.step(now, input, state)\n    )))\n\n/** @internal */\nexport const cron = (expression: string | Cron.Cron): Schedule.Schedule<[number, number]> => {\n  const parsed = Cron.isCron(expression) ? Either.right(expression) : Cron.parse(expression)\n  return makeWithState<[boolean, [number, number, number]], unknown, [number, number]>(\n    [true, [Number.MIN_SAFE_INTEGER, 0, 0]],\n    (now, _, [initial, previous]) => {\n      if (now < previous[0]) {\n        return core.succeed([\n          [false, previous],\n          [previous[1], previous[2]],\n          ScheduleDecision.continueWith(Interval.make(previous[1], previous[2]))\n        ])\n      }\n\n      if (Either.isLeft(parsed)) {\n        return core.die(parsed.left)\n      }\n\n      const cron = parsed.right\n      const date = new Date(now)\n\n      let next: number\n      if (initial && Cron.match(cron, date)) {\n        next = now\n      }\n\n      next = Cron.next(cron, date).getTime()\n      const start = beginningOfMinute(next)\n      const end = endOfMinute(next)\n      return core.succeed([\n        [false, [next, start, end]],\n        [start, end],\n        ScheduleDecision.continueWith(Interval.make(start, end))\n      ])\n    }\n  )\n}\n\n/** @internal */\nexport const dayOfMonth = (day: number): Schedule.Schedule<number> => {\n  return makeWithState<[number, number], unknown, number>(\n    [Number.NEGATIVE_INFINITY, 0],\n    (now, _, state) => {\n      if (!Number.isInteger(day) || day < 1 || 31 < day) {\n        return core.dieSync(() =>\n          new core.IllegalArgumentException(\n            `Invalid argument in: dayOfMonth(${day}). Must be in range 1...31`\n          )\n        )\n      }\n      const n = state[1]\n      const initial = n === 0\n      const day0 = nextDayOfMonth(now, day, initial)\n      const start = beginningOfDay(day0)\n      const end = endOfDay(day0)\n      const interval = Interval.make(start, end)\n      return core.succeed(\n        [\n          [end, n + 1],\n          n,\n          ScheduleDecision.continueWith(interval)\n        ]\n      )\n    }\n  )\n}\n\n/** @internal */\nexport const dayOfWeek = (day: number): Schedule.Schedule<number> => {\n  return makeWithState<[number, number], unknown, number>(\n    [Number.MIN_SAFE_INTEGER, 0],\n    (now, _, state) => {\n      if (!Number.isInteger(day) || day < 1 || 7 < day) {\n        return core.dieSync(() =>\n          new core.IllegalArgumentException(\n            `Invalid argument in: dayOfWeek(${day}). Must be in range 1 (Monday)...7 (Sunday)`\n          )\n        )\n      }\n      const n = state[1]\n      const initial = n === 0\n      const day0 = nextDay(now, day, initial)\n      const start = beginningOfDay(day0)\n      const end = endOfDay(day0)\n      const interval = Interval.make(start, end)\n      return core.succeed(\n        [\n          [end, n + 1],\n          n,\n          ScheduleDecision.continueWith(interval)\n        ]\n      )\n    }\n  )\n}\n\n/** @internal */\nexport const delayed = dual<\n  (\n    f: (duration: Duration.Duration) => Duration.DurationInput\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (duration: Duration.Duration) => Duration.DurationInput\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => delayedEffect(self, (duration) => core.sync(() => f(duration))))\n\n/** @internal */\nexport const delayedEffect = dual<\n  <R2>(\n    f: (duration: Duration.Duration) => Effect.Effect<Duration.DurationInput, never, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (duration: Duration.Duration) => Effect.Effect<Duration.DurationInput, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) => modifyDelayEffect(self, (_, delay) => f(delay)))\n\n/** @internal */\nexport const delayedSchedule = <In, R>(\n  schedule: Schedule.Schedule<Duration.Duration, In, R>\n): Schedule.Schedule<Duration.Duration, In, R> => addDelay(schedule, (x) => x)\n\n/** @internal */\nexport const delays = <Out, In, R>(\n  self: Schedule.Schedule<Out, In, R>\n): Schedule.Schedule<Duration.Duration, In, R> =>\n  makeWithState(self.initial, (now, input, state) =>\n    pipe(\n      self.step(now, input, state),\n      core.flatMap((\n        [state, _, decision]\n      ): Effect.Effect<[any, Duration.Duration, ScheduleDecision.ScheduleDecision]> => {\n        if (ScheduleDecision.isDone(decision)) {\n          return core.succeed([state, Duration.zero, decision])\n        }\n        return core.succeed(\n          [\n            state,\n            Duration.millis(Intervals.start(decision.intervals) - now),\n            decision\n          ]\n        )\n      })\n    ))\n\n/** @internal */\nexport const mapBoth = dual<\n  <In2, In, Out, Out2>(\n    options: {\n      readonly onInput: (in2: In2) => In\n      readonly onOutput: (out: Out) => Out2\n    }\n  ) => <R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In2, R>,\n  <Out, In, R, In2, Out2>(\n    self: Schedule.Schedule<Out, In, R>,\n    options: {\n      readonly onInput: (in2: In2) => In\n      readonly onOutput: (out: Out) => Out2\n    }\n  ) => Schedule.Schedule<Out2, In2, R>\n>(2, (self, { onInput, onOutput }) => map(mapInput(self, onInput), onOutput))\n\n/** @internal */\nexport const mapBothEffect = dual<\n  <In2, In, R2, Out, R3, Out2>(\n    options: {\n      readonly onInput: (input: In2) => Effect.Effect<In, never, R2>\n      readonly onOutput: (out: Out) => Effect.Effect<Out2, never, R3>\n    }\n  ) => <R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In2, R | R2 | R3>,\n  <Out, In, R, In2, R2, Out2, R3>(\n    self: Schedule.Schedule<Out, In, R>,\n    options: {\n      readonly onInput: (input: In2) => Effect.Effect<In, never, R2>\n      readonly onOutput: (out: Out) => Effect.Effect<Out2, never, R3>\n    }\n  ) => Schedule.Schedule<Out2, In2, R | R2 | R3>\n>(2, (self, { onInput, onOutput }) => mapEffect(mapInputEffect(self, onInput), onOutput))\n\n/** @internal */\nexport const driver = <Out, In, R>(\n  self: Schedule.Schedule<Out, In, R>\n): Effect.Effect<Schedule.ScheduleDriver<Out, In, R>> =>\n  pipe(\n    ref.make<readonly [Option.Option<Out>, any]>([Option.none(), self.initial]),\n    core.map((ref) => new ScheduleDriverImpl(self, ref))\n  )\n\n/** @internal */\nexport const duration = (\n  durationInput: Duration.DurationInput\n): Schedule.Schedule<Duration.Duration> => {\n  const duration = Duration.decode(durationInput)\n  const durationMillis = Duration.toMillis(duration)\n  return makeWithState(true as boolean, (now, _, state) =>\n    core.succeed(\n      state\n        ? [\n          false,\n          duration,\n          ScheduleDecision.continueWith(Interval.after(now + durationMillis))\n        ] as const\n        : [false, Duration.zero, ScheduleDecision.done] as const\n    ))\n}\n\n/** @internal */\nexport const either = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>\n>(2, (self, that) => union(self, that))\n\n/** @internal */\nexport const eitherWith = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n  ) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>\n>(3, (self, that, f) => unionWith(self, that, f))\n\n/** @internal */\nexport const ensuring = dual<\n  <X>(\n    finalizer: Effect.Effect<X>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R, X>(\n    self: Schedule.Schedule<Out, In, R>,\n    finalizer: Effect.Effect<X>\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, finalizer) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) =>\n      core.flatMap(self.step(now, input, state), ([state, out, decision]) =>\n        ScheduleDecision.isDone(decision)\n          ? core.as(finalizer, [state, out, decision as ScheduleDecision.ScheduleDecision] as const)\n          : core.succeed([state, out, decision] as const))\n  ))\n\n/** @internal */\nexport const exponential = (\n  baseInput: Duration.DurationInput,\n  factor = 2.0\n): Schedule.Schedule<Duration.Duration> => {\n  const base = Duration.decode(baseInput)\n  return delayedSchedule(\n    map(forever, (i) => Duration.times(base, Math.pow(factor, i)))\n  )\n}\n\n/** @internal */\nexport const fibonacci = (oneInput: Duration.DurationInput): Schedule.Schedule<Duration.Duration> => {\n  const one = Duration.decode(oneInput)\n  return delayedSchedule(\n    pipe(\n      unfold(\n        [one, one] as const,\n        ([a, b]) => [b, Duration.sum(a, b)] as const\n      ),\n      map((out) => out[0])\n    )\n  )\n}\n\n/** @internal */\nexport const fixed = (intervalInput: Duration.DurationInput): Schedule.Schedule<number> => {\n  const interval = Duration.decode(intervalInput)\n  const intervalMillis = Duration.toMillis(interval)\n  return makeWithState<[Option.Option<[number, number]>, number], unknown, number>(\n    [Option.none(), 0],\n    (now, _, [option, n]) =>\n      core.sync(() => {\n        switch (option._tag) {\n          case \"None\": {\n            return [\n              [Option.some([now, now + intervalMillis]), n + 1],\n              n,\n              ScheduleDecision.continueWith(Interval.after(now + intervalMillis))\n            ]\n          }\n          case \"Some\": {\n            const [startMillis, lastRun] = option.value\n            const runningBehind = now > (lastRun + intervalMillis)\n            const boundary = Equal.equals(interval, Duration.zero)\n              ? interval\n              : Duration.millis(intervalMillis - ((now - startMillis) % intervalMillis))\n            const sleepTime = Equal.equals(boundary, Duration.zero) ? interval : boundary\n            const nextRun = runningBehind ? now : now + Duration.toMillis(sleepTime)\n            return [\n              [Option.some([startMillis, nextRun]), n + 1],\n              n,\n              ScheduleDecision.continueWith(Interval.after(nextRun))\n            ]\n          }\n        }\n      })\n  )\n}\n\n/** @internal */\nexport const fromDelay = (delay: Duration.DurationInput): Schedule.Schedule<Duration.Duration> => duration(delay)\n\n/** @internal */\nexport const fromDelays = (\n  delay: Duration.DurationInput,\n  ...delays: Array<Duration.DurationInput>\n): Schedule.Schedule<Duration.Duration> =>\n  makeWithState(\n    [[delay, ...delays].map((_) => Duration.decode(_)) as Array<Duration.Duration>, true as boolean] as const,\n    (now, _, [durations, cont]) =>\n      core.sync(() => {\n        if (cont) {\n          const x = durations[0]!\n          const interval = Interval.after(now + Duration.toMillis(x))\n          if (durations.length >= 2) {\n            return [\n              [durations.slice(1), true] as const,\n              x,\n              ScheduleDecision.continueWith(interval)\n            ] as const\n          }\n          const y = durations.slice(1)\n          return [\n            [[x, ...y] as Array<Duration.Duration>, false] as const,\n            x,\n            ScheduleDecision.continueWith(interval)\n          ] as const\n        }\n        return [[durations, false] as const, Duration.zero, ScheduleDecision.done] as const\n      })\n  )\n\n/** @internal */\nexport const fromFunction = <A, B>(f: (a: A) => B): Schedule.Schedule<B, A> => map(identity<A>(), f)\n\n/** @internal */\nexport const hourOfDay = (hour: number): Schedule.Schedule<number> =>\n  makeWithState<[number, number], unknown, number>(\n    [Number.NEGATIVE_INFINITY, 0],\n    (now, _, state) => {\n      if (!Number.isInteger(hour) || hour < 0 || 23 < hour) {\n        return core.dieSync(() =>\n          new core.IllegalArgumentException(\n            `Invalid argument in: hourOfDay(${hour}). Must be in range 0...23`\n          )\n        )\n      }\n      const n = state[1]\n      const initial = n === 0\n      const hour0 = nextHour(now, hour, initial)\n      const start = beginningOfHour(hour0)\n      const end = endOfHour(hour0)\n      const interval = Interval.make(start, end)\n      return core.succeed(\n        [\n          [end, n + 1],\n          n,\n          ScheduleDecision.continueWith(interval)\n        ]\n      )\n    }\n  )\n\n/** @internal */\nexport const identity = <A>(): Schedule.Schedule<A, A> =>\n  makeWithState(void 0, (now, input, state) =>\n    core.succeed(\n      [\n        state,\n        input,\n        ScheduleDecision.continueWith(Interval.after(now))\n      ] as const\n    ))\n\n/** @internal */\nexport const intersect = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>\n>(2, (self, that) => intersectWith(self, that, Intervals.intersect))\n\n/** @internal */\nexport const intersectWith = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n  ) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>\n>(3, <Env, In, Out, Env2, In2, Out2>(\n  self: Schedule.Schedule<Out, In, Env>,\n  that: Schedule.Schedule<Out2, In2, Env2>,\n  f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n): Schedule.Schedule<[Out, Out2], In & In2, Env | Env2> =>\n  makeWithState<[any, any], In & In2, [Out, Out2], Env | Env2>(\n    [self.initial, that.initial],\n    (now, input: In & In2, state) =>\n      pipe(\n        core.zipWith(\n          self.step(now, input, state[0]),\n          that.step(now, input, state[1]),\n          (a, b) => [a, b] as const\n        ),\n        core.flatMap(([\n          [lState, out, lDecision],\n          [rState, out2, rDecision]\n        ]) => {\n          if (ScheduleDecision.isContinue(lDecision) && ScheduleDecision.isContinue(rDecision)) {\n            return intersectWithLoop(\n              self,\n              that,\n              input,\n              lState,\n              out,\n              lDecision.intervals,\n              rState,\n              out2,\n              rDecision.intervals,\n              f\n            )\n          }\n          return core.succeed(\n            [\n              [lState, rState],\n              [out, out2],\n              ScheduleDecision.done\n            ]\n          )\n        })\n      )\n  ))\n\n/** @internal */\nconst intersectWithLoop = <State, State1, Env, In, Out, Env1, In1, Out2>(\n  self: Schedule.Schedule<Out, In, Env>,\n  that: Schedule.Schedule<Out2, In1, Env1>,\n  input: In & In1,\n  lState: State,\n  out: Out,\n  lInterval: Intervals.Intervals,\n  rState: State1,\n  out2: Out2,\n  rInterval: Intervals.Intervals,\n  f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n): Effect.Effect<\n  [[State, State1], [Out, Out2], ScheduleDecision.ScheduleDecision],\n  never,\n  Env | Env1\n> => {\n  const combined = f(lInterval, rInterval)\n  if (Intervals.isNonEmpty(combined)) {\n    return core.succeed([\n      [lState, rState],\n      [out, out2],\n      ScheduleDecision.continue(combined)\n    ])\n  }\n\n  if (pipe(lInterval, Intervals.lessThan(rInterval))) {\n    return core.flatMap(self.step(Intervals.end(lInterval), input, lState), ([lState, out, decision]) => {\n      if (ScheduleDecision.isDone(decision)) {\n        return core.succeed([\n          [lState, rState],\n          [out, out2],\n          ScheduleDecision.done\n        ])\n      }\n      return intersectWithLoop(\n        self,\n        that,\n        input,\n        lState,\n        out,\n        decision.intervals,\n        rState,\n        out2,\n        rInterval,\n        f\n      )\n    })\n  }\n  return core.flatMap(that.step(Intervals.end(rInterval), input, rState), ([rState, out2, decision]) => {\n    if (ScheduleDecision.isDone(decision)) {\n      return core.succeed([\n        [lState, rState],\n        [out, out2],\n        ScheduleDecision.done\n      ])\n    }\n    return intersectWithLoop(\n      self,\n      that,\n      input,\n      lState,\n      out,\n      lInterval,\n      rState,\n      out2,\n      decision.intervals,\n      f\n    )\n  })\n}\n\n/** @internal */\nexport const jittered = <Out, In, R>(self: Schedule.Schedule<Out, In, R>): Schedule.Schedule<Out, In, R> =>\n  jitteredWith(self, { min: 0.8, max: 1.2 })\n\n/** @internal */\nexport const jitteredWith = dual<\n  (options: { min?: number | undefined; max?: number | undefined }) => <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>\n  ) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    options: { min?: number | undefined; max?: number | undefined }\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, options) => {\n  const { max, min } = Object.assign({ min: 0.8, max: 1.2 }, options)\n  return delayedEffect(self, (duration) =>\n    core.map(Random.next, (random) => {\n      const d = Duration.toMillis(duration)\n      const jittered = d * min * (1 - random) + d * max * random\n      return Duration.millis(jittered)\n    }))\n})\n\n/** @internal */\nexport const linear = (baseInput: Duration.DurationInput): Schedule.Schedule<Duration.Duration> => {\n  const base = Duration.decode(baseInput)\n  return delayedSchedule(map(forever, (i) => Duration.times(base, i + 1)))\n}\n\n/** @internal */\nexport const map = dual<\n  <Out, Out2>(\n    f: (out: Out) => Out2\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In, R>,\n  <Out, In, R, Out2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out) => Out2\n  ) => Schedule.Schedule<Out2, In, R>\n>(2, (self, f) => mapEffect(self, (out) => core.sync(() => f(out))))\n\n/** @internal */\nexport const mapEffect = dual<\n  <Out, Out2, R2>(\n    f: (out: Out) => Effect.Effect<Out2, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In, R | R2>,\n  <Out, In, R, Out2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out) => Effect.Effect<Out2, never, R2>\n  ) => Schedule.Schedule<Out2, In, R | R2>\n>(2, (self, f) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) =>\n      core.flatMap(self.step(now, input, state), ([state, out, decision]) =>\n        core.map(\n          f(out),\n          (out2) => [state, out2, decision] as const\n        ))\n  ))\n\n/** @internal */\nexport const minuteOfHour = (minute: number): Schedule.Schedule<number> =>\n  makeWithState<[number, number], unknown, number>(\n    [Number.MIN_SAFE_INTEGER, 0],\n    (now, _, state) => {\n      if (!Number.isInteger(minute) || minute < 0 || 59 < minute) {\n        return core.dieSync(() =>\n          new core.IllegalArgumentException(\n            `Invalid argument in: minuteOfHour(${minute}). Must be in range 0...59`\n          )\n        )\n      }\n      const n = state[1]\n      const initial = n === 0\n      const minute0 = nextMinute(now, minute, initial)\n      const start = beginningOfMinute(minute0)\n      const end = endOfMinute(minute0)\n      const interval = Interval.make(start, end)\n      return core.succeed(\n        [\n          [end, n + 1],\n          n,\n          ScheduleDecision.continueWith(interval)\n        ]\n      )\n    }\n  )\n\n/** @internal */\nexport const modifyDelay = dual<\n  <Out>(\n    f: (out: Out, duration: Duration.Duration) => Duration.DurationInput\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out, duration: Duration.Duration) => Duration.DurationInput\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => modifyDelayEffect(self, (out, duration) => core.sync(() => f(out, duration))))\n\n/** @internal */\nexport const modifyDelayEffect = dual<\n  <Out, R2>(\n    f: (out: Out, duration: Duration.Duration) => Effect.Effect<Duration.DurationInput, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out, duration: Duration.Duration) => Effect.Effect<Duration.DurationInput, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) =>\n      core.flatMap(self.step(now, input, state), ([state, out, decision]) => {\n        if (ScheduleDecision.isDone(decision)) {\n          return core.succeed([state, out, decision] as const)\n        }\n        const intervals = decision.intervals\n        const delay = Interval.size(Interval.make(now, Intervals.start(intervals)))\n        return core.map(f(out, delay), (durationInput) => {\n          const duration = Duration.decode(durationInput)\n          const oldStart = Intervals.start(intervals)\n          const newStart = now + Duration.toMillis(duration)\n          const delta = newStart - oldStart\n          const newEnd = Math.max(0, Intervals.end(intervals) + delta)\n          const newInterval = Interval.make(newStart, newEnd)\n          return [state, out, ScheduleDecision.continueWith(newInterval)] as const\n        })\n      })\n  ))\n\n/** @internal */\nexport const onDecision = dual<\n  <Out, X, R2>(\n    f: (out: Out, decision: ScheduleDecision.ScheduleDecision) => Effect.Effect<X, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, X, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out, decision: ScheduleDecision.ScheduleDecision) => Effect.Effect<X, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) =>\n      core.flatMap(\n        self.step(now, input, state),\n        ([state, out, decision]) => core.as(f(out, decision), [state, out, decision] as const)\n      )\n  ))\n\n/** @internal */\nexport const passthrough = <Out, In, R>(\n  self: Schedule.Schedule<Out, In, R>\n): Schedule.Schedule<In, In, R> =>\n  makeWithState(self.initial, (now, input, state) =>\n    pipe(\n      self.step(now, input, state),\n      core.map(([state, _, decision]) => [state, input, decision] as const)\n    ))\n\n/** @internal */\nexport const provideContext = dual<\n  <R>(\n    context: Context.Context<R>\n  ) => <Out, In>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    context: Context.Context<R>\n  ) => Schedule.Schedule<Out, In>\n>(2, (self, context) =>\n  makeWithState(self.initial, (now, input, state) =>\n    core.provideContext(\n      self.step(now, input, state),\n      context\n    )))\n\n/** @internal */\nexport const provideService = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T,\n    service: Context.Tag.Service<T>\n  ) => <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>\n  ) => Schedule.Schedule<Out, In, Exclude<R, Context.Tag.Identifier<T>>>,\n  <Out, In, R, T extends Context.Tag<any, any>>(\n    self: Schedule.Schedule<Out, In, R>,\n    tag: T,\n    service: Context.Tag.Service<T>\n  ) => Schedule.Schedule<Out, In, Exclude<R, Context.Tag.Identifier<T>>>\n>(3, <Out, In, R, T extends Context.Tag<any, any>>(\n  self: Schedule.Schedule<Out, In, R>,\n  tag: T,\n  service: Context.Tag.Service<T>\n): Schedule.Schedule<Out, In, Exclude<R, Context.Tag.Identifier<T>>> =>\n  makeWithState(self.initial, (now, input, state) =>\n    core.contextWithEffect((env) =>\n      core.provideContext(\n        // @ts-expect-error\n        self.step(now, input, state),\n        Context.add(env, tag, service)\n      )\n    )))\n\n/** @internal */\nexport const recurUntil = <A>(f: Predicate<A>): Schedule.Schedule<A, A> => untilInput(identity<A>(), f)\n\n/** @internal */\nexport const recurUntilEffect = <A, R>(\n  f: (a: A) => Effect.Effect<boolean, never, R>\n): Schedule.Schedule<A, A, R> => untilInputEffect(identity<A>(), f)\n\n/** @internal */\nexport const recurUntilOption = <A, B>(pf: (a: A) => Option.Option<B>): Schedule.Schedule<Option.Option<B>, A> =>\n  untilOutput(map(identity<A>(), pf), Option.isSome)\n\n/** @internal */\nexport const recurUpTo = (\n  durationInput: Duration.DurationInput\n): Schedule.Schedule<Duration.Duration> => {\n  const duration = Duration.decode(durationInput)\n  return whileOutput(elapsed, (elapsed) => Duration.lessThan(elapsed, duration))\n}\n\n/** @internal */\nexport const recurWhile = <A>(f: Predicate<A>): Schedule.Schedule<A, A> => whileInput(identity<A>(), f)\n\n/** @internal */\nexport const recurWhileEffect = <A, R>(\n  f: (a: A) => Effect.Effect<boolean, never, R>\n): Schedule.Schedule<A, A, R> => whileInputEffect(identity<A>(), f)\n\n/** @internal */\nexport const recurs = (n: number): Schedule.Schedule<number> => whileOutput(forever, (out) => out < n)\n\n/** @internal */\nexport const reduce = dual<\n  <Out, Z>(\n    zero: Z,\n    f: (z: Z, out: Out) => Z\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Z, In, R>,\n  <Out, In, R, Z>(\n    self: Schedule.Schedule<Out, In, R>,\n    zero: Z,\n    f: (z: Z, out: Out) => Z\n  ) => Schedule.Schedule<Z, In, R>\n>(3, (self, zero, f) => reduceEffect(self, zero, (z, out) => core.sync(() => f(z, out))))\n\n/** @internal */\nexport const reduceEffect = dual<\n  <Z, Out, R2>(\n    zero: Z,\n    f: (z: Z, out: Out) => Effect.Effect<Z, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Z, In, R | R2>,\n  <Out, In, R, Z, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    zero: Z,\n    f: (z: Z, out: Out) => Effect.Effect<Z, never, R2>\n  ) => Schedule.Schedule<Z, In, R | R2>\n>(3, (self, zero, f) =>\n  makeWithState(\n    [self.initial, zero] as const,\n    (now, input, [s, z]) =>\n      core.flatMap(self.step(now, input, s), ([s, out, decision]) =>\n        ScheduleDecision.isDone(decision)\n          ? core.succeed([[s, z], z, decision as ScheduleDecision.ScheduleDecision] as const)\n          : core.map(f(z, out), (z2) => [[s, z2], z, decision] as const))\n  ))\n\n/** @internal */\nexport const repeatForever = <Env, In, Out>(self: Schedule.Schedule<Out, In, Env>): Schedule.Schedule<Out, In, Env> =>\n  makeWithState(self.initial, (now, input, state) => {\n    const step = (\n      now: number,\n      input: In,\n      state: any\n    ): Effect.Effect<[any, Out, ScheduleDecision.ScheduleDecision], never, Env> =>\n      core.flatMap(\n        self.step(now, input, state),\n        ([state, out, decision]) =>\n          ScheduleDecision.isDone(decision)\n            ? step(now, input, self.initial)\n            : core.succeed([state, out, decision])\n      )\n    return step(now, input, state)\n  })\n\n/** @internal */\nexport const repetitions = <Out, In, R>(self: Schedule.Schedule<Out, In, R>): Schedule.Schedule<number, In, R> =>\n  reduce(self, 0, (n, _) => n + 1)\n\n/** @internal */\nexport const resetAfter = dual<\n  (\n    duration: Duration.DurationInput\n  ) => <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>\n  ) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    duration: Duration.DurationInput\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, durationInput) => {\n  const duration = Duration.decode(durationInput)\n  return pipe(\n    self,\n    intersect(elapsed),\n    resetWhen(([, time]) => Duration.greaterThanOrEqualTo(time, duration)),\n    map((out) => out[0])\n  )\n})\n\n/** @internal */\nexport const resetWhen = dual<\n  <Out>(f: Predicate<Out>) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(self: Schedule.Schedule<Out, In, R>, f: Predicate<Out>) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) =>\n  makeWithState(\n    self.initial,\n    (now, input, state) =>\n      core.flatMap(self.step(now, input, state), ([state, out, decision]) =>\n        f(out)\n          ? self.step(now, input, self.initial)\n          : core.succeed([state, out, decision] as const))\n  ))\n\n/** @internal */\nexport const run = dual<\n  <In>(\n    now: number,\n    input: Iterable<In>\n  ) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Effect.Effect<Chunk.Chunk<Out>, never, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    now: number,\n    input: Iterable<In>\n  ) => Effect.Effect<Chunk.Chunk<Out>, never, R>\n>(3, (self, now, input) =>\n  pipe(\n    runLoop(self, now, Chunk.fromIterable(input), self.initial, Chunk.empty()),\n    core.map((list) => Chunk.reverse(list))\n  ))\n\n/** @internal */\nconst runLoop = <Env, In, Out>(\n  self: Schedule.Schedule<Out, In, Env>,\n  now: number,\n  inputs: Chunk.Chunk<In>,\n  state: any,\n  acc: Chunk.Chunk<Out>\n): Effect.Effect<Chunk.Chunk<Out>, never, Env> => {\n  if (!Chunk.isNonEmpty(inputs)) {\n    return core.succeed(acc)\n  }\n  const input = Chunk.headNonEmpty(inputs)\n  const nextInputs = Chunk.tailNonEmpty(inputs)\n  return core.flatMap(self.step(now, input, state), ([state, out, decision]) => {\n    if (ScheduleDecision.isDone(decision)) {\n      return core.sync(() => pipe(acc, Chunk.prepend(out)))\n    }\n    return runLoop(\n      self,\n      Intervals.start(decision.intervals),\n      nextInputs,\n      state,\n      Chunk.prepend(acc, out)\n    )\n  })\n}\n\n/** @internal */\nexport const secondOfMinute = (second: number): Schedule.Schedule<number> =>\n  makeWithState<[number, number], unknown, number>(\n    [Number.NEGATIVE_INFINITY, 0],\n    (now, _, state) => {\n      if (!Number.isInteger(second) || second < 0 || 59 < second) {\n        return core.dieSync(() =>\n          new core.IllegalArgumentException(\n            `Invalid argument in: secondOfMinute(${second}). Must be in range 0...59`\n          )\n        )\n      }\n      const n = state[1]\n      const initial = n === 0\n      const second0 = nextSecond(now, second, initial)\n      const start = beginningOfSecond(second0)\n      const end = endOfSecond(second0)\n      const interval = Interval.make(start, end)\n      return core.succeed(\n        [\n          [end, n + 1],\n          n,\n          ScheduleDecision.continueWith(interval)\n        ]\n      )\n    }\n  )\n\n/** @internal */\nexport const spaced = (duration: Duration.DurationInput): Schedule.Schedule<number> => addDelay(forever, () => duration)\n\n/** @internal */\nexport const succeed = <A>(value: A): Schedule.Schedule<A> => map(forever, () => value)\n\n/** @internal */\nexport const sync = <A>(evaluate: LazyArg<A>): Schedule.Schedule<A> => map(forever, evaluate)\n\n/** @internal */\nexport const tapInput = dual<\n  <In2, X, R2>(\n    f: (input: In2) => Effect.Effect<X, never, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In & In2, R | R2>,\n  <Out, In, R, In2, X, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (input: In2) => Effect.Effect<X, never, R2>\n  ) => Schedule.Schedule<Out, In & In2, R | R2>\n>(2, (self, f) =>\n  makeWithState(self.initial, (now, input, state) =>\n    core.zipRight(\n      f(input),\n      self.step(now, input, state)\n    )))\n\n/** @internal */\nexport const tapOutput = dual<\n  <XO extends Out, X, R2, Out>(\n    f: (out: XO) => Effect.Effect<X, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, XO extends Out, X, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: XO) => Effect.Effect<X, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) =>\n  makeWithState(self.initial, (now, input, state) =>\n    core.tap(\n      self.step(now, input, state),\n      ([, out]) => f(out as any)\n    )))\n\n/** @internal */\nexport const unfold = <A>(initial: A, f: (a: A) => A): Schedule.Schedule<A> =>\n  makeWithState(initial, (now, _, state) =>\n    core.sync(() =>\n      [\n        f(state),\n        state,\n        ScheduleDecision.continueWith(Interval.after(now))\n      ] as const\n    ))\n\n/** @internal */\nexport const union = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>\n>(2, (self, that) => unionWith(self, that, Intervals.union))\n\n/** @internal */\nexport const unionWith = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (x: Intervals.Intervals, y: Intervals.Intervals) => Intervals.Intervals\n  ) => Schedule.Schedule<[Out, Out2], In & In2, R | R2>\n>(3, (self, that, f) =>\n  makeWithState([self.initial, that.initial], (now, input, state) =>\n    core.zipWith(\n      self.step(now, input, state[0]),\n      that.step(now, input, state[1]),\n      ([lState, l, lDecision], [rState, r, rDecision]) => {\n        if (ScheduleDecision.isDone(lDecision) && ScheduleDecision.isDone(rDecision)) {\n          return [[lState, rState], [l, r], ScheduleDecision.done]\n        }\n        if (ScheduleDecision.isDone(lDecision) && ScheduleDecision.isContinue(rDecision)) {\n          return [\n            [lState, rState],\n            [l, r],\n            ScheduleDecision.continue(rDecision.intervals)\n          ]\n        }\n        if (ScheduleDecision.isContinue(lDecision) && ScheduleDecision.isDone(rDecision)) {\n          return [\n            [lState, rState],\n            [l, r],\n            ScheduleDecision.continue(lDecision.intervals)\n          ]\n        }\n        if (ScheduleDecision.isContinue(lDecision) && ScheduleDecision.isContinue(rDecision)) {\n          const combined = f(lDecision.intervals, rDecision.intervals)\n          return [\n            [lState, rState],\n            [l, r],\n            ScheduleDecision.continue(combined)\n          ]\n        }\n        throw new Error(\n          \"BUG: Schedule.unionWith - please report an issue at https://github.com/Effect-TS/effect/issues\"\n        )\n      }\n    )))\n\n/** @internal */\nexport const untilInput = dual<\n  <In>(f: Predicate<In>) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(self: Schedule.Schedule<Out, In, R>, f: Predicate<In>) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => check(self, (input, _) => !f(input)))\n\n/** @internal */\nexport const untilInputEffect = dual<\n  <In, R2>(\n    f: (input: In) => Effect.Effect<boolean, never, R2>\n  ) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (input: In) => Effect.Effect<boolean, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) => checkEffect(self, (input, _) => effect.negate(f(input))))\n\n/** @internal */\nexport const untilOutput = dual<\n  <Out>(f: Predicate<Out>) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(self: Schedule.Schedule<Out, In, R>, f: Predicate<Out>) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => check(self, (_, out) => !f(out)))\n\n/** @internal */\nexport const untilOutputEffect = dual<\n  <Out, R2>(\n    f: (out: Out) => Effect.Effect<boolean, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out) => Effect.Effect<boolean, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) => checkEffect(self, (_, out) => effect.negate(f(out))))\n\n/** @internal */\nexport const upTo = dual<\n  (duration: Duration.DurationInput) => <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>\n  ) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(\n    self: Schedule.Schedule<Out, In, R>,\n    duration: Duration.DurationInput\n  ) => Schedule.Schedule<Out, In, R>\n>(2, (self, duration) => zipLeft(self, recurUpTo(duration)))\n\n/** @internal */\nexport const whileInput = dual<\n  <In>(f: Predicate<In>) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(self: Schedule.Schedule<Out, In, R>, f: Predicate<In>) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => check(self, (input, _) => f(input)))\n\n/** @internal */\nexport const whileInputEffect = dual<\n  <In, R2>(\n    f: (input: In) => Effect.Effect<boolean, never, R2>\n  ) => <Out, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (input: In) => Effect.Effect<boolean, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) => checkEffect(self, (input, _) => f(input)))\n\n/** @internal */\nexport const whileOutput = dual<\n  <Out>(f: Predicate<Out>) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R>,\n  <Out, In, R>(self: Schedule.Schedule<Out, In, R>, f: Predicate<Out>) => Schedule.Schedule<Out, In, R>\n>(2, (self, f) => check(self, (_, out) => f(out)))\n\n/** @internal */\nexport const whileOutputEffect = dual<\n  <Out, R2>(\n    f: (out: Out) => Effect.Effect<boolean, never, R2>\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In, R | R2>,\n  <Out, In, R, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    f: (out: Out) => Effect.Effect<boolean, never, R2>\n  ) => Schedule.Schedule<Out, In, R | R2>\n>(2, (self, f) => checkEffect(self, (_, out) => f(out)))\n\n/** @internal */\nexport const windowed = (intervalInput: Duration.DurationInput): Schedule.Schedule<number> => {\n  const interval = Duration.decode(intervalInput)\n  const millis = Duration.toMillis(interval)\n  return makeWithState<[Option.Option<number>, number], unknown, number>(\n    [Option.none(), 0],\n    (now, _, [option, n]) => {\n      switch (option._tag) {\n        case \"None\": {\n          return core.succeed(\n            [\n              [Option.some(now), n + 1],\n              n,\n              ScheduleDecision.continueWith(Interval.after(now + millis))\n            ]\n          )\n        }\n        case \"Some\": {\n          return core.succeed(\n            [\n              [Option.some(option.value), n + 1],\n              n,\n              ScheduleDecision.continueWith(\n                Interval.after(now + (millis - ((now - option.value) % millis)))\n              )\n            ]\n          )\n        }\n      }\n    }\n  )\n}\n\n/** @internal */\nexport const zipLeft = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out, In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<Out, In & In2, R | R2>\n>(2, (self, that) => map(intersect(self, that), (out) => out[0]))\n\n/** @internal */\nexport const zipRight = dual<\n  <Out2, In2, R2>(\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => <Out, In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out2, In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>\n  ) => Schedule.Schedule<Out2, In & In2, R | R2>\n>(2, (self, that) => map(intersect(self, that), (out) => out[1]))\n\n/** @internal */\nexport const zipWith = dual<\n  <Out2, In2, R2, Out, Out3>(\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (out: Out, out2: Out2) => Out3\n  ) => <In, R>(self: Schedule.Schedule<Out, In, R>) => Schedule.Schedule<Out3, In & In2, R | R2>,\n  <Out, In, R, Out2, In2, R2, Out3>(\n    self: Schedule.Schedule<Out, In, R>,\n    that: Schedule.Schedule<Out2, In2, R2>,\n    f: (out: Out, out2: Out2) => Out3\n  ) => Schedule.Schedule<Out3, In & In2, R | R2>\n>(3, (self, that, f) => map(intersect(self, that), ([out, out2]) => f(out, out2)))\n\n// -----------------------------------------------------------------------------\n// Seconds\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const beginningOfSecond = (now: number): number => {\n  const date = new Date(now)\n  return new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    date.getHours(),\n    date.getMinutes(),\n    date.getSeconds(),\n    0\n  ).getTime()\n}\n\n/** @internal */\nexport const endOfSecond = (now: number): number => {\n  const date = new Date(beginningOfSecond(now))\n  return date.setSeconds(date.getSeconds() + 1)\n}\n\n/** @internal */\nexport const nextSecond = (now: number, second: number, initial: boolean): number => {\n  const date = new Date(now)\n  if (date.getSeconds() === second && initial) {\n    return now\n  }\n  if (date.getSeconds() < second) {\n    return date.setSeconds(second)\n  }\n  // Set seconds to the provided value and add one minute\n  const newDate = new Date(date.setSeconds(second))\n  return newDate.setTime(newDate.getTime() + 1000 * 60)\n}\n\n// -----------------------------------------------------------------------------\n// Minutes\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const beginningOfMinute = (now: number): number => {\n  const date = new Date(now)\n  return new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    date.getHours(),\n    date.getMinutes(),\n    0,\n    0\n  ).getTime()\n}\n\n/** @internal */\nexport const endOfMinute = (now: number): number => {\n  const date = new Date(beginningOfMinute(now))\n  return date.setMinutes(date.getMinutes() + 1)\n}\n\n/** @internal */\nexport const nextMinute = (now: number, minute: number, initial: boolean): number => {\n  const date = new Date(now)\n  if (date.getMinutes() === minute && initial) {\n    return now\n  }\n  if (date.getMinutes() < minute) {\n    return date.setMinutes(minute)\n  }\n  // Set minutes to the provided value and add one hour\n  const newDate = new Date(date.setMinutes(minute))\n  return newDate.setTime(newDate.getTime() + 1000 * 60 * 60)\n}\n\n// -----------------------------------------------------------------------------\n// Hours\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const beginningOfHour = (now: number): number => {\n  const date = new Date(now)\n  return new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    date.getHours(),\n    0,\n    0,\n    0\n  ).getTime()\n}\n\n/** @internal */\nexport const endOfHour = (now: number): number => {\n  const date = new Date(beginningOfHour(now))\n  return date.setHours(date.getHours() + 1)\n}\n\n/** @internal */\nexport const nextHour = (now: number, hour: number, initial: boolean): number => {\n  const date = new Date(now)\n  if (date.getHours() === hour && initial) {\n    return now\n  }\n  if (date.getHours() < hour) {\n    return date.setHours(hour)\n  }\n  // Set hours to the provided value and add one day\n  const newDate = new Date(date.setHours(hour))\n  return newDate.setTime(newDate.getTime() + 1000 * 60 * 60 * 24)\n}\n\n// -----------------------------------------------------------------------------\n// Days\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const beginningOfDay = (now: number): number => {\n  const date = new Date(now)\n  return new Date(\n    date.getFullYear(),\n    date.getMonth(),\n    date.getDate(),\n    0,\n    0,\n    0,\n    0\n  ).getTime()\n}\n\n/** @internal */\nexport const endOfDay = (now: number): number => {\n  const date = new Date(beginningOfDay(now))\n  return date.setDate(date.getDate() + 1)\n}\n\n/** @internal */\nexport const nextDay = (now: number, dayOfWeek: number, initial: boolean): number => {\n  const date = new Date(now)\n  if (date.getDay() === dayOfWeek && initial) {\n    return now\n  }\n  const nextDayOfWeek = (7 + dayOfWeek - date.getDay()) % 7\n  return date.setDate(date.getDate() + (nextDayOfWeek === 0 ? 7 : nextDayOfWeek))\n}\n\n/** @internal */\nexport const nextDayOfMonth = (now: number, day: number, initial: boolean): number => {\n  const date = new Date(now)\n  if (date.getDate() === day && initial) {\n    return now\n  }\n  if (date.getDate() < day) {\n    return date.setDate(day)\n  }\n  return findNextMonth(now, day, 1)\n}\n\n/** @internal */\nexport const findNextMonth = (now: number, day: number, months: number): number => {\n  const d = new Date(now)\n  const tmp1 = new Date(d.setDate(day))\n  const tmp2 = new Date(tmp1.setMonth(tmp1.getMonth() + months))\n  if (tmp2.getDate() === day) {\n    const d2 = new Date(now)\n    const tmp3 = new Date(d2.setDate(day))\n    return tmp3.setMonth(tmp3.getMonth() + months)\n  }\n  return findNextMonth(now, day, months + 1)\n}\n\n// circular with Effect\n\nconst ScheduleDefectTypeId = Symbol.for(\"effect/Schedule/ScheduleDefect\")\nclass ScheduleDefect<E> {\n  readonly [ScheduleDefectTypeId]: typeof ScheduleDefectTypeId\n  constructor(readonly error: E) {\n    this[ScheduleDefectTypeId] = ScheduleDefectTypeId\n  }\n}\nconst isScheduleDefect = <E = unknown>(u: unknown): u is ScheduleDefect<E> => hasProperty(u, ScheduleDefectTypeId)\nconst scheduleDefectWrap = <A, E, R>(self: Effect.Effect<A, E, R>) =>\n  core.catchAll(self, (e) => core.die(new ScheduleDefect(e)))\nconst scheduleDefectRefail = <A, E, R>(self: Effect.Effect<A, E, R>) =>\n  core.catchAllCause(self, (cause) =>\n    Option.match(\n      internalCause.find(\n        cause,\n        (_) => internalCause.isDieType(_) && isScheduleDefect<E>(_.defect) ? Option.some(_.defect) : Option.none()\n      ),\n      {\n        onNone: () => core.failCause(cause),\n        onSome: (error) => core.fail(error.error)\n      }\n    ))\n\n/** @internal */\nexport const repeat_Effect = dual<\n  <R1, A, B>(\n    schedule: Schedule.Schedule<B, A, R1>\n  ) => <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E, R | R1>,\n  <A, E, R, R1, B>(\n    self: Effect.Effect<A, E, R>,\n    schedule: Schedule.Schedule<B, A, R1>\n  ) => Effect.Effect<B, E, R | R1>\n>(2, (self, schedule) => repeatOrElse_Effect(self, schedule, (e, _) => core.fail(e)))\n\n/** @internal */\nexport const repeat_combined = dual<{\n  <O extends Effect.Repeat.Options<A>, A>(\n    options: O\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Repeat.Return<R, E, A, O>\n  <B, A, R1>(\n    schedule: Schedule.Schedule<B, A, R1>\n  ): <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E, R | R1>\n}, {\n  <A, E, R, O extends Effect.Repeat.Options<A>>(\n    self: Effect.Effect<A, E, R>,\n    options: O\n  ): Effect.Repeat.Return<R, E, A, O>\n  <A, E, R, B, R1>(\n    self: Effect.Effect<A, E, R>,\n    schedule: Schedule.Schedule<B, A, R1>\n  ): Effect.Effect<B, E, R | R1>\n}>(\n  2,\n  (self: Effect.Effect<any, any, any>, options: Effect.Repeat.Options<any> | Schedule.Schedule<any, any, any>) => {\n    if (isSchedule(options)) {\n      return repeat_Effect(self, options)\n    }\n\n    const base = options.schedule ?? passthrough(forever)\n    const withWhile = options.while ?\n      whileInputEffect(base, (a) => {\n        const applied = options.while!(a)\n        if (typeof applied === \"boolean\") {\n          return core.succeed(applied)\n        }\n        return scheduleDefectWrap(applied)\n      }) :\n      base\n    const withUntil = options.until ?\n      untilInputEffect(withWhile, (a) => {\n        const applied = options.until!(a)\n        if (typeof applied === \"boolean\") {\n          return core.succeed(applied)\n        }\n        return scheduleDefectWrap(applied)\n      }) :\n      withWhile\n    const withTimes = options.times ?\n      intersect(withUntil, recurs(options.times)).pipe(map((intersectionPair) => intersectionPair[0])) :\n      withUntil\n\n    return scheduleDefectRefail(repeat_Effect(self, withTimes))\n  }\n)\n\n/** @internal */\nexport const repeatOrElse_Effect = dual<\n  <R2, A, B, E, E2, R3>(\n    schedule: Schedule.Schedule<B, A, R2>,\n    orElse: (error: E, option: Option.Option<B>) => Effect.Effect<B, E2, R3>\n  ) => <R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B, E2, R | R2 | R3>,\n  <A, E, R, R2, B, E2, R3>(\n    self: Effect.Effect<A, E, R>,\n    schedule: Schedule.Schedule<B, A, R2>,\n    orElse: (error: E, option: Option.Option<B>) => Effect.Effect<B, E2, R3>\n  ) => Effect.Effect<B, E2, R | R2 | R3>\n>(3, (self, schedule, orElse) =>\n  core.flatMap(driver(schedule), (driver) =>\n    core.matchEffect(self, {\n      onFailure: (error) => orElse(error, Option.none()),\n      onSuccess: (value) => repeatOrElseEffectLoop(self, driver, orElse, value)\n    })))\n\n/** @internal */\nconst repeatOrElseEffectLoop = <A, E, R, R1, B, C, E2, R2>(\n  self: Effect.Effect<A, E, R>,\n  driver: Schedule.ScheduleDriver<B, A, R1>,\n  orElse: (error: E, option: Option.Option<B>) => Effect.Effect<C, E2, R2>,\n  value: A\n): Effect.Effect<B | C, E2, R | R1 | R2> => {\n  return core.matchEffect(driver.next(value), {\n    onFailure: () => core.orDie(driver.last),\n    onSuccess: (b) =>\n      core.matchEffect(self, {\n        onFailure: (error) => orElse(error, Option.some(b)),\n        onSuccess: (value) => repeatOrElseEffectLoop(self, driver, orElse, value)\n      })\n  })\n}\n\n/** @internal */\nexport const retry_Effect = dual<\n  <B, E, R1>(\n    policy: Schedule.Schedule<B, E, R1>\n  ) => <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R | R1>,\n  <A, E, R, B, R1>(\n    self: Effect.Effect<A, E, R>,\n    policy: Schedule.Schedule<B, E, R1>\n  ) => Effect.Effect<A, E, R | R1>\n>(2, (self, policy) => retryOrElse_Effect(self, policy, (e, _) => core.fail(e)))\n\n/** @internal */\nexport const retry_combined: {\n  <E, O extends Effect.Retry.Options<E>>(\n    options: O\n  ): <A, R>(\n    self: Effect.Effect<A, E, R>\n  ) => Effect.Retry.Return<R, E, A, O>\n  <B, E, R1>(\n    policy: Schedule.Schedule<B, Types.NoInfer<E>, R1>\n  ): <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R1 | R>\n  <A, E, R, O extends Effect.Retry.Options<E>>(\n    self: Effect.Effect<A, E, R>,\n    options: O\n  ): Effect.Retry.Return<R, E, A, O>\n  <A, E, R, B, R1>(\n    self: Effect.Effect<A, E, R>,\n    policy: Schedule.Schedule<B, E, R1>\n  ): Effect.Effect<A, E, R1 | R>\n} = dual(\n  2,\n  (self: Effect.Effect<any, any, any>, options: Effect.Retry.Options<any> | Schedule.Schedule<any, any, any>) => {\n    if (isSchedule(options)) {\n      return retry_Effect(self, options)\n    }\n\n    const base = options.schedule ?? forever\n    const withWhile = options.while ?\n      whileInputEffect(base, (e) => {\n        const applied = options.while!(e)\n        if (typeof applied === \"boolean\") {\n          return core.succeed(applied)\n        }\n        return scheduleDefectWrap(applied)\n      }) :\n      base\n    const withUntil = options.until ?\n      untilInputEffect(withWhile, (e) => {\n        const applied = options.until!(e)\n        if (typeof applied === \"boolean\") {\n          return core.succeed(applied)\n        }\n        return scheduleDefectWrap(applied)\n      }) :\n      withWhile\n    const withTimes = options.times ?\n      intersect(withUntil, recurs(options.times)) :\n      withUntil\n    return scheduleDefectRefail(retry_Effect(self, withTimes))\n  }\n)\n\n/** @internal */\nexport const retryOrElse_Effect = dual<\n  <A1, E, R1, A2, E2, R2>(\n    policy: Schedule.Schedule<A1, Types.NoInfer<E>, R1>,\n    orElse: (e: Types.NoInfer<E>, out: A1) => Effect.Effect<A2, E2, R2>\n  ) => <A, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A | A2, E2, R | R1 | R2>,\n  <A, E, R, A1, R1, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    policy: Schedule.Schedule<A1, Types.NoInfer<E>, R1>,\n    orElse: (e: Types.NoInfer<E>, out: A1) => Effect.Effect<A2, E2, R2>\n  ) => Effect.Effect<A | A2, E2, R | R1 | R2>\n>(3, (self, policy, orElse) =>\n  core.flatMap(\n    driver(policy),\n    (driver) => retryOrElse_EffectLoop(self, driver, orElse)\n  ))\n\n/** @internal */\nconst retryOrElse_EffectLoop = <A, E, R, R1, A1, A2, E2, R2>(\n  self: Effect.Effect<A, E, R>,\n  driver: Schedule.ScheduleDriver<A1, E, R1>,\n  orElse: (e: E, out: A1) => Effect.Effect<A2, E2, R2>\n): Effect.Effect<A | A2, E2, R | R1 | R2> => {\n  return core.catchAll(\n    self,\n    (e) =>\n      core.matchEffect(driver.next(e), {\n        onFailure: () =>\n          pipe(\n            driver.last,\n            core.orDie,\n            core.flatMap((out) => orElse(e, out))\n          ),\n        onSuccess: () => retryOrElse_EffectLoop(self, driver, orElse)\n      })\n  )\n}\n\n/** @internal */\nexport const schedule_Effect = dual<\n  <R2, Out>(\n    schedule: Schedule.Schedule<Out, unknown, R2>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Out, E, R | R2>,\n  <A, E, R, R2, Out>(\n    self: Effect.Effect<A, E, R>,\n    schedule: Schedule.Schedule<Out, unknown, R2>\n  ) => Effect.Effect<Out, E, R | R2>\n>(2, <A, E, R, R2, Out>(\n  self: Effect.Effect<A, E, R>,\n  schedule: Schedule.Schedule<Out, unknown, R2>\n) => scheduleFrom_Effect(self, void 0, schedule))\n\n/** @internal */\nexport const scheduleFrom_Effect = dual<\n  <R2, In, Out>(\n    initial: In,\n    schedule: Schedule.Schedule<Out, In, R2>\n  ) => <E, R>(self: Effect.Effect<In, E, R>) => Effect.Effect<Out, E, R | R2>,\n  <In, E, R, R2, Out>(\n    self: Effect.Effect<In, E, R>,\n    initial: In,\n    schedule: Schedule.Schedule<Out, In, R2>\n  ) => Effect.Effect<Out, E, R | R2>\n>(3, (self, initial, schedule) =>\n  core.flatMap(\n    driver(schedule),\n    (driver) => scheduleFrom_EffectLoop(self, initial, driver)\n  ))\n\n/** @internal */\nconst scheduleFrom_EffectLoop = <In, E, R, R2, Out>(\n  self: Effect.Effect<In, E, R>,\n  initial: In,\n  driver: Schedule.ScheduleDriver<Out, In, R2>\n): Effect.Effect<Out, E, R | R2> =>\n  core.matchEffect(driver.next(initial), {\n    onFailure: () => core.orDie(driver.last),\n    onSuccess: () => core.flatMap(self, (a) => scheduleFrom_EffectLoop(self, a, driver))\n  })\n\n/** @internal */\nexport const count: Schedule.Schedule<number> = unfold(0, (n) => n + 1)\n\n/** @internal */\nexport const elapsed: Schedule.Schedule<Duration.Duration> = makeWithState(\n  Option.none() as Option.Option<number>,\n  (now, _, state) => {\n    switch (state._tag) {\n      case \"None\": {\n        return core.succeed(\n          [\n            Option.some(now),\n            Duration.zero,\n            ScheduleDecision.continueWith(Interval.after(now))\n          ] as const\n        )\n      }\n      case \"Some\": {\n        return core.succeed(\n          [\n            Option.some(state.value),\n            Duration.millis(now - state.value),\n            ScheduleDecision.continueWith(Interval.after(now))\n          ] as const\n        )\n      }\n    }\n  }\n)\n\n/** @internal */\nexport const forever: Schedule.Schedule<number> = unfold(0, (n) => n + 1)\n\n/** @internal */\nexport const once: Schedule.Schedule<void> = asVoid(recurs(1))\n\n/** @internal */\nexport const stop: Schedule.Schedule<void> = asVoid(recurs(0))\n"],"names":["Chunk","Clock","Context","Cron","Duration","Either","Equal","constVoid","dual","pipe","Option","pipeArguments","hasProperty","Random","ScheduleDecision","Interval","Intervals","internalCause","effect","core","ref","ScheduleSymbolKey","ScheduleTypeId","Symbol","for","isSchedule","u","ScheduleDriverSymbolKey","ScheduleDriverTypeId","scheduleVariance","_Out","_","_In","_R","scheduleDriverVariance","ScheduleImpl","initial","step","constructor","arguments","ScheduleDriverImpl","schedule","state","map","get","tuple","last","flatMap","element","_tag","failSync","NoSuchElementException","succeed","value","reset","set","none","next","input","currentTimeMillis","now","suspend","out","decision","setState","some","isDone","zipRight","fail","millis","start","intervals","as","sleep","makeWithState","addDelay","self","f","addDelayEffect","sync","modifyDelayEffect","duration","delay","sum","decode","andThen","that","andThenEither","merge","lState","rState","right","left","asVoid","bothInOut","in1","in2","zipWith","lDecision","out2","rDecision","isContinue","interval","union","continue","done","check","test","checkEffect","cont","collectAllInputs","collectAllOutputs","identity","reduce","empty","outs","append","collectUntil","recurUntil","collectUntilEffect","recurUntilEffect","collectWhile","recurWhile","collectWhileEffect","recurWhileEffect","compose","max","mapInput","mapInputEffect","input2","mapInputContext","cron","expression","parsed","isCron","parse","Number","MIN_SAFE_INTEGER","previous","continueWith","make","isLeft","die","date","Date","match","getTime","beginningOfMinute","end","endOfMinute","dayOfMonth","day","NEGATIVE_INFINITY","isInteger","dieSync","IllegalArgumentException","n","day0","nextDayOfMonth","beginningOfDay","endOfDay","dayOfWeek","nextDay","delayed","delayedEffect","delayedSchedule","x","delays","zero","mapBoth","onInput","onOutput","mapBothEffect","mapEffect","driver","durationInput","durationMillis","toMillis","after","either","eitherWith","unionWith","ensuring","finalizer","exponential","baseInput","factor","base","forever","i","times","Math","pow","fibonacci","oneInput","one","unfold","a","b","fixed","intervalInput","intervalMillis","option","startMillis","lastRun","runningBehind","boundary","equals","sleepTime","nextRun","fromDelay","fromDelays","durations","length","slice","y","fromFunction","hourOfDay","hour","hour0","nextHour","beginningOfHour","endOfHour","intersect","intersectWith","intersectWithLoop","lInterval","rInterval","combined","isNonEmpty","lessThan","jittered","jitteredWith","min","options","Object","assign","random","d","linear","minuteOfHour","minute","minute0","nextMinute","modifyDelay","size","oldStart","newStart","delta","newEnd","newInterval","onDecision","passthrough","provideContext","context","provideService","tag","service","contextWithEffect","env","add","untilInput","untilInputEffect","recurUntilOption","pf","untilOutput","isSome","recurUpTo","whileOutput","elapsed","whileInput","whileInputEffect","recurs","reduceEffect","z","s","z2","repeatForever","repetitions","resetAfter","resetWhen","time","greaterThanOrEqualTo","run","runLoop","fromIterable","list","reverse","inputs","acc","headNonEmpty","nextInputs","tailNonEmpty","prepend","secondOfMinute","second","second0","nextSecond","beginningOfSecond","endOfSecond","spaced","evaluate","tapInput","tapOutput","tap","l","r","Error","negate","untilOutputEffect","upTo","zipLeft","whileOutputEffect","windowed","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","setSeconds","newDate","setTime","setMinutes","setHours","setDate","getDay","nextDayOfWeek","findNextMonth","months","tmp1","tmp2","setMonth","d2","tmp3","ScheduleDefectTypeId","ScheduleDefect","error","isScheduleDefect","scheduleDefectWrap","catchAll","e","scheduleDefectRefail","catchAllCause","cause","find","isDieType","defect","onNone","failCause","onSome","repeat_Effect","repeatOrElse_Effect","repeat_combined","withWhile","while","applied","withUntil","until","withTimes","intersectionPair","orElse","matchEffect","onFailure","onSuccess","repeatOrElseEffectLoop","orDie","retry_Effect","policy","retryOrElse_Effect","retry_combined","retryOrElse_EffectLoop","schedule_Effect","scheduleFrom_Effect","scheduleFrom_EffectLoop","count","once","stop"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13560, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 13566, "column": 0}, "map": {"version":3,"file":"circular.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/effect/circular.ts"],"sourcesContent":["import type * as Cause from \"../../Cause.js\"\nimport type * as Deferred from \"../../Deferred.js\"\nimport * as Duration from \"../../Duration.js\"\nimport type * as Effect from \"../../Effect.js\"\nimport * as Effectable from \"../../Effectable.js\"\nimport * as Equal from \"../../Equal.js\"\nimport type { Equivalence } from \"../../Equivalence.js\"\nimport * as Exit from \"../../Exit.js\"\nimport type * as Fiber from \"../../Fiber.js\"\nimport * as FiberId from \"../../FiberId.js\"\nimport type * as FiberRefsPatch from \"../../FiberRefsPatch.js\"\nimport type { LazyArg } from \"../../Function.js\"\nimport { dual, pipe } from \"../../Function.js\"\nimport * as Hash from \"../../Hash.js\"\nimport * as MutableHashMap from \"../../MutableHashMap.js\"\nimport * as Option from \"../../Option.js\"\nimport { pipeArguments } from \"../../Pipeable.js\"\nimport * as Predicate from \"../../Predicate.js\"\nimport * as Readable from \"../../Readable.js\"\nimport type * as Ref from \"../../Ref.js\"\nimport type * as Schedule from \"../../Schedule.js\"\nimport { currentScheduler } from \"../../Scheduler.js\"\nimport type * as Scope from \"../../Scope.js\"\nimport type * as Supervisor from \"../../Supervisor.js\"\nimport type * as Synchronized from \"../../SynchronizedRef.js\"\nimport type * as Types from \"../../Types.js\"\nimport * as internalCause from \"../cause.js\"\nimport * as effect from \"../core-effect.js\"\nimport * as core from \"../core.js\"\nimport * as executionStrategy from \"../executionStrategy.js\"\nimport * as internalFiber from \"../fiber.js\"\nimport * as fiberRuntime from \"../fiberRuntime.js\"\nimport { globalScope } from \"../fiberScope.js\"\nimport * as internalRef from \"../ref.js\"\nimport * as _schedule from \"../schedule.js\"\nimport * as supervisor from \"../supervisor.js\"\n\n/** @internal */\nclass Semaphore {\n  public waiters = new Set<() => void>()\n  public taken = 0\n\n  constructor(readonly permits: number) {}\n\n  get free() {\n    return this.permits - this.taken\n  }\n\n  readonly take = (n: number): Effect.Effect<number> =>\n    core.asyncInterrupt<number>((resume) => {\n      if (this.free < n) {\n        const observer = () => {\n          if (this.free < n) {\n            return\n          }\n          this.waiters.delete(observer)\n          this.taken += n\n          resume(core.succeed(n))\n        }\n        this.waiters.add(observer)\n        return core.sync(() => {\n          this.waiters.delete(observer)\n        })\n      }\n      this.taken += n\n      return resume(core.succeed(n))\n    })\n\n  readonly updateTaken = (f: (n: number) => number): Effect.Effect<number> =>\n    core.withFiberRuntime((fiber) => {\n      this.taken = f(this.taken)\n      if (this.waiters.size > 0) {\n        fiber.getFiberRef(currentScheduler).scheduleTask(() => {\n          const iter = this.waiters.values()\n          let item = iter.next()\n          while (item.done === false && this.free > 0) {\n            item.value()\n            item = iter.next()\n          }\n        }, fiber.getFiberRef(core.currentSchedulingPriority))\n      }\n      return core.succeed(this.free)\n    })\n\n  readonly release = (n: number): Effect.Effect<number> => this.updateTaken((taken) => taken - n)\n\n  readonly releaseAll: Effect.Effect<number> = this.updateTaken((_) => 0)\n\n  readonly withPermits = (n: number) => <A, E, R>(self: Effect.Effect<A, E, R>) =>\n    core.uninterruptibleMask((restore) =>\n      core.flatMap(\n        restore(this.take(n)),\n        (permits) => fiberRuntime.ensuring(restore(self), this.release(permits))\n      )\n    )\n\n  readonly withPermitsIfAvailable = (n: number) => <A, E, R>(self: Effect.Effect<A, E, R>) =>\n    core.uninterruptibleMask((restore) =>\n      core.suspend(() => {\n        if (this.free < n) {\n          return effect.succeedNone\n        }\n        this.taken += n\n        return fiberRuntime.ensuring(restore(effect.asSome(self)), this.release(n))\n      })\n    )\n}\n\n/** @internal */\nexport const unsafeMakeSemaphore = (permits: number): Semaphore => new Semaphore(permits)\n\n/** @internal */\nexport const makeSemaphore = (permits: number) => core.sync(() => unsafeMakeSemaphore(permits))\n\nclass Latch extends Effectable.Class<void> implements Effect.Latch {\n  waiters: Array<(_: Effect.Effect<void>) => void> = []\n  scheduled = false\n  constructor(private isOpen: boolean) {\n    super()\n  }\n\n  commit() {\n    return this.await\n  }\n\n  private unsafeSchedule(fiber: Fiber.RuntimeFiber<void>) {\n    if (this.scheduled || this.waiters.length === 0) {\n      return core.void\n    }\n    this.scheduled = true\n    fiber.currentScheduler.scheduleTask(this.flushWaiters, fiber.getFiberRef(core.currentSchedulingPriority))\n    return core.void\n  }\n  private flushWaiters = () => {\n    this.scheduled = false\n    const waiters = this.waiters\n    this.waiters = []\n    for (let i = 0; i < waiters.length; i++) {\n      waiters[i](core.exitVoid)\n    }\n  }\n\n  open = core.withFiberRuntime<void>((fiber) => {\n    if (this.isOpen) {\n      return core.void\n    }\n    this.isOpen = true\n    return this.unsafeSchedule(fiber)\n  })\n  release = core.withFiberRuntime<void>((fiber) => {\n    if (this.isOpen) {\n      return core.void\n    }\n    return this.unsafeSchedule(fiber)\n  })\n  await = core.asyncInterrupt<void>((resume) => {\n    if (this.isOpen) {\n      return resume(core.void)\n    }\n    this.waiters.push(resume)\n    return core.sync(() => {\n      const index = this.waiters.indexOf(resume)\n      if (index !== -1) {\n        this.waiters.splice(index, 1)\n      }\n    })\n  })\n  unsafeClose() {\n    this.isOpen = false\n  }\n  close = core.sync(() => {\n    this.isOpen = false\n  })\n  whenOpen = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<A, E, R> => {\n    return core.zipRight(this.await, self)\n  }\n}\n\n/** @internal */\nexport const unsafeMakeLatch = (open?: boolean | undefined): Effect.Latch => new Latch(open ?? false)\n\n/** @internal */\nexport const makeLatch = (open?: boolean | undefined) => core.sync(() => unsafeMakeLatch(open))\n\n/** @internal */\nexport const awaitAllChildren = <A, E, R>(self: Effect.Effect<A, E, R>): Effect.Effect<A, E, R> =>\n  ensuringChildren(self, fiberRuntime.fiberAwaitAll)\n\n/** @internal */\nexport const cached: {\n  (\n    timeToLive: Duration.DurationInput\n  ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Effect.Effect<A, E>, never, R>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    timeToLive: Duration.DurationInput\n  ): Effect.Effect<Effect.Effect<A, E>, never, R>\n} = dual(\n  2,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    timeToLive: Duration.DurationInput\n  ): Effect.Effect<Effect.Effect<A, E>, never, R> =>\n    core.map(cachedInvalidateWithTTL(self, timeToLive), (tuple) => tuple[0])\n)\n\n/** @internal */\nexport const cachedInvalidateWithTTL: {\n  (timeToLive: Duration.DurationInput): <A, E, R>(\n    self: Effect.Effect<A, E, R>\n  ) => Effect.Effect<[Effect.Effect<A, E>, Effect.Effect<void>], never, R>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    timeToLive: Duration.DurationInput\n  ): Effect.Effect<[Effect.Effect<A, E>, Effect.Effect<void>], never, R>\n} = dual(\n  2,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    timeToLive: Duration.DurationInput\n  ): Effect.Effect<[Effect.Effect<A, E>, Effect.Effect<void>], never, R> => {\n    const duration = Duration.decode(timeToLive)\n    return core.flatMap(\n      core.context<R>(),\n      (env) =>\n        core.map(\n          makeSynchronized<Option.Option<readonly [number, Deferred.Deferred<A, E>]>>(Option.none()),\n          (cache) =>\n            [\n              core.provideContext(getCachedValue(self, duration, cache), env),\n              invalidateCache(cache)\n            ] as [Effect.Effect<A, E>, Effect.Effect<void>]\n        )\n    )\n  }\n)\n\n/** @internal */\nconst computeCachedValue = <A, E, R>(\n  self: Effect.Effect<A, E, R>,\n  timeToLive: Duration.DurationInput,\n  start: number\n): Effect.Effect<Option.Option<[number, Deferred.Deferred<A, E>]>, never, R> => {\n  const timeToLiveMillis = Duration.toMillis(Duration.decode(timeToLive))\n  return pipe(\n    core.deferredMake<A, E>(),\n    core.tap((deferred) => core.intoDeferred(self, deferred)),\n    core.map((deferred) => Option.some([start + timeToLiveMillis, deferred]))\n  )\n}\n\n/** @internal */\nconst getCachedValue = <A, E, R>(\n  self: Effect.Effect<A, E, R>,\n  timeToLive: Duration.DurationInput,\n  cache: Synchronized.SynchronizedRef<Option.Option<readonly [number, Deferred.Deferred<A, E>]>>\n): Effect.Effect<A, E, R> =>\n  core.uninterruptibleMask((restore) =>\n    pipe(\n      effect.clockWith((clock) => clock.currentTimeMillis),\n      core.flatMap((time) =>\n        updateSomeAndGetEffectSynchronized(cache, (option) => {\n          switch (option._tag) {\n            case \"None\": {\n              return Option.some(computeCachedValue(self, timeToLive, time))\n            }\n            case \"Some\": {\n              const [end] = option.value\n              return end - time <= 0\n                ? Option.some(computeCachedValue(self, timeToLive, time))\n                : Option.none()\n            }\n          }\n        })\n      ),\n      core.flatMap((option) =>\n        Option.isNone(option) ?\n          core.dieMessage(\n            \"BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues\"\n          ) :\n          restore(core.deferredAwait(option.value[1]))\n      )\n    )\n  )\n\n/** @internal */\nconst invalidateCache = <A, E>(\n  cache: Synchronized.SynchronizedRef<Option.Option<readonly [number, Deferred.Deferred<A, E>]>>\n): Effect.Effect<void> => internalRef.set(cache, Option.none())\n\n/** @internal */\nexport const ensuringChild = dual<\n  <X, R2>(\n    f: (fiber: Fiber.Fiber<ReadonlyArray<unknown>, any>) => Effect.Effect<X, never, R2>\n  ) => <A, E, R>(\n    self: Effect.Effect<A, E, R>\n  ) => Effect.Effect<A, E, R | R2>,\n  <A, E, R, X, R2>(\n    self: Effect.Effect<A, E, R>,\n    f: (fiber: Fiber.Fiber<ReadonlyArray<unknown>, any>) => Effect.Effect<X, never, R2>\n  ) => Effect.Effect<A, E, R | R2>\n>(2, (self, f) => ensuringChildren(self, (children) => f(fiberRuntime.fiberAll(children))))\n\n/** @internal */\nexport const ensuringChildren = dual<\n  <X, R2>(\n    children: (fibers: ReadonlyArray<Fiber.RuntimeFiber<any, any>>) => Effect.Effect<X, never, R2>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R | R2>,\n  <A, E, R, X, R2>(\n    self: Effect.Effect<A, E, R>,\n    children: (fibers: ReadonlyArray<Fiber.RuntimeFiber<any, any>>) => Effect.Effect<X, never, R2>\n  ) => Effect.Effect<A, E, R | R2>\n>(2, (self, children) =>\n  core.flatMap(supervisor.track, (supervisor) =>\n    pipe(\n      supervised(self, supervisor),\n      fiberRuntime.ensuring(core.flatMap(supervisor.value, children))\n    )))\n\n/** @internal */\nexport const forkAll: {\n  (\n    options?: {\n      readonly discard?: false | undefined\n    }\n  ): <Eff extends Effect.Effect<any, any, any>>(\n    effects: Iterable<Eff>\n  ) => Effect.Effect<\n    Fiber.Fiber<Array<Effect.Effect.Success<Eff>>, Effect.Effect.Error<Eff>>,\n    never,\n    Effect.Effect.Context<Eff>\n  >\n  (options: {\n    readonly discard: true\n  }): <Eff extends Effect.Effect<any, any, any>>(\n    effects: Iterable<Eff>\n  ) => Effect.Effect<void, never, Effect.Effect.Context<Eff>>\n  <Eff extends Effect.Effect<any, any, any>>(\n    effects: Iterable<Eff>,\n    options?: {\n      readonly discard?: false | undefined\n    }\n  ): Effect.Effect<\n    Fiber.Fiber<Array<Effect.Effect.Success<Eff>>, Effect.Effect.Error<Eff>>,\n    never,\n    Effect.Effect.Context<Eff>\n  >\n  <Eff extends Effect.Effect<any, any, any>>(effects: Iterable<Eff>, options: {\n    readonly discard: true\n  }): Effect.Effect<void, never, Effect.Effect.Context<Eff>>\n} = dual((args) => Predicate.isIterable(args[0]), <A, E, R>(effects: Iterable<Effect.Effect<A, E, R>>, options: {\n  readonly discard: true\n}): Effect.Effect<void, never, R> =>\n  options?.discard ?\n    core.forEachSequentialDiscard(effects, fiberRuntime.fork) :\n    core.map(core.forEachSequential(effects, fiberRuntime.fork), fiberRuntime.fiberAll))\n\n/** @internal */\nexport const forkIn = dual<\n  (scope: Scope.Scope) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Fiber.RuntimeFiber<A, E>, never, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, scope: Scope.Scope) => Effect.Effect<Fiber.RuntimeFiber<A, E>, never, R>\n>(\n  2,\n  (self, scope) =>\n    core.uninterruptibleMask((restore) =>\n      core.flatMap(scope.fork(executionStrategy.sequential), (child) =>\n        pipe(\n          restore(self),\n          core.onExit((exit) => child.close(exit)),\n          fiberRuntime.forkDaemon,\n          core.tap((fiber) =>\n            child.addFinalizer(() =>\n              core.fiberIdWith((fiberId) =>\n                Equal.equals(fiberId, fiber.id()) ?\n                  core.void :\n                  core.asVoid(core.interruptFiber(fiber))\n              )\n            )\n          )\n        ))\n    )\n)\n\n/** @internal */\nexport const forkScoped = <A, E, R>(\n  self: Effect.Effect<A, E, R>\n): Effect.Effect<Fiber.RuntimeFiber<A, E>, never, R | Scope.Scope> =>\n  fiberRuntime.scopeWith((scope) => forkIn(self, scope))\n\n/** @internal */\nexport const fromFiber = <A, E>(fiber: Fiber.Fiber<A, E>): Effect.Effect<A, E> => internalFiber.join(fiber)\n\n/** @internal */\nexport const fromFiberEffect = <A, E, R>(fiber: Effect.Effect<Fiber.Fiber<A, E>, E, R>): Effect.Effect<A, E, R> =>\n  core.suspend(() => core.flatMap(fiber, internalFiber.join))\n\nconst memoKeySymbol = Symbol.for(\"effect/Effect/memoizeFunction.key\")\n\nclass Key<in out A> implements Equal.Equal {\n  [memoKeySymbol] = memoKeySymbol\n  constructor(readonly a: A, readonly eq?: Equivalence<A>) {}\n  [Equal.symbol](that: Equal.Equal) {\n    if (Predicate.hasProperty(that, memoKeySymbol)) {\n      if (this.eq) {\n        return this.eq(this.a, (that as unknown as Key<A>).a)\n      } else {\n        return Equal.equals(this.a, (that as unknown as Key<A>).a)\n      }\n    }\n    return false\n  }\n  [Hash.symbol]() {\n    return this.eq ? 0 : Hash.cached(this, Hash.hash(this.a))\n  }\n}\n\n/** @internal */\nexport const cachedFunction = <A, B, E, R>(\n  f: (a: A) => Effect.Effect<B, E, R>,\n  eq?: Equivalence<A>\n): Effect.Effect<(a: A) => Effect.Effect<B, E, R>> => {\n  return pipe(\n    core.sync(() => MutableHashMap.empty<Key<A>, Deferred.Deferred<readonly [FiberRefsPatch.FiberRefsPatch, B], E>>()),\n    core.flatMap(makeSynchronized),\n    core.map((ref) => (a: A) =>\n      pipe(\n        ref.modifyEffect((map) => {\n          const result = pipe(map, MutableHashMap.get(new Key(a, eq)))\n          if (Option.isNone(result)) {\n            return pipe(\n              core.deferredMake<readonly [FiberRefsPatch.FiberRefsPatch, B], E>(),\n              core.tap((deferred) =>\n                pipe(\n                  effect.diffFiberRefs(f(a)),\n                  core.intoDeferred(deferred),\n                  fiberRuntime.fork\n                )\n              ),\n              core.map((deferred) => [deferred, pipe(map, MutableHashMap.set(new Key(a, eq), deferred))] as const)\n            )\n          }\n          return core.succeed([result.value, map] as const)\n        }),\n        core.flatMap(core.deferredAwait),\n        core.flatMap(([patch, b]) => pipe(effect.patchFiberRefs(patch), core.as(b)))\n      )\n    )\n  )\n}\n\n/** @internal */\nexport const raceFirst = dual<\n  <A2, E2, R2>(\n    that: Effect.Effect<A2, E2, R2>\n  ) => <A, E, R>(\n    self: Effect.Effect<A, E, R>\n  ) => Effect.Effect<A2 | A, E2 | E, R | R2>,\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    that: Effect.Effect<A2, E2, R2>\n  ) => Effect.Effect<A2 | A, E2 | E, R | R2>\n>(2, <A, E, R, A2, E2, R2>(\n  self: Effect.Effect<A, E, R>,\n  that: Effect.Effect<A2, E2, R2>\n) =>\n  pipe(\n    core.exit(self),\n    fiberRuntime.race(core.exit(that)),\n    (effect: Effect.Effect<Exit.Exit<A | A2, E | E2>, never, R | R2>) => core.flatten(effect)\n  ))\n\n/** @internal */\nexport const scheduleForked = dual<\n  <Out, R2>(\n    schedule: Schedule.Schedule<Out, unknown, R2>\n  ) => <A, E, R>(\n    self: Effect.Effect<A, E, R>\n  ) => Effect.Effect<Fiber.RuntimeFiber<Out, E>, never, R | R2 | Scope.Scope>,\n  <A, E, R, Out, R2>(\n    self: Effect.Effect<A, E, R>,\n    schedule: Schedule.Schedule<Out, unknown, R2>\n  ) => Effect.Effect<Fiber.RuntimeFiber<Out, E>, never, R | R2 | Scope.Scope>\n>(2, (self, schedule) => pipe(self, _schedule.schedule_Effect(schedule), forkScoped))\n\n/** @internal */\nexport const supervised = dual<\n  <X>(supervisor: Supervisor.Supervisor<X>) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R, X>(self: Effect.Effect<A, E, R>, supervisor: Supervisor.Supervisor<X>) => Effect.Effect<A, E, R>\n>(2, (self, supervisor) => {\n  const supervise = core.fiberRefLocallyWith(fiberRuntime.currentSupervisor, (s) => s.zip(supervisor))\n  return supervise(self)\n})\n\n/** @internal */\nexport const timeout = dual<\n  (\n    duration: Duration.DurationInput\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | Cause.TimeoutException, R>,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    duration: Duration.DurationInput\n  ) => Effect.Effect<A, E | Cause.TimeoutException, R>\n>(2, (self, duration) =>\n  timeoutFail(self, {\n    onTimeout: () => core.timeoutExceptionFromDuration(duration),\n    duration\n  }))\n\n/** @internal */\nexport const timeoutFail = dual<\n  <E1>(\n    options: {\n      readonly onTimeout: LazyArg<E1>\n      readonly duration: Duration.DurationInput\n    }\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E1, R>,\n  <A, E, R, E1>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly onTimeout: LazyArg<E1>\n      readonly duration: Duration.DurationInput\n    }\n  ) => Effect.Effect<A, E | E1, R>\n>(2, (self, { duration, onTimeout }) =>\n  core.flatten(timeoutTo(self, {\n    onTimeout: () => core.failSync(onTimeout),\n    onSuccess: core.succeed,\n    duration\n  })))\n\n/** @internal */\nexport const timeoutFailCause = dual<\n  <E1>(\n    options: {\n      readonly onTimeout: LazyArg<Cause.Cause<E1>>\n      readonly duration: Duration.DurationInput\n    }\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E1, R>,\n  <A, E, R, E1>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly onTimeout: LazyArg<Cause.Cause<E1>>\n      readonly duration: Duration.DurationInput\n    }\n  ) => Effect.Effect<A, E | E1, R>\n>(2, (self, { duration, onTimeout }) =>\n  core.flatten(timeoutTo(self, {\n    onTimeout: () => core.failCauseSync(onTimeout),\n    onSuccess: core.succeed,\n    duration\n  })))\n\n/** @internal */\nexport const timeoutOption = dual<\n  (\n    duration: Duration.DurationInput\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<Option.Option<A>, E, R>,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    duration: Duration.DurationInput\n  ) => Effect.Effect<Option.Option<A>, E, R>\n>(2, (self, duration) =>\n  timeoutTo(self, {\n    duration,\n    onSuccess: Option.some,\n    onTimeout: Option.none\n  }))\n\n/** @internal */\nexport const timeoutTo = dual<\n  <A, B, B1>(\n    options: {\n      readonly onTimeout: LazyArg<B1>\n      readonly onSuccess: (a: A) => B\n      readonly duration: Duration.DurationInput\n    }\n  ) => <E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<B | B1, E, R>,\n  <A, E, R, B1, B>(\n    self: Effect.Effect<A, E, R>,\n    options: {\n      readonly onTimeout: LazyArg<B1>\n      readonly onSuccess: (a: A) => B\n      readonly duration: Duration.DurationInput\n    }\n  ) => Effect.Effect<B | B1, E, R>\n>(2, (self, { duration, onSuccess, onTimeout }) =>\n  core.fiberIdWith((parentFiberId) =>\n    fiberRuntime.raceFibersWith(\n      self,\n      core.interruptible(effect.sleep(duration)),\n      {\n        onSelfWin: (winner, loser) =>\n          core.flatMap(\n            winner.await,\n            (exit) => {\n              if (exit._tag === \"Success\") {\n                return core.flatMap(\n                  winner.inheritAll,\n                  () =>\n                    core.as(\n                      core.interruptAsFiber(loser, parentFiberId),\n                      onSuccess(exit.value)\n                    )\n                )\n              } else {\n                return core.flatMap(\n                  core.interruptAsFiber(loser, parentFiberId),\n                  () => core.exitFailCause(exit.cause)\n                )\n              }\n            }\n          ),\n        onOtherWin: (winner, loser) =>\n          core.flatMap(\n            winner.await,\n            (exit) => {\n              if (exit._tag === \"Success\") {\n                return core.flatMap(\n                  winner.inheritAll,\n                  () =>\n                    core.as(\n                      core.interruptAsFiber(loser, parentFiberId),\n                      onTimeout()\n                    )\n                )\n              } else {\n                return core.flatMap(\n                  core.interruptAsFiber(loser, parentFiberId),\n                  () => core.exitFailCause(exit.cause)\n                )\n              }\n            }\n          ),\n        otherScope: globalScope\n      }\n    )\n  ))\n\n// circular with Synchronized\n\n/** @internal */\nconst SynchronizedSymbolKey = \"effect/Ref/SynchronizedRef\"\n\n/** @internal */\nexport const SynchronizedTypeId: Synchronized.SynchronizedRefTypeId = Symbol.for(\n  SynchronizedSymbolKey\n) as Synchronized.SynchronizedRefTypeId\n\n/** @internal */\nexport const synchronizedVariance = {\n  /* c8 ignore next */\n  _A: (_: any) => _\n}\n\n/** @internal */\nclass SynchronizedImpl<in out A> extends Effectable.Class<A> implements Synchronized.SynchronizedRef<A> {\n  readonly [SynchronizedTypeId] = synchronizedVariance\n  readonly [internalRef.RefTypeId] = internalRef.refVariance\n  readonly [Readable.TypeId]: Readable.TypeId = Readable.TypeId\n  constructor(\n    readonly ref: Ref.Ref<A>,\n    readonly withLock: <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  ) {\n    super()\n    this.get = internalRef.get(this.ref)\n  }\n  readonly get: Effect.Effect<A>\n  commit() {\n    return this.get\n  }\n  modify<B>(f: (a: A) => readonly [B, A]): Effect.Effect<B> {\n    return this.modifyEffect((a) => core.succeed(f(a)))\n  }\n  modifyEffect<B, E, R>(f: (a: A) => Effect.Effect<readonly [B, A], E, R>): Effect.Effect<B, E, R> {\n    return this.withLock(\n      pipe(\n        core.flatMap(internalRef.get(this.ref), f),\n        core.flatMap(([b, a]) => core.as(internalRef.set(this.ref, a), b))\n      )\n    )\n  }\n}\n\n/** @internal */\nexport const makeSynchronized = <A>(value: A): Effect.Effect<Synchronized.SynchronizedRef<A>> =>\n  core.sync(() => unsafeMakeSynchronized(value))\n\n/** @internal */\nexport const unsafeMakeSynchronized = <A>(value: A): Synchronized.SynchronizedRef<A> => {\n  const ref = internalRef.unsafeMake(value)\n  const sem = unsafeMakeSemaphore(1)\n  return new SynchronizedImpl(ref, sem.withPermits(1))\n}\n\n/** @internal */\nexport const updateSomeAndGetEffectSynchronized = dual<\n  <A, R, E>(\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<A, E, R>,\n  <A, R, E>(\n    self: Synchronized.SynchronizedRef<A>,\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ) => Effect.Effect<A, E, R>\n>(2, (self, pf) =>\n  self.modifyEffect((value) => {\n    const result = pf(value)\n    switch (result._tag) {\n      case \"None\": {\n        return core.succeed([value, value] as const)\n      }\n      case \"Some\": {\n        return core.map(result.value, (a) => [a, a] as const)\n      }\n    }\n  }))\n\n// circular with Fiber\n\n/** @internal */\nexport const zipFiber = dual<\n  <A2, E2>(that: Fiber.Fiber<A2, E2>) => <A, E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<[A, A2], E | E2>,\n  <A, E, A2, E2>(self: Fiber.Fiber<A, E>, that: Fiber.Fiber<A2, E2>) => Fiber.Fiber<[A, A2], E | E2>\n>(2, (self, that) => zipWithFiber(self, that, (a, b) => [a, b]))\n\n/** @internal */\nexport const zipLeftFiber = dual<\n  <A2, E2>(that: Fiber.Fiber<A2, E2>) => <A, E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<A, E | E2>,\n  <A, E, A2, E2>(self: Fiber.Fiber<A, E>, that: Fiber.Fiber<A2, E2>) => Fiber.Fiber<A, E | E2>\n>(2, (self, that) => zipWithFiber(self, that, (a, _) => a))\n\n/** @internal */\nexport const zipRightFiber = dual<\n  <A2, E2>(that: Fiber.Fiber<A2, E2>) => <A, E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<A2, E | E2>,\n  <A, E, A2, E2>(self: Fiber.Fiber<A, E>, that: Fiber.Fiber<A2, E2>) => Fiber.Fiber<A2, E | E2>\n>(2, (self, that) => zipWithFiber(self, that, (_, b) => b))\n\n/** @internal */\nexport const zipWithFiber = dual<\n  <B, E2, A, C>(\n    that: Fiber.Fiber<B, E2>,\n    f: (a: A, b: B) => C\n  ) => <E>(self: Fiber.Fiber<A, E>) => Fiber.Fiber<C, E | E2>,\n  <A, E, B, E2, C>(\n    self: Fiber.Fiber<A, E>,\n    that: Fiber.Fiber<B, E2>,\n    f: (a: A, b: B) => C\n  ) => Fiber.Fiber<C, E | E2>\n>(3, (self, that, f) => ({\n  ...Effectable.CommitPrototype,\n  commit() {\n    return internalFiber.join(this)\n  },\n  [internalFiber.FiberTypeId]: internalFiber.fiberVariance,\n  id: () => pipe(self.id(), FiberId.getOrElse(that.id())),\n  await: pipe(\n    self.await,\n    core.flatten,\n    fiberRuntime.zipWithOptions(core.flatten(that.await), f, { concurrent: true }),\n    core.exit\n  ),\n  children: self.children,\n  inheritAll: core.zipRight(\n    that.inheritAll,\n    self.inheritAll\n  ),\n  poll: core.zipWith(\n    self.poll,\n    that.poll,\n    (optionA, optionB) =>\n      pipe(\n        optionA,\n        Option.flatMap((exitA) =>\n          pipe(\n            optionB,\n            Option.map((exitB) =>\n              Exit.zipWith(exitA, exitB, {\n                onSuccess: f,\n                onFailure: internalCause.parallel\n              })\n            )\n          )\n        )\n      )\n  ),\n  interruptAsFork: (id) =>\n    core.zipRight(\n      self.interruptAsFork(id),\n      that.interruptAsFork(id)\n    ),\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}))\n\n/* @internal */\nexport const bindAll: {\n  <\n    A extends object,\n    X extends Record<string, Effect.Effect<any, any, any>>,\n    O extends {\n      readonly concurrency?: Types.Concurrency | undefined\n      readonly batching?: boolean | \"inherit\" | undefined\n      readonly mode?: \"default\" | \"validate\" | \"either\" | undefined\n      readonly concurrentFinalizers?: boolean | undefined\n    }\n  >(\n    f: (a: A) => [Extract<keyof X, keyof A>] extends [never] ? X : `Duplicate keys`,\n    options?: undefined | O\n  ): <E1, R1>(\n    self: Effect.Effect<A, E1, R1>\n  ) => [Effect.All.ReturnObject<X, false, Effect.All.ExtractMode<O>>] extends\n    [Effect.Effect<infer Success, infer Error, infer Context>] ? Effect.Effect<\n      {\n        [K in keyof A | keyof Success]: K extends keyof A ? A[K]\n          : K extends keyof Success ? Success[K]\n          : never\n      },\n      | E1\n      | Error,\n      R1 | Context\n    >\n    : never\n\n  <\n    A extends object,\n    X extends Record<string, Effect.Effect<any, any, any>>,\n    O extends {\n      readonly concurrency?: Types.Concurrency | undefined\n      readonly batching?: boolean | \"inherit\" | undefined\n      readonly mode?: \"default\" | \"validate\" | \"either\" | undefined\n      readonly concurrentFinalizers?: boolean | undefined\n    },\n    E1,\n    R1\n  >(\n    self: Effect.Effect<A, E1, R1>,\n    f: (a: A) => [Extract<keyof X, keyof A>] extends [never] ? X : `Duplicate keys`,\n    options?: undefined | {\n      readonly concurrency?: Types.Concurrency | undefined\n      readonly batching?: boolean | \"inherit\" | undefined\n      readonly mode?: \"default\" | \"validate\" | \"either\" | undefined\n      readonly concurrentFinalizers?: boolean | undefined\n    }\n  ): [Effect.All.ReturnObject<X, false, Effect.All.ExtractMode<O>>] extends\n    [Effect.Effect<infer Success, infer Error, infer Context>] ? Effect.Effect<\n      {\n        [K in keyof A | keyof Success]: K extends keyof A ? A[K]\n          : K extends keyof Success ? Success[K]\n          : never\n      },\n      | E1\n      | Error,\n      R1 | Context\n    >\n    : never\n} = dual((args) => core.isEffect(args[0]), <\n  A extends object,\n  X extends Record<string, Effect.Effect<any, any, any>>,\n  O extends {\n    readonly concurrency?: Types.Concurrency | undefined\n    readonly batching?: boolean | \"inherit\" | undefined\n    readonly mode?: \"default\" | \"validate\" | \"either\" | undefined\n    readonly concurrentFinalizers?: boolean | undefined\n  },\n  E1,\n  R1\n>(\n  self: Effect.Effect<A, E1, R1>,\n  f: (a: A) => X,\n  options?: undefined | O\n) =>\n  core.flatMap(\n    self,\n    (a) =>\n      (fiberRuntime.all(f(a), options) as Effect.All.ReturnObject<\n        X,\n        Effect.All.IsDiscard<O>,\n        Effect.All.ExtractMode<O>\n      >)\n        .pipe(\n          core.map((record) => Object.assign({}, a, record))\n        )\n  ))\n"],"names":["Duration","Effectable","Equal","Exit","FiberId","dual","pipe","Hash","MutableHashMap","Option","pipeArguments","Predicate","Readable","currentScheduler","internalCause","effect","core","executionStrategy","internalFiber","fiberRuntime","globalScope","internalRef","_schedule","supervisor","Semaphore","permits","waiters","Set","taken","constructor","free","take","n","asyncInterrupt","resume","observer","delete","succeed","add","sync","updateTaken","f","withFiberRuntime","fiber","size","getFiberRef","scheduleTask","iter","values","item","next","done","value","currentSchedulingPriority","release","releaseAll","_","withPermits","self","uninterruptibleMask","restore","flatMap","ensuring","withPermitsIfAvailable","suspend","succeedNone","asSome","unsafeMakeSemaphore","makeSemaphore","Latch","Class","isOpen","scheduled","commit","await","unsafeSchedule","length","void","flushWaiters","i","exitVoid","open","push","index","indexOf","splice","unsafeClose","close","whenOpen","zipRight","unsafeMakeLatch","makeLatch","awaitAllChildren","ensuringChildren","fiberAwaitAll","cached","timeToLive","map","cachedInvalidateWithTTL","tuple","duration","decode","context","env","makeSynchronized","none","cache","provideContext","getCachedValue","invalidateCache","computeCachedValue","start","timeToLiveMillis","toMillis","deferredMake","tap","deferred","intoDeferred","some","clockWith","clock","currentTimeMillis","time","updateSomeAndGetEffectSynchronized","option","_tag","end","isNone","dieMessage","deferredAwait","set","ensuringChild","children","fiberAll","track","supervised","forkAll","args","isIterable","effects","options","discard","forEachSequentialDiscard","fork","forEachSequential","forkIn","scope","sequential","child","onExit","exit","forkDaemon","addFinalizer","fiberIdWith","fiberId","equals","id","asVoid","interruptFiber","forkScoped","scopeWith","fromFiber","join","fromFiberEffect","memoKeySymbol","Symbol","for","Key","a","eq","symbol","that","hasProperty","hash","cachedFunction","empty","ref","modifyEffect","result","get","diffFiberRefs","patch","b","patchFiberRefs","as","raceFirst","race","flatten","scheduleForked","schedule","schedule_Effect","supervise","fiberRefLocallyWith","currentSupervisor","s","zip","timeout","timeoutFail","onTimeout","timeoutExceptionFromDuration","timeoutTo","failSync","onSuccess","timeoutFailCause","failCauseSync","timeoutOption","parentFiberId","raceFibersWith","interruptible","sleep","onSelfWin","winner","loser","inheritAll","interruptAsFiber","exitFailCause","cause","onOtherWin","otherScope","SynchronizedSymbolKey","SynchronizedTypeId","synchronizedVariance","_A","SynchronizedImpl","withLock","RefTypeId","refVariance","TypeId","modify","unsafeMakeSynchronized","unsafeMake","sem","pf","zipFiber","zipWithFiber","zipLeftFiber","zipRightFiber","CommitPrototype","FiberTypeId","fiberVariance","getOrElse","zipWithOptions","concurrent","poll","zipWith","optionA","optionB","exitA","exitB","onFailure","parallel","interruptAsFork","arguments","bindAll","isEffect","all","record","Object","assign"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13965, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 13971, "column": 0}, "map": {"version":3,"file":"runtime.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/runtime.ts"],"sourcesContent":["import { equals } from \"effect/Equal\"\nimport type * as ReadonlyArray from \"../Array.js\"\nimport type * as Cause from \"../Cause.js\"\nimport * as Context from \"../Context.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Exit from \"../Exit.js\"\nimport * as Fiber from \"../Fiber.js\"\nimport * as FiberId from \"../FiberId.js\"\nimport type * as FiberRef from \"../FiberRef.js\"\nimport * as FiberRefs from \"../FiberRefs.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as Inspectable from \"../Inspectable.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport * as Predicate from \"../Predicate.js\"\nimport type * as Runtime from \"../Runtime.js\"\nimport type * as RuntimeFlags from \"../RuntimeFlags.js\"\nimport * as _scheduler from \"../Scheduler.js\"\nimport * as _scope from \"../Scope.js\"\nimport * as InternalCause from \"./cause.js\"\nimport * as core from \"./core.js\"\nimport * as executionStrategy from \"./executionStrategy.js\"\nimport * as FiberRuntime from \"./fiberRuntime.js\"\nimport * as fiberScope from \"./fiberScope.js\"\nimport * as OpCodes from \"./opCodes/effect.js\"\nimport * as runtimeFlags from \"./runtimeFlags.js\"\nimport * as _supervisor from \"./supervisor.js\"\n\n/** @internal */\nexport const unsafeFork = <R>(runtime: Runtime.Runtime<R>) =>\n<A, E>(\n  self: Effect.Effect<A, E, R>,\n  options?: Runtime.RunForkOptions\n): Fiber.RuntimeFiber<A, E> => {\n  const fiberId = FiberId.unsafeMake()\n  const fiberRefUpdates: ReadonlyArray.NonEmptyArray<\n    readonly [FiberRef.FiberRef<any>, ReadonlyArray.NonEmptyReadonlyArray<readonly [FiberId.Runtime, any]>]\n  > = [[core.currentContext, [[fiberId, runtime.context]]]]\n\n  if (options?.scheduler) {\n    fiberRefUpdates.push([_scheduler.currentScheduler, [[fiberId, options.scheduler]]])\n  }\n\n  let fiberRefs = FiberRefs.updateManyAs(runtime.fiberRefs, {\n    entries: fiberRefUpdates,\n    forkAs: fiberId\n  })\n\n  if (options?.updateRefs) {\n    fiberRefs = options.updateRefs(fiberRefs, fiberId)\n  }\n\n  const fiberRuntime: FiberRuntime.FiberRuntime<A, E> = new FiberRuntime.FiberRuntime<A, E>(\n    fiberId,\n    fiberRefs,\n    runtime.runtimeFlags\n  )\n\n  let effect: Effect.Effect<A, E, R> = self\n\n  if (options?.scope) {\n    effect = core.flatMap(\n      _scope.fork(options.scope, executionStrategy.sequential),\n      (closeableScope) =>\n        core.zipRight(\n          core.scopeAddFinalizer(\n            closeableScope,\n            core.fiberIdWith((id) =>\n              equals(id, fiberRuntime.id()) ? core.void : core.interruptAsFiber(fiberRuntime, id)\n            )\n          ),\n          core.onExit(self, (exit) => _scope.close(closeableScope, exit))\n        )\n    )\n  }\n\n  const supervisor = fiberRuntime.currentSupervisor\n\n  // we can compare by reference here as _supervisor.none is wrapped with globalValue\n  if (supervisor !== _supervisor.none) {\n    supervisor.onStart(runtime.context, effect, Option.none(), fiberRuntime)\n\n    fiberRuntime.addObserver((exit) => supervisor.onEnd(exit, fiberRuntime))\n  }\n\n  fiberScope.globalScope.add(runtime.runtimeFlags, fiberRuntime)\n\n  // Only an explicit false will prevent immediate execution\n  if (options?.immediate === false) {\n    fiberRuntime.resume(effect)\n  } else {\n    fiberRuntime.start(effect)\n  }\n\n  return fiberRuntime\n}\n\n/** @internal */\nexport const unsafeRunCallback = <R>(runtime: Runtime.Runtime<R>) =>\n<A, E>(\n  effect: Effect.Effect<A, E, R>,\n  options: Runtime.RunCallbackOptions<A, E> = {}\n): (fiberId?: FiberId.FiberId, options?: Runtime.RunCallbackOptions<A, E> | undefined) => void => {\n  const fiberRuntime = unsafeFork(runtime)(effect, options)\n\n  if (options.onExit) {\n    fiberRuntime.addObserver((exit) => {\n      options.onExit!(exit)\n    })\n  }\n\n  return (id, cancelOptions) =>\n    unsafeRunCallback(runtime)(\n      pipe(fiberRuntime, Fiber.interruptAs(id ?? FiberId.none)),\n      {\n        ...cancelOptions,\n        onExit: cancelOptions?.onExit\n          ? (exit) => cancelOptions.onExit!(Exit.flatten(exit))\n          : undefined\n      }\n    )\n}\n\n/** @internal */\nexport const unsafeRunSync = <R>(runtime: Runtime.Runtime<R>) => <A, E>(effect: Effect.Effect<A, E, R>): A => {\n  const result = unsafeRunSyncExit(runtime)(effect)\n  if (result._tag === \"Failure\") {\n    throw fiberFailure(result.effect_instruction_i0)\n  } else {\n    return result.effect_instruction_i0\n  }\n}\n\nclass AsyncFiberExceptionImpl<A, E = never> extends Error implements Runtime.AsyncFiberException<A, E> {\n  readonly _tag = \"AsyncFiberException\"\n  constructor(readonly fiber: Fiber.RuntimeFiber<A, E>) {\n    super(\n      `Fiber #${fiber.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`\n    )\n    this.name = this._tag\n    this.stack = this.message\n  }\n}\n\nconst asyncFiberException = <A, E>(fiber: Fiber.RuntimeFiber<A, E>): Runtime.AsyncFiberException<A, E> => {\n  const limit = Error.stackTraceLimit\n  Error.stackTraceLimit = 0\n  const error = new AsyncFiberExceptionImpl(fiber)\n  Error.stackTraceLimit = limit\n  return error\n}\n\n/** @internal */\nexport const isAsyncFiberException = (u: unknown): u is Runtime.AsyncFiberException<unknown, unknown> =>\n  Predicate.isTagged(u, \"AsyncFiberException\") && \"fiber\" in u\n\n/** @internal */\nexport const FiberFailureId: Runtime.FiberFailureId = Symbol.for(\"effect/Runtime/FiberFailure\") as any\n/** @internal */\nexport const FiberFailureCauseId: Runtime.FiberFailureCauseId = Symbol.for(\n  \"effect/Runtime/FiberFailure/Cause\"\n) as any\n\nclass FiberFailureImpl extends Error implements Runtime.FiberFailure {\n  readonly [FiberFailureId]: Runtime.FiberFailureId\n  readonly [FiberFailureCauseId]: Cause.Cause<unknown>\n  constructor(cause: Cause.Cause<unknown>) {\n    super()\n\n    this[FiberFailureId] = FiberFailureId\n    this[FiberFailureCauseId] = cause\n\n    const prettyErrors = InternalCause.prettyErrors(cause)\n    if (prettyErrors.length > 0) {\n      const head = prettyErrors[0]\n      this.name = head.name\n      this.message = head.message\n      this.stack = head.stack!\n    }\n\n    this.name = `(FiberFailure) ${this.name}`\n\n    if (this.message === undefined || this.message.length === 0) {\n      this.message = \"An error has occurred\"\n    }\n  }\n\n  toJSON(): unknown {\n    return {\n      _id: \"FiberFailure\",\n      cause: this[FiberFailureCauseId].toJSON()\n    }\n  }\n\n  toString(): string {\n    return \"(FiberFailure) \" + (this.stack ?? this.message)\n  }\n  [Inspectable.NodeInspectSymbol](): unknown {\n    return this.toString()\n  }\n}\n\n/** @internal */\nexport const fiberFailure = <E>(cause: Cause.Cause<E>): Runtime.FiberFailure => {\n  const limit = Error.stackTraceLimit\n  Error.stackTraceLimit = 0\n  const error = new FiberFailureImpl(cause)\n  Error.stackTraceLimit = limit\n  return error\n}\n\n/** @internal */\nexport const isFiberFailure = (u: unknown): u is Runtime.FiberFailure => Predicate.hasProperty(u, FiberFailureId)\n\nconst fastPath = <A, E, R>(effect: Effect.Effect<A, E, R>): Exit.Exit<A, E> | undefined => {\n  const op = effect as core.Primitive\n  switch (op._op) {\n    case \"Failure\":\n    case \"Success\": {\n      // @ts-expect-error\n      return op\n    }\n    case \"Left\": {\n      return core.exitFail(op.left)\n    }\n    case \"Right\": {\n      return core.exitSucceed(op.right)\n    }\n    case \"Some\": {\n      return core.exitSucceed(op.value)\n    }\n    case \"None\": {\n      // @ts-expect-error\n      return core.exitFail(core.NoSuchElementException())\n    }\n  }\n}\n\n/** @internal */\nexport const unsafeRunSyncExit =\n  <R>(runtime: Runtime.Runtime<R>) => <A, E>(effect: Effect.Effect<A, E, R>): Exit.Exit<A, E> => {\n    const op = fastPath(effect)\n    if (op) {\n      return op\n    }\n    const scheduler = new _scheduler.SyncScheduler()\n    const fiberRuntime = unsafeFork(runtime)(effect, { scheduler })\n    scheduler.flush()\n    const result = fiberRuntime.unsafePoll()\n    if (result) {\n      return result\n    }\n    return core.exitDie(core.capture(asyncFiberException(fiberRuntime), core.currentSpanFromFiber(fiberRuntime)))\n  }\n\n/** @internal */\nexport const unsafeRunPromise = <R>(runtime: Runtime.Runtime<R>) =>\n<A, E>(\n  effect: Effect.Effect<A, E, R>,\n  options?: {\n    readonly signal?: AbortSignal | undefined\n  } | undefined\n): Promise<A> =>\n  unsafeRunPromiseExit(runtime)(effect, options).then((result) => {\n    switch (result._tag) {\n      case OpCodes.OP_SUCCESS: {\n        return result.effect_instruction_i0\n      }\n      case OpCodes.OP_FAILURE: {\n        throw fiberFailure(result.effect_instruction_i0)\n      }\n    }\n  })\n\n/** @internal */\nexport const unsafeRunPromiseExit = <R>(runtime: Runtime.Runtime<R>) =>\n<A, E>(\n  effect: Effect.Effect<A, E, R>,\n  options?: {\n    readonly signal?: AbortSignal | undefined\n  } | undefined\n): Promise<Exit.Exit<A, E>> =>\n  new Promise((resolve) => {\n    const op = fastPath(effect)\n    if (op) {\n      resolve(op)\n    }\n    const fiber = unsafeFork(runtime)(effect)\n    fiber.addObserver((exit) => {\n      resolve(exit)\n    })\n    if (options?.signal !== undefined) {\n      if (options.signal.aborted) {\n        fiber.unsafeInterruptAsFork(fiber.id())\n      } else {\n        options.signal.addEventListener(\"abort\", () => {\n          fiber.unsafeInterruptAsFork(fiber.id())\n        }, { once: true })\n      }\n    }\n  })\n\n/** @internal */\nexport class RuntimeImpl<in R> implements Runtime.Runtime<R> {\n  constructor(\n    readonly context: Context.Context<R>,\n    readonly runtimeFlags: RuntimeFlags.RuntimeFlags,\n    readonly fiberRefs: FiberRefs.FiberRefs\n  ) {}\n\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const make = <R>(\n  options: {\n    readonly context: Context.Context<R>\n    readonly runtimeFlags: RuntimeFlags.RuntimeFlags\n    readonly fiberRefs: FiberRefs.FiberRefs\n  }\n): Runtime.Runtime<R> => new RuntimeImpl(options.context, options.runtimeFlags, options.fiberRefs)\n\n/** @internal */\nexport const runtime = <R>(): Effect.Effect<Runtime.Runtime<R>, never, R> =>\n  core.withFiberRuntime((state, status) =>\n    core.succeed(\n      new RuntimeImpl<R>(\n        state.getFiberRef(core.currentContext as unknown as FiberRef.FiberRef<Context.Context<R>>),\n        status.runtimeFlags,\n        state.getFiberRefs()\n      )\n    )\n  )\n\n/** @internal */\nexport const defaultRuntimeFlags: RuntimeFlags.RuntimeFlags = runtimeFlags.make(\n  runtimeFlags.Interruption,\n  runtimeFlags.CooperativeYielding,\n  runtimeFlags.RuntimeMetrics\n)\n\n/** @internal */\nexport const defaultRuntime = make({\n  context: Context.empty(),\n  runtimeFlags: defaultRuntimeFlags,\n  fiberRefs: FiberRefs.empty()\n})\n\n/** @internal */\nexport const updateRuntimeFlags: {\n  (\n    f: (flags: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags\n  ): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R>\n  <R>(self: Runtime.Runtime<R>, f: (flags: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags): Runtime.Runtime<R>\n} = dual(\n  2,\n  <R>(self: Runtime.Runtime<R>, f: (flags: RuntimeFlags.RuntimeFlags) => RuntimeFlags.RuntimeFlags) =>\n    make({\n      context: self.context,\n      runtimeFlags: f(self.runtimeFlags),\n      fiberRefs: self.fiberRefs\n    })\n)\n\n/** @internal */\nexport const disableRuntimeFlag: {\n  (flag: RuntimeFlags.RuntimeFlag): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R>\n  <R>(self: Runtime.Runtime<R>, flag: RuntimeFlags.RuntimeFlag): Runtime.Runtime<R>\n} = dual(\n  2,\n  <R>(self: Runtime.Runtime<R>, flag: RuntimeFlags.RuntimeFlag) => updateRuntimeFlags(self, runtimeFlags.disable(flag))\n)\n\n/** @internal */\nexport const enableRuntimeFlag: {\n  (flag: RuntimeFlags.RuntimeFlag): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R>\n  <R>(self: Runtime.Runtime<R>, flag: RuntimeFlags.RuntimeFlag): Runtime.Runtime<R>\n} = dual(\n  2,\n  <R>(self: Runtime.Runtime<R>, flag: RuntimeFlags.RuntimeFlag) => updateRuntimeFlags(self, runtimeFlags.enable(flag))\n)\n\n/** @internal */\nexport const updateContext: {\n  <R, R2>(f: (context: Context.Context<R>) => Context.Context<R2>): (self: Runtime.Runtime<R>) => Runtime.Runtime<R2>\n  <R, R2>(self: Runtime.Runtime<R>, f: (context: Context.Context<R>) => Context.Context<R2>): Runtime.Runtime<R2>\n} = dual(\n  2,\n  <R, R2>(self: Runtime.Runtime<R>, f: (context: Context.Context<R>) => Context.Context<R2>) =>\n    make({\n      context: f(self.context),\n      runtimeFlags: self.runtimeFlags,\n      fiberRefs: self.fiberRefs\n    })\n)\n\n/** @internal */\nexport const provideService: {\n  <I, S>(tag: Context.Tag<I, S>, service: S): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R | I>\n  <R, I, S>(self: Runtime.Runtime<R>, tag: Context.Tag<I, S>, service: S): Runtime.Runtime<R | I>\n} = dual(\n  3,\n  <R, I, S>(self: Runtime.Runtime<R>, tag: Context.Tag<I, S>, service: S) =>\n    updateContext(self, Context.add(tag, service))\n)\n\n/** @internal */\nexport const updateFiberRefs: {\n  (f: (fiberRefs: FiberRefs.FiberRefs) => FiberRefs.FiberRefs): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R>\n  <R>(self: Runtime.Runtime<R>, f: (fiberRefs: FiberRefs.FiberRefs) => FiberRefs.FiberRefs): Runtime.Runtime<R>\n} = dual(\n  2,\n  <R>(self: Runtime.Runtime<R>, f: (fiberRefs: FiberRefs.FiberRefs) => FiberRefs.FiberRefs): Runtime.Runtime<R> =>\n    make({\n      context: self.context,\n      runtimeFlags: self.runtimeFlags,\n      fiberRefs: f(self.fiberRefs)\n    })\n)\n\n/** @internal */\nexport const setFiberRef: {\n  <A>(fiberRef: FiberRef.FiberRef<A>, value: A): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R>\n  <R, A>(self: Runtime.Runtime<R>, fiberRef: FiberRef.FiberRef<A>, value: A): Runtime.Runtime<R>\n} = dual(\n  3,\n  <R, A>(self: Runtime.Runtime<R>, fiberRef: FiberRef.FiberRef<A>, value: A): Runtime.Runtime<R> =>\n    updateFiberRefs(\n      self,\n      FiberRefs.updateAs({\n        fiberId: FiberId.none,\n        fiberRef,\n        value\n      })\n    )\n)\n\n/** @internal */\nexport const deleteFiberRef: {\n  <A>(fiberRef: FiberRef.FiberRef<A>): <R>(self: Runtime.Runtime<R>) => Runtime.Runtime<R>\n  <R, A>(self: Runtime.Runtime<R>, fiberRef: FiberRef.FiberRef<A>): Runtime.Runtime<R>\n} = dual(\n  2,\n  <R, A>(self: Runtime.Runtime<R>, fiberRef: FiberRef.FiberRef<A>): Runtime.Runtime<R> =>\n    updateFiberRefs(self, FiberRefs.delete(fiberRef))\n)\n\n/** @internal */\nexport const unsafeRunEffect = unsafeRunCallback(defaultRuntime)\n\n/** @internal */\nexport const unsafeForkEffect = unsafeFork(defaultRuntime)\n\n/** @internal */\nexport const unsafeRunPromiseEffect = unsafeRunPromise(defaultRuntime)\n\n/** @internal */\nexport const unsafeRunPromiseExitEffect = unsafeRunPromiseExit(defaultRuntime)\n\n/** @internal */\nexport const unsafeRunSyncEffect = unsafeRunSync(defaultRuntime)\n\n/** @internal */\nexport const unsafeRunSyncExitEffect = unsafeRunSyncExit(defaultRuntime)\n\n// circular with Effect\n\n/** @internal */\nexport const asyncEffect = <A, E, R, R3, E2, R2>(\n  register: (\n    callback: (_: Effect.Effect<A, E, R>) => void\n  ) => Effect.Effect<Effect.Effect<void, never, R3> | void, E2, R2>\n): Effect.Effect<A, E | E2, R | R2 | R3> =>\n  core.suspend(() => {\n    let cleanup: Effect.Effect<void, never, R3> | void = undefined\n    return core.flatMap(\n      core.deferredMake<A, E | E2>(),\n      (deferred) =>\n        core.flatMap(runtime<R | R2 | R3>(), (runtime) =>\n          core.uninterruptibleMask((restore) =>\n            core.zipRight(\n              FiberRuntime.fork(restore(\n                core.matchCauseEffect(\n                  register((cb) => unsafeRunCallback(runtime)(core.intoDeferred(cb, deferred))),\n                  {\n                    onFailure: (cause) => core.deferredFailCause(deferred, cause),\n                    onSuccess: (cleanup_) => {\n                      cleanup = cleanup_\n                      return core.void\n                    }\n                  }\n                )\n              )),\n              restore(core.onInterrupt(core.deferredAwait(deferred), () => cleanup ?? core.void))\n            )\n          ))\n    )\n  })\n"],"names":["equals","Context","Exit","Fiber","FiberId","FiberRefs","dual","pipe","Inspectable","Option","pipeArguments","Predicate","_scheduler","_scope","InternalCause","core","executionStrategy","FiberRuntime","fiberScope","OpCodes","runtimeFlags","_supervisor","unsafeFork","runtime","self","options","fiberId","unsafeMake","fiberRefUpdates","currentContext","context","scheduler","push","currentScheduler","fiberRefs","updateManyAs","entries","forkAs","updateRefs","fiberRuntime","effect","scope","flatMap","fork","sequential","closeableScope","zipRight","scopeAddFinalizer","fiberIdWith","id","void","interruptAsFiber","onExit","exit","close","supervisor","currentSupervisor","none","onStart","addObserver","onEnd","globalScope","add","immediate","resume","start","unsafeRunCallback","cancelOptions","interruptAs","flatten","undefined","unsafeRunSync","result","unsafeRunSyncExit","_tag","fiberFailure","effect_instruction_i0","AsyncFiberExceptionImpl","Error","fiber","constructor","name","stack","message","asyncFiberException","limit","stackTraceLimit","error","isAsyncFiberException","u","isTagged","FiberFailureId","Symbol","for","FiberFailureCauseId","FiberFailureImpl","cause","prettyErrors","length","head","toJSON","_id","toString","NodeInspectSymbol","isFiberFailure","hasProperty","fastPath","op","_op","exitFail","left","exitSucceed","right","value","NoSuchElementException","SyncScheduler","flush","unsafePoll","exitDie","capture","currentSpanFromFiber","unsafeRunPromise","unsafeRunPromiseExit","then","OP_SUCCESS","OP_FAILURE","Promise","resolve","signal","aborted","unsafeInterruptAsFork","addEventListener","once","RuntimeImpl","arguments","make","withFiberRuntime","state","status","succeed","getFiberRef","getFiberRefs","defaultRuntimeFlags","Interruption","CooperativeYielding","RuntimeMetrics","defaultRuntime","empty","updateRuntimeFlags","f","disableRuntimeFlag","flag","disable","enableRuntimeFlag","enable","updateContext","provideService","tag","service","updateFiberRefs","setFiberRef","fiberRef","updateAs","deleteFiberRef","delete","unsafeRunEffect","unsafeForkEffect","unsafeRunPromiseEffect","unsafeRunPromiseExitEffect","unsafeRunSyncEffect","unsafeRunSyncExitEffect","asyncEffect","register","suspend","cleanup","deferredMake","deferred","uninterruptibleMask","restore","matchCauseEffect","cb","intoDeferred","onFailure","deferredFailCause","onSuccess","cleanup_","onInterrupt","deferredAwait"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14315, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14321, "column": 0}, "map": {"version":3,"file":"circular.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/managedRuntime/circular.ts"],"sourcesContent":["import type * as M from \"../../ManagedRuntime.js\"\n\n// circular with Layer\n\n/** @internal */\nexport const TypeId: M.TypeId = Symbol.for(\"effect/ManagedRuntime\") as M.TypeId\n"],"names":["TypeId","Symbol","for"],"mappings":"AAEA,sBAAA;AAEA,cAAA;;;AACO,MAAMA,MAAM,GAAA,WAAA,GAAaC,MAAM,CAACC,GAAG,CAAC,uBAAuB,CAAa","ignoreList":[0]}},
    {"offset": {"line": 14326, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14332, "column": 0}, "map": {"version":3,"file":"synchronizedRef.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/synchronizedRef.ts"],"sourcesContent":["import type * as Effect from \"../Effect.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as Option from \"../Option.js\"\nimport type * as Synchronized from \"../SynchronizedRef.js\"\nimport * as core from \"./core.js\"\nimport * as _ref from \"./ref.js\"\n\n/** @internal */\nexport const getAndUpdateEffect = dual<\n  <A, R, E>(f: (a: A) => Effect.Effect<A, E, R>) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<A, E, R>,\n  <A, R, E>(self: Synchronized.SynchronizedRef<A>, f: (a: A) => Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n>(2, (self, f) =>\n  self.modifyEffect(\n    (value) => core.map(f(value), (result) => [value, result] as const)\n  ))\n\n/** @internal */\nexport const getAndUpdateSomeEffect = dual<\n  <A, R, E>(\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<A, E, R>,\n  <A, R, E>(\n    self: Synchronized.SynchronizedRef<A>,\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ) => Effect.Effect<A, E, R>\n>(2, (self, pf) =>\n  self.modifyEffect((value) => {\n    const result = pf(value)\n    switch (result._tag) {\n      case \"None\": {\n        return core.succeed([value, value] as const)\n      }\n      case \"Some\": {\n        return core.map(result.value, (newValue) => [value, newValue] as const)\n      }\n    }\n  }))\n\n/** @internal */\nexport const modify = dual<\n  <A, B>(f: (a: A) => readonly [B, A]) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<B>,\n  <A, B>(self: Synchronized.SynchronizedRef<A>, f: (a: A) => readonly [B, A]) => Effect.Effect<B>\n>(2, (self, f) => self.modify(f))\n\n/** @internal */\nexport const modifyEffect = dual<\n  <A, B, E, R>(\n    f: (a: A) => Effect.Effect<readonly [B, A], E, R>\n  ) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<B, E, R>,\n  <A, B, E, R>(\n    self: Synchronized.SynchronizedRef<A>,\n    f: (a: A) => Effect.Effect<readonly [B, A], E, R>\n  ) => Effect.Effect<B, E, R>\n>(2, (self, f) => self.modifyEffect(f))\n\n/** @internal */\nexport const modifySomeEffect = dual<\n  <A, B, R, E>(\n    fallback: B,\n    pf: (a: A) => Option.Option<Effect.Effect<readonly [B, A], E, R>>\n  ) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<B, E, R>,\n  <A, B, R, E>(\n    self: Synchronized.SynchronizedRef<A>,\n    fallback: B,\n    pf: (a: A) => Option.Option<Effect.Effect<readonly [B, A], E, R>>\n  ) => Effect.Effect<B, E, R>\n>(3, (self, fallback, pf) =>\n  self.modifyEffect(\n    (value) => pipe(pf(value), Option.getOrElse(() => core.succeed([fallback, value] as const)))\n  ))\n\n/** @internal */\nexport const updateEffect = dual<\n  <A, R, E>(\n    f: (a: A) => Effect.Effect<A, E, R>\n  ) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<void, E, R>,\n  <A, R, E>(self: Synchronized.SynchronizedRef<A>, f: (a: A) => Effect.Effect<A, E, R>) => Effect.Effect<void, E, R>\n>(2, (self, f) =>\n  self.modifyEffect((value) =>\n    core.map(\n      f(value),\n      (result) => [undefined as void, result] as const\n    )\n  ))\n\n/** @internal */\nexport const updateAndGetEffect = dual<\n  <A, R, E>(f: (a: A) => Effect.Effect<A, E, R>) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<A, E, R>,\n  <A, R, E>(self: Synchronized.SynchronizedRef<A>, f: (a: A) => Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n>(2, (self, f) =>\n  self.modifyEffect(\n    (value) => core.map(f(value), (result) => [result, result] as const)\n  ))\n\n/** @internal */\nexport const updateSomeEffect = dual<\n  <A, R, E>(\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ) => (self: Synchronized.SynchronizedRef<A>) => Effect.Effect<void, E, R>,\n  <A, R, E>(\n    self: Synchronized.SynchronizedRef<A>,\n    pf: (a: A) => Option.Option<Effect.Effect<A, E, R>>\n  ) => Effect.Effect<void, E, R>\n>(2, (self, pf) =>\n  self.modifyEffect((value) => {\n    const result = pf(value)\n    switch (result._tag) {\n      case \"None\": {\n        return core.succeed([void 0, value] as const)\n      }\n      case \"Some\": {\n        return core.map(result.value, (a) => [void 0, a] as const)\n      }\n    }\n  }))\n"],"names":["dual","pipe","Option","core","getAndUpdateEffect","self","f","modifyEffect","value","map","result","getAndUpdateSomeEffect","pf","_tag","succeed","newValue","modify","modifySomeEffect","fallback","getOrElse","updateEffect","undefined","updateAndGetEffect","updateSomeEffect","a"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14404, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14410, "column": 0}, "map": {"version":3,"file":"layer.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/layer.ts"],"sourcesContent":["import * as Cause from \"../Cause.js\"\nimport * as Clock from \"../Clock.js\"\nimport * as Context from \"../Context.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport type * as Exit from \"../Exit.js\"\nimport type { FiberRef } from \"../FiberRef.js\"\nimport * as FiberRefsPatch from \"../FiberRefsPatch.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as HashMap from \"../HashMap.js\"\nimport type * as Layer from \"../Layer.js\"\nimport type * as ManagedRuntime from \"../ManagedRuntime.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Runtime from \"../Runtime.js\"\nimport type * as Schedule from \"../Schedule.js\"\nimport * as ScheduleDecision from \"../ScheduleDecision.js\"\nimport * as Intervals from \"../ScheduleIntervals.js\"\nimport * as Scope from \"../Scope.js\"\nimport type * as Synchronized from \"../SynchronizedRef.js\"\nimport type * as Tracer from \"../Tracer.js\"\nimport * as effect from \"./core-effect.js\"\nimport * as core from \"./core.js\"\nimport * as circular from \"./effect/circular.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\nimport * as circularManagedRuntime from \"./managedRuntime/circular.js\"\nimport * as EffectOpCodes from \"./opCodes/effect.js\"\nimport * as OpCodes from \"./opCodes/layer.js\"\nimport * as ref from \"./ref.js\"\nimport * as runtime from \"./runtime.js\"\nimport * as runtimeFlags from \"./runtimeFlags.js\"\nimport * as synchronized from \"./synchronizedRef.js\"\nimport * as tracer from \"./tracer.js\"\n\n/** @internal */\nconst LayerSymbolKey = \"effect/Layer\"\n\n/** @internal */\nexport const LayerTypeId: Layer.LayerTypeId = Symbol.for(\n  LayerSymbolKey\n) as Layer.LayerTypeId\n\nconst layerVariance = {\n  /* c8 ignore next */\n  _RIn: (_: never) => _,\n  /* c8 ignore next */\n  _E: (_: never) => _,\n  /* c8 ignore next */\n  _ROut: (_: unknown) => _\n}\n\n/** @internal */\nexport const proto = {\n  [LayerTypeId]: layerVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nconst MemoMapTypeIdKey = \"effect/Layer/MemoMap\"\n\n/** @internal */\nexport const MemoMapTypeId: Layer.MemoMapTypeId = Symbol.for(\n  MemoMapTypeIdKey\n) as Layer.MemoMapTypeId\n\n/** @internal */\nexport type Primitive =\n  | ExtendScope\n  | Fold\n  | Fresh\n  | FromEffect\n  | Scoped\n  | Suspend\n  | Locally\n  | ProvideTo\n  | ZipWith\n  | ZipWithPar\n\n/** @internal */\nexport type Op<Tag extends string, Body = {}> = Layer.Layer<unknown, unknown, unknown> & Body & {\n  readonly _op_layer: Tag\n}\n\n/** @internal */\nexport interface ExtendScope extends\n  Op<OpCodes.OP_EXTEND_SCOPE, {\n    readonly layer: Layer.Layer<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Fold extends\n  Op<OpCodes.OP_FOLD, {\n    readonly layer: Layer.Layer<unknown>\n    failureK(cause: Cause.Cause<unknown>): Layer.Layer<unknown>\n    successK(context: Context.Context<unknown>): Layer.Layer<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Fresh extends\n  Op<OpCodes.OP_FRESH, {\n    readonly layer: Layer.Layer<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface FromEffect extends\n  Op<OpCodes.OP_FROM_EFFECT, {\n    readonly effect: Effect.Effect<unknown, unknown, Context.Context<unknown>>\n  }>\n{}\n\n/** @internal */\nexport interface Scoped extends\n  Op<OpCodes.OP_SCOPED, {\n    readonly effect: Effect.Effect<unknown, unknown, Context.Context<unknown>>\n  }>\n{}\n\n/** @internal */\nexport interface Suspend extends\n  Op<OpCodes.OP_SUSPEND, {\n    evaluate(): Layer.Layer<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Locally extends\n  Op<\"Locally\", {\n    readonly self: Layer.Layer<unknown>\n    f(_: Effect.Effect<any, any, any>): Effect.Effect<any, any, any>\n  }>\n{}\n\n/** @internal */\nexport interface ProvideTo extends\n  Op<OpCodes.OP_PROVIDE, {\n    readonly first: Layer.Layer<unknown>\n    readonly second: Layer.Layer<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface ZipWith extends\n  Op<OpCodes.OP_PROVIDE_MERGE, {\n    readonly first: Layer.Layer<unknown>\n    readonly second: Layer.Layer<unknown>\n    zipK(left: Context.Context<unknown>, right: Context.Context<unknown>): Context.Context<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface ZipWithPar extends\n  Op<OpCodes.OP_ZIP_WITH, {\n    readonly first: Layer.Layer<unknown>\n    readonly second: Layer.Layer<unknown>\n    zipK(left: Context.Context<unknown>, right: Context.Context<unknown>): Context.Context<unknown>\n  }>\n{}\n\n/** @internal */\nexport const isLayer = (u: unknown): u is Layer.Layer<unknown, unknown, unknown> => hasProperty(u, LayerTypeId)\n\n/** @internal */\nexport const isFresh = <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>): boolean => {\n  return (self as Primitive)._op_layer === OpCodes.OP_FRESH\n}\n\n// -----------------------------------------------------------------------------\n// MemoMap\n// -----------------------------------------------------------------------------\n\n/** @internal */\nclass MemoMapImpl implements Layer.MemoMap {\n  readonly [MemoMapTypeId]: Layer.MemoMapTypeId\n  constructor(\n    readonly ref: Synchronized.SynchronizedRef<\n      Map<\n        Layer.Layer<any, any, any>,\n        readonly [Effect.Effect<any, any>, Scope.Scope.Finalizer]\n      >\n    >\n  ) {\n    this[MemoMapTypeId] = MemoMapTypeId\n  }\n\n  /**\n   * Checks the memo map to see if a layer exists. If it is, immediately\n   * returns it. Otherwise, obtains the layer, stores it in the memo map,\n   * and adds a finalizer to the `Scope`.\n   */\n  getOrElseMemoize<RIn, E, ROut>(\n    layer: Layer.Layer<ROut, E, RIn>,\n    scope: Scope.Scope\n  ): Effect.Effect<Context.Context<ROut>, E, RIn> {\n    return pipe(\n      synchronized.modifyEffect(this.ref, (map) => {\n        const inMap = map.get(layer)\n        if (inMap !== undefined) {\n          const [acquire, release] = inMap\n          const cached: Effect.Effect<Context.Context<ROut>, E> = pipe(\n            acquire as Effect.Effect<readonly [FiberRefsPatch.FiberRefsPatch, Context.Context<ROut>], E>,\n            core.flatMap(([patch, b]) => pipe(effect.patchFiberRefs(patch), core.as(b))),\n            core.onExit(core.exitMatch({\n              onFailure: () => core.void,\n              onSuccess: () => core.scopeAddFinalizerExit(scope, release)\n            }))\n          )\n          return core.succeed([cached, map] as const)\n        }\n        return pipe(\n          ref.make(0),\n          core.flatMap((observers) =>\n            pipe(\n              core.deferredMake<readonly [FiberRefsPatch.FiberRefsPatch, Context.Context<ROut>], E>(),\n              core.flatMap((deferred) =>\n                pipe(\n                  ref.make<Scope.Scope.Finalizer>(() => core.void),\n                  core.map((finalizerRef) => {\n                    const resource = core.uninterruptibleMask((restore) =>\n                      pipe(\n                        fiberRuntime.scopeMake(),\n                        core.flatMap((innerScope) =>\n                          pipe(\n                            restore(core.flatMap(\n                              makeBuilder(layer, innerScope, true),\n                              (f) => effect.diffFiberRefs(f(this))\n                            )),\n                            core.exit,\n                            core.flatMap((exit) => {\n                              switch (exit._tag) {\n                                case EffectOpCodes.OP_FAILURE: {\n                                  return pipe(\n                                    core.deferredFailCause(deferred, exit.effect_instruction_i0),\n                                    core.zipRight(core.scopeClose(innerScope, exit)),\n                                    core.zipRight(core.failCause(exit.effect_instruction_i0))\n                                  )\n                                }\n                                case EffectOpCodes.OP_SUCCESS: {\n                                  return pipe(\n                                    ref.set(finalizerRef, (exit) =>\n                                      pipe(\n                                        core.scopeClose(innerScope, exit),\n                                        core.whenEffect(\n                                          ref.modify(observers, (n) => [n === 1, n - 1] as const)\n                                        ),\n                                        core.asVoid\n                                      )),\n                                    core.zipRight(ref.update(observers, (n) => n + 1)),\n                                    core.zipRight(\n                                      core.scopeAddFinalizerExit(scope, (exit) =>\n                                        pipe(\n                                          core.sync(() => map.delete(layer)),\n                                          core.zipRight(ref.get(finalizerRef)),\n                                          core.flatMap((finalizer) => finalizer(exit))\n                                        ))\n                                    ),\n                                    core.zipRight(core.deferredSucceed(deferred, exit.effect_instruction_i0)),\n                                    core.as(exit.effect_instruction_i0[1])\n                                  )\n                                }\n                              }\n                            })\n                          )\n                        )\n                      )\n                    )\n                    const memoized = [\n                      pipe(\n                        core.deferredAwait(deferred),\n                        core.onExit(core.exitMatchEffect({\n                          onFailure: () => core.void,\n                          onSuccess: () => ref.update(observers, (n) => n + 1)\n                        }))\n                      ),\n                      (exit: Exit.Exit<unknown, unknown>) =>\n                        pipe(\n                          ref.get(finalizerRef),\n                          core.flatMap((finalizer) => finalizer(exit))\n                        )\n                    ] as const\n                    return [\n                      resource,\n                      isFresh(layer) ? map : map.set(layer, memoized)\n                    ] as const\n                  })\n                )\n              )\n            )\n          )\n        )\n      }),\n      core.flatten\n    )\n  }\n}\n\n/** @internal */\nexport const makeMemoMap: Effect.Effect<Layer.MemoMap> = core.suspend(() =>\n  core.map(\n    circular.makeSynchronized<\n      Map<\n        Layer.Layer<any, any, any>,\n        readonly [\n          Effect.Effect<any, any>,\n          Scope.Scope.Finalizer\n        ]\n      >\n    >(new Map()),\n    (ref) => new MemoMapImpl(ref)\n  )\n)\n\n/** @internal */\nexport const unsafeMakeMemoMap = (): Layer.MemoMap => new MemoMapImpl(circular.unsafeMakeSynchronized(new Map()))\n\n/** @internal */\nexport const build = <RIn, E, ROut>(\n  self: Layer.Layer<ROut, E, RIn>\n): Effect.Effect<Context.Context<ROut>, E, RIn | Scope.Scope> =>\n  fiberRuntime.scopeWith((scope) => buildWithScope(self, scope))\n\n/** @internal */\nexport const buildWithScope = dual<\n  (\n    scope: Scope.Scope\n  ) => <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>) => Effect.Effect<Context.Context<ROut>, E, RIn>,\n  <RIn, E, ROut>(\n    self: Layer.Layer<ROut, E, RIn>,\n    scope: Scope.Scope\n  ) => Effect.Effect<Context.Context<ROut>, E, RIn>\n>(2, (self, scope) =>\n  core.flatMap(\n    makeMemoMap,\n    (memoMap) => core.flatMap(makeBuilder(self, scope), (run) => run(memoMap))\n  ))\n\n/** @internal */\nexport const buildWithMemoMap = dual<\n  (\n    memoMap: Layer.MemoMap,\n    scope: Scope.Scope\n  ) => <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>) => Effect.Effect<Context.Context<ROut>, E, RIn>,\n  <RIn, E, ROut>(\n    self: Layer.Layer<ROut, E, RIn>,\n    memoMap: Layer.MemoMap,\n    scope: Scope.Scope\n  ) => Effect.Effect<Context.Context<ROut>, E, RIn>\n>(3, (self, memoMap, scope) => core.flatMap(makeBuilder(self, scope), (run) => run(memoMap)))\n\nconst makeBuilder = <RIn, E, ROut>(\n  self: Layer.Layer<ROut, E, RIn>,\n  scope: Scope.Scope,\n  inMemoMap = false\n): Effect.Effect<(memoMap: Layer.MemoMap) => Effect.Effect<Context.Context<ROut>, E, RIn>> => {\n  const op = self as Primitive\n  switch (op._op_layer) {\n    case \"Locally\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) => op.f(memoMap.getOrElseMemoize(op.self, scope)))\n    }\n    case \"ExtendScope\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) =>\n        fiberRuntime.scopeWith(\n          (scope) => memoMap.getOrElseMemoize(op.layer, scope)\n        ) as unknown as Effect.Effect<Context.Context<ROut>, E, RIn>\n      )\n    }\n    case \"Fold\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) =>\n        pipe(\n          memoMap.getOrElseMemoize(op.layer, scope),\n          core.matchCauseEffect({\n            onFailure: (cause) => memoMap.getOrElseMemoize(op.failureK(cause), scope),\n            onSuccess: (value) => memoMap.getOrElseMemoize(op.successK(value), scope)\n          })\n        )\n      )\n    }\n    case \"Fresh\": {\n      return core.sync(() => (_: Layer.MemoMap) => pipe(op.layer, buildWithScope(scope)))\n    }\n    case \"FromEffect\": {\n      return inMemoMap\n        ? core.sync(() => (_: Layer.MemoMap) => op.effect as Effect.Effect<Context.Context<ROut>, E, RIn>)\n        : core.sync(() => (memoMap: Layer.MemoMap) => memoMap.getOrElseMemoize(self, scope))\n    }\n    case \"Provide\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) =>\n        pipe(\n          memoMap.getOrElseMemoize(op.first, scope),\n          core.flatMap((env) =>\n            pipe(\n              memoMap.getOrElseMemoize(op.second, scope),\n              core.provideContext(env)\n            )\n          )\n        )\n      )\n    }\n    case \"Scoped\": {\n      return inMemoMap\n        ? core.sync(() => (_: Layer.MemoMap) =>\n          fiberRuntime.scopeExtend(\n            op.effect as Effect.Effect<Context.Context<ROut>, E, RIn>,\n            scope\n          )\n        )\n        : core.sync(() => (memoMap: Layer.MemoMap) => memoMap.getOrElseMemoize(self, scope))\n    }\n    case \"Suspend\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) =>\n        memoMap.getOrElseMemoize(\n          op.evaluate(),\n          scope\n        )\n      )\n    }\n    case \"ProvideMerge\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) =>\n        pipe(\n          memoMap.getOrElseMemoize(op.first, scope),\n          core.zipWith(\n            memoMap.getOrElseMemoize(op.second, scope),\n            op.zipK\n          )\n        )\n      )\n    }\n    case \"ZipWith\": {\n      return core.sync(() => (memoMap: Layer.MemoMap) =>\n        pipe(\n          memoMap.getOrElseMemoize(op.first, scope),\n          fiberRuntime.zipWithOptions(\n            memoMap.getOrElseMemoize(op.second, scope),\n            op.zipK,\n            { concurrent: true }\n          )\n        )\n      )\n    }\n  }\n}\n\n// -----------------------------------------------------------------------------\n// Layer\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const catchAll = dual<\n  <E, RIn2, E2, ROut2>(\n    onError: (error: E) => Layer.Layer<ROut2, E2, RIn2>\n  ) => <RIn, ROut>(self: Layer.Layer<ROut, E, RIn>) => Layer.Layer<ROut & ROut2, E2, RIn | RIn2>,\n  <RIn, E, ROut, RIn2, E2, ROut2>(\n    self: Layer.Layer<ROut, E, RIn>,\n    onError: (error: E) => Layer.Layer<ROut2, E2, RIn2>\n  ) => Layer.Layer<ROut & ROut2, E2, RIn | RIn2>\n>(2, (self, onFailure) => match(self, { onFailure, onSuccess: succeedContext }))\n\n/** @internal */\nexport const catchAllCause = dual<\n  <E, RIn2, E2, ROut2>(\n    onError: (cause: Cause.Cause<E>) => Layer.Layer<ROut2, E2, RIn2>\n  ) => <RIn, ROut>(self: Layer.Layer<ROut, E, RIn>) => Layer.Layer<ROut & ROut2, E2, RIn | RIn2>,\n  <RIn, E, ROut, RIn2, E2, ROut22>(\n    self: Layer.Layer<ROut, E, RIn>,\n    onError: (cause: Cause.Cause<E>) => Layer.Layer<ROut22, E2, RIn2>\n  ) => Layer.Layer<ROut & ROut22, E2, RIn | RIn2>\n>(2, (self, onFailure) => matchCause(self, { onFailure, onSuccess: succeedContext }))\n\n/** @internal */\nexport const die = (defect: unknown): Layer.Layer<unknown> => failCause(Cause.die(defect))\n\n/** @internal */\nexport const dieSync = (evaluate: LazyArg<unknown>): Layer.Layer<unknown> => failCauseSync(() => Cause.die(evaluate()))\n\n/** @internal */\nexport const discard = <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>): Layer.Layer<never, E, RIn> =>\n  map(self, () => Context.empty())\n\n/** @internal */\nexport const context = <R>(): Layer.Layer<R, never, R> => fromEffectContext(core.context<R>())\n\n/** @internal */\nexport const extendScope = <RIn, E, ROut>(\n  self: Layer.Layer<ROut, E, RIn>\n): Layer.Layer<ROut, E, RIn | Scope.Scope> => {\n  const extendScope = Object.create(proto)\n  extendScope._op_layer = OpCodes.OP_EXTEND_SCOPE\n  extendScope.layer = self\n  return extendScope\n}\n\n/** @internal */\nexport const fail = <E>(error: E): Layer.Layer<unknown, E> => failCause(Cause.fail(error))\n\n/** @internal */\nexport const failSync = <E>(evaluate: LazyArg<E>): Layer.Layer<unknown, E> =>\n  failCauseSync(() => Cause.fail(evaluate()))\n\n/** @internal */\nexport const failCause = <E>(cause: Cause.Cause<E>): Layer.Layer<unknown, E> => fromEffectContext(core.failCause(cause))\n\n/** @internal */\nexport const failCauseSync = <E>(evaluate: LazyArg<Cause.Cause<E>>): Layer.Layer<unknown, E> =>\n  fromEffectContext(core.failCauseSync(evaluate))\n\n/** @internal */\nexport const flatMap = dual<\n  <A, A2, E2, R2>(\n    f: (context: Context.Context<A>) => Layer.Layer<A2, E2, R2>\n  ) => <E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A2, E | E2, R | R2>,\n  <A, E, R, A2, E2, R2>(\n    self: Layer.Layer<A, E, R>,\n    f: (context: Context.Context<A>) => Layer.Layer<A2, E2, R2>\n  ) => Layer.Layer<A2, E | E2, R | R2>\n>(2, (self, f) => match(self, { onFailure: fail, onSuccess: f }))\n\n/** @internal */\nexport const flatten = dual<\n  <I, A, E2, R2>(\n    tag: Context.Tag<I, Layer.Layer<A, E2, R2>>\n  ) => <E, R>(\n    self: Layer.Layer<I, E, R>\n  ) => Layer.Layer<A, E | E2, R | R2>,\n  <I, E, R, A, E2, R2>(\n    self: Layer.Layer<I, E, R>,\n    tag: Context.Tag<I, Layer.Layer<A, E2, R2>>\n  ) => Layer.Layer<A, E | E2, R | R2>\n>(2, (self, tag) => flatMap(self, Context.get(tag as any) as any))\n\n/** @internal */\nexport const fresh = <A, E, R>(self: Layer.Layer<A, E, R>): Layer.Layer<A, E, R> => {\n  const fresh = Object.create(proto)\n  fresh._op_layer = OpCodes.OP_FRESH\n  fresh.layer = self\n  return fresh\n}\n\n/** @internal */\nexport const fromEffect = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T\n  ) => <E, R>(\n    effect: Effect.Effect<Context.Tag.Service<T>, E, R>\n  ) => Layer.Layer<Context.Tag.Identifier<T>, E, R>,\n  <T extends Context.Tag<any, any>, E, R>(\n    tag: T,\n    effect: Effect.Effect<Context.Tag.Service<T>, E, R>\n  ) => Layer.Layer<Context.Tag.Identifier<T>, E, R>\n>(2, (a, b) => {\n  const tagFirst = Context.isTag(a)\n  const tag = (tagFirst ? a : b) as Context.Tag<unknown, unknown>\n  const effect = tagFirst ? b : a\n  return fromEffectContext(core.map(effect, (service) => Context.make(tag, service)))\n})\n\n/** @internal */\nexport const fromEffectDiscard = <X, E, R>(effect: Effect.Effect<X, E, R>) =>\n  fromEffectContext(core.map(effect, () => Context.empty()))\n\n/** @internal */\nexport function fromEffectContext<A, E, R>(\n  effect: Effect.Effect<Context.Context<A>, E, R>\n): Layer.Layer<A, E, R> {\n  const fromEffect = Object.create(proto)\n  fromEffect._op_layer = OpCodes.OP_FROM_EFFECT\n  fromEffect.effect = effect\n  return fromEffect\n}\n\n/** @internal */\nexport const fiberRefLocally = dual<\n  <X>(ref: FiberRef<X>, value: X) => <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, R>,\n  <A, E, R, X>(self: Layer.Layer<A, E, R>, ref: FiberRef<X>, value: X) => Layer.Layer<A, E, R>\n>(3, (self, ref, value) => locallyEffect(self, core.fiberRefLocally(ref, value)))\n\n/** @internal */\nexport const locallyEffect = dual<\n  <RIn, E, ROut, RIn2, E2, ROut2>(\n    f: (_: Effect.Effect<RIn, E, Context.Context<ROut>>) => Effect.Effect<RIn2, E2, Context.Context<ROut2>>\n  ) => (self: Layer.Layer<ROut, E, RIn>) => Layer.Layer<ROut2, E2, RIn2>,\n  <RIn, E, ROut, RIn2, E2, ROut2>(\n    self: Layer.Layer<ROut, E, RIn>,\n    f: (_: Effect.Effect<RIn, E, Context.Context<ROut>>) => Effect.Effect<RIn2, E2, Context.Context<ROut2>>\n  ) => Layer.Layer<ROut2, E2, RIn2>\n>(2, (self, f) => {\n  const locally = Object.create(proto)\n  locally._op_layer = \"Locally\"\n  locally.self = self\n  locally.f = f\n  return locally\n})\n\n/** @internal */\nexport const fiberRefLocallyWith = dual<\n  <X>(ref: FiberRef<X>, value: (_: X) => X) => <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, R>,\n  <A, E, R, X>(self: Layer.Layer<A, E, R>, ref: FiberRef<X>, value: (_: X) => X) => Layer.Layer<A, E, R>\n>(3, (self, ref, value) => locallyEffect(self, core.fiberRefLocallyWith(ref, value)))\n\n/** @internal */\nexport const fiberRefLocallyScoped = <A>(self: FiberRef<A>, value: A): Layer.Layer<never> =>\n  scopedDiscard(fiberRuntime.fiberRefLocallyScoped(self, value))\n\n/** @internal */\nexport const fiberRefLocallyScopedWith = <A>(self: FiberRef<A>, value: (_: A) => A): Layer.Layer<never> =>\n  scopedDiscard(fiberRuntime.fiberRefLocallyScopedWith(self, value))\n\n/** @internal */\nexport const fromFunction = <A extends Context.Tag<any, any>, B extends Context.Tag<any, any>>(\n  tagA: A,\n  tagB: B,\n  f: (a: Context.Tag.Service<A>) => Context.Tag.Service<B>\n): Layer.Layer<Context.Tag.Identifier<B>, never, Context.Tag.Identifier<A>> =>\n  fromEffectContext(core.map(tagA, (a) => Context.make(tagB, f(a))))\n\n/** @internal */\nexport const launch = <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>): Effect.Effect<never, E, RIn> =>\n  fiberRuntime.scopedEffect(\n    core.zipRight(\n      fiberRuntime.scopeWith((scope) => pipe(self, buildWithScope(scope))),\n      core.never\n    )\n  )\n\n/** @internal */\nexport const map = dual<\n  <A, B>(\n    f: (context: Context.Context<A>) => Context.Context<B>\n  ) => <E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<B, E, R>,\n  <A, E, R, B>(\n    self: Layer.Layer<A, E, R>,\n    f: (context: Context.Context<A>) => Context.Context<B>\n  ) => Layer.Layer<B, E, R>\n>(2, (self, f) => flatMap(self, (context) => succeedContext(f(context))))\n\n/** @internal */\nexport const mapError = dual<\n  <E, E2>(f: (error: E) => E2) => <A, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E2, R>,\n  <A, E, R, E2>(self: Layer.Layer<A, E, R>, f: (error: E) => E2) => Layer.Layer<A, E2, R>\n>(2, (self, f) => catchAll(self, (error) => failSync(() => f(error))))\n\n/** @internal */\nexport const matchCause = dual<\n  <E, A2, E2, R2, A, A3, E3, R3>(\n    options: {\n      readonly onFailure: (cause: Cause.Cause<E>) => Layer.Layer<A2, E2, R2>\n      readonly onSuccess: (context: Context.Context<A>) => Layer.Layer<A3, E3, R3>\n    }\n  ) => <R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A2 & A3, E2 | E3, R | R2 | R3>,\n  <A, E, R, A2, E2, R2, A3, E3, R3>(\n    self: Layer.Layer<A, E, R>,\n    options: {\n      readonly onFailure: (cause: Cause.Cause<E>) => Layer.Layer<A2, E2, R2>\n      readonly onSuccess: (context: Context.Context<A>) => Layer.Layer<A3, E3, R3>\n    }\n  ) => Layer.Layer<A2 & A3, E2 | E3, R | R2 | R3>\n>(2, (self, { onFailure, onSuccess }) => {\n  const fold = Object.create(proto)\n  fold._op_layer = OpCodes.OP_FOLD\n  fold.layer = self\n  fold.failureK = onFailure\n  fold.successK = onSuccess\n  return fold\n})\n\n/** @internal */\nexport const match = dual<\n  <E, A2, E2, R2, A, A3, E3, R3>(\n    options: {\n      readonly onFailure: (error: E) => Layer.Layer<A2, E2, R2>\n      readonly onSuccess: (context: Context.Context<A>) => Layer.Layer<A3, E3, R3>\n    }\n  ) => <R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A2 & A3, E2 | E3, R | R2 | R3>,\n  <A, E, R, A2, E2, R2, A3, E3, R3>(\n    self: Layer.Layer<A, E, R>,\n    options: {\n      readonly onFailure: (error: E) => Layer.Layer<A2, E2, R2>\n      readonly onSuccess: (context: Context.Context<A>) => Layer.Layer<A3, E3, R3>\n    }\n  ) => Layer.Layer<A2 & A3, E2 | E3, R | R2 | R3>\n>(2, (self, { onFailure, onSuccess }) =>\n  matchCause(self, {\n    onFailure: (cause) => {\n      const failureOrCause = Cause.failureOrCause(cause)\n      switch (failureOrCause._tag) {\n        case \"Left\": {\n          return onFailure(failureOrCause.left)\n        }\n        case \"Right\": {\n          return failCause(failureOrCause.right)\n        }\n      }\n    },\n    onSuccess\n  }))\n\n/** @internal */\nexport const memoize = <RIn, E, ROut>(\n  self: Layer.Layer<ROut, E, RIn>\n): Effect.Effect<Layer.Layer<ROut, E, RIn>, never, Scope.Scope> =>\n  fiberRuntime.scopeWith((scope) =>\n    core.map(\n      effect.memoize(buildWithScope(self, scope)),\n      fromEffectContext\n    )\n  )\n\n/** @internal */\nexport const merge = dual<\n  <RIn2, E2, ROut2>(\n    that: Layer.Layer<ROut2, E2, RIn2>\n  ) => <RIn, E1, ROut>(self: Layer.Layer<ROut, E1, RIn>) => Layer.Layer<\n    ROut | ROut2,\n    E1 | E2,\n    RIn | RIn2\n  >,\n  <RIn, E1, ROut, RIn2, E2, ROut2>(self: Layer.Layer<ROut, E1, RIn>, that: Layer.Layer<ROut2, E2, RIn2>) => Layer.Layer<\n    ROut | ROut2,\n    E1 | E2,\n    RIn | RIn2\n  >\n>(2, (self, that) => zipWith(self, that, (a, b) => Context.merge(a, b)))\n\n/** @internal */\nexport const mergeAll = <Layers extends [Layer.Layer<never, any, any>, ...Array<Layer.Layer<never, any, any>>]>(\n  ...layers: Layers\n): Layer.Layer<\n  { [k in keyof Layers]: Layer.Layer.Success<Layers[k]> }[number],\n  { [k in keyof Layers]: Layer.Layer.Error<Layers[k]> }[number],\n  { [k in keyof Layers]: Layer.Layer.Context<Layers[k]> }[number]\n> => {\n  let final = layers[0]\n  for (let i = 1; i < layers.length; i++) {\n    final = merge(final, layers[i])\n  }\n  return final as any\n}\n\n/** @internal */\nexport const orDie = <A, E, R>(self: Layer.Layer<A, E, R>): Layer.Layer<A, never, R> =>\n  catchAll(self, (defect) => die(defect))\n\n/** @internal */\nexport const orElse = dual<\n  <A2, E2, R2>(\n    that: LazyArg<Layer.Layer<A2, E2, R2>>\n  ) => <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A & A2, E | E2, R | R2>,\n  <A, E, R, A2, E2, R2>(\n    self: Layer.Layer<A, E, R>,\n    that: LazyArg<Layer.Layer<A2, E2, R2>>\n  ) => Layer.Layer<A & A2, E | E2, R | R2>\n>(2, (self, that) => catchAll(self, that))\n\n/** @internal */\nexport const passthrough = <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>): Layer.Layer<RIn | ROut, E, RIn> =>\n  merge(context<RIn>(), self)\n\n/** @internal */\nexport const project = dual<\n  <A extends Context.Tag<any, any>, B extends Context.Tag<any, any>>(\n    tagA: A,\n    tagB: B,\n    f: (a: Context.Tag.Service<A>) => Context.Tag.Service<B>\n  ) => <RIn, E>(self: Layer.Layer<Context.Tag.Identifier<A>, E, RIn>) => Layer.Layer<Context.Tag.Identifier<B>, E, RIn>,\n  <RIn, E, A extends Context.Tag<any, any>, B extends Context.Tag<any, any>>(\n    self: Layer.Layer<Context.Tag.Identifier<A>, E, RIn>,\n    tagA: A,\n    tagB: B,\n    f: (a: Context.Tag.Service<A>) => Context.Tag.Service<B>\n  ) => Layer.Layer<Context.Tag.Identifier<B>, E, RIn>\n>(4, (self, tagA, tagB, f) => map(self, (context) => Context.make(tagB, f(Context.unsafeGet(context, tagA)))))\n\n/** @internal */\nexport const retry = dual<\n  <X, E, RIn2>(\n    schedule: Schedule.Schedule<X, E, RIn2>\n  ) => <ROut, RIn>(\n    self: Layer.Layer<ROut, E, RIn>\n  ) => Layer.Layer<ROut, E, RIn | RIn2>,\n  <ROut, E, RIn, X, RIn2>(\n    self: Layer.Layer<ROut, E, RIn>,\n    schedule: Schedule.Schedule<X, E, RIn2>\n  ) => Layer.Layer<ROut, E, RIn | RIn2>\n>(2, (self, schedule) =>\n  suspend(() => {\n    const stateTag = Context.GenericTag<{ state: unknown }>(\"effect/Layer/retry/{ state: unknown }\")\n    return pipe(\n      succeed(stateTag, { state: schedule.initial }),\n      flatMap((env: Context.Context<{ state: unknown }>) =>\n        retryLoop(self, schedule, stateTag, pipe(env, Context.get(stateTag)).state)\n      )\n    )\n  }))\n\nconst retryLoop = <ROut, E, RIn, X, RIn2>(\n  self: Layer.Layer<ROut, E, RIn>,\n  schedule: Schedule.Schedule<X, E, RIn2>,\n  stateTag: Context.Tag<{ state: unknown }, { state: unknown }>,\n  state: unknown\n): Layer.Layer<ROut, E, RIn | RIn2> => {\n  return pipe(\n    self,\n    catchAll((error) =>\n      pipe(\n        retryUpdate(schedule, stateTag, error, state),\n        flatMap((env) => fresh(retryLoop(self, schedule, stateTag, pipe(env, Context.get(stateTag)).state)))\n      )\n    )\n  )\n}\n\nconst retryUpdate = <X, E, RIn>(\n  schedule: Schedule.Schedule<X, E, RIn>,\n  stateTag: Context.Tag<{ state: unknown }, { state: unknown }>,\n  error: E,\n  state: unknown\n): Layer.Layer<{ state: unknown }, E, RIn> => {\n  return fromEffect(\n    stateTag,\n    pipe(\n      Clock.currentTimeMillis,\n      core.flatMap((now) =>\n        pipe(\n          schedule.step(now, error, state),\n          core.flatMap(([state, _, decision]) =>\n            ScheduleDecision.isDone(decision) ?\n              core.fail(error) :\n              pipe(\n                Clock.sleep(Duration.millis(Intervals.start(decision.intervals) - now)),\n                core.as({ state })\n              )\n          )\n        )\n      )\n    )\n  )\n}\n\n/** @internal */\nexport const scoped = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T\n  ) => <E, R>(\n    effect: Effect.Effect<Context.Tag.Service<T>, E, R>\n  ) => Layer.Layer<Context.Tag.Identifier<T>, E, Exclude<R, Scope.Scope>>,\n  <T extends Context.Tag<any, any>, E, R>(\n    tag: T,\n    effect: Effect.Effect<Context.Tag.Service<T>, E, R>\n  ) => Layer.Layer<Context.Tag.Identifier<T>, E, Exclude<R, Scope.Scope>>\n>(2, (a, b) => {\n  const tagFirst = Context.isTag(a)\n  const tag = (tagFirst ? a : b) as Context.Tag<unknown, unknown>\n  const effect = tagFirst ? b : a\n  return scopedContext(core.map(effect, (service) => Context.make(tag, service)))\n})\n\n/** @internal */\nexport const scopedDiscard = <X, E, R>(\n  effect: Effect.Effect<X, E, R>\n): Layer.Layer<never, E, Exclude<R, Scope.Scope>> => scopedContext(pipe(effect, core.as(Context.empty())))\n\n/** @internal */\nexport const scopedContext = <A, E, R>(\n  effect: Effect.Effect<Context.Context<A>, E, R>\n): Layer.Layer<A, E, Exclude<R, Scope.Scope>> => {\n  const scoped = Object.create(proto)\n  scoped._op_layer = OpCodes.OP_SCOPED\n  scoped.effect = effect\n  return scoped\n}\n\n/** @internal */\nexport const scope: Layer.Layer<Scope.Scope.Closeable> = scopedContext(\n  core.map(\n    fiberRuntime.acquireRelease(\n      fiberRuntime.scopeMake(),\n      (scope, exit) => scope.close(exit)\n    ),\n    (scope) => Context.make(Scope.Scope, scope)\n  )\n)\n\n/** @internal */\nexport const service = <T extends Context.Tag<any, any>>(\n  tag: T\n): Layer.Layer<Context.Tag.Identifier<T>, never, Context.Tag.Identifier<T>> => fromEffect(tag, tag)\n\n/** @internal */\nexport const succeed = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T\n  ) => (\n    resource: Context.Tag.Service<T>\n  ) => Layer.Layer<Context.Tag.Identifier<T>>,\n  <T extends Context.Tag<any, any>>(\n    tag: T,\n    resource: Context.Tag.Service<T>\n  ) => Layer.Layer<Context.Tag.Identifier<T>>\n>(2, (a, b) => {\n  const tagFirst = Context.isTag(a)\n  const tag = (tagFirst ? a : b) as Context.Tag<unknown, unknown>\n  const resource = tagFirst ? b : a\n  return fromEffectContext(core.succeed(Context.make(tag, resource)))\n})\n\n/** @internal */\nexport const succeedContext = <A>(\n  context: Context.Context<A>\n): Layer.Layer<A> => {\n  return fromEffectContext(core.succeed(context))\n}\n\n/** @internal */\nexport const empty = succeedContext(Context.empty())\n\n/** @internal */\nexport const suspend = <RIn, E, ROut>(\n  evaluate: LazyArg<Layer.Layer<ROut, E, RIn>>\n): Layer.Layer<ROut, E, RIn> => {\n  const suspend = Object.create(proto)\n  suspend._op_layer = OpCodes.OP_SUSPEND\n  suspend.evaluate = evaluate\n  return suspend\n}\n\n/** @internal */\nexport const sync = dual<\n  <T extends Context.Tag<any, any>>(\n    tag: T\n  ) => (\n    evaluate: LazyArg<Context.Tag.Service<T>>\n  ) => Layer.Layer<Context.Tag.Identifier<T>>,\n  <T extends Context.Tag<any, any>>(\n    tag: T,\n    evaluate: LazyArg<Context.Tag.Service<T>>\n  ) => Layer.Layer<Context.Tag.Identifier<T>>\n>(2, (a, b) => {\n  const tagFirst = Context.isTag(a)\n  const tag = (tagFirst ? a : b) as Context.Tag<unknown, unknown>\n  const evaluate = tagFirst ? b : a\n  return fromEffectContext(core.sync(() => Context.make(tag, evaluate())))\n})\n\n/** @internal */\nexport const syncContext = <A>(evaluate: LazyArg<Context.Context<A>>): Layer.Layer<A> => {\n  return fromEffectContext(core.sync(evaluate))\n}\n\n/** @internal */\nexport const tap = dual<\n  <ROut, XR extends ROut, RIn2, E2, X>(\n    f: (context: Context.Context<XR>) => Effect.Effect<X, E2, RIn2>\n  ) => <RIn, E>(self: Layer.Layer<ROut, E, RIn>) => Layer.Layer<ROut, E | E2, RIn | RIn2>,\n  <RIn, E, ROut, XR extends ROut, RIn2, E2, X>(\n    self: Layer.Layer<ROut, E, RIn>,\n    f: (context: Context.Context<XR>) => Effect.Effect<X, E2, RIn2>\n  ) => Layer.Layer<ROut, E | E2, RIn | RIn2>\n>(2, (self, f) => flatMap(self, (context) => fromEffectContext(core.as(f(context), context))))\n\n/** @internal */\nexport const tapError = dual<\n  <E, XE extends E, RIn2, E2, X>(\n    f: (e: XE) => Effect.Effect<X, E2, RIn2>\n  ) => <RIn, ROut>(self: Layer.Layer<ROut, E, RIn>) => Layer.Layer<ROut, E | E2, RIn | RIn2>,\n  <RIn, E, XE extends E, ROut, RIn2, E2, X>(\n    self: Layer.Layer<ROut, E, RIn>,\n    f: (e: XE) => Effect.Effect<X, E2, RIn2>\n  ) => Layer.Layer<ROut, E | E2, RIn | RIn2>\n>(2, (self, f) =>\n  catchAll(\n    self,\n    (e) => fromEffectContext(core.flatMap(f(e as any), () => core.fail(e)))\n  ))\n\n/** @internal */\nexport const tapErrorCause = dual<\n  <E, XE extends E, RIn2, E2, X>(\n    f: (cause: Cause.Cause<XE>) => Effect.Effect<X, E2, RIn2>\n  ) => <RIn, ROut>(self: Layer.Layer<ROut, E, RIn>) => Layer.Layer<ROut, E | E2, RIn | RIn2>,\n  <RIn, E, XE extends E, ROut, RIn2, E2, X>(\n    self: Layer.Layer<ROut, E, RIn>,\n    f: (cause: Cause.Cause<XE>) => Effect.Effect<X, E2, RIn2>\n  ) => Layer.Layer<ROut, E | E2, RIn | RIn2>\n>(2, (self, f) =>\n  catchAllCause(\n    self,\n    (cause) => fromEffectContext(core.flatMap(f(cause as any), () => core.failCause(cause)))\n  ))\n\n/** @internal */\nexport const toRuntime = <RIn, E, ROut>(\n  self: Layer.Layer<ROut, E, RIn>\n): Effect.Effect<Runtime.Runtime<ROut>, E, RIn | Scope.Scope> =>\n  pipe(\n    fiberRuntime.scopeWith((scope) => buildWithScope(self, scope)),\n    core.flatMap((context) =>\n      pipe(\n        runtime.runtime<ROut>(),\n        core.provideContext(context)\n      )\n    )\n  )\n\n/** @internal */\nexport const toRuntimeWithMemoMap = dual<\n  (\n    memoMap: Layer.MemoMap\n  ) => <RIn, E, ROut>(self: Layer.Layer<ROut, E, RIn>) => Effect.Effect<Runtime.Runtime<ROut>, E, RIn | Scope.Scope>,\n  <RIn, E, ROut>(\n    self: Layer.Layer<ROut, E, RIn>,\n    memoMap: Layer.MemoMap\n  ) => Effect.Effect<Runtime.Runtime<ROut>, E, RIn | Scope.Scope>\n>(2, (self, memoMap) =>\n  core.flatMap(\n    fiberRuntime.scopeWith((scope) => buildWithMemoMap(self, memoMap, scope)),\n    (context) =>\n      pipe(\n        runtime.runtime<any>(),\n        core.provideContext(context)\n      )\n  ))\n\n/** @internal */\nexport const provide = dual<\n  {\n    <RIn, E, ROut>(\n      that: Layer.Layer<ROut, E, RIn>\n    ): <RIn2, E2, ROut2>(\n      self: Layer.Layer<ROut2, E2, RIn2>\n    ) => Layer.Layer<ROut2, E | E2, RIn | Exclude<RIn2, ROut>>\n    <const Layers extends [Layer.Layer.Any, ...Array<Layer.Layer.Any>]>(\n      that: Layers\n    ): <A, E, R>(\n      self: Layer.Layer<A, E, R>\n    ) => Layer.Layer<\n      A,\n      E | { [k in keyof Layers]: Layer.Layer.Error<Layers[k]> }[number],\n      | { [k in keyof Layers]: Layer.Layer.Context<Layers[k]> }[number]\n      | Exclude<R, { [k in keyof Layers]: Layer.Layer.Success<Layers[k]> }[number]>\n    >\n  },\n  {\n    <RIn2, E2, ROut2, RIn, E, ROut>(\n      self: Layer.Layer<ROut2, E2, RIn2>,\n      that: Layer.Layer<ROut, E, RIn>\n    ): Layer.Layer<ROut2, E | E2, RIn | Exclude<RIn2, ROut>>\n    <A, E, R, const Layers extends [Layer.Layer.Any, ...Array<Layer.Layer.Any>]>(\n      self: Layer.Layer<A, E, R>,\n      that: Layers\n    ): Layer.Layer<\n      A,\n      E | { [k in keyof Layers]: Layer.Layer.Error<Layers[k]> }[number],\n      | { [k in keyof Layers]: Layer.Layer.Context<Layers[k]> }[number]\n      | Exclude<R, { [k in keyof Layers]: Layer.Layer.Success<Layers[k]> }[number]>\n    >\n  }\n>(2, (\n  self: Layer.Layer.Any,\n  that: Layer.Layer.Any | ReadonlyArray<Layer.Layer.Any>\n) =>\n  suspend(() => {\n    const provideTo = Object.create(proto)\n    provideTo._op_layer = OpCodes.OP_PROVIDE\n    provideTo.first = Object.create(proto, {\n      _op_layer: { value: OpCodes.OP_PROVIDE_MERGE, enumerable: true },\n      first: { value: context(), enumerable: true },\n      second: { value: Array.isArray(that) ? mergeAll(...that as any) : that },\n      zipK: { value: (a: Context.Context<any>, b: Context.Context<any>) => pipe(a, Context.merge(b)) }\n    })\n    provideTo.second = self\n    return provideTo\n  }))\n\n/** @internal */\nexport const provideMerge = dual<\n  <RIn, E, ROut>(\n    self: Layer.Layer<ROut, E, RIn>\n  ) => <RIn2, E2, ROut2>(\n    that: Layer.Layer<ROut2, E2, RIn2>\n  ) => Layer.Layer<ROut | ROut2, E2 | E, RIn | Exclude<RIn2, ROut>>,\n  <RIn2, E2, ROut2, RIn, E, ROut>(\n    that: Layer.Layer<ROut2, E2, RIn2>,\n    self: Layer.Layer<ROut, E, RIn>\n  ) => Layer.Layer<ROut | ROut2, E2 | E, RIn | Exclude<RIn2, ROut>>\n>(2, <RIn2, E2, ROut2, RIn, E, ROut>(that: Layer.Layer<ROut2, E2, RIn2>, self: Layer.Layer<ROut, E, RIn>) => {\n  const zipWith = Object.create(proto)\n  zipWith._op_layer = OpCodes.OP_PROVIDE_MERGE\n  zipWith.first = self\n  zipWith.second = provide(that, self)\n  zipWith.zipK = (a: Context.Context<ROut>, b: Context.Context<ROut2>): Context.Context<ROut | ROut2> => {\n    return pipe(a, Context.merge(b))\n  }\n  return zipWith\n})\n\n/** @internal */\nexport const zipWith = dual<\n  <B, E2, R2, A, C>(\n    that: Layer.Layer<B, E2, R2>,\n    f: (a: Context.Context<A>, b: Context.Context<B>) => Context.Context<C>\n  ) => <E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<C, E | E2, R | R2>,\n  <A, E, R, B, E2, R2, C>(\n    self: Layer.Layer<A, E, R>,\n    that: Layer.Layer<B, E2, R2>,\n    f: (a: Context.Context<A>, b: Context.Context<B>) => Context.Context<C>\n  ) => Layer.Layer<C, E | E2, R | R2>\n>(3, (self, that, f) =>\n  suspend(() => {\n    const zipWith = Object.create(proto)\n    zipWith._op_layer = OpCodes.OP_ZIP_WITH\n    zipWith.first = self\n    zipWith.second = that\n    zipWith.zipK = f\n    return zipWith\n  }))\n\n/** @internal */\nexport const unwrapEffect = <A, E1, R1, E, R>(\n  self: Effect.Effect<Layer.Layer<A, E1, R1>, E, R>\n): Layer.Layer<A, E | E1, R | R1> => {\n  const tag = Context.GenericTag<Layer.Layer<A, E1, R1>>(\"effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>\")\n  return flatMap(fromEffect(tag, self), (context) => Context.get(context, tag))\n}\n\n/** @internal */\nexport const unwrapScoped = <A, E1, R1, E, R>(\n  self: Effect.Effect<Layer.Layer<A, E1, R1>, E, R>\n): Layer.Layer<A, E | E1, R1 | Exclude<R, Scope.Scope>> => {\n  const tag = Context.GenericTag<Layer.Layer<A, E1, R1>>(\"effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>\")\n  return flatMap(scoped(tag, self), (context) => Context.get(context, tag))\n}\n\n// -----------------------------------------------------------------------------\n// logging\n// -----------------------------------------------------------------------------\n\nexport const annotateLogs = dual<\n  {\n    (key: string, value: unknown): <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, R>\n    (\n      values: Record<string, unknown>\n    ): <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, R>\n  },\n  {\n    <A, E, R>(self: Layer.Layer<A, E, R>, key: string, value: unknown): Layer.Layer<A, E, R>\n    <A, E, R>(self: Layer.Layer<A, E, R>, values: Record<string, unknown>): Layer.Layer<A, E, R>\n  }\n>(\n  (args) => isLayer(args[0]),\n  function<A, E, R>() {\n    const args = arguments\n    return fiberRefLocallyWith(\n      args[0] as Layer.Layer<A, E, R>,\n      core.currentLogAnnotations,\n      typeof args[1] === \"string\"\n        ? HashMap.set(args[1], args[2])\n        : (annotations) =>\n          Object.entries(args[1] as Record<string, unknown>).reduce(\n            (acc, [key, value]) => HashMap.set(acc, key, value),\n            annotations\n          )\n    )\n  }\n)\n\n// -----------------------------------------------------------------------------\n// tracing\n// -----------------------------------------------------------------------------\n\nexport const annotateSpans = dual<\n  {\n    (key: string, value: unknown): <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, R>\n    (\n      values: Record<string, unknown>\n    ): <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, R>\n  },\n  {\n    <A, E, R>(self: Layer.Layer<A, E, R>, key: string, value: unknown): Layer.Layer<A, E, R>\n    <A, E, R>(self: Layer.Layer<A, E, R>, values: Record<string, unknown>): Layer.Layer<A, E, R>\n  }\n>(\n  (args) => isLayer(args[0]),\n  function<A, E, R>() {\n    const args = arguments\n    return fiberRefLocallyWith(\n      args[0] as Layer.Layer<A, E, R>,\n      core.currentTracerSpanAnnotations,\n      typeof args[1] === \"string\"\n        ? HashMap.set(args[1], args[2])\n        : (annotations) =>\n          Object.entries(args[1] as Record<string, unknown>).reduce(\n            (acc, [key, value]) => HashMap.set(acc, key, value),\n            annotations\n          )\n    )\n  }\n)\n\n/** @internal */\nexport const withSpan: {\n  (\n    name: string,\n    options?: Tracer.SpanOptions & {\n      readonly onEnd?:\n        | ((span: Tracer.Span, exit: Exit.Exit<unknown, unknown>) => Effect.Effect<void>)\n        | undefined\n    }\n  ): <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, Exclude<R, Tracer.ParentSpan>>\n  <A, E, R>(\n    self: Layer.Layer<A, E, R>,\n    name: string,\n    options?: Tracer.SpanOptions & {\n      readonly onEnd?:\n        | ((span: Tracer.Span, exit: Exit.Exit<unknown, unknown>) => Effect.Effect<void>)\n        | undefined\n    }\n  ): Layer.Layer<A, E, Exclude<R, Tracer.ParentSpan>>\n} = function() {\n  const dataFirst = typeof arguments[0] !== \"string\"\n  const name = dataFirst ? arguments[1] : arguments[0]\n  const options = tracer.addSpanStackTrace(dataFirst ? arguments[2] : arguments[1]) as Tracer.SpanOptions & {\n    readonly onEnd?:\n      | ((span: Tracer.Span, exit: Exit.Exit<unknown, unknown>) => Effect.Effect<void>)\n      | undefined\n  }\n  if (dataFirst) {\n    const self = arguments[0]\n    return unwrapScoped(\n      core.map(\n        options?.onEnd\n          ? core.tap(\n            fiberRuntime.makeSpanScoped(name, options),\n            (span) => fiberRuntime.addFinalizer((exit) => options.onEnd!(span, exit))\n          )\n          : fiberRuntime.makeSpanScoped(name, options),\n        (span) => withParentSpan(self, span)\n      )\n    )\n  }\n  return (self: Layer.Layer<any, any, any>) =>\n    unwrapScoped(\n      core.map(\n        options?.onEnd\n          ? core.tap(\n            fiberRuntime.makeSpanScoped(name, options),\n            (span) => fiberRuntime.addFinalizer((exit) => options.onEnd!(span, exit))\n          )\n          : fiberRuntime.makeSpanScoped(name, options),\n        (span) => withParentSpan(self, span)\n      )\n    )\n} as any\n\n/** @internal */\nexport const withParentSpan = dual<\n  (\n    span: Tracer.AnySpan\n  ) => <A, E, R>(self: Layer.Layer<A, E, R>) => Layer.Layer<A, E, Exclude<R, Tracer.ParentSpan>>,\n  <A, E, R>(self: Layer.Layer<A, E, R>, span: Tracer.AnySpan) => Layer.Layer<A, E, Exclude<R, Tracer.ParentSpan>>\n>(2, (self, span) => provide(self, succeedContext(Context.make(tracer.spanTag, span))))\n\n// circular with Effect\n\nconst provideSomeLayer = dual<\n  <A2, E2, R2>(\n    layer: Layer.Layer<A2, E2, R2>\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2, R2 | Exclude<R, A2>>,\n  <A, E, R, A2, E2, R2>(\n    self: Effect.Effect<A, E, R>,\n    layer: Layer.Layer<A2, E2, R2>\n  ) => Effect.Effect<A, E | E2, R2 | Exclude<R, A2>>\n>(2, (self, layer) =>\n  fiberRuntime.scopedWith((scope) =>\n    core.flatMap(\n      buildWithScope(layer, scope),\n      (context) => core.provideSomeContext(self, context)\n    )\n  ))\n\nconst provideSomeRuntime = dual<\n  <R>(context: Runtime.Runtime<R>) => <A, E, R1>(self: Effect.Effect<A, E, R1>) => Effect.Effect<A, E, Exclude<R1, R>>,\n  <A, E, R1, R>(self: Effect.Effect<A, E, R1>, context: Runtime.Runtime<R>) => Effect.Effect<A, E, Exclude<R1, R>>\n>(2, (self, rt) => {\n  const patchRefs = FiberRefsPatch.diff(runtime.defaultRuntime.fiberRefs, rt.fiberRefs)\n  const patchFlags = runtimeFlags.diff(runtime.defaultRuntime.runtimeFlags, rt.runtimeFlags)\n  return core.uninterruptibleMask((restore) =>\n    core.withFiberRuntime((fiber) => {\n      const oldContext = fiber.getFiberRef(core.currentContext)\n      const oldRefs = fiber.getFiberRefs()\n      const newRefs = FiberRefsPatch.patch(fiber.id(), oldRefs)(patchRefs)\n      const oldFlags = fiber.currentRuntimeFlags\n      const newFlags = runtimeFlags.patch(patchFlags)(oldFlags)\n      const rollbackRefs = FiberRefsPatch.diff(newRefs, oldRefs)\n      const rollbackFlags = runtimeFlags.diff(newFlags, oldFlags)\n      fiber.setFiberRefs(newRefs)\n      fiber.currentRuntimeFlags = newFlags\n      return fiberRuntime.ensuring(\n        core.provideSomeContext(restore(self), Context.merge(oldContext, rt.context)),\n        core.withFiberRuntime((fiber) => {\n          fiber.setFiberRefs(FiberRefsPatch.patch(fiber.id(), fiber.getFiberRefs())(rollbackRefs))\n          fiber.currentRuntimeFlags = runtimeFlags.patch(rollbackFlags)(fiber.currentRuntimeFlags)\n          return core.void\n        })\n      )\n    })\n  )\n})\n\n/** @internal */\nexport const effect_provide = dual<\n  {\n    <const Layers extends [Layer.Layer.Any, ...Array<Layer.Layer.Any>]>(\n      layers: Layers\n    ): <A, E, R>(\n      self: Effect.Effect<A, E, R>\n    ) => Effect.Effect<\n      A,\n      E | { [k in keyof Layers]: Layer.Layer.Error<Layers[k]> }[number],\n      | { [k in keyof Layers]: Layer.Layer.Context<Layers[k]> }[number]\n      | Exclude<R, { [k in keyof Layers]: Layer.Layer.Success<Layers[k]> }[number]>\n    >\n    <ROut, E2, RIn>(\n      layer: Layer.Layer<ROut, E2, RIn>\n    ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2, RIn | Exclude<R, ROut>>\n    <R2>(\n      context: Context.Context<R2>\n    ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, Exclude<R, R2>>\n    <R2>(\n      runtime: Runtime.Runtime<R2>\n    ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, Exclude<R, R2>>\n    <E2, R2>(\n      managedRuntime: ManagedRuntime.ManagedRuntime<R2, E2>\n    ): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E | E2, Exclude<R, R2>>\n  },\n  {\n    <A, E, R, const Layers extends [Layer.Layer.Any, ...Array<Layer.Layer.Any>]>(\n      self: Effect.Effect<A, E, R>,\n      layers: Layers\n    ): Effect.Effect<\n      A,\n      E | { [k in keyof Layers]: Layer.Layer.Error<Layers[k]> }[number],\n      | { [k in keyof Layers]: Layer.Layer.Context<Layers[k]> }[number]\n      | Exclude<R, { [k in keyof Layers]: Layer.Layer.Success<Layers[k]> }[number]>\n    >\n    <A, E, R, ROut, E2, RIn>(\n      self: Effect.Effect<A, E, R>,\n      layer: Layer.Layer<ROut, E2, RIn>\n    ): Effect.Effect<A, E | E2, RIn | Exclude<R, ROut>>\n    <A, E, R, R2>(\n      self: Effect.Effect<A, E, R>,\n      context: Context.Context<R2>\n    ): Effect.Effect<A, E, Exclude<R, R2>>\n    <A, E, R, R2>(\n      self: Effect.Effect<A, E, R>,\n      runtime: Runtime.Runtime<R2>\n    ): Effect.Effect<A, E, Exclude<R, R2>>\n    <A, E, E2, R, R2>(\n      self: Effect.Effect<A, E, R>,\n      managedRuntime: ManagedRuntime.ManagedRuntime<R2, E2>\n    ): Effect.Effect<A, E | E2, Exclude<R, R2>>\n  }\n>(\n  2,\n  <A, E, R, ROut>(\n    self: Effect.Effect<A, E, R>,\n    source:\n      | Layer.Layer<ROut, any, any>\n      | Context.Context<ROut>\n      | Runtime.Runtime<ROut>\n      | ManagedRuntime.ManagedRuntime<ROut, any>\n      | Array<Layer.Layer.Any>\n  ): Effect.Effect<any, any, Exclude<R, ROut>> => {\n    if (Array.isArray(source)) {\n      // @ts-expect-error\n      return provideSomeLayer(self, mergeAll(...source))\n    } else if (isLayer(source)) {\n      return provideSomeLayer(self, source as Layer.Layer<ROut, any, any>)\n    } else if (Context.isContext(source)) {\n      return core.provideSomeContext(self, source)\n    } else if (circularManagedRuntime.TypeId in source) {\n      return core.flatMap(\n        (source as ManagedRuntime.ManagedRuntime<ROut, any>).runtimeEffect,\n        (rt) => provideSomeRuntime(self, rt)\n      )\n    } else {\n      return provideSomeRuntime(self, source as Runtime.Runtime<ROut>)\n    }\n  }\n)\n"],"names":["Cause","Clock","Context","Duration","FiberRefsPatch","dual","pipe","HashMap","pipeArguments","hasProperty","ScheduleDecision","Intervals","Scope","effect","core","circular","fiberRuntime","circularManagedRuntime","EffectOpCodes","OpCodes","ref","runtime","runtimeFlags","synchronized","tracer","LayerSymbolKey","LayerTypeId","Symbol","for","layerVariance","_RIn","_","_E","_ROut","proto","arguments","MemoMapTypeIdKey","MemoMapTypeId","isLayer","u","isFresh","self","_op_layer","OP_FRESH","MemoMapImpl","constructor","getOrElseMemoize","layer","scope","modifyEffect","map","inMap","get","undefined","acquire","release","cached","flatMap","patch","b","patchFiberRefs","as","onExit","exitMatch","onFailure","void","onSuccess","scopeAddFinalizerExit","succeed","make","observers","deferredMake","deferred","finalizerRef","resource","uninterruptibleMask","restore","scopeMake","innerScope","makeBuilder","f","diffFiberRefs","exit","_tag","OP_FAILURE","deferredFailCause","effect_instruction_i0","zipRight","scopeClose","failCause","OP_SUCCESS","set","whenEffect","modify","n","asVoid","update","sync","delete","finalizer","deferredSucceed","memoized","deferredAwait","exitMatchEffect","flatten","makeMemoMap","suspend","makeSynchronized","Map","unsafeMakeMemoMap","unsafeMakeSynchronized","build","scopeWith","buildWithScope","memoMap","run","buildWithMemoMap","inMemoMap","op","matchCauseEffect","cause","failureK","value","successK","first","env","second","provideContext","scopeExtend","evaluate","zipWith","zipK","zipWithOptions","concurrent","catchAll","match","succeedContext","catchAllCause","matchCause","die","defect","dieSync","failCauseSync","discard","empty","context","fromEffectContext","extendScope","Object","create","OP_EXTEND_SCOPE","fail","error","failSync","tag","fresh","fromEffect","a","tagFirst","isTag","service","fromEffectDiscard","OP_FROM_EFFECT","fiberRefLocally","locallyEffect","locally","fiberRefLocallyWith","fiberRefLocallyScoped","scopedDiscard","fiberRefLocallyScopedWith","fromFunction","tagA","tagB","launch","scopedEffect","never","mapError","fold","OP_FOLD","failureOrCause","left","right","memoize","merge","that","mergeAll","layers","final","i","length","orDie","orElse","passthrough","project","unsafeGet","retry","schedule","stateTag","GenericTag","state","initial","retryLoop","retryUpdate","currentTimeMillis","now","step","decision","isDone","sleep","millis","start","intervals","scoped","scopedContext","OP_SCOPED","acquireRelease","close","OP_SUSPEND","syncContext","tap","tapError","e","tapErrorCause","toRuntime","toRuntimeWithMemoMap","provide","provideTo","OP_PROVIDE","OP_PROVIDE_MERGE","enumerable","Array","isArray","provideMerge","OP_ZIP_WITH","unwrapEffect","unwrapScoped","annotateLogs","args","currentLogAnnotations","annotations","entries","reduce","acc","key","annotateSpans","currentTracerSpanAnnotations","withSpan","dataFirst","name","options","addSpanStackTrace","onEnd","makeSpanScoped","span","addFinalizer","withParentSpan","spanTag","provideSomeLayer","scopedWith","provideSomeContext","provideSomeRuntime","rt","patchRefs","diff","defaultRuntime","fiberRefs","patchFlags","withFiberRuntime","fiber","oldContext","getFiberRef","currentContext","oldRefs","getFiberRefs","newRefs","id","oldFlags","currentRuntimeFlags","newFlags","rollbackRefs","rollbackFlags","setFiberRefs","ensuring","effect_provide","source","isContext","TypeId","runtimeEffect"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14925, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14931, "column": 0}, "map": {"version":3,"file":"console.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/console.ts"],"sourcesContent":["import type * as Console from \"../Console.js\"\nimport * as Context from \"../Context.js\"\nimport type * as Effect from \"../Effect.js\"\nimport { dual } from \"../Function.js\"\nimport type * as Layer from \"../Layer.js\"\nimport type * as Scope from \"../Scope.js\"\nimport * as core from \"./core.js\"\nimport * as defaultServices from \"./defaultServices.js\"\nimport * as defaultConsole from \"./defaultServices/console.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\nimport * as layer from \"./layer.js\"\n\n/** @internal */\nexport const console: Effect.Effect<Console.Console> = core.map(\n  core.fiberRefGet(defaultServices.currentServices),\n  Context.get(defaultConsole.consoleTag)\n)\n\n/** @internal */\nexport const consoleWith = <A, E, R>(f: (console: Console.Console) => Effect.Effect<A, E, R>) =>\n  core.fiberRefGetWith(\n    defaultServices.currentServices,\n    (services) => f(Context.get(services, defaultConsole.consoleTag))\n  )\n\n/** @internal */\nexport const withConsole = dual<\n  <C extends Console.Console>(console: C) => <A, E, R>(effect: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R, C extends Console.Console>(effect: Effect.Effect<A, E, R>, console: C) => Effect.Effect<A, E, R>\n>(2, (effect, value) =>\n  core.fiberRefLocallyWith(\n    effect,\n    defaultServices.currentServices,\n    Context.add(defaultConsole.consoleTag, value)\n  ))\n\n/** @internal */\nexport const withConsoleScoped = <A extends Console.Console>(console: A): Effect.Effect<void, never, Scope.Scope> =>\n  fiberRuntime.fiberRefLocallyScopedWith(\n    defaultServices.currentServices,\n    Context.add(defaultConsole.consoleTag, console)\n  )\n\n/** @internal */\nexport const setConsole = <A extends Console.Console>(console: A): Layer.Layer<never> =>\n  layer.scopedDiscard(\n    fiberRuntime.fiberRefLocallyScopedWith(\n      defaultServices.currentServices,\n      Context.add(defaultConsole.consoleTag, console)\n    )\n  )\n\n/** @internal */\nexport const assert = (condition: boolean, ...args: ReadonlyArray<any>) =>\n  consoleWith((_) => _.assert(condition, ...args))\n\n/** @internal */\nexport const clear = consoleWith((_) => _.clear)\n\n/** @internal */\nexport const count = (label?: string) => consoleWith((_) => _.count(label))\n\n/** @internal */\nexport const countReset = (label?: string) => consoleWith((_) => _.countReset(label))\n\n/** @internal */\nexport const debug = (...args: ReadonlyArray<any>) => consoleWith((_) => _.debug(...args))\n\n/** @internal */\nexport const dir = (item: any, options?: any) => consoleWith((_) => _.dir(item, options))\n\n/** @internal */\nexport const dirxml = (...args: ReadonlyArray<any>) => consoleWith((_) => _.dirxml(...args))\n\n/** @internal */\nexport const error = (...args: ReadonlyArray<any>) => consoleWith((_) => _.error(...args))\n\n/** @internal */\nexport const group = (options?: {\n  label?: string | undefined\n  collapsed?: boolean | undefined\n}) =>\n  consoleWith((_) =>\n    fiberRuntime.acquireRelease(\n      _.group(options),\n      () => _.groupEnd\n    )\n  )\n\n/** @internal */\nexport const info = (...args: ReadonlyArray<any>) => consoleWith((_) => _.info(...args))\n\n/** @internal */\nexport const log = (...args: ReadonlyArray<any>) => consoleWith((_) => _.log(...args))\n\n/** @internal */\nexport const table = (tabularData: any, properties?: ReadonlyArray<string>) =>\n  consoleWith((_) => _.table(tabularData, properties))\n\n/** @internal */\nexport const time = (label?: string) =>\n  consoleWith((_) =>\n    fiberRuntime.acquireRelease(\n      _.time(label),\n      () => _.timeEnd(label)\n    )\n  )\n\n/** @internal */\nexport const timeLog = (label?: string, ...args: ReadonlyArray<any>) => consoleWith((_) => _.timeLog(label, ...args))\n\n/** @internal */\nexport const trace = (...args: ReadonlyArray<any>) => consoleWith((_) => _.trace(...args))\n\n/** @internal */\nexport const warn = (...args: ReadonlyArray<any>) => consoleWith((_) => _.warn(...args))\n\n/** @internal */\nexport const withGroup = dual<\n  (\n    options?: {\n      readonly label?: string | undefined\n      readonly collapsed?: boolean | undefined\n    }\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    options?: {\n      readonly label?: string | undefined\n      readonly collapsed?: boolean | undefined\n    }\n  ) => Effect.Effect<A, E, R>\n>((args) => core.isEffect(args[0]), (self, options) =>\n  consoleWith((_) =>\n    core.acquireUseRelease(\n      _.group(options),\n      () => self,\n      () => _.groupEnd\n    )\n  ))\n\n/** @internal */\nexport const withTime = dual<\n  (label?: string) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, label?: string) => Effect.Effect<A, E, R>\n>((args) => core.isEffect(args[0]), (self, label) =>\n  consoleWith((_) =>\n    core.acquireUseRelease(\n      _.time(label),\n      () => self,\n      () => _.timeEnd(label)\n    )\n  ))\n"],"names":["Context","dual","core","defaultServices","defaultConsole","fiberRuntime","layer","console","map","fiberRefGet","currentServices","get","consoleTag","consoleWith","f","fiberRefGetWith","services","withConsole","effect","value","fiberRefLocallyWith","add","withConsoleScoped","fiberRefLocallyScopedWith","setConsole","scopedDiscard","assert","condition","args","_","clear","count","label","countReset","debug","dir","item","options","dirxml","error","group","acquireRelease","groupEnd","info","log","table","tabularData","properties","time","timeEnd","timeLog","trace","warn","withGroup","isEffect","self","acquireUseRelease","withTime"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14993, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 14999, "column": 0}, "map": {"version":3,"file":"cache.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/cache.ts"],"sourcesContent":["import type * as Cache from \"../Cache.js\"\nimport type * as Clock from \"../Clock.js\"\nimport * as Context from \"../Context.js\"\nimport * as Deferred from \"../Deferred.js\"\nimport * as Duration from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Either from \"../Either.js\"\nimport * as Equal from \"../Equal.js\"\nimport * as Exit from \"../Exit.js\"\nimport type * as FiberId from \"../FiberId.js\"\nimport { pipe } from \"../Function.js\"\nimport * as Hash from \"../Hash.js\"\nimport * as MutableHashMap from \"../MutableHashMap.js\"\nimport * as MutableQueue from \"../MutableQueue.js\"\nimport * as MutableRef from \"../MutableRef.js\"\nimport * as Option from \"../Option.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport * as effect from \"./core-effect.js\"\nimport * as core from \"./core.js\"\nimport * as Data from \"./data.js\"\nimport { none } from \"./fiberId.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\n\n/**\n * A `MapValue` represents a value in the cache. A value may either be\n * `Pending` with a `Promise` that will contain the result of computing the\n * lookup function, when it is available, or `Complete` with an `Exit` value\n * that contains the result of computing the lookup function.\n *\n * @internal\n */\nexport type MapValue<Key, Value, Error> =\n  | Complete<Key, Value, Error>\n  | Pending<Key, Value, Error>\n  | Refreshing<Key, Value, Error>\n\n/** @internal */\nexport interface Complete<out Key, out Value, out Error> {\n  readonly _tag: \"Complete\"\n  readonly key: MapKey<Key>\n  readonly exit: Exit.Exit<Value, Error>\n  readonly entryStats: Cache.EntryStats\n  readonly timeToLiveMillis: number\n}\n\n/** @internal */\nexport interface Pending<out Key, in out Value, in out Error> {\n  readonly _tag: \"Pending\"\n  readonly key: MapKey<Key>\n  readonly deferred: Deferred.Deferred<Value, Error>\n}\n\n/** @internal */\nexport interface Refreshing<out Key, in out Value, in out Error> {\n  readonly _tag: \"Refreshing\"\n  readonly deferred: Deferred.Deferred<Value, Error>\n  readonly complete: Complete<Key, Value, Error>\n}\n\n/** @internal */\nexport const complete = <Key, Value, Error>(\n  key: MapKey<Key>,\n  exit: Exit.Exit<Value, Error>,\n  entryStats: Cache.EntryStats,\n  timeToLiveMillis: number\n): MapValue<Key, Value, Error> =>\n  Data.struct({\n    _tag: \"Complete\" as const,\n    key,\n    exit,\n    entryStats,\n    timeToLiveMillis\n  })\n\n/** @internal */\nexport const pending = <Key, Value, Error>(\n  key: MapKey<Key>,\n  deferred: Deferred.Deferred<Value, Error>\n): MapValue<Key, Value, Error> =>\n  Data.struct({\n    _tag: \"Pending\" as const,\n    key,\n    deferred\n  })\n\n/** @internal */\nexport const refreshing = <Key, Value, Error>(\n  deferred: Deferred.Deferred<Value, Error>,\n  complete: Complete<Key, Value, Error>\n): MapValue<Key, Value, Error> =>\n  Data.struct({\n    _tag: \"Refreshing\" as const,\n    deferred,\n    complete\n  })\n\n/** @internal */\nexport const MapKeyTypeId = Symbol.for(\"effect/Cache/MapKey\")\n\n/** @internal */\nexport type MapKeyTypeId = typeof MapKeyTypeId\n\n/**\n * A `MapKey` represents a key in the cache. It contains mutable references\n * to the previous key and next key in the `KeySet` to support an efficient\n * implementation of a sorted set of keys.\n *\n * @internal\n */\nexport interface MapKey<out K> extends Equal.Equal {\n  readonly [MapKeyTypeId]: MapKeyTypeId\n  readonly current: K\n  previous: MapKey<K> | undefined // mutable by design\n  next: MapKey<K> | undefined // mutable by design\n}\n\nclass MapKeyImpl<out K> implements MapKey<K> {\n  readonly [MapKeyTypeId]: MapKeyTypeId = MapKeyTypeId\n  previous: MapKey<K> | undefined = undefined\n  next: MapKey<K> | undefined = undefined\n  constructor(readonly current: K) {}\n  [Hash.symbol](): number {\n    return pipe(\n      Hash.hash(this.current),\n      Hash.combine(Hash.hash(this.previous)),\n      Hash.combine(Hash.hash(this.next)),\n      Hash.cached(this)\n    )\n  }\n  [Equal.symbol](that: unknown): boolean {\n    if (this === that) {\n      return true\n    }\n    return isMapKey(that) &&\n      Equal.equals(this.current, that.current) &&\n      Equal.equals(this.previous, that.previous) &&\n      Equal.equals(this.next, that.next)\n  }\n}\n\n/** @internal */\nexport const makeMapKey = <K>(current: K): MapKey<K> => new MapKeyImpl(current)\n\n/** @internal */\nexport const isMapKey = (u: unknown): u is MapKey<unknown> => hasProperty(u, MapKeyTypeId)\n\n/**\n * A `KeySet` is a sorted set of keys in the cache ordered by last access.\n * For efficiency, the set is implemented in terms of a doubly linked list\n * and is not safe for concurrent access.\n *\n * @internal\n */\nexport interface KeySet<in out K> {\n  head: MapKey<K> | undefined // mutable by design\n  tail: MapKey<K> | undefined // mutable by design\n  /**\n   * Adds the specified key to the set.\n   */\n  add(key: MapKey<K>): void\n  /**\n   * Removes the lowest priority key from the set.\n   */\n  remove(): MapKey<K> | undefined\n}\n\nclass KeySetImpl<in out K> implements KeySet<K> {\n  head: MapKey<K> | undefined = undefined\n  tail: MapKey<K> | undefined = undefined\n  add(key: MapKey<K>): void {\n    if (key !== this.tail) {\n      if (this.tail === undefined) {\n        this.head = key\n        this.tail = key\n      } else {\n        const previous = key.previous\n        const next = key.next\n        if (next !== undefined) {\n          key.next = undefined\n          if (previous !== undefined) {\n            previous.next = next\n            next.previous = previous\n          } else {\n            this.head = next\n            this.head.previous = undefined\n          }\n        }\n        this.tail.next = key\n        key.previous = this.tail\n        this.tail = key\n      }\n    }\n  }\n  remove(): MapKey<K> | undefined {\n    const key = this.head\n    if (key !== undefined) {\n      const next = key.next\n      if (next !== undefined) {\n        key.next = undefined\n        this.head = next\n        this.head.previous = undefined\n      } else {\n        this.head = undefined\n        this.tail = undefined\n      }\n    }\n    return key\n  }\n}\n\n/** @internal */\nexport const makeKeySet = <K>(): KeySet<K> => new KeySetImpl<K>()\n\n/**\n * The `CacheState` represents the mutable state underlying the cache.\n *\n * @internal\n */\nexport interface CacheState<in out Key, in out Value, in out Error> {\n  map: MutableHashMap.MutableHashMap<Key, MapValue<Key, Value, Error>> // mutable by design\n  keys: KeySet<Key> // mutable by design\n  accesses: MutableQueue.MutableQueue<MapKey<Key>> // mutable by design\n  updating: MutableRef.MutableRef<boolean> // mutable by design\n  hits: number // mutable by design\n  misses: number // mutable by design\n}\n\n/**\n * Constructs a new `CacheState` from the specified values.\n *\n * @internal\n */\nexport const makeCacheState = <Key, Value, Error>(\n  map: MutableHashMap.MutableHashMap<Key, MapValue<Key, Value, Error>>,\n  keys: KeySet<Key>,\n  accesses: MutableQueue.MutableQueue<MapKey<Key>>,\n  updating: MutableRef.MutableRef<boolean>,\n  hits: number,\n  misses: number\n): CacheState<Key, Value, Error> => ({\n  map,\n  keys,\n  accesses,\n  updating,\n  hits,\n  misses\n})\n\n/**\n * Constructs an initial cache state.\n *\n * @internal\n */\nexport const initialCacheState = <Key, Value, Error>(): CacheState<Key, Value, Error> =>\n  makeCacheState(\n    MutableHashMap.empty(),\n    makeKeySet(),\n    MutableQueue.unbounded(),\n    MutableRef.make(false),\n    0,\n    0\n  )\n\n/** @internal */\nconst CacheSymbolKey = \"effect/Cache\"\n\n/** @internal */\nexport const CacheTypeId: Cache.CacheTypeId = Symbol.for(\n  CacheSymbolKey\n) as Cache.CacheTypeId\n\nconst cacheVariance = {\n  /* c8 ignore next */\n  _Key: (_: any) => _,\n  /* c8 ignore next */\n  _Error: (_: never) => _,\n  /* c8 ignore next */\n  _Value: (_: any) => _\n}\n\n/** @internal */\nconst ConsumerCacheSymbolKey = \"effect/ConsumerCache\"\n\n/** @internal */\nexport const ConsumerCacheTypeId: Cache.ConsumerCacheTypeId = Symbol.for(\n  ConsumerCacheSymbolKey\n) as Cache.ConsumerCacheTypeId\n\nconst consumerCacheVariance = {\n  /* c8 ignore next */\n  _Key: (_: any) => _,\n  /* c8 ignore next */\n  _Error: (_: never) => _,\n  /* c8 ignore next */\n  _Value: (_: never) => _\n}\n\n/** @internal */\nexport const makeCacheStats = (\n  options: {\n    readonly hits: number\n    readonly misses: number\n    readonly size: number\n  }\n): Cache.CacheStats => options\n\n/** @internal */\nexport const makeEntryStats = (loadedMillis: number): Cache.EntryStats => ({\n  loadedMillis\n})\n\nclass CacheImpl<in out Key, in out Value, in out Error> implements Cache.Cache<Key, Value, Error> {\n  readonly [CacheTypeId] = cacheVariance\n  readonly [ConsumerCacheTypeId] = consumerCacheVariance\n  readonly cacheState: CacheState<Key, Value, Error>\n  constructor(\n    readonly capacity: number,\n    readonly context: Context.Context<any>,\n    readonly fiberId: FiberId.FiberId,\n    readonly lookup: Cache.Lookup<Key, Value, Error, any>,\n    readonly timeToLive: (exit: Exit.Exit<Value, Error>) => Duration.DurationInput\n  ) {\n    this.cacheState = initialCacheState()\n  }\n\n  get(key: Key): Effect.Effect<Value, Error> {\n    return core.map(this.getEither(key), Either.merge)\n  }\n\n  get cacheStats(): Effect.Effect<Cache.CacheStats> {\n    return core.sync(() =>\n      makeCacheStats({\n        hits: this.cacheState.hits,\n        misses: this.cacheState.misses,\n        size: MutableHashMap.size(this.cacheState.map)\n      })\n    )\n  }\n\n  getOption(key: Key): Effect.Effect<Option.Option<Value>, Error> {\n    return core.suspend(() =>\n      Option.match(MutableHashMap.get(this.cacheState.map, key), {\n        onNone: () => {\n          const mapKey = makeMapKey(key)\n          this.trackAccess(mapKey)\n          this.trackMiss()\n          return core.succeed(Option.none<Value>())\n        },\n        onSome: (value) => this.resolveMapValue(value)\n      })\n    )\n  }\n\n  getOptionComplete(key: Key): Effect.Effect<Option.Option<Value>> {\n    return core.suspend(() =>\n      Option.match(MutableHashMap.get(this.cacheState.map, key), {\n        onNone: () => {\n          const mapKey = makeMapKey(key)\n          this.trackAccess(mapKey)\n          this.trackMiss()\n          return core.succeed(Option.none<Value>())\n        },\n        onSome: (value) => this.resolveMapValue(value, true) as Effect.Effect<Option.Option<Value>>\n      })\n    )\n  }\n\n  contains(key: Key): Effect.Effect<boolean> {\n    return core.sync(() => MutableHashMap.has(this.cacheState.map, key))\n  }\n\n  entryStats(key: Key): Effect.Effect<Option.Option<Cache.EntryStats>> {\n    return core.sync(() => {\n      const option = MutableHashMap.get(this.cacheState.map, key)\n      if (Option.isSome(option)) {\n        switch (option.value._tag) {\n          case \"Complete\": {\n            const loaded = option.value.entryStats.loadedMillis\n            return Option.some(makeEntryStats(loaded))\n          }\n          case \"Pending\": {\n            return Option.none()\n          }\n          case \"Refreshing\": {\n            const loaded = option.value.complete.entryStats.loadedMillis\n            return Option.some(makeEntryStats(loaded))\n          }\n        }\n      }\n      return Option.none()\n    })\n  }\n\n  getEither(key: Key): Effect.Effect<Either.Either<Value, Value>, Error> {\n    return core.suspend((): Effect.Effect<Either.Either<Value, Value>, Error> => {\n      const k = key\n      let mapKey: MapKey<Key> | undefined = undefined\n      let deferred: Deferred.Deferred<Value, Error> | undefined = undefined\n      let value = Option.getOrUndefined(MutableHashMap.get(this.cacheState.map, k))\n      if (value === undefined) {\n        deferred = Deferred.unsafeMake<Value, Error>(this.fiberId)\n        mapKey = makeMapKey(k)\n        if (MutableHashMap.has(this.cacheState.map, k)) {\n          value = Option.getOrUndefined(MutableHashMap.get(this.cacheState.map, k))\n        } else {\n          MutableHashMap.set(this.cacheState.map, k, pending(mapKey, deferred))\n        }\n      }\n      if (value === undefined) {\n        this.trackAccess(mapKey!)\n        this.trackMiss()\n        return core.map(this.lookupValueOf(key, deferred!), Either.right)\n      } else {\n        return core.flatMap(\n          this.resolveMapValue(value),\n          Option.match({\n            onNone: () => this.getEither(key),\n            onSome: (value) => core.succeed(Either.left(value))\n          })\n        )\n      }\n    })\n  }\n\n  invalidate(key: Key): Effect.Effect<void> {\n    return core.sync(() => {\n      MutableHashMap.remove(this.cacheState.map, key)\n    })\n  }\n\n  invalidateWhen(key: Key, when: (value: Value) => boolean): Effect.Effect<void> {\n    return core.sync(() => {\n      const value = MutableHashMap.get(this.cacheState.map, key)\n      if (Option.isSome(value) && value.value._tag === \"Complete\") {\n        if (value.value.exit._tag === \"Success\") {\n          if (when(value.value.exit.value)) {\n            MutableHashMap.remove(this.cacheState.map, key)\n          }\n        }\n      }\n    })\n  }\n\n  get invalidateAll(): Effect.Effect<void> {\n    return core.sync(() => {\n      this.cacheState.map = MutableHashMap.empty()\n    })\n  }\n\n  refresh(key: Key): Effect.Effect<void, Error> {\n    return effect.clockWith((clock) =>\n      core.suspend(() => {\n        const k = key\n        const deferred: Deferred.Deferred<Value, Error> = Deferred.unsafeMake(this.fiberId)\n        let value = Option.getOrUndefined(MutableHashMap.get(this.cacheState.map, k))\n        if (value === undefined) {\n          if (MutableHashMap.has(this.cacheState.map, k)) {\n            value = Option.getOrUndefined(MutableHashMap.get(this.cacheState.map, k))\n          } else {\n            MutableHashMap.set(this.cacheState.map, k, pending(makeMapKey(k), deferred))\n          }\n        }\n        if (value === undefined) {\n          return core.asVoid(this.lookupValueOf(key, deferred))\n        } else {\n          switch (value._tag) {\n            case \"Complete\": {\n              if (this.hasExpired(clock, value.timeToLiveMillis)) {\n                const found = Option.getOrUndefined(MutableHashMap.get(this.cacheState.map, k))\n                if (Equal.equals(found, value)) {\n                  MutableHashMap.remove(this.cacheState.map, k)\n                }\n                return core.asVoid(this.get(key))\n              }\n              // Only trigger the lookup if we're still the current value, `completedResult`\n              return pipe(\n                this.lookupValueOf(key, deferred),\n                effect.when(() => {\n                  const current = Option.getOrUndefined(MutableHashMap.get(this.cacheState.map, k))\n                  if (Equal.equals(current, value)) {\n                    const mapValue = refreshing(deferred, value as Complete<Key, Value, Error>)\n                    MutableHashMap.set(this.cacheState.map, k, mapValue)\n                    return true\n                  }\n                  return false\n                }),\n                core.asVoid\n              )\n            }\n            case \"Pending\": {\n              return Deferred.await(value.deferred)\n            }\n            case \"Refreshing\": {\n              return Deferred.await(value.deferred)\n            }\n          }\n        }\n      })\n    )\n  }\n\n  set(key: Key, value: Value): Effect.Effect<void> {\n    return effect.clockWith((clock) =>\n      core.sync(() => {\n        const now = clock.unsafeCurrentTimeMillis()\n        const k = key\n        const lookupResult = Exit.succeed(value)\n        const mapValue = complete(\n          makeMapKey(k),\n          lookupResult,\n          makeEntryStats(now),\n          now + Duration.toMillis(Duration.decode(this.timeToLive(lookupResult)))\n        )\n        MutableHashMap.set(\n          this.cacheState.map,\n          k,\n          mapValue as Complete<Key, Value, Error>\n        )\n      })\n    )\n  }\n\n  get size(): Effect.Effect<number> {\n    return core.sync(() => {\n      return MutableHashMap.size(this.cacheState.map)\n    })\n  }\n\n  get values(): Effect.Effect<Array<Value>> {\n    return core.sync(() => {\n      const values: Array<Value> = []\n      for (const entry of this.cacheState.map) {\n        if (entry[1]._tag === \"Complete\" && entry[1].exit._tag === \"Success\") {\n          values.push(entry[1].exit.value)\n        }\n      }\n      return values\n    })\n  }\n\n  get entries(): Effect.Effect<Array<[Key, Value]>> {\n    return core.sync(() => {\n      const values: Array<[Key, Value]> = []\n      for (const entry of this.cacheState.map) {\n        if (entry[1]._tag === \"Complete\" && entry[1].exit._tag === \"Success\") {\n          values.push([entry[0], entry[1].exit.value])\n        }\n      }\n      return values\n    })\n  }\n\n  get keys(): Effect.Effect<Array<Key>> {\n    return core.sync(() => {\n      const keys: Array<Key> = []\n      for (const entry of this.cacheState.map) {\n        if (entry[1]._tag === \"Complete\" && entry[1].exit._tag === \"Success\") {\n          keys.push(entry[0])\n        }\n      }\n      return keys\n    })\n  }\n\n  resolveMapValue(\n    value: MapValue<Key, Value, Error>,\n    ignorePending = false\n  ): Effect.Effect<Option.Option<Value>, Error> {\n    return effect.clockWith((clock) => {\n      switch (value._tag) {\n        case \"Complete\": {\n          this.trackAccess(value.key)\n          if (this.hasExpired(clock, value.timeToLiveMillis)) {\n            MutableHashMap.remove(this.cacheState.map, value.key.current)\n            return core.succeed(Option.none<Value>())\n          }\n          this.trackHit()\n          return core.map(value.exit, Option.some)\n        }\n        case \"Pending\": {\n          this.trackAccess(value.key)\n          this.trackHit()\n          if (ignorePending) {\n            return core.succeed(Option.none<Value>())\n          }\n          return core.map(Deferred.await(value.deferred), Option.some)\n        }\n        case \"Refreshing\": {\n          this.trackAccess(value.complete.key)\n          this.trackHit()\n          if (this.hasExpired(clock, value.complete.timeToLiveMillis)) {\n            if (ignorePending) {\n              return core.succeed(Option.none<Value>())\n            }\n            return core.map(Deferred.await(value.deferred), Option.some)\n          }\n          return core.map(value.complete.exit, Option.some)\n        }\n      }\n    })\n  }\n\n  trackHit(): void {\n    this.cacheState.hits = this.cacheState.hits + 1\n  }\n\n  trackMiss(): void {\n    this.cacheState.misses = this.cacheState.misses + 1\n  }\n\n  trackAccess(key: MapKey<Key>): void {\n    MutableQueue.offer(this.cacheState.accesses, key)\n    if (MutableRef.compareAndSet(this.cacheState.updating, false, true)) {\n      let loop = true\n      while (loop) {\n        const key = MutableQueue.poll(this.cacheState.accesses, MutableQueue.EmptyMutableQueue)\n        if (key === MutableQueue.EmptyMutableQueue) {\n          loop = false\n        } else {\n          this.cacheState.keys.add(key)\n        }\n      }\n      let size = MutableHashMap.size(this.cacheState.map)\n      loop = size > this.capacity\n      while (loop) {\n        const key = this.cacheState.keys.remove()\n        if (key !== undefined) {\n          if (MutableHashMap.has(this.cacheState.map, key.current)) {\n            MutableHashMap.remove(this.cacheState.map, key.current)\n            size = size - 1\n            loop = size > this.capacity\n          }\n        } else {\n          loop = false\n        }\n      }\n      MutableRef.set(this.cacheState.updating, false)\n    }\n  }\n\n  hasExpired(clock: Clock.Clock, timeToLiveMillis: number): boolean {\n    return clock.unsafeCurrentTimeMillis() > timeToLiveMillis\n  }\n\n  lookupValueOf(\n    input: Key,\n    deferred: Deferred.Deferred<Value, Error>\n  ): Effect.Effect<Value, Error> {\n    return effect.clockWith((clock) =>\n      core.suspend(() => {\n        const key = input\n        return pipe(\n          this.lookup(input),\n          core.provideContext(this.context),\n          core.exit,\n          core.flatMap((exit) => {\n            const now = clock.unsafeCurrentTimeMillis()\n            const stats = makeEntryStats(now)\n            const value = complete(\n              makeMapKey(key),\n              exit,\n              stats,\n              now + Duration.toMillis(Duration.decode(this.timeToLive(exit)))\n            )\n            MutableHashMap.set(this.cacheState.map, key, value)\n            return core.zipRight(\n              Deferred.done(deferred, exit),\n              exit\n            )\n          }),\n          core.onInterrupt(() =>\n            core.zipRight(\n              Deferred.interrupt(deferred),\n              core.sync(() => {\n                MutableHashMap.remove(this.cacheState.map, key)\n              })\n            )\n          )\n        )\n      })\n    )\n  }\n}\n\n/** @internal */\nexport const make = <Key, Value, Error = never, Environment = never>(\n  options: {\n    readonly capacity: number\n    readonly timeToLive: Duration.DurationInput\n    readonly lookup: Cache.Lookup<Key, Value, Error, Environment>\n  }\n): Effect.Effect<Cache.Cache<Key, Value, Error>, never, Environment> => {\n  const timeToLive = Duration.decode(options.timeToLive)\n  return makeWith({\n    capacity: options.capacity,\n    lookup: options.lookup,\n    timeToLive: () => timeToLive\n  })\n}\n\n/** @internal */\nexport const makeWith = <Key, Value, Error = never, Environment = never>(\n  options: {\n    readonly capacity: number\n    readonly lookup: Cache.Lookup<Key, Value, Error, Environment>\n    readonly timeToLive: (exit: Exit.Exit<Value, Error>) => Duration.DurationInput\n  }\n): Effect.Effect<Cache.Cache<Key, Value, Error>, never, Environment> =>\n  core.map(\n    fiberRuntime.all([core.context<Environment>(), core.fiberId]),\n    ([context, fiberId]) =>\n      new CacheImpl(\n        options.capacity,\n        context,\n        fiberId,\n        options.lookup,\n        (exit) => Duration.decode(options.timeToLive(exit))\n      )\n  )\n\n/** @internal */\nexport const unsafeMakeWith = <Key, Value, Error = never>(\n  capacity: number,\n  lookup: Cache.Lookup<Key, Value, Error>,\n  timeToLive: (exit: Exit.Exit<Value, Error>) => Duration.DurationInput\n): Cache.Cache<Key, Value, Error> =>\n  new CacheImpl<Key, Value, Error>(\n    capacity,\n    Context.empty() as Context.Context<any>,\n    none,\n    lookup,\n    (exit) => Duration.decode(timeToLive(exit))\n  )\n"],"names":["Context","Deferred","Duration","Either","Equal","Exit","pipe","Hash","MutableHashMap","MutableQueue","MutableRef","Option","hasProperty","effect","core","Data","none","fiberRuntime","complete","key","exit","entryStats","timeToLiveMillis","struct","_tag","pending","deferred","refreshing","MapKeyTypeId","Symbol","for","MapKeyImpl","current","previous","undefined","next","constructor","symbol","hash","combine","cached","that","isMapKey","equals","makeMapKey","u","KeySetImpl","head","tail","add","remove","makeKeySet","makeCacheState","map","keys","accesses","updating","hits","misses","initialCacheState","empty","unbounded","make","CacheSymbolKey","CacheTypeId","cacheVariance","_Key","_","_Error","_Value","ConsumerCacheSymbolKey","ConsumerCacheTypeId","consumerCacheVariance","makeCacheStats","options","makeEntryStats","loadedMillis","CacheImpl","capacity","context","fiberId","lookup","timeToLive","cacheState","get","getEither","merge","cacheStats","sync","size","getOption","suspend","match","onNone","mapKey","trackAccess","trackMiss","succeed","onSome","value","resolveMapValue","getOptionComplete","contains","has","option","isSome","loaded","some","k","getOrUndefined","unsafeMake","set","lookupValueOf","right","flatMap","left","invalidate","invalidateWhen","when","invalidateAll","refresh","clockWith","clock","asVoid","hasExpired","found","mapValue","await","now","unsafeCurrentTimeMillis","lookupResult","toMillis","decode","values","entry","push","entries","ignorePending","trackHit","offer","compareAndSet","loop","poll","EmptyMutableQueue","input","provideContext","stats","zipRight","done","onInterrupt","interrupt","makeWith","all","unsafeMakeWith"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15488, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15494, "column": 0}, "map": {"version":3,"file":"query.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/query.ts"],"sourcesContent":["import type * as Cache from \"../Cache.js\"\nimport type { Deferred } from \"../Deferred.js\"\nimport { seconds } from \"../Duration.js\"\nimport type * as Effect from \"../Effect.js\"\nimport { dual } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport type * as Request from \"../Request.js\"\nimport type * as RequestResolver from \"../RequestResolver.js\"\nimport * as BlockedRequests from \"./blockedRequests.js\"\nimport { unsafeMakeWith } from \"./cache.js\"\nimport * as core from \"./core.js\"\nimport { ensuring } from \"./fiberRuntime.js\"\nimport { Listeners } from \"./request.js\"\n\ntype RequestCache = Cache.Cache<Request.Request<any, any>, {\n  listeners: Request.Listeners\n  handle: Deferred<any, any>\n}>\n\n/** @internal */\nexport const currentCache = globalValue(\n  Symbol.for(\"effect/FiberRef/currentCache\"),\n  () =>\n    core.fiberRefUnsafeMake<RequestCache>(unsafeMakeWith<Request.Request<any, any>, {\n      listeners: Request.Listeners\n      handle: Deferred<any, any>\n    }>(\n      65536,\n      () => core.map(core.deferredMake<any, any>(), (handle) => ({ listeners: new Listeners(), handle })),\n      () => seconds(60)\n    ))\n)\n\n/** @internal */\nexport const currentCacheEnabled = globalValue(\n  Symbol.for(\"effect/FiberRef/currentCacheEnabled\"),\n  () => core.fiberRefUnsafeMake(false)\n)\n\n/** @internal */\nexport const fromRequest = <\n  A extends Request.Request<any, any>,\n  Ds extends\n    | RequestResolver.RequestResolver<A>\n    | Effect.Effect<RequestResolver.RequestResolver<A>, any, any>\n>(\n  request: A,\n  dataSource: Ds\n): Effect.Effect<\n  Request.Request.Success<A>,\n  Request.Request.Error<A>,\n  [Ds] extends [Effect.Effect<any, any, any>] ? Effect.Effect.Context<Ds> : never\n> =>\n  core.flatMap(\n    (core.isEffect(dataSource) ? dataSource : core.succeed(dataSource)) as Effect.Effect<\n      RequestResolver.RequestResolver<A>\n    >,\n    (ds) =>\n      core.fiberIdWith((id) => {\n        const proxy = new Proxy(request, {})\n        return core.fiberRefGetWith(currentCacheEnabled, (cacheEnabled) => {\n          if (cacheEnabled) {\n            const cached: Effect.Effect<any, any> = core.fiberRefGetWith(currentCache, (cache) =>\n              core.flatMap(cache.getEither(proxy), (orNew) => {\n                switch (orNew._tag) {\n                  case \"Left\": {\n                    if (orNew.left.listeners.interrupted) {\n                      return core.flatMap(\n                        cache.invalidateWhen(proxy, (entry) => entry.handle === orNew.left.handle),\n                        () => cached\n                      )\n                    }\n                    orNew.left.listeners.increment()\n                    return core.uninterruptibleMask((restore) =>\n                      core.flatMap(\n                        core.exit(core.blocked(\n                          BlockedRequests.empty,\n                          restore(core.deferredAwait(orNew.left.handle))\n                        )),\n                        (exit) => {\n                          orNew.left.listeners.decrement()\n                          return exit\n                        }\n                      )\n                    )\n                  }\n                  case \"Right\": {\n                    orNew.right.listeners.increment()\n                    return core.uninterruptibleMask((restore) =>\n                      core.flatMap(\n                        core.exit(\n                          core.blocked(\n                            BlockedRequests.single(\n                              ds as RequestResolver.RequestResolver<A>,\n                              BlockedRequests.makeEntry({\n                                request: proxy,\n                                result: orNew.right.handle,\n                                listeners: orNew.right.listeners,\n                                ownerId: id,\n                                state: { completed: false }\n                              })\n                            ),\n                            restore(core.deferredAwait(orNew.right.handle))\n                          )\n                        ),\n                        () => {\n                          orNew.right.listeners.decrement()\n                          return core.deferredAwait(orNew.right.handle)\n                        }\n                      )\n                    )\n                  }\n                }\n              }))\n            return cached\n          }\n          const listeners = new Listeners()\n          listeners.increment()\n          return core.flatMap(\n            core.deferredMake<Request.Request.Success<A>, Request.Request.Error<A>>(),\n            (ref) =>\n              ensuring(\n                core.blocked(\n                  BlockedRequests.single(\n                    ds as RequestResolver.RequestResolver<A>,\n                    BlockedRequests.makeEntry({\n                      request: proxy,\n                      result: ref,\n                      listeners,\n                      ownerId: id,\n                      state: { completed: false }\n                    })\n                  ),\n                  core.deferredAwait(ref)\n                ),\n                core.sync(() =>\n                  listeners.decrement()\n                )\n              )\n          )\n        })\n      })\n  )\n\n/** @internal */\nexport const cacheRequest = <A extends Request.Request<any, any>>(\n  request: A,\n  result: Request.Request.Result<A>\n): Effect.Effect<void> => {\n  return core.fiberRefGetWith(currentCacheEnabled, (cacheEnabled) => {\n    if (cacheEnabled) {\n      return core.fiberRefGetWith(currentCache, (cache) =>\n        core.flatMap(cache.getEither(request), (orNew) => {\n          switch (orNew._tag) {\n            case \"Left\": {\n              return core.void\n            }\n            case \"Right\": {\n              return core.deferredComplete(orNew.right.handle, result)\n            }\n          }\n        }))\n    }\n    return core.void\n  })\n}\n\n/** @internal */\nexport const withRequestCaching: {\n  (strategy: boolean): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    strategy: boolean\n  ): Effect.Effect<A, E, R>\n} = dual<\n  (\n    strategy: boolean\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    strategy: boolean\n  ) => Effect.Effect<A, E, R>\n>(2, (self, strategy) => core.fiberRefLocally(self, currentCacheEnabled, strategy))\n\n/** @internal */\nexport const withRequestCache: {\n  (cache: Request.Cache): <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    cache: Request.Cache\n  ): Effect.Effect<A, E, R>\n} = dual<\n  (\n    cache: Request.Cache\n  ) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(\n    self: Effect.Effect<A, E, R>,\n    cache: Request.Cache\n  ) => Effect.Effect<A, E, R>\n>(\n  2,\n  // @ts-expect-error\n  (self, cache) => core.fiberRefLocally(self, currentCache, cache)\n)\n"],"names":["seconds","dual","globalValue","BlockedRequests","unsafeMakeWith","core","ensuring","Listeners","currentCache","Symbol","for","fiberRefUnsafeMake","map","deferredMake","handle","listeners","currentCacheEnabled","fromRequest","request","dataSource","flatMap","isEffect","succeed","ds","fiberIdWith","id","proxy","Proxy","fiberRefGetWith","cacheEnabled","cached","cache","getEither","orNew","_tag","left","interrupted","invalidateWhen","entry","increment","uninterruptibleMask","restore","exit","blocked","empty","deferredAwait","decrement","right","single","makeEntry","result","ownerId","state","completed","ref","sync","cacheRequest","void","deferredComplete","withRequestCaching","self","strategy","fiberRefLocally","withRequestCache"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15595, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15601, "column": 0}, "map": {"version":3,"file":"util.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schema/util.ts"],"sourcesContent":["import * as array_ from \"effect/Array\"\nimport * as Predicate from \"effect/Predicate\"\nimport type * as ParseResult from \"../../ParseResult.js\"\nimport type * as AST from \"../../SchemaAST.js\"\n\n/** @internal */\nexport const getKeysForIndexSignature = (\n  input: { readonly [x: PropertyKey]: unknown },\n  parameter: AST.Parameter\n): ReadonlyArray<string> | ReadonlyArray<symbol> => {\n  switch (parameter._tag) {\n    case \"StringKeyword\":\n    case \"TemplateLiteral\":\n      return Object.keys(input)\n    case \"SymbolKeyword\":\n      return Object.getOwnPropertySymbols(input)\n    case \"Refinement\":\n      return getKeysForIndexSignature(input, parameter.from)\n  }\n}\n\n/**\n * JavaScript does not store the insertion order of properties in a way that\n * combines both string and symbol keys. The internal order groups string keys\n * and symbol keys separately. Hence concatenating the keys is fine.\n *\n * @internal\n */\nexport const ownKeys = (o: object): Array<PropertyKey> =>\n  (Object.keys(o) as Array<PropertyKey>).concat(Object.getOwnPropertySymbols(o))\n\n/** @internal */\nexport const memoizeThunk = <A>(f: () => A): () => A => {\n  let done = false\n  let a: A\n  return () => {\n    if (done) {\n      return a\n    }\n    a = f()\n    done = true\n    return a\n  }\n}\n\n/** @internal */\nexport const formatDate = (date: Date): string => {\n  try {\n    return date.toISOString()\n  } catch (e) {\n    return String(date)\n  }\n}\n\n/** @internal */\nexport const formatUnknown = (u: unknown): string => {\n  if (Predicate.isString(u)) {\n    return JSON.stringify(u)\n  } else if (\n    Predicate.isNumber(u)\n    || u == null\n    || Predicate.isBoolean(u)\n    || Predicate.isSymbol(u)\n  ) {\n    return String(u)\n  } else if (Predicate.isDate(u)) {\n    return formatDate(u)\n  } else if (Predicate.isBigInt(u)) {\n    return String(u) + \"n\"\n  } else if (\n    !array_.isArray(u)\n    && Predicate.hasProperty(u, \"toString\")\n    && Predicate.isFunction(u[\"toString\"])\n    && u[\"toString\"] !== Object.prototype.toString\n  ) {\n    return u[\"toString\"]()\n  }\n  try {\n    JSON.stringify(u)\n    if (array_.isArray(u)) {\n      return `[${u.map(formatUnknown).join(\",\")}]`\n    } else {\n      return `{${\n        ownKeys(u).map((k) =>\n          `${Predicate.isString(k) ? JSON.stringify(k) : String(k)}:${formatUnknown((u as any)[k])}`\n        ).join(\",\")\n      }}`\n    }\n  } catch (e) {\n    return String(u)\n  }\n}\n\n/** @internal */\nexport const formatPropertyKey = (name: PropertyKey): string =>\n  typeof name === \"string\" ? JSON.stringify(name) : String(name)\n\n/** @internal */\nexport type SingleOrArray<A> = A | ReadonlyArray<A>\n\n/** @internal */\nexport const isNonEmpty = <A>(x: ParseResult.SingleOrNonEmpty<A>): x is array_.NonEmptyReadonlyArray<A> =>\n  Array.isArray(x)\n\n/** @internal */\nexport const isSingle = <A>(x: A | ReadonlyArray<A>): x is A => !Array.isArray(x)\n\n/** @internal */\nexport const formatPathKey = (key: PropertyKey): string => `[${formatPropertyKey(key)}]`\n\n/** @internal */\nexport const formatPath = (path: ParseResult.Path): string =>\n  isNonEmpty(path) ? path.map(formatPathKey).join(\"\") : formatPathKey(path)\n"],"names":["array_","Predicate","getKeysForIndexSignature","input","parameter","_tag","Object","keys","getOwnPropertySymbols","from","ownKeys","o","concat","memoizeThunk","f","done","a","formatDate","date","toISOString","e","String","formatUnknown","u","isString","JSON","stringify","isNumber","isBoolean","isSymbol","isDate","isBigInt","isArray","hasProperty","isFunction","prototype","toString","map","join","k","formatPropertyKey","name","isNonEmpty","x","Array","isSingle","formatPathKey","key","formatPath","path"],"mappings":";;;;;;;;;;;;AACA,OAAO,KAAKC,SAAS,MAAM,kBAAkB;AAD7C,OAAO,KAAKD,MAAM,MAAM,cAAc;;;AAM/B,MAAME,wBAAwB,GAAGA,CACtCC,KAA6C,EAC7CC,SAAwB,KACyB;IACjD,OAAQA,SAAS,CAACC,IAAI;QACpB,KAAK,eAAe;QACpB,KAAK,iBAAiB;YACpB,OAAOC,MAAM,CAACC,IAAI,CAACJ,KAAK,CAAC;QAC3B,KAAK,eAAe;YAClB,OAAOG,MAAM,CAACE,qBAAqB,CAACL,KAAK,CAAC;QAC5C,KAAK,YAAY;YACf,OAAOD,wBAAwB,CAACC,KAAK,EAAEC,SAAS,CAACK,IAAI,CAAC;IAC1D;AACF,CAAC;AASM,MAAMC,OAAO,IAAIC,CAAS,GAC9BL,MAAM,CAACC,IAAI,CAACI,CAAC,CAAwB,CAACC,MAAM,CAACN,MAAM,CAACE,qBAAqB,CAACG,CAAC,CAAC,CAAC;AAGzE,MAAME,YAAY,GAAOC,CAAU,IAAa;IACrD,IAAIC,IAAI,GAAG,KAAK;IAChB,IAAIC,CAAI;IACR,OAAO,MAAK;QACV,IAAID,IAAI,EAAE;YACR,OAAOC,CAAC;QACV;QACAA,CAAC,GAAGF,CAAC,EAAE;QACPC,IAAI,GAAG,IAAI;QACX,OAAOC,CAAC;IACV,CAAC;AACH,CAAC;AAGM,MAAMC,UAAU,IAAIC,IAAU,IAAY;IAC/C,IAAI;QACF,OAAOA,IAAI,CAACC,WAAW,EAAE;IAC3B,CAAC,CAAC,OAAOC,CAAC,EAAE;QACV,OAAOC,MAAM,CAACH,IAAI,CAAC;IACrB;AACF,CAAC;AAGM,MAAMI,aAAa,IAAIC,CAAU,IAAY;IAClD,IAAItB,SAAS,4IAACuB,QAAQ,CAACD,CAAC,CAAC,EAAE;QACzB,OAAOE,IAAI,CAACC,SAAS,CAACH,CAAC,CAAC;IAC1B,CAAC,MAAM,IACLtB,SAAS,4IAAC0B,QAAQ,CAACJ,CAAC,CAAC,IAClBA,CAAC,IAAI,IAAI,IACTtB,SAAS,4IAAC2B,SAAS,CAACL,CAAC,CAAC,IACtBtB,SAAS,4IAAC4B,QAAQ,CAACN,CAAC,CAAC,EACxB;QACA,OAAOF,MAAM,CAACE,CAAC,CAAC;IAClB,CAAC,MAAM,IAAItB,SAAS,4IAAC6B,MAAM,CAACP,CAAC,CAAC,EAAE;QAC9B,OAAON,UAAU,CAACM,CAAC,CAAC;IACtB,CAAC,MAAM,IAAItB,SAAS,4IAAC8B,QAAQ,CAACR,CAAC,CAAC,EAAE;QAChC,OAAOF,MAAM,CAACE,CAAC,CAAC,GAAG,GAAG;IACxB,CAAC,MAAM,IACL,CAACvB,MAAM,2IAACgC,OAAO,CAACT,CAAC,CAAC,IACftB,SAAS,4IAACgC,WAAW,CAACV,CAAC,EAAE,UAAU,CAAC,IACpCtB,SAAS,4IAACiC,UAAU,CAACX,CAAC,CAAC,UAAU,CAAC,CAAC,IACnCA,CAAC,CAAC,UAAU,CAAC,KAAKjB,MAAM,CAAC6B,SAAS,CAACC,QAAQ,EAC9C;QACA,OAAOb,CAAC,CAAC,UAAU,CAAC,EAAE;IACxB;IACA,IAAI;QACFE,IAAI,CAACC,SAAS,CAACH,CAAC,CAAC;QACjB,IAAIvB,MAAM,2IAACgC,OAAO,CAACT,CAAC,CAAC,EAAE;YACrB,OAAO,CAAA,CAAA,EAAIA,CAAC,CAACc,GAAG,CAACf,aAAa,CAAC,CAACgB,IAAI,CAAC,GAAG,CAAC,CAAA,CAAA,CAAG;QAC9C,CAAC,MAAM;YACL,OAAO,CAAA,CAAA,EACL5B,OAAO,CAACa,CAAC,CAAC,CAACc,GAAG,EAAEE,CAAC,GACf,GAAGtC,SAAS,4IAACuB,QAAQ,CAACe,CAAC,CAAC,GAAGd,IAAI,CAACC,SAAS,CAACa,CAAC,CAAC,GAAGlB,MAAM,CAACkB,CAAC,CAAC,CAAA,CAAA,EAAIjB,aAAa,CAAEC,CAAS,CAACgB,CAAC,CAAC,CAAC,EAAE,CAC3F,CAACD,IAAI,CAAC,GAAG,CACZ,CAAA,CAAA,CAAG;QACL;IACF,CAAC,CAAC,OAAOlB,CAAC,EAAE;QACV,OAAOC,MAAM,CAACE,CAAC,CAAC;IAClB;AACF,CAAC;AAGM,MAAMiB,iBAAiB,IAAIC,IAAiB,GACjD,OAAOA,IAAI,KAAK,QAAQ,GAAGhB,IAAI,CAACC,SAAS,CAACe,IAAI,CAAC,GAAGpB,MAAM,CAACoB,IAAI,CAAC;AAMzD,MAAMC,UAAU,IAAOC,CAAkC,GAC9DC,KAAK,CAACZ,OAAO,CAACW,CAAC,CAAC;AAGX,MAAME,QAAQ,IAAOF,CAAuB,GAAa,CAACC,KAAK,CAACZ,OAAO,CAACW,CAAC,CAAC;AAG1E,MAAMG,aAAa,IAAIC,GAAgB,GAAa,CAAA,CAAA,EAAIP,iBAAiB,CAACO,GAAG,CAAC,CAAA,CAAA,CAAG;AAGjF,MAAMC,UAAU,IAAIC,IAAsB,GAC/CP,UAAU,CAACO,IAAI,CAAC,GAAGA,IAAI,CAACZ,GAAG,CAACS,aAAa,CAAC,CAACR,IAAI,CAAC,EAAE,CAAC,GAAGQ,aAAa,CAACG,IAAI,CAAC","ignoreList":[0]}},
    {"offset": {"line": 15676, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15682, "column": 0}, "map": {"version":3,"file":"errors.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schema/errors.ts"],"sourcesContent":["import * as array_ from \"effect/Array\"\nimport type * as AST from \"../../SchemaAST.js\"\nimport * as util_ from \"./util.js\"\n\nconst getErrorMessage = (\n  reason: string,\n  details?: string,\n  path?: ReadonlyArray<PropertyKey>,\n  ast?: AST.AST\n): string => {\n  let out = reason\n\n  if (path && array_.isNonEmptyReadonlyArray(path)) {\n    out += `\\nat path: ${util_.formatPath(path)}`\n  }\n\n  if (details !== undefined) {\n    out += `\\ndetails: ${details}`\n  }\n\n  if (ast) {\n    out += `\\nschema (${ast._tag}): ${ast}`\n  }\n\n  return out\n}\n\n// ---------------------------------------------\n// generic\n// ---------------------------------------------\n\n/** @internal */\nexport const getInvalidArgumentErrorMessage = (details: string) => getErrorMessage(\"Invalid Argument\", details)\n\nconst getUnsupportedSchemaErrorMessage = (details?: string, path?: ReadonlyArray<PropertyKey>, ast?: AST.AST): string =>\n  getErrorMessage(\"Unsupported schema\", details, path, ast)\n\nconst getMissingAnnotationErrorMessage = (details?: string, path?: ReadonlyArray<PropertyKey>, ast?: AST.AST): string =>\n  getErrorMessage(\"Missing annotation\", details, path, ast)\n\n// ---------------------------------------------\n// Arbitrary\n// ---------------------------------------------\n\n/** @internal */\nexport const getArbitraryUnsupportedErrorMessage = (path: ReadonlyArray<PropertyKey>, ast: AST.AST) =>\n  getUnsupportedSchemaErrorMessage(\"Cannot build an Arbitrary for this schema\", path, ast)\n\n/** @internal */\nexport const getArbitraryMissingAnnotationErrorMessage = (\n  path: ReadonlyArray<PropertyKey>,\n  ast: AST.AST\n) =>\n  getMissingAnnotationErrorMessage(\n    `Generating an Arbitrary for this schema requires an \"arbitrary\" annotation`,\n    path,\n    ast\n  )\n\n/** @internal */\nexport const getArbitraryEmptyEnumErrorMessage = (path: ReadonlyArray<PropertyKey>) =>\n  getErrorMessage(\"Empty Enums schema\", \"Generating an Arbitrary for this schema requires at least one enum\", path)\n\n// ---------------------------------------------\n// Equivalence\n// ---------------------------------------------\n\n/** @internal */\nexport const getEquivalenceUnsupportedErrorMessage = (ast: AST.AST, path: ReadonlyArray<PropertyKey>) =>\n  getUnsupportedSchemaErrorMessage(\"Cannot build an Equivalence\", path, ast)\n\n// ---------------------------------------------\n// JSON Schema\n// ---------------------------------------------\n\n/** @internal */\nexport const getJSONSchemaMissingAnnotationErrorMessage = (\n  path: ReadonlyArray<PropertyKey>,\n  ast: AST.AST\n) =>\n  getMissingAnnotationErrorMessage(\n    `Generating a JSON Schema for this schema requires a \"jsonSchema\" annotation`,\n    path,\n    ast\n  )\n\n/** @internal */\nexport const getJSONSchemaMissingIdentifierAnnotationErrorMessage = (\n  path: ReadonlyArray<PropertyKey>,\n  ast: AST.AST\n) =>\n  getMissingAnnotationErrorMessage(\n    `Generating a JSON Schema for this schema requires an \"identifier\" annotation`,\n    path,\n    ast\n  )\n\n/** @internal */\nexport const getJSONSchemaUnsupportedParameterErrorMessage = (\n  path: ReadonlyArray<PropertyKey>,\n  parameter: AST.AST\n): string => getErrorMessage(\"Unsupported index signature parameter\", undefined, path, parameter)\n\n/** @internal */\nexport const getJSONSchemaUnsupportedPostRestElementsErrorMessage = (path: ReadonlyArray<PropertyKey>): string =>\n  getErrorMessage(\n    \"Generating a JSON Schema for post-rest elements is not currently supported. You're welcome to contribute by submitting a Pull Request\",\n    undefined,\n    path\n  )\n\n/** @internal */\nexport const getJSONSchemaUnsupportedKeyErrorMessage = (key: PropertyKey, path: ReadonlyArray<PropertyKey>): string =>\n  getErrorMessage(\"Unsupported key\", `Cannot encode ${util_.formatPropertyKey(key)} key to JSON Schema`, path)\n\n// ---------------------------------------------\n// Pretty\n// ---------------------------------------------\n\n/** @internal */\nexport const getPrettyMissingAnnotationErrorMessage = (\n  path: ReadonlyArray<PropertyKey>,\n  ast: AST.AST\n) => getMissingAnnotationErrorMessage(`Generating a Pretty for this schema requires a \"pretty\" annotation`, path, ast)\n\n/** @internal */\nexport const getPrettyNeverErrorMessage = \"Cannot pretty print a `never` value\"\n\n/** @internal */\nexport const getPrettyNoMatchingSchemaErrorMessage = (\n  actual: unknown,\n  path: ReadonlyArray<PropertyKey>,\n  ast: AST.AST\n) => getErrorMessage(\"Unexpected Error\", `Cannot find a matching schema for ${util_.formatUnknown(actual)}`, path, ast)\n\n// ---------------------------------------------\n// Schema\n// ---------------------------------------------\n\n/** @internal */\nexport const getSchemaExtendErrorMessage = (x: AST.AST, y: AST.AST, path: ReadonlyArray<PropertyKey>) =>\n  getErrorMessage(\"Unsupported schema or overlapping types\", `cannot extend ${x} with ${y}`, path)\n\n/** @internal */\nexport const getSchemaUnsupportedLiteralSpanErrorMessage = (ast: AST.AST) =>\n  getErrorMessage(\"Unsupported template literal span\", undefined, undefined, ast)\n\n// ---------------------------------------------\n// AST\n// ---------------------------------------------\n\n/** @internal */\nexport const getASTUnsupportedSchema = (ast: AST.AST) => getUnsupportedSchemaErrorMessage(undefined, undefined, ast)\n\n/** @internal */\nexport const getASTUnsupportedKeySchema = (ast: AST.AST) =>\n  getErrorMessage(\"Unsupported key schema\", undefined, undefined, ast)\n\n/** @internal */\nexport const getASTUnsupportedLiteral = (literal: AST.LiteralValue) =>\n  getErrorMessage(\"Unsupported literal\", `literal value: ${util_.formatUnknown(literal)}`)\n\n/** @internal */\nexport const getASTDuplicateIndexSignatureErrorMessage = (type: \"string\" | \"symbol\"): string =>\n  getErrorMessage(\"Duplicate index signature\", `${type} index signature`)\n\n/** @internal */\nexport const getASTIndexSignatureParameterErrorMessage = getErrorMessage(\n  \"Unsupported index signature parameter\",\n  \"An index signature parameter type must be `string`, `symbol`, a template literal type or a refinement of the previous types\"\n)\n\n/** @internal */\nexport const getASTRequiredElementFollowinAnOptionalElementErrorMessage = getErrorMessage(\n  \"Invalid element\",\n  \"A required element cannot follow an optional element. ts(1257)\"\n)\n\n/** @internal */\nexport const getASTDuplicatePropertySignatureTransformationErrorMessage = (key: PropertyKey): string =>\n  getErrorMessage(\"Duplicate property signature transformation\", `Duplicate key ${util_.formatUnknown(key)}`)\n\n/** @internal */\nexport const getASTUnsupportedRenameSchema = (ast: AST.AST): string =>\n  getUnsupportedSchemaErrorMessage(undefined, undefined, ast)\n\n/** @internal */\nexport const getASTDuplicatePropertySignatureErrorMessage = (key: PropertyKey): string =>\n  getErrorMessage(\"Duplicate property signature\", `Duplicate key ${util_.formatUnknown(key)}`)\n"],"names":["array_","util_","getErrorMessage","reason","details","path","ast","out","isNonEmptyReadonlyArray","formatPath","undefined","_tag","getInvalidArgumentErrorMessage","getUnsupportedSchemaErrorMessage","getMissingAnnotationErrorMessage","getArbitraryUnsupportedErrorMessage","getArbitraryMissingAnnotationErrorMessage","getArbitraryEmptyEnumErrorMessage","getEquivalenceUnsupportedErrorMessage","getJSONSchemaMissingAnnotationErrorMessage","getJSONSchemaMissingIdentifierAnnotationErrorMessage","getJSONSchemaUnsupportedParameterErrorMessage","parameter","getJSONSchemaUnsupportedPostRestElementsErrorMessage","getJSONSchemaUnsupportedKeyErrorMessage","key","formatPropertyKey","getPrettyMissingAnnotationErrorMessage","getPrettyNeverErrorMessage","getPrettyNoMatchingSchemaErrorMessage","actual","formatUnknown","getSchemaExtendErrorMessage","x","y","getSchemaUnsupportedLiteralSpanErrorMessage","getASTUnsupportedSchema","getASTUnsupportedKeySchema","getASTUnsupportedLiteral","literal","getASTDuplicateIndexSignatureErrorMessage","type","getASTIndexSignatureParameterErrorMessage","getASTRequiredElementFollowinAnOptionalElementErrorMessage","getASTDuplicatePropertySignatureTransformationErrorMessage","getASTUnsupportedRenameSchema","getASTDuplicatePropertySignatureErrorMessage"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15751, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15757, "column": 0}, "map": {"version":3,"file":"filters.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/schema/filters.ts"],"sourcesContent":["import type * as Schema from \"../../Schema.js\"\n\n/** @internal */\nexport const GreaterThanSchemaId: Schema.GreaterThanSchemaId = Symbol.for(\n  \"effect/schema/GreaterThan\"\n) as Schema.GreaterThanSchemaId\n\n/** @internal */\nexport const GreaterThanOrEqualToSchemaId: Schema.GreaterThanOrEqualToSchemaId = Symbol.for(\n  \"effect/schema/GreaterThanOrEqualTo\"\n) as Schema.GreaterThanOrEqualToSchemaId\n\n/** @internal */\nexport const LessThanSchemaId: Schema.LessThanSchemaId = Symbol.for(\n  \"effect/schema/LessThan\"\n) as Schema.LessThanSchemaId\n\n/** @internal */\nexport const LessThanOrEqualToSchemaId: Schema.LessThanOrEqualToSchemaId = Symbol.for(\n  \"effect/schema/LessThanOrEqualTo\"\n) as Schema.LessThanOrEqualToSchemaId\n\n/** @internal */\nexport const IntSchemaId: Schema.IntSchemaId = Symbol.for(\n  \"effect/schema/Int\"\n) as Schema.IntSchemaId\n\n/** @internal */\nexport const BetweenSchemaId: Schema.BetweenSchemaId = Symbol.for(\n  \"effect/schema/Between\"\n) as Schema.BetweenSchemaId\n\n/** @internal */\nexport const GreaterThanBigintSchemaId: Schema.GreaterThanBigIntSchemaId = Symbol.for(\n  \"effect/schema/GreaterThanBigint\"\n) as Schema.GreaterThanBigIntSchemaId\n\n/** @internal */\nexport const GreaterThanOrEqualToBigIntSchemaId: Schema.GreaterThanOrEqualToBigIntSchemaId = Symbol.for(\n  \"effect/schema/GreaterThanOrEqualToBigint\"\n) as Schema.GreaterThanOrEqualToBigIntSchemaId\n\n/** @internal */\nexport const LessThanBigIntSchemaId: Schema.LessThanBigIntSchemaId = Symbol.for(\n  \"effect/schema/LessThanBigint\"\n) as Schema.LessThanBigIntSchemaId\n\n/** @internal */\nexport const LessThanOrEqualToBigIntSchemaId: Schema.LessThanOrEqualToBigIntSchemaId = Symbol.for(\n  \"effect/schema/LessThanOrEqualToBigint\"\n) as Schema.LessThanOrEqualToBigIntSchemaId\n\n/** @internal */\nexport const BetweenBigintSchemaId: Schema.BetweenBigIntSchemaId = Symbol.for(\n  \"effect/schema/BetweenBigint\"\n) as Schema.BetweenBigIntSchemaId\n\n/** @internal */\nexport const MinLengthSchemaId: Schema.MinLengthSchemaId = Symbol.for(\n  \"effect/schema/MinLength\"\n) as Schema.MinLengthSchemaId\n\n/** @internal */\nexport const MaxLengthSchemaId: Schema.MaxLengthSchemaId = Symbol.for(\n  \"effect/schema/MaxLength\"\n) as Schema.MaxLengthSchemaId\n\n/** @internal */\nexport const LengthSchemaId: Schema.LengthSchemaId = Symbol.for(\n  \"effect/schema/Length\"\n) as Schema.LengthSchemaId\n\n/** @internal */\nexport const MinItemsSchemaId: Schema.MinItemsSchemaId = Symbol.for(\n  \"effect/schema/MinItems\"\n) as Schema.MinItemsSchemaId\n\n/** @internal */\nexport const MaxItemsSchemaId: Schema.MaxItemsSchemaId = Symbol.for(\n  \"effect/schema/MaxItems\"\n) as Schema.MaxItemsSchemaId\n\n/** @internal */\nexport const ItemsCountSchemaId: Schema.ItemsCountSchemaId = Symbol.for(\n  \"effect/schema/ItemsCount\"\n) as Schema.ItemsCountSchemaId\n"],"names":["GreaterThanSchemaId","Symbol","for","GreaterThanOrEqualToSchemaId","LessThanSchemaId","LessThanOrEqualToSchemaId","IntSchemaId","BetweenSchemaId","GreaterThanBigintSchemaId","GreaterThanOrEqualToBigIntSchemaId","LessThanBigIntSchemaId","LessThanOrEqualToBigIntSchemaId","BetweenBigintSchemaId","MinLengthSchemaId","MaxLengthSchemaId","LengthSchemaId","MinItemsSchemaId","MaxItemsSchemaId","ItemsCountSchemaId"],"mappings":"AAEA,cAAA;;;;;;;;;;;;;;;;;;;AACO,MAAMA,mBAAmB,GAAA,WAAA,GAA+BC,MAAM,CAACC,GAAG,CACvE,2BAA2B,CACE;AAGxB,MAAMC,4BAA4B,GAAA,WAAA,GAAwCF,MAAM,CAACC,GAAG,CACzF,oCAAoC,CACE;AAGjC,MAAME,gBAAgB,GAAA,WAAA,GAA4BH,MAAM,CAACC,GAAG,CACjE,wBAAwB,CACE;AAGrB,MAAMG,yBAAyB,GAAA,WAAA,GAAqCJ,MAAM,CAACC,GAAG,CACnF,iCAAiC,CACE;AAG9B,MAAMI,WAAW,GAAA,WAAA,GAAuBL,MAAM,CAACC,GAAG,CACvD,mBAAmB,CACE;AAGhB,MAAMK,eAAe,GAAA,WAAA,GAA2BN,MAAM,CAACC,GAAG,CAC/D,uBAAuB,CACE;AAGpB,MAAMM,yBAAyB,GAAA,WAAA,GAAqCP,MAAM,CAACC,GAAG,CACnF,iCAAiC,CACE;AAG9B,MAAMO,kCAAkC,GAAA,WAAA,GAA8CR,MAAM,CAACC,GAAG,CACrG,0CAA0C,CACE;AAGvC,MAAMQ,sBAAsB,GAAA,WAAA,GAAkCT,MAAM,CAACC,GAAG,CAC7E,8BAA8B,CACE;AAG3B,MAAMS,+BAA+B,GAAA,WAAA,GAA2CV,MAAM,CAACC,GAAG,CAC/F,uCAAuC,CACE;AAGpC,MAAMU,qBAAqB,GAAA,WAAA,GAAiCX,MAAM,CAACC,GAAG,CAC3E,6BAA6B,CACE;AAG1B,MAAMW,iBAAiB,GAAA,WAAA,GAA6BZ,MAAM,CAACC,GAAG,CACnE,yBAAyB,CACE;AAGtB,MAAMY,iBAAiB,GAAA,WAAA,GAA6Bb,MAAM,CAACC,GAAG,CACnE,yBAAyB,CACE;AAGtB,MAAMa,cAAc,GAAA,WAAA,GAA0Bd,MAAM,CAACC,GAAG,CAC7D,sBAAsB,CACE;AAGnB,MAAMc,gBAAgB,GAAA,WAAA,GAA4Bf,MAAM,CAACC,GAAG,CACjE,wBAAwB,CACE;AAGrB,MAAMe,gBAAgB,GAAA,WAAA,GAA4BhB,MAAM,CAACC,GAAG,CACjE,wBAAwB,CACE;AAGrB,MAAMgB,kBAAkB,GAAA,WAAA,GAA8BjB,MAAM,CAACC,GAAG,CACrE,0BAA0B,CACE","ignoreList":[0]}},
    {"offset": {"line": 15793, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15799, "column": 0}, "map": {"version":3,"file":"redacted.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/redacted.ts"],"sourcesContent":["import { NodeInspectSymbol } from \"effect/Inspectable\"\nimport * as Equal from \"../Equal.js\"\nimport { pipe } from \"../Function.js\"\nimport { globalValue } from \"../GlobalValue.js\"\nimport * as Hash from \"../Hash.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Redacted from \"../Redacted.js\"\n\n/** @internal */\nconst RedactedSymbolKey = \"effect/Redacted\"\n\n/** @internal */\nexport const redactedRegistry = globalValue(\n  \"effect/Redacted/redactedRegistry\",\n  () => new WeakMap<Redacted.Redacted<any>, any>()\n)\n\n/** @internal */\nexport const RedactedTypeId: Redacted.RedactedTypeId = Symbol.for(\n  RedactedSymbolKey\n) as Redacted.RedactedTypeId\n\n/** @internal */\nexport const proto = {\n  [RedactedTypeId]: {\n    _A: (_: never) => _\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  toString() {\n    return \"<redacted>\"\n  },\n  toJSON() {\n    return \"<redacted>\"\n  },\n  [NodeInspectSymbol]() {\n    return \"<redacted>\"\n  },\n  [Hash.symbol]<T>(this: Redacted.Redacted<T>): number {\n    return pipe(\n      Hash.hash(RedactedSymbolKey),\n      Hash.combine(Hash.hash(redactedRegistry.get(this))),\n      Hash.cached(this)\n    )\n  },\n  [Equal.symbol]<T>(this: Redacted.Redacted<T>, that: unknown): boolean {\n    return isRedacted(that) && Equal.equals(redactedRegistry.get(this), redactedRegistry.get(that))\n  }\n}\n\n/** @internal */\nexport const isRedacted = (u: unknown): u is Redacted.Redacted<unknown> => hasProperty(u, RedactedTypeId)\n\n/** @internal */\nexport const make = <T>(value: T): Redacted.Redacted<T> => {\n  const redacted = Object.create(proto)\n  redactedRegistry.set(redacted, value)\n  return redacted\n}\n\n/** @internal */\nexport const value = <T>(self: Redacted.Redacted<T>): T => {\n  if (redactedRegistry.has(self)) {\n    return redactedRegistry.get(self)\n  } else {\n    throw new Error(\"Unable to get redacted value\")\n  }\n}\n\n/** @internal */\nexport const unsafeWipe = <T>(self: Redacted.Redacted<T>): boolean => redactedRegistry.delete(self)\n"],"names":["NodeInspectSymbol","Equal","pipe","globalValue","Hash","pipeArguments","hasProperty","RedactedSymbolKey","redactedRegistry","WeakMap","RedactedTypeId","Symbol","for","proto","_A","_","arguments","toString","toJSON","symbol","hash","combine","get","cached","that","isRedacted","equals","u","make","value","redacted","Object","create","set","self","has","Error","unsafeWipe","delete"],"mappings":";;;;;;;;;AAGA,SAASG,WAAW,QAAQ,mBAAmB;AAE/C,SAASE,aAAa,QAAQ,gBAAgB;AAL9C,SAASL,iBAAiB,QAAQ,oBAAoB;AAItD,OAAO,KAAKI,IAAI,MAAM,YAAY;AAFlC,SAASF,IAAI,QAAQ,gBAAgB;AADrC,OAAO,KAAKD,KAAK,MAAM,aAAa;AAKpC,SAASK,WAAW,QAAQ,iBAAiB;;;;;;;;AAG7C,cAAA,GACA,MAAMC,iBAAiB,GAAG,iBAAiB;AAGpC,MAAMC,gBAAgB,GAAA,WAAA,8JAAGL,cAAAA,AAAW,EACzC,kCAAkC,EAClC,IAAM,IAAIM,OAAO,EAA+B,CACjD;AAGM,MAAMC,cAAc,GAAA,WAAA,GAA4BC,MAAM,CAACC,GAAG,CAC/DL,iBAAiB,CACS;AAGrB,MAAMM,KAAK,GAAG;IACnB,CAACH,cAAc,CAAA,EAAG;QAChBI,EAAE,GAAGC,CAAQ,GAAKA;KACnB;IACDb,IAAIA,CAAA;QACF,+JAAOG,gBAAa,AAAbA,EAAc,IAAI,EAAEW,SAAS,CAAC;IACvC,CAAC;IACDC,QAAQA,CAAA;QACN,OAAO,YAAY;IACrB,CAAC;IACDC,MAAMA,CAAA;QACJ,OAAO,YAAY;IACrB,CAAC;IACD,wJAAClB,oBAAiB,CAAA,GAAC;QACjB,OAAO,YAAY;IACrB,CAAC;IACD,CAACI,IAAI,4IAACe,MAAM,CAAA,GAAC;QACX,QAAOjB,8JAAAA,AAAI,EACTE,IAAI,4IAACgB,IAAI,CAACb,iBAAiB,CAAC,EAC5BH,IAAI,4IAACiB,OAAO,CAACjB,IAAI,4IAACgB,IAAI,CAACZ,gBAAgB,CAACc,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EACnDlB,IAAI,4IAACmB,MAAM,CAAC,IAAI,CAAC,CAClB;IACH,CAAC;IACD,CAACtB,KAAK,4IAACkB,MAAM,CAAA,EAAiCK,IAAa;QACzD,OAAOC,UAAU,CAACD,IAAI,CAAC,IAAIvB,KAAK,4IAACyB,MAAM,CAAClB,gBAAgB,CAACc,GAAG,CAAC,IAAI,CAAC,EAAEd,gBAAgB,CAACc,GAAG,CAACE,IAAI,CAAC,CAAC;IACjG;CACD;AAGM,MAAMC,UAAU,IAAIE,CAAU,4JAAsCrB,cAAAA,AAAW,EAACqB,CAAC,EAAEjB,cAAc,CAAC;AAGlG,MAAMkB,IAAI,IAAOC,KAAQ,IAA0B;IACxD,MAAMC,QAAQ,GAAGC,MAAM,CAACC,MAAM,CAACnB,KAAK,CAAC;IACrCL,gBAAgB,CAACyB,GAAG,CAACH,QAAQ,EAAED,KAAK,CAAC;IACrC,OAAOC,QAAQ;AACjB,CAAC;AAGM,MAAMD,KAAK,IAAOK,IAA0B,IAAO;IACxD,IAAI1B,gBAAgB,CAAC2B,GAAG,CAACD,IAAI,CAAC,EAAE;QAC9B,OAAO1B,gBAAgB,CAACc,GAAG,CAACY,IAAI,CAAC;IACnC,CAAC,MAAM;QACL,MAAM,IAAIE,KAAK,CAAC,8BAA8B,CAAC;IACjD;AACF,CAAC;AAGM,MAAMC,UAAU,IAAOH,IAA0B,GAAc1B,gBAAgB,CAAC8B,MAAM,CAACJ,IAAI,CAAC","ignoreList":[0]}},
    {"offset": {"line": 15862, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15868, "column": 0}, "map": {"version":3,"file":"secret.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/secret.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Secret from \"../Secret.js\"\nimport * as redacted_ from \"./redacted.js\"\n\n/**\n * @internal\n * @deprecated\n */\nconst SecretSymbolKey = \"effect/Secret\"\n\n/**\n * @internal\n * @deprecated\n */\nexport const SecretTypeId: Secret.SecretTypeId = Symbol.for(\n  SecretSymbolKey\n) as Secret.SecretTypeId\n\n/**\n * @internal\n * @deprecated\n */\nexport const isSecret = (u: unknown): u is Secret.Secret => hasProperty(u, SecretTypeId)\n\n/**\n * @internal\n * @deprecated\n */\nexport const make = (bytes: Array<number>): Secret.Secret => {\n  const secret = Object.create({\n    ...redacted_.proto,\n    [SecretTypeId]: SecretTypeId\n  })\n  Object.defineProperty(secret, \"toString\", {\n    enumerable: false,\n    value() {\n      return \"Secret(<redacted>)\"\n    }\n  })\n  Object.defineProperty(secret, \"toJSON\", {\n    enumerable: false,\n    value() {\n      return \"<redacted>\"\n    }\n  })\n  Object.defineProperty(secret, \"raw\", {\n    enumerable: false,\n    value: bytes\n  })\n  redacted_.redactedRegistry.set(secret, bytes.map((byte) => String.fromCharCode(byte)).join(\"\"))\n  return secret\n}\n\n/**\n * @internal\n * @deprecated\n */\nexport const fromIterable = (iterable: Iterable<string>): Secret.Secret =>\n  make(Arr.fromIterable(iterable).map((char) => char.charCodeAt(0)))\n\n/**\n * @internal\n * @deprecated\n */\nexport const fromString = (text: string): Secret.Secret => {\n  return make(text.split(\"\").map((char) => char.charCodeAt(0)))\n}\n\n/**\n * @internal\n * @deprecated\n */\nexport const value = (self: Secret.Secret): string => {\n  return self.raw.map((byte) => String.fromCharCode(byte)).join(\"\")\n}\n\n/**\n * @internal\n * @deprecated\n */\nexport const unsafeWipe = (self: Secret.Secret): void => {\n  for (let i = 0; i < self.raw.length; i++) {\n    self.raw[i] = 0\n  }\n  redacted_.redactedRegistry.delete(self)\n}\n"],"names":["Arr","hasProperty","redacted_","SecretSymbolKey","SecretTypeId","Symbol","for","isSecret","u","make","bytes","secret","Object","create","proto","defineProperty","enumerable","value","redactedRegistry","set","map","byte","String","fromCharCode","join","fromIterable","iterable","char","charCodeAt","fromString","text","split","self","raw","unsafeWipe","i","length","delete"],"mappings":";;;;;;;;;AACA,SAASC,WAAW,QAAQ,iBAAiB;AAE7C,OAAO,KAAKC,SAAS,MAAM,eAAe;AAH1C,OAAO,KAAKF,GAAG,MAAM,aAAa;;;;AAKlC;;;IAIA,MAAMG,eAAe,GAAG,eAAe;AAMhC,MAAMC,YAAY,GAAA,WAAA,GAAwBC,MAAM,CAACC,GAAG,CACzDH,eAAe,CACO;AAMjB,MAAMI,QAAQ,IAAIC,CAAU,4JAAyBP,cAAAA,AAAW,EAACO,CAAC,EAAEJ,YAAY,CAAC;AAMjF,MAAMK,IAAI,IAAIC,KAAoB,IAAmB;IAC1D,MAAMC,MAAM,GAAGC,MAAM,CAACC,MAAM,CAAC;QAC3B,GAAGX,SAAS,uJAACY,KAAK;QAClB,CAACV,YAAY,CAAA,EAAGA;KACjB,CAAC;IACFQ,MAAM,CAACG,cAAc,CAACJ,MAAM,EAAE,UAAU,EAAE;QACxCK,UAAU,EAAE,KAAK;QACjBC,KAAKA,CAAA;YACH,OAAO,oBAAoB;QAC7B;KACD,CAAC;IACFL,MAAM,CAACG,cAAc,CAACJ,MAAM,EAAE,QAAQ,EAAE;QACtCK,UAAU,EAAE,KAAK;QACjBC,KAAKA,CAAA;YACH,OAAO,YAAY;QACrB;KACD,CAAC;IACFL,MAAM,CAACG,cAAc,CAACJ,MAAM,EAAE,KAAK,EAAE;QACnCK,UAAU,EAAE,KAAK;QACjBC,KAAK,EAAEP;KACR,CAAC;IACFR,SAAS,uJAACgB,gBAAgB,CAACC,GAAG,CAACR,MAAM,EAAED,KAAK,CAACU,GAAG,EAAEC,IAAI,GAAKC,MAAM,CAACC,YAAY,CAACF,IAAI,CAAC,CAAC,CAACG,IAAI,CAAC,EAAE,CAAC,CAAC;IAC/F,OAAOb,MAAM;AACf,CAAC;AAMM,MAAMc,YAAY,IAAIC,QAA0B,GACrDjB,IAAI,CAACT,GAAG,8IAACyB,YAAY,CAACC,QAAQ,CAAC,CAACN,GAAG,EAAEO,IAAI,GAAKA,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAM7D,MAAMC,UAAU,IAAIC,IAAY,IAAmB;IACxD,OAAOrB,IAAI,CAACqB,IAAI,CAACC,KAAK,CAAC,EAAE,CAAC,CAACX,GAAG,EAAEO,IAAI,GAAKA,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC;AAC/D,CAAC;AAMM,MAAMX,KAAK,IAAIe,IAAmB,IAAY;IACnD,OAAOA,IAAI,CAACC,GAAG,CAACb,GAAG,CAAEC,IAAI,IAAKC,MAAM,CAACC,YAAY,CAACF,IAAI,CAAC,CAAC,CAACG,IAAI,CAAC,EAAE,CAAC;AACnE,CAAC;AAMM,MAAMU,UAAU,IAAIF,IAAmB,IAAU;IACtD,IAAK,IAAIG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGH,IAAI,CAACC,GAAG,CAACG,MAAM,EAAED,CAAC,EAAE,CAAE;QACxCH,IAAI,CAACC,GAAG,CAACE,CAAC,CAAC,GAAG,CAAC;IACjB;IACAjC,SAAS,uJAACgB,gBAAgB,CAACmB,MAAM,CAACL,IAAI,CAAC;AACzC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 15926, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 15932, "column": 0}, "map": {"version":3,"file":"config.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/config.ts"],"sourcesContent":["import * as Chunk from \"../Chunk.js\"\nimport type * as Config from \"../Config.js\"\nimport * as ConfigError from \"../ConfigError.js\"\nimport * as Duration from \"../Duration.js\"\nimport * as Either from \"../Either.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport { constTrue, dual, pipe } from \"../Function.js\"\nimport type * as HashMap from \"../HashMap.js\"\nimport * as HashSet from \"../HashSet.js\"\nimport type * as LogLevel from \"../LogLevel.js\"\nimport * as Option from \"../Option.js\"\nimport { hasProperty, type Predicate, type Refinement } from \"../Predicate.js\"\nimport type * as Redacted from \"../Redacted.js\"\nimport type * as Secret from \"../Secret.js\"\nimport * as configError from \"./configError.js\"\nimport * as core from \"./core.js\"\nimport * as defaultServices from \"./defaultServices.js\"\nimport * as effectable from \"./effectable.js\"\nimport * as OpCodes from \"./opCodes/config.js\"\nimport * as redacted_ from \"./redacted.js\"\nimport * as InternalSecret from \"./secret.js\"\n\nconst ConfigSymbolKey = \"effect/Config\"\n\n/** @internal */\nexport const ConfigTypeId: Config.ConfigTypeId = Symbol.for(\n  ConfigSymbolKey\n) as Config.ConfigTypeId\n\n/** @internal */\nexport type ConfigPrimitive =\n  | Constant\n  | Described\n  | Fallback\n  | Fail\n  | Lazy\n  | MapOrFail\n  | Nested\n  | Primitive\n  | Sequence\n  | Table\n  | Zipped\n\nconst configVariance = {\n  /* c8 ignore next */\n  _A: (_: never) => _\n}\n\nconst proto = {\n  ...effectable.CommitPrototype,\n  [ConfigTypeId]: configVariance,\n  commit(this: Config.Config<unknown>) {\n    return defaultServices.config(this)\n  }\n}\n\n/** @internal */\nexport type Op<Tag extends string, Body = {}> = Config.Config<never> & Body & {\n  readonly _tag: Tag\n}\n\n/** @internal */\nexport interface Constant extends\n  Op<OpCodes.OP_CONSTANT, {\n    readonly value: unknown\n    parse(text: string): Either.Either<unknown, ConfigError.ConfigError>\n  }>\n{}\n\n/** @internal */\nexport interface Described extends\n  Op<OpCodes.OP_DESCRIBED, {\n    readonly config: Config.Config<unknown>\n    readonly description: string\n  }>\n{}\n\n/** @internal */\nexport interface Fallback extends\n  Op<OpCodes.OP_FALLBACK, {\n    readonly first: Config.Config<unknown>\n    readonly second: Config.Config<unknown>\n    readonly condition: Predicate<ConfigError.ConfigError>\n  }>\n{}\n\n/** @internal */\nexport interface Fail extends\n  Op<OpCodes.OP_FAIL, {\n    readonly message: string\n    parse(text: string): Either.Either<unknown, ConfigError.ConfigError>\n  }>\n{}\n\n/** @internal */\nexport interface Lazy extends\n  Op<OpCodes.OP_LAZY, {\n    config(): Config.Config<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface MapOrFail extends\n  Op<OpCodes.OP_MAP_OR_FAIL, {\n    readonly original: Config.Config<unknown>\n    mapOrFail(value: unknown): Either.Either<unknown, ConfigError.ConfigError>\n  }>\n{}\n\n/** @internal */\nexport interface Nested extends\n  Op<OpCodes.OP_NESTED, {\n    readonly name: string\n    readonly config: Config.Config<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Primitive extends\n  Op<OpCodes.OP_PRIMITIVE, {\n    readonly description: string\n    parse(text: string): Either.Either<unknown, ConfigError.ConfigError>\n  }>\n{}\n\n/** @internal */\nexport interface Sequence extends\n  Op<OpCodes.OP_SEQUENCE, {\n    readonly config: Config.Config<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Table extends\n  Op<OpCodes.OP_HASHMAP, {\n    readonly op: OpCodes.OP_HASHMAP\n    readonly valueConfig: Config.Config<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Zipped extends\n  Op<OpCodes.OP_ZIP_WITH, {\n    readonly op: OpCodes.OP_ZIP_WITH\n    readonly left: Config.Config<unknown>\n    readonly right: Config.Config<unknown>\n    zip(a: unknown, b: unknown): unknown\n  }>\n{}\n\n/** @internal */\nexport const boolean = (name?: string): Config.Config<boolean> => {\n  const config = primitive(\n    \"a boolean property\",\n    (text) => {\n      switch (text) {\n        case \"true\":\n        case \"yes\":\n        case \"on\":\n        case \"1\": {\n          return Either.right(true)\n        }\n        case \"false\":\n        case \"no\":\n        case \"off\":\n        case \"0\": {\n          return Either.right(false)\n        }\n        default: {\n          const error = configError.InvalidData(\n            [],\n            `Expected a boolean value but received ${text}`\n          )\n          return Either.left(error)\n        }\n      }\n    }\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const url = (name?: string): Config.Config<URL> => {\n  const config = primitive(\n    \"an URL property\",\n    (text) =>\n      Either.try({\n        try: () => new URL(text),\n        catch: (_) => configError.InvalidData([], `Expected an URL value but received ${text}`)\n      })\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const array = <A>(config: Config.Config<A>, name?: string): Config.Config<Array<A>> => {\n  return pipe(chunk(config, name), map(Chunk.toArray))\n}\n\n/** @internal */\nexport const chunk = <A>(config: Config.Config<A>, name?: string): Config.Config<Chunk.Chunk<A>> => {\n  return map(name === undefined ? repeat(config) : nested(repeat(config), name), Chunk.unsafeFromArray)\n}\n\n/** @internal */\nexport const date = (name?: string): Config.Config<Date> => {\n  const config = primitive(\n    \"a date property\",\n    (text) => {\n      const result = Date.parse(text)\n      if (Number.isNaN(result)) {\n        return Either.left(\n          configError.InvalidData(\n            [],\n            `Expected a Date value but received ${text}`\n          )\n        )\n      }\n      return Either.right(new Date(result))\n    }\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const fail = (message: string): Config.Config<never> => {\n  const fail = Object.create(proto)\n  fail._tag = OpCodes.OP_FAIL\n  fail.message = message\n  fail.parse = () => Either.left(configError.Unsupported([], message))\n  return fail\n}\n\n/** @internal */\nexport const number = (name?: string): Config.Config<number> => {\n  const config = primitive(\n    \"a number property\",\n    (text) => {\n      const result = Number(text)\n      if (Number.isNaN(result)) {\n        return Either.left(\n          configError.InvalidData(\n            [],\n            `Expected a number value but received ${text}`\n          )\n        )\n      }\n      return Either.right(result)\n    }\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const integer = (name?: string): Config.Config<number> => {\n  const config = primitive(\n    \"an integer property\",\n    (text) => {\n      const result = Number(text)\n      if (!Number.isInteger(result)) {\n        return Either.left(\n          configError.InvalidData(\n            [],\n            `Expected an integer value but received ${text}`\n          )\n        )\n      }\n      return Either.right(result)\n    }\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const literal = <Literals extends ReadonlyArray<Config.LiteralValue>>(...literals: Literals) =>\n(\n  name?: string\n): Config.Config<Literals[number]> => {\n  const valuesString = literals.map(String).join(\", \")\n  const config = primitive(`one of (${valuesString})`, (text) => {\n    const found = literals.find((value) => String(value) === text)\n    if (found === undefined) {\n      return Either.left(\n        configError.InvalidData(\n          [],\n          `Expected one of (${valuesString}) but received ${text}`\n        )\n      )\n    }\n    return Either.right(found)\n  })\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const logLevel = (name?: string): Config.Config<LogLevel.LogLevel> => {\n  const config = mapOrFail(string(), (value) => {\n    const label = value.toUpperCase()\n    const level = core.allLogLevels.find((level) => level.label === label)\n    return level === undefined\n      ? Either.left(configError.InvalidData([], `Expected a log level but received ${value}`))\n      : Either.right(level)\n  })\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const duration = (name?: string): Config.Config<Duration.Duration> => {\n  const config = mapOrFail(string(), (value) => {\n    const duration = Duration.decodeUnknown(value)\n    return Either.fromOption(duration, () => configError.InvalidData([], `Expected a duration but received ${value}`))\n  })\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const map = dual<\n  <A, B>(f: (a: A) => B) => (self: Config.Config<A>) => Config.Config<B>,\n  <A, B>(self: Config.Config<A>, f: (a: A) => B) => Config.Config<B>\n>(2, (self, f) => mapOrFail(self, (a) => Either.right(f(a))))\n\n/** @internal */\nexport const mapAttempt = dual<\n  <A, B>(f: (a: A) => B) => (self: Config.Config<A>) => Config.Config<B>,\n  <A, B>(self: Config.Config<A>, f: (a: A) => B) => Config.Config<B>\n>(2, (self, f) =>\n  mapOrFail(self, (a) => {\n    try {\n      return Either.right(f(a))\n    } catch (error) {\n      return Either.left(\n        configError.InvalidData(\n          [],\n          error instanceof Error ? error.message : `${error}`\n        )\n      )\n    }\n  }))\n\n/** @internal */\nexport const mapOrFail = dual<\n  <A, B>(f: (a: A) => Either.Either<B, ConfigError.ConfigError>) => (self: Config.Config<A>) => Config.Config<B>,\n  <A, B>(self: Config.Config<A>, f: (a: A) => Either.Either<B, ConfigError.ConfigError>) => Config.Config<B>\n>(2, (self, f) => {\n  const mapOrFail = Object.create(proto)\n  mapOrFail._tag = OpCodes.OP_MAP_OR_FAIL\n  mapOrFail.original = self\n  mapOrFail.mapOrFail = f\n  return mapOrFail\n})\n\n/** @internal */\nexport const nested = dual<\n  (name: string) => <A>(self: Config.Config<A>) => Config.Config<A>,\n  <A>(self: Config.Config<A>, name: string) => Config.Config<A>\n>(2, (self, name) => {\n  const nested = Object.create(proto)\n  nested._tag = OpCodes.OP_NESTED\n  nested.name = name\n  nested.config = self\n  return nested\n})\n\n/** @internal */\nexport const orElse = dual<\n  <A2>(that: LazyArg<Config.Config<A2>>) => <A>(self: Config.Config<A>) => Config.Config<A | A2>,\n  <A, A2>(self: Config.Config<A>, that: LazyArg<Config.Config<A2>>) => Config.Config<A | A2>\n>(2, (self, that) => {\n  const fallback = Object.create(proto)\n  fallback._tag = OpCodes.OP_FALLBACK\n  fallback.first = self\n  fallback.second = suspend(that)\n  fallback.condition = constTrue\n  return fallback\n})\n\n/** @internal */\nexport const orElseIf = dual<\n  <A2>(\n    options: {\n      readonly if: Predicate<ConfigError.ConfigError>\n      readonly orElse: LazyArg<Config.Config<A2>>\n    }\n  ) => <A>(self: Config.Config<A>) => Config.Config<A>,\n  <A, A2>(\n    self: Config.Config<A>,\n    options: {\n      readonly if: Predicate<ConfigError.ConfigError>\n      readonly orElse: LazyArg<Config.Config<A2>>\n    }\n  ) => Config.Config<A>\n>(2, (self, options) => {\n  const fallback = Object.create(proto)\n  fallback._tag = OpCodes.OP_FALLBACK\n  fallback.first = self\n  fallback.second = suspend(options.orElse)\n  fallback.condition = options.if\n  return fallback\n})\n\n/** @internal */\nexport const option = <A>(self: Config.Config<A>): Config.Config<Option.Option<A>> => {\n  return pipe(\n    self,\n    map(Option.some),\n    orElseIf({ orElse: () => succeed(Option.none()), if: ConfigError.isMissingDataOnly })\n  )\n}\n\n/** @internal */\nexport const primitive = <A>(\n  description: string,\n  parse: (text: string) => Either.Either<A, ConfigError.ConfigError>\n): Config.Config<A> => {\n  const primitive = Object.create(proto)\n  primitive._tag = OpCodes.OP_PRIMITIVE\n  primitive.description = description\n  primitive.parse = parse\n  return primitive\n}\n\n/** @internal */\nexport const repeat = <A>(self: Config.Config<A>): Config.Config<Array<A>> => {\n  const repeat = Object.create(proto)\n  repeat._tag = OpCodes.OP_SEQUENCE\n  repeat.config = self\n  return repeat\n}\n\n/** @internal */\nexport const secret = (name?: string): Config.Config<Secret.Secret> => {\n  const config = primitive(\n    \"a secret property\",\n    (text) => Either.right(InternalSecret.fromString(text))\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const redacted = <A>(\n  nameOrConfig?: string | Config.Config<A>\n): Config.Config<Redacted.Redacted<A | string>> => {\n  const config: Config.Config<A | string> = isConfig(nameOrConfig) ? nameOrConfig : string(nameOrConfig)\n  return map(config, redacted_.make)\n}\n\n/** @internal */\nexport const hashSet = <A>(config: Config.Config<A>, name?: string): Config.Config<HashSet.HashSet<A>> => {\n  const newConfig = map(chunk(config), HashSet.fromIterable)\n  return name === undefined ? newConfig : nested(newConfig, name)\n}\n\n/** @internal */\nexport const string = (name?: string): Config.Config<string> => {\n  const config = primitive(\n    \"a text property\",\n    Either.right\n  )\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const nonEmptyString = (name?: string): Config.Config<string> => {\n  const config = primitive(\n    \"a non-empty text property\",\n    Either.liftPredicate((text) => text.length > 0, () => configError.MissingData([], \"Expected a non-empty string\"))\n  )\n\n  return name === undefined ? config : nested(config, name)\n}\n\n/** @internal */\nexport const all = <const Arg extends Iterable<Config.Config<any>> | Record<string, Config.Config<any>>>(\n  arg: Arg\n): Config.Config<\n  [Arg] extends [ReadonlyArray<Config.Config<any>>] ? {\n      -readonly [K in keyof Arg]: [Arg[K]] extends [Config.Config<infer A>] ? A : never\n    }\n    : [Arg] extends [Iterable<Config.Config<infer A>>] ? Array<A>\n    : [Arg] extends [Record<string, Config.Config<any>>] ? {\n        -readonly [K in keyof Arg]: [Arg[K]] extends [Config.Config<infer A>] ? A : never\n      }\n    : never\n> => {\n  if (Array.isArray(arg)) {\n    return tuple(arg) as any\n  } else if (Symbol.iterator in arg) {\n    return tuple([...(arg as Iterable<Config.Config<any>>)]) as any\n  }\n  return struct(arg) as any\n}\n\nconst struct = <NER extends Record<string, Config.Config<any>>>(r: NER): Config.Config<\n  {\n    [K in keyof NER]: [NER[K]] extends [{ [ConfigTypeId]: { _A: (_: never) => infer A } }] ? A : never\n  }\n> => {\n  const entries = Object.entries(r)\n  let result = pipe(entries[0][1], map((value) => ({ [entries[0][0]]: value })))\n  if (entries.length === 1) {\n    return result as any\n  }\n  const rest = entries.slice(1)\n  for (const [key, config] of rest) {\n    result = pipe(\n      result,\n      zipWith(config, (record, value) => ({ ...record, [key]: value }))\n    )\n  }\n  return result as any\n}\n\n/** @internal */\nexport const succeed = <A>(value: A): Config.Config<A> => {\n  const constant = Object.create(proto)\n  constant._tag = OpCodes.OP_CONSTANT\n  constant.value = value\n  constant.parse = () => Either.right(value)\n  return constant\n}\n\n/** @internal */\nexport const suspend = <A>(config: LazyArg<Config.Config<A>>): Config.Config<A> => {\n  const lazy = Object.create(proto)\n  lazy._tag = OpCodes.OP_LAZY\n  lazy.config = config\n  return lazy\n}\n\n/** @internal */\nexport const sync = <A>(value: LazyArg<A>): Config.Config<A> => {\n  return suspend(() => succeed(value()))\n}\n\n/** @internal */\nexport const hashMap = <A>(config: Config.Config<A>, name?: string): Config.Config<HashMap.HashMap<string, A>> => {\n  const table = Object.create(proto)\n  table._tag = OpCodes.OP_HASHMAP\n  table.valueConfig = config\n  return name === undefined ? table : nested(table, name)\n}\n\n/** @internal */\nexport const isConfig = (u: unknown): u is Config.Config<unknown> => hasProperty(u, ConfigTypeId)\n\n/** @internal */\nconst tuple = <T extends ArrayLike<Config.Config<any>>>(tuple: T): Config.Config<\n  {\n    [K in keyof T]: [T[K]] extends [Config.Config<infer A>] ? A : never\n  }\n> => {\n  if (tuple.length === 0) {\n    return succeed([]) as any\n  }\n  if (tuple.length === 1) {\n    return map(tuple[0], (x) => [x]) as any\n  }\n  let result = map(tuple[0], (x) => [x])\n  for (let i = 1; i < tuple.length; i++) {\n    const config = tuple[i]\n    result = pipe(\n      result,\n      zipWith(config, (tuple, value) => [...tuple, value])\n    ) as any\n  }\n  return result as any\n}\n\n/**\n * @internal\n */\nexport const unwrap = <A>(wrapped: Config.Config.Wrap<A>): Config.Config<A> => {\n  if (isConfig(wrapped)) {\n    return wrapped\n  }\n  return struct(\n    Object.fromEntries(\n      Object.entries(wrapped).map(([k, a]) => [k, unwrap(a as any)])\n    )\n  ) as any\n}\n\n/** @internal */\nexport const validate = dual<\n  {\n    <A, B extends A>(options: {\n      readonly message: string\n      readonly validation: Refinement<A, B>\n    }): (self: Config.Config<A>) => Config.Config<B>\n    <A>(options: {\n      readonly message: string\n      readonly validation: Predicate<A>\n    }): (self: Config.Config<A>) => Config.Config<A>\n  },\n  {\n    <A, B extends A>(self: Config.Config<A>, options: {\n      readonly message: string\n      readonly validation: Refinement<A, B>\n    }): Config.Config<B>\n    <A>(self: Config.Config<A>, options: {\n      readonly message: string\n      readonly validation: Predicate<A>\n    }): Config.Config<A>\n  }\n>(2, <A>(self: Config.Config<A>, { message, validation }: {\n  readonly message: string\n  readonly validation: Predicate<A>\n}) =>\n  mapOrFail(self, (a) => {\n    if (validation(a)) {\n      return Either.right(a)\n    }\n    return Either.left(configError.InvalidData([], message))\n  }))\n\n/** @internal */\nexport const withDefault = dual<\n  <const A2>(def: A2) => <A>(self: Config.Config<A>) => Config.Config<A | A2>,\n  <A, const A2>(self: Config.Config<A>, def: A2) => Config.Config<A | A2>\n>(2, (self, def) =>\n  orElseIf(self, {\n    orElse: () => succeed(def),\n    if: ConfigError.isMissingDataOnly\n  }))\n\n/** @internal */\nexport const withDescription = dual<\n  (description: string) => <A>(self: Config.Config<A>) => Config.Config<A>,\n  <A>(self: Config.Config<A>, description: string) => Config.Config<A>\n>(2, (self, description) => {\n  const described = Object.create(proto)\n  described._tag = OpCodes.OP_DESCRIBED\n  described.config = self\n  described.description = description\n  return described\n})\n\n/** @internal */\nexport const zip = dual<\n  <B>(that: Config.Config<B>) => <A>(self: Config.Config<A>) => Config.Config<[A, B]>,\n  <A, B>(self: Config.Config<A>, that: Config.Config<B>) => Config.Config<[A, B]>\n>(2, (self, that) => zipWith(self, that, (a, b) => [a, b]))\n\n/** @internal */\nexport const zipWith = dual<\n  <B, A, C>(that: Config.Config<B>, f: (a: A, b: B) => C) => (self: Config.Config<A>) => Config.Config<C>,\n  <A, B, C>(self: Config.Config<A>, that: Config.Config<B>, f: (a: A, b: B) => C) => Config.Config<C>\n>(3, (self, that, f) => {\n  const zipWith = Object.create(proto)\n  zipWith._tag = OpCodes.OP_ZIP_WITH\n  zipWith.left = self\n  zipWith.right = that\n  zipWith.zip = f\n  return zipWith\n})\n"],"names":["Chunk","ConfigError","Duration","Either","constTrue","dual","pipe","HashSet","Option","hasProperty","configError","core","defaultServices","effectable","OpCodes","redacted_","InternalSecret","ConfigSymbolKey","ConfigTypeId","Symbol","for","configVariance","_A","_","proto","CommitPrototype","commit","config","boolean","name","primitive","text","right","error","InvalidData","left","undefined","nested","url","try","URL","catch","array","chunk","map","toArray","repeat","unsafeFromArray","date","result","Date","parse","Number","isNaN","fail","message","Object","create","_tag","OP_FAIL","Unsupported","number","integer","isInteger","literal","literals","valuesString","String","join","found","find","value","logLevel","mapOrFail","string","label","toUpperCase","level","allLogLevels","duration","decodeUnknown","fromOption","self","f","a","mapAttempt","Error","OP_MAP_OR_FAIL","original","OP_NESTED","orElse","that","fallback","OP_FALLBACK","first","second","suspend","condition","orElseIf","options","if","option","some","succeed","none","isMissingDataOnly","description","OP_PRIMITIVE","OP_SEQUENCE","secret","fromString","redacted","nameOrConfig","isConfig","make","hashSet","newConfig","fromIterable","nonEmptyString","liftPredicate","length","MissingData","all","arg","Array","isArray","tuple","iterator","struct","r","entries","rest","slice","key","zipWith","record","constant","OP_CONSTANT","lazy","OP_LAZY","sync","hashMap","table","OP_HASHMAP","valueConfig","u","x","i","unwrap","wrapped","fromEntries","k","validate","validation","withDefault","def","withDescription","described","OP_DESCRIBED","zip","b","OP_ZIP_WITH"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 16302, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 16308, "column": 0}, "map": {"version":3,"file":"common.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/encoding/common.ts"],"sourcesContent":["import type * as Encoding from \"../../Encoding.js\"\nimport { hasProperty, isString } from \"../../Predicate.js\"\nimport type { Mutable } from \"../../Types.js\"\n\n/** @internal */\nexport const DecodeExceptionTypeId: Encoding.DecodeExceptionTypeId = Symbol.for(\n  \"effect/Encoding/errors/Decode\"\n) as Encoding.DecodeExceptionTypeId\n\n/** @internal */\nexport const DecodeException = (input: string, message?: string): Encoding.DecodeException => {\n  const out: Mutable<Encoding.DecodeException> = {\n    _tag: \"DecodeException\",\n    [DecodeExceptionTypeId]: DecodeExceptionTypeId,\n    input\n  }\n  if (isString(message)) {\n    out.message = message\n  }\n  return out\n}\n\n/** @internal */\nexport const isDecodeException = (u: unknown): u is Encoding.DecodeException => hasProperty(u, DecodeExceptionTypeId)\n\n/** @interal */\nexport const encoder = new TextEncoder()\n\n/** @interal */\nexport const decoder = new TextDecoder()\n"],"names":["hasProperty","isString","DecodeExceptionTypeId","Symbol","for","DecodeException","input","message","out","_tag","isDecodeException","u","encoder","TextEncoder","decoder","TextDecoder"],"mappings":";;;;;;;AACA,SAASA,WAAW,EAAEC,QAAQ,QAAQ,oBAAoB;;AAInD,MAAMC,qBAAqB,GAAA,WAAA,GAAmCC,MAAM,CAACC,GAAG,CAC7E,+BAA+B,CACE;AAG5B,MAAMC,eAAe,GAAGA,CAACC,KAAa,EAAEC,OAAgB,KAA8B;IAC3F,MAAMC,GAAG,GAAsC;QAC7CC,IAAI,EAAE,iBAAiB;QACvB,CAACP,qBAAqB,CAAA,EAAGA,qBAAqB;QAC9CI;KACD;IACD,6JAAIL,WAAAA,AAAQ,EAACM,OAAO,CAAC,EAAE;QACrBC,GAAG,CAACD,OAAO,GAAGA,OAAO;IACvB;IACA,OAAOC,GAAG;AACZ,CAAC;AAGM,MAAME,iBAAiB,IAAIC,CAAU,4JAAoCX,cAAAA,AAAW,EAACW,CAAC,EAAET,qBAAqB,CAAC;AAG9G,MAAMU,OAAO,GAAA,WAAA,GAAG,IAAIC,WAAW,EAAE;AAGjC,MAAMC,OAAO,GAAA,WAAA,GAAG,IAAIC,WAAW,EAAE","ignoreList":[0]}},
    {"offset": {"line": 16332, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 16338, "column": 0}, "map": {"version":3,"file":"base64.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/encoding/base64.ts"],"sourcesContent":["import * as Either from \"../../Either.js\"\nimport type * as Encoding from \"../../Encoding.js\"\nimport { DecodeException } from \"./common.js\"\n\n/** @internal */\nexport const encode = (bytes: Uint8Array) => {\n  const length = bytes.length\n\n  let result = \"\"\n  let i: number\n\n  for (i = 2; i < length; i += 3) {\n    result += base64abc[bytes[i - 2] >> 2]\n    result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)]\n    result += base64abc[((bytes[i - 1] & 0x0f) << 2) | (bytes[i] >> 6)]\n    result += base64abc[bytes[i] & 0x3f]\n  }\n\n  if (i === length + 1) {\n    // 1 octet yet to write\n    result += base64abc[bytes[i - 2] >> 2]\n    result += base64abc[(bytes[i - 2] & 0x03) << 4]\n    result += \"==\"\n  }\n\n  if (i === length) {\n    // 2 octets yet to write\n    result += base64abc[bytes[i - 2] >> 2]\n    result += base64abc[((bytes[i - 2] & 0x03) << 4) | (bytes[i - 1] >> 4)]\n    result += base64abc[(bytes[i - 1] & 0x0f) << 2]\n    result += \"=\"\n  }\n\n  return result\n}\n\n/** @internal */\nexport const decode = (str: string): Either.Either<Uint8Array, Encoding.DecodeException> => {\n  const stripped = stripCrlf(str)\n  const length = stripped.length\n  if (length % 4 !== 0) {\n    return Either.left(\n      DecodeException(stripped, `Length must be a multiple of 4, but is ${length}`)\n    )\n  }\n\n  const index = stripped.indexOf(\"=\")\n  if (index !== -1 && ((index < length - 2) || (index === length - 2 && stripped[length - 1] !== \"=\"))) {\n    return Either.left(\n      DecodeException(stripped, \"Found a '=' character, but it is not at the end\")\n    )\n  }\n\n  try {\n    const missingOctets = stripped.endsWith(\"==\") ? 2 : stripped.endsWith(\"=\") ? 1 : 0\n    const result = new Uint8Array(3 * (length / 4) - missingOctets)\n    for (let i = 0, j = 0; i < length; i += 4, j += 3) {\n      const buffer = getBase64Code(stripped.charCodeAt(i)) << 18 |\n        getBase64Code(stripped.charCodeAt(i + 1)) << 12 |\n        getBase64Code(stripped.charCodeAt(i + 2)) << 6 |\n        getBase64Code(stripped.charCodeAt(i + 3))\n\n      result[j] = buffer >> 16\n      result[j + 1] = (buffer >> 8) & 0xff\n      result[j + 2] = buffer & 0xff\n    }\n\n    return Either.right(result)\n  } catch (e) {\n    return Either.left(\n      DecodeException(stripped, e instanceof Error ? e.message : \"Invalid input\")\n    )\n  }\n}\n\n/** @internal */\nexport const stripCrlf = (str: string) => str.replace(/[\\n\\r]/g, \"\")\n\n/** @internal */\nfunction getBase64Code(charCode: number) {\n  if (charCode >= base64codes.length) {\n    throw new TypeError(`Invalid character ${String.fromCharCode(charCode)}`)\n  }\n\n  const code = base64codes[charCode]\n  if (code === 255) {\n    throw new TypeError(`Invalid character ${String.fromCharCode(charCode)}`)\n  }\n\n  return code\n}\n\n/** @internal */\nconst base64abc = [\n  \"A\",\n  \"B\",\n  \"C\",\n  \"D\",\n  \"E\",\n  \"F\",\n  \"G\",\n  \"H\",\n  \"I\",\n  \"J\",\n  \"K\",\n  \"L\",\n  \"M\",\n  \"N\",\n  \"O\",\n  \"P\",\n  \"Q\",\n  \"R\",\n  \"S\",\n  \"T\",\n  \"U\",\n  \"V\",\n  \"W\",\n  \"X\",\n  \"Y\",\n  \"Z\",\n  \"a\",\n  \"b\",\n  \"c\",\n  \"d\",\n  \"e\",\n  \"f\",\n  \"g\",\n  \"h\",\n  \"i\",\n  \"j\",\n  \"k\",\n  \"l\",\n  \"m\",\n  \"n\",\n  \"o\",\n  \"p\",\n  \"q\",\n  \"r\",\n  \"s\",\n  \"t\",\n  \"u\",\n  \"v\",\n  \"w\",\n  \"x\",\n  \"y\",\n  \"z\",\n  \"0\",\n  \"1\",\n  \"2\",\n  \"3\",\n  \"4\",\n  \"5\",\n  \"6\",\n  \"7\",\n  \"8\",\n  \"9\",\n  \"+\",\n  \"/\"\n]\n\n/** @internal */\nconst base64codes = [\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  62,\n  255,\n  255,\n  255,\n  63,\n  52,\n  53,\n  54,\n  55,\n  56,\n  57,\n  58,\n  59,\n  60,\n  61,\n  255,\n  255,\n  255,\n  0,\n  255,\n  255,\n  255,\n  0,\n  1,\n  2,\n  3,\n  4,\n  5,\n  6,\n  7,\n  8,\n  9,\n  10,\n  11,\n  12,\n  13,\n  14,\n  15,\n  16,\n  17,\n  18,\n  19,\n  20,\n  21,\n  22,\n  23,\n  24,\n  25,\n  255,\n  255,\n  255,\n  255,\n  255,\n  255,\n  26,\n  27,\n  28,\n  29,\n  30,\n  31,\n  32,\n  33,\n  34,\n  35,\n  36,\n  37,\n  38,\n  39,\n  40,\n  41,\n  42,\n  43,\n  44,\n  45,\n  46,\n  47,\n  48,\n  49,\n  50,\n  51\n]\n"],"names":["Either","DecodeException","encode","bytes","length","result","i","base64abc","decode","str","stripped","stripCrlf","left","index","indexOf","missingOctets","endsWith","Uint8Array","j","buffer","getBase64Code","charCodeAt","right","e","Error","message","replace","charCode","base64codes","TypeError","String","fromCharCode","code"],"mappings":"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;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;CACJ;AAED,cAAA,GACA,MAAMqB,WAAW,GAAG;IAClB,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,EAAE;IACF,GAAG;IACH,GAAG;IACH,GAAG;IACH,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,GAAG;IACH,GAAG;IACH,GAAG;IACH,CAAC;IACD,GAAG;IACH,GAAG;IACH,GAAG;IACH,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,CAAC;IACD,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,GAAG;IACH,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;IACF,EAAE;CACH","ignoreList":[0]}},
    {"offset": {"line": 16598, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 16604, "column": 0}, "map": {"version":3,"file":"base64Url.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/encoding/base64Url.ts"],"sourcesContent":["import * as Either from \"../../Either.js\"\nimport type * as Encoding from \"../../Encoding.js\"\nimport * as Base64 from \"./base64.js\"\nimport { DecodeException } from \"./common.js\"\n\n/** @internal */\nexport const encode = (data: Uint8Array) =>\n  Base64.encode(data).replace(/=/g, \"\").replace(/\\+/g, \"-\").replace(/\\//g, \"_\")\n\n/** @internal */\nexport const decode = (str: string): Either.Either<Uint8Array, Encoding.DecodeException> => {\n  const stripped = Base64.stripCrlf(str)\n  const length = stripped.length\n  if (length % 4 === 1) {\n    return Either.left(\n      DecodeException(stripped, `Length should be a multiple of 4, but is ${length}`)\n    )\n  }\n\n  if (!/^[-_A-Z0-9]*?={0,2}$/i.test(stripped)) {\n    return Either.left(DecodeException(stripped, \"Invalid input\"))\n  }\n\n  // Some variants allow or require omitting the padding '=' signs\n  let sanitized = length % 4 === 2 ? `${stripped}==` : length % 4 === 3 ? `${stripped}=` : stripped\n  sanitized = sanitized.replace(/-/g, \"+\").replace(/_/g, \"/\")\n\n  return Base64.decode(sanitized)\n}\n"],"names":["Either","Base64","DecodeException","encode","data","replace","decode","str","stripped","stripCrlf","length","left","test","sanitized"],"mappings":";;;;AAEA,OAAO,KAAKC,MAAM,MAAM,aAAa;AAFrC,OAAO,KAAKD,MAAM,MAAM,iBAAiB;AAGzC,SAASE,eAAe,QAAQ,aAAa;;;;AAGtC,MAAMC,MAAM,IAAIC,IAAgB,GACrCH,MAAM,oKAACE,MAAM,CAACC,IAAI,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,EAAE,CAAC,CAACA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC;AAGxE,MAAMC,MAAM,IAAIC,GAAW,IAAyD;IACzF,MAAMC,QAAQ,GAAGP,MAAM,oKAACQ,SAAS,CAACF,GAAG,CAAC;IACtC,MAAMG,MAAM,GAAGF,QAAQ,CAACE,MAAM;IAC9B,IAAIA,MAAM,GAAG,CAAC,KAAK,CAAC,EAAE;QACpB,OAAOV,MAAM,4IAACW,IAAI,+KAChBT,kBAAAA,AAAe,EAACM,QAAQ,EAAE,CAAA,yCAAA,EAA4CE,MAAM,EAAE,CAAC,CAChF;IACH;IAEA,IAAI,CAAC,uBAAuB,CAACE,IAAI,CAACJ,QAAQ,CAAC,EAAE;QAC3C,OAAOR,MAAM,4IAACW,IAAI,+KAACT,kBAAAA,AAAe,EAACM,QAAQ,EAAE,eAAe,CAAC,CAAC;IAChE;IAEA,gEAAA;IACA,IAAIK,SAAS,GAAGH,MAAM,GAAG,CAAC,KAAK,CAAC,GAAG,GAAGF,QAAQ,CAAA,EAAA,CAAI,GAAGE,MAAM,GAAG,CAAC,KAAK,CAAC,GAAG,GAAGF,QAAQ,CAAA,CAAA,CAAG,GAAGA,QAAQ;IACjGK,SAAS,GAAGA,SAAS,CAACR,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC,CAACA,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;IAE3D,OAAOJ,MAAM,oKAACK,MAAM,CAACO,SAAS,CAAC;AACjC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 16629, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 16635, "column": 0}, "map": {"version":3,"file":"hex.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/encoding/hex.ts"],"sourcesContent":["import * as Either from \"../../Either.js\"\nimport type * as Encoding from \"../../Encoding.js\"\nimport { DecodeException } from \"./common.js\"\n\n/** @internal */\nexport const encode = (bytes: Uint8Array) => {\n  let result = \"\"\n  for (let i = 0; i < bytes.length; ++i) {\n    result += bytesToHex[bytes[i]]\n  }\n\n  return result\n}\n\n/** @internal */\nexport const decode = (str: string): Either.Either<Uint8Array, Encoding.DecodeException> => {\n  const bytes = new TextEncoder().encode(str)\n  if (bytes.length % 2 !== 0) {\n    return Either.left(DecodeException(str, `Length must be a multiple of 2, but is ${bytes.length}`))\n  }\n\n  try {\n    const length = bytes.length / 2\n    const result = new Uint8Array(length)\n    for (let i = 0; i < length; i++) {\n      const a = fromHexChar(bytes[i * 2])\n      const b = fromHexChar(bytes[i * 2 + 1])\n      result[i] = (a << 4) | b\n    }\n\n    return Either.right(result)\n  } catch (e) {\n    return Either.left(DecodeException(str, e instanceof Error ? e.message : \"Invalid input\"))\n  }\n}\n\n/** @internal */\nconst bytesToHex = [\n  \"00\",\n  \"01\",\n  \"02\",\n  \"03\",\n  \"04\",\n  \"05\",\n  \"06\",\n  \"07\",\n  \"08\",\n  \"09\",\n  \"0a\",\n  \"0b\",\n  \"0c\",\n  \"0d\",\n  \"0e\",\n  \"0f\",\n  \"10\",\n  \"11\",\n  \"12\",\n  \"13\",\n  \"14\",\n  \"15\",\n  \"16\",\n  \"17\",\n  \"18\",\n  \"19\",\n  \"1a\",\n  \"1b\",\n  \"1c\",\n  \"1d\",\n  \"1e\",\n  \"1f\",\n  \"20\",\n  \"21\",\n  \"22\",\n  \"23\",\n  \"24\",\n  \"25\",\n  \"26\",\n  \"27\",\n  \"28\",\n  \"29\",\n  \"2a\",\n  \"2b\",\n  \"2c\",\n  \"2d\",\n  \"2e\",\n  \"2f\",\n  \"30\",\n  \"31\",\n  \"32\",\n  \"33\",\n  \"34\",\n  \"35\",\n  \"36\",\n  \"37\",\n  \"38\",\n  \"39\",\n  \"3a\",\n  \"3b\",\n  \"3c\",\n  \"3d\",\n  \"3e\",\n  \"3f\",\n  \"40\",\n  \"41\",\n  \"42\",\n  \"43\",\n  \"44\",\n  \"45\",\n  \"46\",\n  \"47\",\n  \"48\",\n  \"49\",\n  \"4a\",\n  \"4b\",\n  \"4c\",\n  \"4d\",\n  \"4e\",\n  \"4f\",\n  \"50\",\n  \"51\",\n  \"52\",\n  \"53\",\n  \"54\",\n  \"55\",\n  \"56\",\n  \"57\",\n  \"58\",\n  \"59\",\n  \"5a\",\n  \"5b\",\n  \"5c\",\n  \"5d\",\n  \"5e\",\n  \"5f\",\n  \"60\",\n  \"61\",\n  \"62\",\n  \"63\",\n  \"64\",\n  \"65\",\n  \"66\",\n  \"67\",\n  \"68\",\n  \"69\",\n  \"6a\",\n  \"6b\",\n  \"6c\",\n  \"6d\",\n  \"6e\",\n  \"6f\",\n  \"70\",\n  \"71\",\n  \"72\",\n  \"73\",\n  \"74\",\n  \"75\",\n  \"76\",\n  \"77\",\n  \"78\",\n  \"79\",\n  \"7a\",\n  \"7b\",\n  \"7c\",\n  \"7d\",\n  \"7e\",\n  \"7f\",\n  \"80\",\n  \"81\",\n  \"82\",\n  \"83\",\n  \"84\",\n  \"85\",\n  \"86\",\n  \"87\",\n  \"88\",\n  \"89\",\n  \"8a\",\n  \"8b\",\n  \"8c\",\n  \"8d\",\n  \"8e\",\n  \"8f\",\n  \"90\",\n  \"91\",\n  \"92\",\n  \"93\",\n  \"94\",\n  \"95\",\n  \"96\",\n  \"97\",\n  \"98\",\n  \"99\",\n  \"9a\",\n  \"9b\",\n  \"9c\",\n  \"9d\",\n  \"9e\",\n  \"9f\",\n  \"a0\",\n  \"a1\",\n  \"a2\",\n  \"a3\",\n  \"a4\",\n  \"a5\",\n  \"a6\",\n  \"a7\",\n  \"a8\",\n  \"a9\",\n  \"aa\",\n  \"ab\",\n  \"ac\",\n  \"ad\",\n  \"ae\",\n  \"af\",\n  \"b0\",\n  \"b1\",\n  \"b2\",\n  \"b3\",\n  \"b4\",\n  \"b5\",\n  \"b6\",\n  \"b7\",\n  \"b8\",\n  \"b9\",\n  \"ba\",\n  \"bb\",\n  \"bc\",\n  \"bd\",\n  \"be\",\n  \"bf\",\n  \"c0\",\n  \"c1\",\n  \"c2\",\n  \"c3\",\n  \"c4\",\n  \"c5\",\n  \"c6\",\n  \"c7\",\n  \"c8\",\n  \"c9\",\n  \"ca\",\n  \"cb\",\n  \"cc\",\n  \"cd\",\n  \"ce\",\n  \"cf\",\n  \"d0\",\n  \"d1\",\n  \"d2\",\n  \"d3\",\n  \"d4\",\n  \"d5\",\n  \"d6\",\n  \"d7\",\n  \"d8\",\n  \"d9\",\n  \"da\",\n  \"db\",\n  \"dc\",\n  \"dd\",\n  \"de\",\n  \"df\",\n  \"e0\",\n  \"e1\",\n  \"e2\",\n  \"e3\",\n  \"e4\",\n  \"e5\",\n  \"e6\",\n  \"e7\",\n  \"e8\",\n  \"e9\",\n  \"ea\",\n  \"eb\",\n  \"ec\",\n  \"ed\",\n  \"ee\",\n  \"ef\",\n  \"f0\",\n  \"f1\",\n  \"f2\",\n  \"f3\",\n  \"f4\",\n  \"f5\",\n  \"f6\",\n  \"f7\",\n  \"f8\",\n  \"f9\",\n  \"fa\",\n  \"fb\",\n  \"fc\",\n  \"fd\",\n  \"fe\",\n  \"ff\"\n]\n\n/** @internal */\nconst fromHexChar = (byte: number) => {\n  // '0' <= byte && byte <= '9'\n  if (48 <= byte && byte <= 57) {\n    return byte - 48\n  }\n\n  // 'a' <= byte && byte <= 'f'\n  if (97 <= byte && byte <= 102) {\n    return byte - 97 + 10\n  }\n\n  // 'A' <= byte && byte <= 'F'\n  if (65 <= byte && byte <= 70) {\n    return byte - 65 + 10\n  }\n\n  throw new TypeError(\"Invalid input\")\n}\n"],"names":["Either","DecodeException","encode","bytes","result","i","length","bytesToHex","decode","str","TextEncoder","left","Uint8Array","a","fromHexChar","b","right","e","Error","message","byte","TypeError"],"mappings":";;;;AAAA,OAAO,KAAKA,MAAM,MAAM,iBAAiB;AAEzC,SAASC,eAAe,QAAQ,aAAa;;;AAGtC,MAAMC,MAAM,GAAIC,KAAiB,IAAI;IAC1C,IAAIC,MAAM,GAAG,EAAE;IACf,IAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,KAAK,CAACG,MAAM,EAAE,EAAED,CAAC,CAAE;QACrCD,MAAM,IAAIG,UAAU,CAACJ,KAAK,CAACE,CAAC,CAAC,CAAC;IAChC;IAEA,OAAOD,MAAM;AACf,CAAC;AAGM,MAAMI,MAAM,IAAIC,GAAW,IAAyD;IACzF,MAAMN,KAAK,GAAG,IAAIO,WAAW,EAAE,CAACR,MAAM,CAACO,GAAG,CAAC;IAC3C,IAAIN,KAAK,CAACG,MAAM,GAAG,CAAC,KAAK,CAAC,EAAE;QAC1B,OAAON,MAAM,4IAACW,IAAI,+KAACV,kBAAAA,AAAe,EAACQ,GAAG,EAAE,CAAA,uCAAA,EAA0CN,KAAK,CAACG,MAAM,EAAE,CAAC,CAAC;IACpG;IAEA,IAAI;QACF,MAAMA,MAAM,GAAGH,KAAK,CAACG,MAAM,GAAG,CAAC;QAC/B,MAAMF,MAAM,GAAG,IAAIQ,UAAU,CAACN,MAAM,CAAC;QACrC,IAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,MAAM,EAAED,CAAC,EAAE,CAAE;YAC/B,MAAMQ,CAAC,GAAGC,WAAW,CAACX,KAAK,CAACE,CAAC,GAAG,CAAC,CAAC,CAAC;YACnC,MAAMU,CAAC,GAAGD,WAAW,CAACX,KAAK,CAACE,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,CAAC;YACvCD,MAAM,CAACC,CAAC,CAAC,GAAIQ,CAAC,IAAI,CAAC,GAAIE,CAAC;QAC1B;QAEA,OAAOf,MAAM,4IAACgB,KAAK,CAACZ,MAAM,CAAC;IAC7B,CAAC,CAAC,OAAOa,CAAC,EAAE;QACV,OAAOjB,MAAM,4IAACW,IAAI,+KAACV,kBAAAA,AAAe,EAACQ,GAAG,EAAEQ,CAAC,YAAYC,KAAK,GAAGD,CAAC,CAACE,OAAO,GAAG,eAAe,CAAC,CAAC;IAC5F;AACF,CAAC;AAED,cAAA,GACA,MAAMZ,UAAU,GAAG;IACjB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;CACL;AAED,cAAA,GACA,MAAMO,WAAW,IAAIM,IAAY,IAAI;IACnC,6BAAA;IACA,IAAI,EAAE,IAAIA,IAAI,IAAIA,IAAI,IAAI,EAAE,EAAE;QAC5B,OAAOA,IAAI,GAAG,EAAE;IAClB;IAEA,6BAAA;IACA,IAAI,EAAE,IAAIA,IAAI,IAAIA,IAAI,IAAI,GAAG,EAAE;QAC7B,OAAOA,IAAI,GAAG,EAAE,GAAG,EAAE;IACvB;IAEA,6BAAA;IACA,IAAI,EAAE,IAAIA,IAAI,IAAIA,IAAI,IAAI,EAAE,EAAE;QAC5B,OAAOA,IAAI,GAAG,EAAE,GAAG,EAAE;IACvB;IAEA,MAAM,IAAIC,SAAS,CAAC,eAAe,CAAC;AACtC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 16941, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 16947, "column": 0}, "map": {"version":3,"file":"circular.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/layer/circular.ts"],"sourcesContent":["import type * as ConfigProvider from \"../../ConfigProvider.js\"\nimport * as Context from \"../../Context.js\"\nimport type * as Effect from \"../../Effect.js\"\nimport type * as Exit from \"../../Exit.js\"\nimport { dual } from \"../../Function.js\"\nimport * as HashSet from \"../../HashSet.js\"\nimport type * as Layer from \"../../Layer.js\"\nimport type * as Logger from \"../../Logger.js\"\nimport type * as LogLevel from \"../../LogLevel.js\"\nimport type { Scope } from \"../../Scope.js\"\nimport type * as Supervisor from \"../../Supervisor.js\"\nimport type * as Tracer from \"../../Tracer.js\"\nimport * as core from \"../core.js\"\nimport * as fiberRuntime from \"../fiberRuntime.js\"\nimport * as layer from \"../layer.js\"\nimport * as runtimeFlags from \"../runtimeFlags.js\"\nimport * as runtimeFlagsPatch from \"../runtimeFlagsPatch.js\"\nimport * as _supervisor from \"../supervisor.js\"\nimport * as tracer from \"../tracer.js\"\n\n// circular with Logger\n\n/** @internal */\nexport const minimumLogLevel = (level: LogLevel.LogLevel): Layer.Layer<never> =>\n  layer.scopedDiscard(\n    fiberRuntime.fiberRefLocallyScoped(\n      fiberRuntime.currentMinimumLogLevel,\n      level\n    )\n  )\n\n/** @internal */\nexport const withMinimumLogLevel = dual<\n  (level: LogLevel.LogLevel) => <A, E, R>(self: Effect.Effect<A, E, R>) => Effect.Effect<A, E, R>,\n  <A, E, R>(self: Effect.Effect<A, E, R>, level: LogLevel.LogLevel) => Effect.Effect<A, E, R>\n>(2, (self, level) =>\n  core.fiberRefLocally(\n    fiberRuntime.currentMinimumLogLevel,\n    level\n  )(self))\n\n/** @internal */\nexport const addLogger = <A>(logger: Logger.Logger<unknown, A>): Layer.Layer<never> =>\n  layer.scopedDiscard(\n    fiberRuntime.fiberRefLocallyScopedWith(\n      fiberRuntime.currentLoggers,\n      HashSet.add(logger)\n    )\n  )\n\n/** @internal */\nexport const addLoggerEffect = <A, E, R>(\n  effect: Effect.Effect<Logger.Logger<unknown, A>, E, R>\n): Layer.Layer<never, E, R> =>\n  layer.unwrapEffect(\n    core.map(effect, addLogger)\n  )\n\n/** @internal */\nexport const addLoggerScoped = <A, E, R>(\n  effect: Effect.Effect<Logger.Logger<unknown, A>, E, R>\n): Layer.Layer<never, E, Exclude<R, Scope>> =>\n  layer.unwrapScoped(\n    core.map(effect, addLogger)\n  )\n\n/** @internal */\nexport const removeLogger = <A>(logger: Logger.Logger<unknown, A>): Layer.Layer<never> =>\n  layer.scopedDiscard(\n    fiberRuntime.fiberRefLocallyScopedWith(\n      fiberRuntime.currentLoggers,\n      HashSet.remove(logger)\n    )\n  )\n\n/** @internal */\nexport const replaceLogger = dual<\n  <B>(that: Logger.Logger<unknown, B>) => <A>(self: Logger.Logger<unknown, A>) => Layer.Layer<never>,\n  <A, B>(self: Logger.Logger<unknown, A>, that: Logger.Logger<unknown, B>) => Layer.Layer<never>\n>(2, (self, that) => layer.flatMap(removeLogger(self), () => addLogger(that)))\n\n/** @internal */\nexport const replaceLoggerEffect = dual<\n  <B, E, R>(\n    that: Effect.Effect<Logger.Logger<unknown, B>, E, R>\n  ) => <A>(self: Logger.Logger<unknown, A>) => Layer.Layer<never, E, R>,\n  <A, B, E, R>(\n    self: Logger.Logger<unknown, A>,\n    that: Effect.Effect<Logger.Logger<unknown, B>, E, R>\n  ) => Layer.Layer<never, E, R>\n>(2, (self, that) => layer.flatMap(removeLogger(self), () => addLoggerEffect(that)))\n\n/** @internal */\nexport const replaceLoggerScoped = dual<\n  <B, E, R>(\n    that: Effect.Effect<Logger.Logger<unknown, B>, E, R>\n  ) => <A>(self: Logger.Logger<unknown, A>) => Layer.Layer<never, E, Exclude<R, Scope>>,\n  <A, B, E, R>(\n    self: Logger.Logger<unknown, A>,\n    that: Effect.Effect<Logger.Logger<unknown, B>, E, R>\n  ) => Layer.Layer<never, E, Exclude<R, Scope>>\n>(2, (self, that) => layer.flatMap(removeLogger(self), () => addLoggerScoped(that)))\n\n/** @internal */\nexport const addSupervisor = <A>(supervisor: Supervisor.Supervisor<A>): Layer.Layer<never> =>\n  layer.scopedDiscard(\n    fiberRuntime.fiberRefLocallyScopedWith(\n      fiberRuntime.currentSupervisor,\n      (current) => new _supervisor.Zip(current, supervisor)\n    )\n  )\n\n/** @internal */\nexport const enableCooperativeYielding: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.enable(runtimeFlags.CooperativeYielding)\n  )\n)\n\n/** @internal */\nexport const enableInterruption: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.enable(runtimeFlags.Interruption)\n  )\n)\n\n/** @internal */\nexport const enableOpSupervision: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.enable(runtimeFlags.OpSupervision)\n  )\n)\n\n/** @internal */\nexport const enableRuntimeMetrics: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.enable(runtimeFlags.RuntimeMetrics)\n  )\n)\n\n/** @internal */\nexport const enableWindDown: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.enable(runtimeFlags.WindDown)\n  )\n)\n\n/** @internal */\nexport const disableCooperativeYielding: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.disable(runtimeFlags.CooperativeYielding)\n  )\n)\n\n/** @internal */\nexport const disableInterruption: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.disable(runtimeFlags.Interruption)\n  )\n)\n\n/** @internal */\nexport const disableOpSupervision: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.disable(runtimeFlags.OpSupervision)\n  )\n)\n\n/** @internal */\nexport const disableRuntimeMetrics: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.disable(runtimeFlags.RuntimeMetrics)\n  )\n)\n\n/** @internal */\nexport const disableWindDown: Layer.Layer<never> = layer.scopedDiscard(\n  fiberRuntime.withRuntimeFlagsScoped(\n    runtimeFlagsPatch.disable(runtimeFlags.WindDown)\n  )\n)\n\n/** @internal */\nexport const setConfigProvider = (configProvider: ConfigProvider.ConfigProvider): Layer.Layer<never> =>\n  layer.scopedDiscard(fiberRuntime.withConfigProviderScoped(configProvider))\n\n/** @internal */\nexport const parentSpan = (span: Tracer.AnySpan): Layer.Layer<Tracer.ParentSpan> =>\n  layer.succeedContext(Context.make(tracer.spanTag, span))\n\n/** @internal */\nexport const span = (\n  name: string,\n  options?: Tracer.SpanOptions & {\n    readonly onEnd?:\n      | ((span: Tracer.Span, exit: Exit.Exit<unknown, unknown>) => Effect.Effect<void>)\n      | undefined\n  }\n): Layer.Layer<Tracer.ParentSpan> => {\n  options = tracer.addSpanStackTrace(options) as any\n  return layer.scoped(\n    tracer.spanTag,\n    options?.onEnd\n      ? core.tap(\n        fiberRuntime.makeSpanScoped(name, options),\n        (span) => fiberRuntime.addFinalizer((exit) => options.onEnd!(span, exit))\n      )\n      : fiberRuntime.makeSpanScoped(name, options)\n  )\n}\n\n/** @internal */\nexport const setTracer = (tracer: Tracer.Tracer): Layer.Layer<never> =>\n  layer.scopedDiscard(fiberRuntime.withTracerScoped(tracer))\n"],"names":["Context","dual","HashSet","core","fiberRuntime","layer","runtimeFlags","runtimeFlagsPatch","_supervisor","tracer","minimumLogLevel","level","scopedDiscard","fiberRefLocallyScoped","currentMinimumLogLevel","withMinimumLogLevel","self","fiberRefLocally","addLogger","logger","fiberRefLocallyScopedWith","currentLoggers","add","addLoggerEffect","effect","unwrapEffect","map","addLoggerScoped","unwrapScoped","removeLogger","remove","replaceLogger","that","flatMap","replaceLoggerEffect","replaceLoggerScoped","addSupervisor","supervisor","currentSupervisor","current","Zip","enableCooperativeYielding","withRuntimeFlagsScoped","enable","CooperativeYielding","enableInterruption","Interruption","enableOpSupervision","OpSupervision","enableRuntimeMetrics","RuntimeMetrics","enableWindDown","WindDown","disableCooperativeYielding","disable","disableInterruption","disableOpSupervision","disableRuntimeMetrics","disableWindDown","setConfigProvider","configProvider","withConfigProviderScoped","parentSpan","span","succeedContext","make","spanTag","name","options","addSpanStackTrace","scoped","onEnd","tap","makeSpanScoped","addFinalizer","exit","setTracer","withTracerScoped"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17020, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17026, "column": 0}, "map": {"version":3,"file":"core-stream.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/core-stream.ts"],"sourcesContent":["import * as Cause from \"../Cause.js\"\nimport type * as Channel from \"../Channel.js\"\nimport type * as ChildExecutorDecision from \"../ChildExecutorDecision.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport type * as Context from \"../Context.js\"\nimport * as Effect from \"../Effect.js\"\nimport * as Either from \"../Either.js\"\nimport type * as Exit from \"../Exit.js\"\nimport { constVoid, dual, identity } from \"../Function.js\"\nimport type { LazyArg } from \"../Function.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as SingleProducerAsyncInput from \"../SingleProducerAsyncInput.js\"\nimport type * as UpstreamPullRequest from \"../UpstreamPullRequest.js\"\nimport type * as UpstreamPullStrategy from \"../UpstreamPullStrategy.js\"\nimport * as childExecutorDecision from \"./channel/childExecutorDecision.js\"\nimport type { ErasedContinuationK } from \"./channel/continuation.js\"\nimport { ContinuationKImpl } from \"./channel/continuation.js\"\nimport * as upstreamPullStrategy from \"./channel/upstreamPullStrategy.js\"\nimport * as OpCodes from \"./opCodes/channel.js\"\n\n/** @internal */\nconst ChannelSymbolKey = \"effect/Channel\"\n\n/** @internal */\nexport const ChannelTypeId: Channel.ChannelTypeId = Symbol.for(\n  ChannelSymbolKey\n) as Channel.ChannelTypeId\n\nconst channelVariance = {\n  /* c8 ignore next */\n  _Env: (_: never) => _,\n  /* c8 ignore next */\n  _InErr: (_: unknown) => _,\n  /* c8 ignore next */\n  _InElem: (_: unknown) => _,\n  /* c8 ignore next */\n  _InDone: (_: unknown) => _,\n  /* c8 ignore next */\n  _OutErr: (_: never) => _,\n  /* c8 ignore next */\n  _OutElem: (_: never) => _,\n  /* c8 ignore next */\n  _OutDone: (_: never) => _\n}\n\n/** @internal */\nconst proto = {\n  [ChannelTypeId]: channelVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\ntype ErasedChannel = Channel.Channel<never, unknown, never, unknown, never, unknown>\n\n/** @internal */\nexport type Op<Tag extends string, Body = {}> =\n  & ErasedChannel\n  & Body\n  & { readonly _tag: Tag }\n\nexport type Primitive =\n  | BracketOut\n  | Bridge\n  | ConcatAll\n  | Emit\n  | Ensuring\n  | Fail\n  | Fold\n  | FromEffect\n  | PipeTo\n  | Provide\n  | Read\n  | Succeed\n  | SucceedNow\n  | Suspend\n\n/** @internal */\nexport interface BracketOut extends\n  Op<OpCodes.OP_BRACKET_OUT, {\n    acquire(): Effect.Effect<unknown, unknown, unknown>\n    finalizer(resource: unknown, exit: Exit.Exit<unknown, unknown>): Effect.Effect<unknown, unknown, unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Bridge extends\n  Op<OpCodes.OP_BRIDGE, {\n    readonly input: SingleProducerAsyncInput.AsyncInputProducer<unknown, unknown, unknown>\n    readonly channel: ErasedChannel\n  }>\n{}\n\n/** @internal */\nexport interface ConcatAll extends\n  Op<OpCodes.OP_CONCAT_ALL, {\n    combineInners(outDone: unknown, outDone2: unknown): unknown\n    combineAll(outDone: unknown, outDone2: unknown): unknown\n    onPull(\n      request: UpstreamPullRequest.UpstreamPullRequest<unknown>\n    ): UpstreamPullStrategy.UpstreamPullStrategy<unknown>\n    onEmit(outElem: unknown): ChildExecutorDecision.ChildExecutorDecision\n    value(): ErasedChannel\n    k(outElem: unknown): ErasedChannel\n  }>\n{}\n\n/** @internal */\nexport interface Emit extends\n  Op<OpCodes.OP_EMIT, {\n    readonly out: unknown\n  }>\n{}\n\n/** @internal */\nexport interface Ensuring extends\n  Op<OpCodes.OP_ENSURING, {\n    readonly channel: ErasedChannel\n    finalizer(exit: Exit.Exit<unknown, unknown>): Effect.Effect<unknown, unknown, unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Fail extends\n  Op<OpCodes.OP_FAIL, {\n    error(): Cause.Cause<unknown>\n  }>\n{}\n\n/** @internal */\nexport interface Fold extends\n  Op<OpCodes.OP_FOLD, {\n    readonly channel: ErasedChannel\n    readonly k: ErasedContinuationK\n  }>\n{}\n\n/** @internal */\nexport interface FromEffect extends\n  Op<OpCodes.OP_FROM_EFFECT, {\n    effect(): Effect.Effect<unknown, unknown, unknown>\n  }>\n{}\n\n/** @internal */\nexport interface PipeTo extends\n  Op<OpCodes.OP_PIPE_TO, {\n    left(): ErasedChannel\n    right(): ErasedChannel\n  }>\n{}\n\n/** @internal */\nexport interface Provide extends\n  Op<OpCodes.OP_PROVIDE, {\n    context(): Context.Context<unknown>\n    readonly inner: ErasedChannel\n  }>\n{}\n\n/** @internal */\nexport interface Read extends\n  Op<OpCodes.OP_READ, {\n    more(input: unknown): ErasedChannel\n    readonly done: ErasedContinuationK\n  }>\n{}\n\n/** @internal */\nexport interface Succeed extends\n  Op<OpCodes.OP_SUCCEED, {\n    evaluate(): unknown\n  }>\n{}\n\n/** @internal */\nexport interface SucceedNow extends\n  Op<OpCodes.OP_SUCCEED_NOW, {\n    readonly terminal: unknown\n  }>\n{}\n\n/** @internal */\nexport interface Suspend extends\n  Op<OpCodes.OP_SUSPEND, {\n    channel(): ErasedChannel\n  }>\n{}\n\n/** @internal */\nexport const isChannel = (u: unknown): u is Channel.Channel<\n  unknown,\n  unknown,\n  unknown,\n  unknown,\n  unknown,\n  unknown,\n  unknown\n> => hasProperty(u, ChannelTypeId) || Effect.isEffect(u)\n\n/** @internal */\nexport const acquireReleaseOut = dual<\n  <Z, R2>(\n    release: (z: Z, e: Exit.Exit<unknown, unknown>) => Effect.Effect<unknown, never, R2>\n  ) => <E, R>(self: Effect.Effect<Z, E, R>) => Channel.Channel<Z, unknown, E, unknown, void, unknown, R | R2>,\n  <Z, E, R, R2>(\n    self: Effect.Effect<Z, E, R>,\n    release: (z: Z, e: Exit.Exit<unknown, unknown>) => Effect.Effect<unknown, never, R2>\n  ) => Channel.Channel<Z, unknown, E, unknown, void, unknown, R | R2>\n>(2, (self, release) => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_BRACKET_OUT\n  op.acquire = () => self\n  op.finalizer = release\n  return op\n})\n\n/** @internal */\nexport const catchAllCause = dual<\n  <OutErr, OutElem1, InElem1, OutErr1, InErr1, OutDone1, InDone1, Env1>(\n    f: (cause: Cause.Cause<OutErr>) => Channel.Channel<OutElem1, InElem1, OutErr1, InErr1, OutDone1, InDone1, Env1>\n  ) => <OutElem, InElem, InErr, OutDone, InDone, Env>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n  ) => Channel.Channel<\n    OutElem1 | OutElem,\n    InElem & InElem1,\n    OutErr1,\n    InErr & InErr1,\n    OutDone1 | OutDone,\n    InDone & InDone1,\n    Env1 | Env\n  >,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, OutElem1, InElem1, OutErr1, InErr1, OutDone1, InDone1, Env1>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    f: (cause: Cause.Cause<OutErr>) => Channel.Channel<OutElem1, InElem1, OutErr1, InErr1, OutDone1, InDone1, Env1>\n  ) => Channel.Channel<\n    OutElem1 | OutElem,\n    InElem & InElem1,\n    OutErr1,\n    InErr & InErr1,\n    OutDone1 | OutDone,\n    InDone & InDone1,\n    Env1 | Env\n  >\n>(\n  2,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, OutElem1, InElem1, OutErr1, InErr1, OutDone1, InDone1, Env1>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    f: (cause: Cause.Cause<OutErr>) => Channel.Channel<OutElem1, InElem1, OutErr1, InErr1, OutDone1, InDone1, Env1>\n  ): Channel.Channel<\n    OutElem | OutElem1,\n    InElem & InElem1,\n    OutErr1,\n    InErr & InErr1,\n    OutDone | OutDone1,\n    InDone & InDone1,\n    Env | Env1\n  > => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_FOLD\n    op.channel = self\n    op.k = new ContinuationKImpl(succeed, f)\n    return op\n  }\n)\n\n/** @internal */\nexport const collectElements = <Env, InErr, InElem, InDone, OutErr, OutElem, OutDone>(\n  self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n): Channel.Channel<never, InElem, OutErr, InErr, [Chunk.Chunk<OutElem>, OutDone], InDone, Env> => {\n  return suspend(() => {\n    const builder: Array<OutElem> = []\n    return flatMap(\n      pipeTo(self, collectElementsReader(builder)),\n      (value) => sync(() => [Chunk.fromIterable(builder), value])\n    )\n  })\n}\n\n/** @internal */\nconst collectElementsReader = <OutErr, OutElem, OutDone>(\n  builder: Array<OutElem>\n): Channel.Channel<never, OutElem, OutErr, OutErr, OutDone, OutDone> =>\n  readWith({\n    onInput: (outElem) =>\n      flatMap(\n        sync(() => {\n          builder.push(outElem)\n        }),\n        () => collectElementsReader<OutErr, OutElem, OutDone>(builder)\n      ),\n    onFailure: fail,\n    onDone: succeedNow\n  })\n\n/** @internal */\nexport const concatAll = <OutElem, InElem, OutErr, InErr, InDone, Env>(\n  channels: Channel.Channel<\n    Channel.Channel<OutElem, InElem, OutErr, InErr, any, InDone, Env>,\n    InElem,\n    OutErr,\n    InErr,\n    any,\n    InDone,\n    Env\n  >\n): Channel.Channel<OutElem, InElem, OutErr, InErr, any, InDone, Env> => concatAllWith(channels, constVoid, constVoid)\n\n/** @internal */\nexport const concatAllWith = <\n  OutElem,\n  InElem2,\n  OutErr2,\n  InErr2,\n  OutDone,\n  InDone2,\n  Env2,\n  InElem,\n  OutErr,\n  InErr,\n  OutDone2,\n  InDone,\n  Env,\n  OutDone3\n>(\n  channels: Channel.Channel<\n    Channel.Channel<OutElem, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n    InElem,\n    OutErr,\n    InErr,\n    OutDone2,\n    InDone,\n    Env\n  >,\n  f: (o: OutDone, o1: OutDone) => OutDone,\n  g: (o: OutDone, o2: OutDone2) => OutDone3\n): Channel.Channel<\n  OutElem,\n  InElem & InElem2,\n  OutErr | OutErr2,\n  InErr & InErr2,\n  OutDone3,\n  InDone & InDone2,\n  Env | Env2\n> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_CONCAT_ALL\n  op.combineInners = f\n  op.combineAll = g\n  op.onPull = () => upstreamPullStrategy.PullAfterNext(Option.none())\n  op.onEmit = () => childExecutorDecision.Continue\n  op.value = () => channels\n  op.k = identity\n  return op\n}\n\n/** @internal */\nexport const concatMapWith = dual<\n  <OutElem, OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2, OutDone2, OutDone3>(\n    f: (o: OutElem) => Channel.Channel<OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n    g: (o: OutDone, o1: OutDone) => OutDone,\n    h: (o: OutDone, o2: OutDone2) => OutDone3\n  ) => <Env, InErr, InElem, InDone, OutErr>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone2, InDone, Env>\n  ) => Channel.Channel<\n    OutElem2,\n    InElem & InElem2,\n    OutErr2 | OutErr,\n    InErr & InErr2,\n    OutDone3,\n    InDone & InDone2,\n    Env2 | Env\n  >,\n  <\n    OutElem,\n    InElem,\n    OutErr,\n    InErr,\n    OutDone2,\n    InDone,\n    Env,\n    OutElem2,\n    InElem2,\n    OutErr2,\n    InErr2,\n    OutDone,\n    InDone2,\n    Env2,\n    OutDone3\n  >(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone2, InDone, Env>,\n    f: (o: OutElem) => Channel.Channel<OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n    g: (o: OutDone, o1: OutDone) => OutDone,\n    h: (o: OutDone, o2: OutDone2) => OutDone3\n  ) => Channel.Channel<\n    OutElem2,\n    InElem & InElem2,\n    OutErr2 | OutErr,\n    InErr & InErr2,\n    OutDone3,\n    InDone & InDone2,\n    Env2 | Env\n  >\n>(4, <\n  Env,\n  InErr,\n  InElem,\n  InDone,\n  OutErr,\n  OutElem,\n  OutElem2,\n  OutDone,\n  OutDone2,\n  OutDone3,\n  Env2,\n  InErr2,\n  InElem2,\n  InDone2,\n  OutErr2\n>(\n  self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone2, InDone, Env>,\n  f: (\n    o: OutElem\n  ) => Channel.Channel<OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n  g: (o: OutDone, o1: OutDone) => OutDone,\n  h: (o: OutDone, o2: OutDone2) => OutDone3\n): Channel.Channel<\n  OutElem2,\n  InElem & InElem2,\n  OutErr | OutErr2,\n  InErr & InErr2,\n  OutDone3,\n  InDone & InDone2,\n  Env | Env2\n> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_CONCAT_ALL\n  op.combineInners = g\n  op.combineAll = h\n  op.onPull = () => upstreamPullStrategy.PullAfterNext(Option.none())\n  op.onEmit = () => childExecutorDecision.Continue\n  op.value = () => self\n  op.k = f\n  return op\n})\n\n/** @internal */\nexport const concatMapWithCustom = dual<\n  <OutElem, OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2, OutDone2, OutDone3>(\n    f: (o: OutElem) => Channel.Channel<OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n    g: (o: OutDone, o1: OutDone) => OutDone,\n    h: (o: OutDone, o2: OutDone2) => OutDone3,\n    onPull: (\n      upstreamPullRequest: UpstreamPullRequest.UpstreamPullRequest<OutElem>\n    ) => UpstreamPullStrategy.UpstreamPullStrategy<OutElem2>,\n    onEmit: (elem: OutElem2) => ChildExecutorDecision.ChildExecutorDecision\n  ) => <Env, InErr, InElem, InDone, OutErr>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone2, InDone, Env>\n  ) => Channel.Channel<\n    OutElem2,\n    InElem & InElem2,\n    OutErr2 | OutErr,\n    InErr & InErr2,\n    OutDone3,\n    InDone & InDone2,\n    Env2 | Env\n  >,\n  <\n    OutElem,\n    InElem,\n    OutErr,\n    InErr,\n    OutDone2,\n    InDone,\n    Env,\n    OutElem2,\n    InElem2,\n    OutErr2,\n    InErr2,\n    OutDone,\n    InDone2,\n    Env2,\n    OutDone3\n  >(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone2, InDone, Env>,\n    f: (o: OutElem) => Channel.Channel<OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n    g: (o: OutDone, o1: OutDone) => OutDone,\n    h: (o: OutDone, o2: OutDone2) => OutDone3,\n    onPull: (\n      upstreamPullRequest: UpstreamPullRequest.UpstreamPullRequest<OutElem>\n    ) => UpstreamPullStrategy.UpstreamPullStrategy<OutElem2>,\n    onEmit: (elem: OutElem2) => ChildExecutorDecision.ChildExecutorDecision\n  ) => Channel.Channel<\n    OutElem2,\n    InElem & InElem2,\n    OutErr2 | OutErr,\n    InErr & InErr2,\n    OutDone3,\n    InDone & InDone2,\n    Env2 | Env\n  >\n>(6, <\n  Env,\n  InErr,\n  InElem,\n  InDone,\n  OutErr,\n  OutElem,\n  OutElem2,\n  OutDone,\n  OutDone2,\n  OutDone3,\n  Env2,\n  InErr2,\n  InElem2,\n  InDone2,\n  OutErr2\n>(\n  self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone2, InDone, Env>,\n  f: (\n    o: OutElem\n  ) => Channel.Channel<OutElem2, InElem2, OutErr2, InErr2, OutDone, InDone2, Env2>,\n  g: (o: OutDone, o1: OutDone) => OutDone,\n  h: (o: OutDone, o2: OutDone2) => OutDone3,\n  onPull: (\n    upstreamPullRequest: UpstreamPullRequest.UpstreamPullRequest<OutElem>\n  ) => UpstreamPullStrategy.UpstreamPullStrategy<OutElem2>,\n  onEmit: (elem: OutElem2) => ChildExecutorDecision.ChildExecutorDecision\n): Channel.Channel<\n  OutElem2,\n  InElem & InElem2,\n  OutErr | OutErr2,\n  InErr & InErr2,\n  OutDone3,\n  InDone & InDone2,\n  Env | Env2\n> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_CONCAT_ALL\n  op.combineInners = g\n  op.combineAll = h\n  op.onPull = onPull\n  op.onEmit = onEmit\n  op.value = () => self\n  op.k = f\n  return op\n})\n\n/** @internal */\nexport const embedInput = dual<\n  <InErr, InElem, InDone>(\n    input: SingleProducerAsyncInput.AsyncInputProducer<InErr, InElem, InDone>\n  ) => <OutElem, OutErr, OutDone, Env>(\n    self: Channel.Channel<OutElem, unknown, OutErr, unknown, OutDone, unknown, Env>\n  ) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n  <OutElem, OutErr, OutDone, Env, InErr, InElem, InDone>(\n    self: Channel.Channel<OutElem, unknown, OutErr, unknown, OutDone, unknown, Env>,\n    input: SingleProducerAsyncInput.AsyncInputProducer<InErr, InElem, InDone>\n  ) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n>(\n  2,\n  <OutElem, OutErr, OutDone, Env, InErr, InElem, InDone>(\n    self: Channel.Channel<OutElem, unknown, OutErr, unknown, OutDone, unknown, Env>,\n    input: SingleProducerAsyncInput.AsyncInputProducer<InErr, InElem, InDone>\n  ): Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env> => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_BRIDGE\n    op.input = input\n    op.channel = self\n    return op\n  }\n)\n\n/** @internal */\nexport const ensuringWith = dual<\n  <OutDone, OutErr, Env2>(\n    finalizer: (e: Exit.Exit<OutDone, OutErr>) => Effect.Effect<unknown, never, Env2>\n  ) => <OutElem, InElem, InErr, InDone, Env>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n  ) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env2 | Env>,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, Env2>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    finalizer: (e: Exit.Exit<OutDone, OutErr>) => Effect.Effect<unknown, never, Env2>\n  ) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env2 | Env>\n>(\n  2,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, Env2>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    finalizer: (e: Exit.Exit<OutDone, OutErr>) => Effect.Effect<unknown, never, Env2>\n  ): Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env | Env2> => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_ENSURING\n    op.channel = self\n    op.finalizer = finalizer\n    return op\n  }\n)\n\n/** @internal */\nexport const fail = <E>(error: E): Channel.Channel<never, unknown, E, unknown, never, unknown> =>\n  failCause(Cause.fail(error))\n\n/** @internal */\nexport const failSync = <E>(\n  evaluate: LazyArg<E>\n): Channel.Channel<never, unknown, E, unknown, never, unknown> => failCauseSync(() => Cause.fail(evaluate()))\n\n/** @internal */\nexport const failCause = <E>(\n  cause: Cause.Cause<E>\n): Channel.Channel<never, unknown, E, unknown, never, unknown> => failCauseSync(() => cause)\n\n/** @internal */\nexport const failCauseSync = <E>(\n  evaluate: LazyArg<Cause.Cause<E>>\n): Channel.Channel<never, unknown, E, unknown, never, unknown> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_FAIL\n  op.error = evaluate\n  return op\n}\n\n/** @internal */\nexport const flatMap = dual<\n  <OutDone, OutElem1, InElem1, OutErr1, InErr1, OutDone2, InDone1, Env1>(\n    f: (d: OutDone) => Channel.Channel<OutElem1, InElem1, OutErr1, InErr1, OutDone2, InDone1, Env1>\n  ) => <OutElem, InElem, OutErr, InErr, InDone, Env>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n  ) => Channel.Channel<\n    OutElem1 | OutElem,\n    InElem & InElem1,\n    OutErr1 | OutErr,\n    InErr & InErr1,\n    OutDone2,\n    InDone & InDone1,\n    Env1 | Env\n  >,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, OutElem1, InElem1, OutErr1, InErr1, OutDone2, InDone1, Env1>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    f: (d: OutDone) => Channel.Channel<OutElem1, InElem1, OutErr1, InErr1, OutDone2, InDone1, Env1>\n  ) => Channel.Channel<\n    OutElem1 | OutElem,\n    InElem & InElem1,\n    OutErr1 | OutErr,\n    InErr & InErr1,\n    OutDone2,\n    InDone & InDone1,\n    Env1 | Env\n  >\n>(\n  2,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, OutElem1, InElem1, OutErr1, InErr1, OutDone2, InDone1, Env1>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    f: (d: OutDone) => Channel.Channel<OutElem1, InElem1, OutErr1, InErr1, OutDone2, InDone1, Env1>\n  ): Channel.Channel<\n    OutElem | OutElem1,\n    InElem & InElem1,\n    OutErr | OutErr1,\n    InErr & InErr1,\n    OutDone2,\n    InDone & InDone1,\n    Env | Env1\n  > => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_FOLD\n    op.channel = self\n    op.k = new ContinuationKImpl(f, failCause)\n    return op\n  }\n)\n\n/** @internal */\nexport const foldCauseChannel = dual<\n  <\n    OutErr,\n    OutElem1,\n    InElem1,\n    OutErr2,\n    InErr1,\n    OutDone2,\n    InDone1,\n    Env1,\n    OutDone,\n    OutElem2,\n    InElem2,\n    OutErr3,\n    InErr2,\n    OutDone3,\n    InDone2,\n    Env2\n  >(\n    options: {\n      readonly onFailure: (\n        c: Cause.Cause<OutErr>\n      ) => Channel.Channel<OutElem1, InElem1, OutErr2, InErr1, OutDone2, InDone1, Env1>\n      readonly onSuccess: (o: OutDone) => Channel.Channel<OutElem2, InElem2, OutErr3, InErr2, OutDone3, InDone2, Env2>\n    }\n  ) => <Env, InErr, InElem, InDone, OutElem>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n  ) => Channel.Channel<\n    OutElem1 | OutElem2 | OutElem,\n    InElem & InElem1 & InElem2,\n    OutErr2 | OutErr3,\n    InErr & InErr1 & InErr2,\n    OutDone2 | OutDone3,\n    InDone & InDone1 & InDone2,\n    Env1 | Env2 | Env\n  >,\n  <\n    OutElem,\n    InElem,\n    OutErr,\n    InErr,\n    OutDone,\n    InDone,\n    Env,\n    OutElem1,\n    InElem1,\n    OutErr2,\n    InErr1,\n    OutDone2,\n    InDone1,\n    Env1,\n    OutElem2,\n    InElem2,\n    OutErr3,\n    InErr2,\n    OutDone3,\n    InDone2,\n    Env2\n  >(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    options: {\n      readonly onFailure: (\n        c: Cause.Cause<OutErr>\n      ) => Channel.Channel<OutElem1, InElem1, OutErr2, InErr1, OutDone2, InDone1, Env1>\n      readonly onSuccess: (o: OutDone) => Channel.Channel<OutElem2, InElem2, OutErr3, InErr2, OutDone3, InDone2, Env2>\n    }\n  ) => Channel.Channel<\n    OutElem1 | OutElem2 | OutElem,\n    InElem & InElem1 & InElem2,\n    OutErr2 | OutErr3,\n    InErr & InErr1 & InErr2,\n    OutDone2 | OutDone3,\n    InDone & InDone1 & InDone2,\n    Env1 | Env2 | Env\n  >\n>(\n  2,\n  <\n    OutElem,\n    InElem,\n    OutErr,\n    InErr,\n    OutDone,\n    InDone,\n    Env,\n    OutElem1,\n    InElem1,\n    OutErr2,\n    InErr1,\n    OutDone2,\n    InDone1,\n    Env1,\n    OutElem2,\n    InElem2,\n    OutErr3,\n    InErr2,\n    OutDone3,\n    InDone2,\n    Env2\n  >(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    options: {\n      readonly onFailure: (\n        c: Cause.Cause<OutErr>\n      ) => Channel.Channel<OutElem1, InElem1, OutErr2, InErr1, OutDone2, InDone1, Env1>\n      readonly onSuccess: (o: OutDone) => Channel.Channel<OutElem2, InElem2, OutErr3, InErr2, OutDone3, InDone2, Env2>\n    }\n  ): Channel.Channel<\n    OutElem | OutElem1 | OutElem2,\n    InElem & InElem1 & InElem2,\n    OutErr2 | OutErr3,\n    InErr & InErr1 & InErr2,\n    OutDone2 | OutDone3,\n    InDone & InDone1 & InDone2,\n    Env | Env1 | Env2\n  > => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_FOLD\n    op.channel = self\n    op.k = new ContinuationKImpl(options.onSuccess, options.onFailure as any)\n    return op\n  }\n)\n\n/** @internal */\nexport const fromEffect = <A, E, R>(\n  effect: Effect.Effect<A, E, R>\n): Channel.Channel<never, unknown, E, unknown, A, unknown, R> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_FROM_EFFECT\n  op.effect = () => effect\n  return op\n}\n\n/** @internal */\nexport const pipeTo = dual<\n  <OutElem2, OutElem, OutErr2, OutErr, OutDone2, OutDone, Env2>(\n    that: Channel.Channel<OutElem2, OutElem, OutErr2, OutErr, OutDone2, OutDone, Env2>\n  ) => <InElem, InErr, InDone, Env>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n  ) => Channel.Channel<OutElem2, InElem, OutErr2, InErr, OutDone2, InDone, Env2 | Env>,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, OutElem2, OutErr2, OutDone2, Env2>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    that: Channel.Channel<OutElem2, OutElem, OutErr2, OutErr, OutDone2, OutDone, Env2>\n  ) => Channel.Channel<OutElem2, InElem, OutErr2, InErr, OutDone2, InDone, Env2 | Env>\n>(\n  2,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env, OutElem2, OutErr2, OutDone2, Env2>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    that: Channel.Channel<OutElem2, OutElem, OutErr2, OutErr, OutDone2, OutDone, Env2>\n  ): Channel.Channel<OutElem2, InElem, OutErr2, InErr, OutDone2, InDone, Env | Env2> => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_PIPE_TO\n    op.left = () => self\n    op.right = () => that\n    return op\n  }\n)\n\n/** @internal */\nexport const provideContext = dual<\n  <Env>(\n    env: Context.Context<Env>\n  ) => <OutElem, InElem, OutErr, InErr, OutDone, InDone>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n  ) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone>,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    env: Context.Context<Env>\n  ) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone>\n>(\n  2,\n  <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>(\n    self: Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>,\n    env: Context.Context<Env>\n  ): Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone> => {\n    const op = Object.create(proto)\n    op._tag = OpCodes.OP_PROVIDE\n    op.context = () => env\n    op.inner = self\n    return op\n  }\n)\n\n/** @internal */\nexport const readOrFail = <E, In = unknown>(\n  error: E\n): Channel.Channel<never, In, E, unknown, In, unknown> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_READ\n  op.more = succeed\n  op.done = new ContinuationKImpl(() => fail(error), () => fail(error))\n  return op\n}\n\n/** @internal */\nexport const readWith = <\n  InElem,\n  OutElem,\n  OutErr,\n  InErr,\n  OutDone,\n  InDone,\n  Env,\n  OutElem2,\n  OutErr2,\n  OutDone2,\n  Env2,\n  OutElem3,\n  OutErr3,\n  OutDone3,\n  Env3\n>(\n  options: {\n    readonly onInput: (input: InElem) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n    readonly onFailure: (error: InErr) => Channel.Channel<OutElem2, InElem, OutErr2, InErr, OutDone2, InDone, Env2>\n    readonly onDone: (done: InDone) => Channel.Channel<OutElem3, InElem, OutErr3, InErr, OutDone3, InDone, Env3>\n  }\n): Channel.Channel<\n  OutElem | OutElem2 | OutElem3,\n  InElem,\n  OutErr | OutErr2 | OutErr3,\n  InErr,\n  OutDone | OutDone2 | OutDone3,\n  InDone,\n  Env | Env2 | Env3\n> =>\n  readWithCause({\n    onInput: options.onInput,\n    onFailure: (cause) => Either.match(Cause.failureOrCause(cause), { onLeft: options.onFailure, onRight: failCause }),\n    onDone: options.onDone\n  })\n\n/** @internal */\nexport const readWithCause = <\n  InElem,\n  OutElem,\n  OutErr,\n  InErr,\n  OutDone,\n  InDone,\n  Env,\n  OutElem2,\n  OutErr2,\n  OutDone2,\n  Env2,\n  OutElem3,\n  OutErr3,\n  OutDone3,\n  Env3\n>(\n  options: {\n    readonly onInput: (input: InElem) => Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>\n    readonly onFailure: (\n      cause: Cause.Cause<InErr>\n    ) => Channel.Channel<OutElem2, InElem, OutErr2, InErr, OutDone2, InDone, Env2>\n    readonly onDone: (done: InDone) => Channel.Channel<OutElem3, InElem, OutErr3, InErr, OutDone3, InDone, Env3>\n  }\n): Channel.Channel<\n  OutElem | OutElem2 | OutElem3,\n  InElem,\n  OutErr | OutErr2 | OutErr3,\n  InErr,\n  OutDone | OutDone2 | OutDone3,\n  InDone,\n  Env | Env2 | Env3\n> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_READ\n  op.more = options.onInput\n  op.done = new ContinuationKImpl(options.onDone, options.onFailure as any)\n  return op\n}\n\n/** @internal */\nexport const succeed = <A>(\n  value: A\n): Channel.Channel<never, unknown, never, unknown, A, unknown> => sync(() => value)\n\n/** @internal */\nexport const succeedNow = <OutDone>(\n  result: OutDone\n): Channel.Channel<never, unknown, never, unknown, OutDone, unknown> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_SUCCEED_NOW\n  op.terminal = result\n  return op\n}\n\n/** @internal */\nexport const suspend = <OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>(\n  evaluate: LazyArg<Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env>>\n): Channel.Channel<OutElem, InElem, OutErr, InErr, OutDone, InDone, Env> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_SUSPEND\n  op.channel = evaluate\n  return op\n}\n\nexport const sync = <OutDone>(\n  evaluate: LazyArg<OutDone>\n): Channel.Channel<never, unknown, never, unknown, OutDone, unknown> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_SUCCEED\n  op.evaluate = evaluate\n  return op\n}\n\nconst void_: Channel.Channel<never> = succeedNow(void 0)\nexport {\n  /** @internal */\n  void_ as void\n}\n\n/** @internal */\nexport const write = <OutElem>(\n  out: OutElem\n): Channel.Channel<OutElem, unknown, never, unknown, void, unknown> => {\n  const op = Object.create(proto)\n  op._tag = OpCodes.OP_EMIT\n  op.out = out\n  return op\n}\n"],"names":["Cause","Chunk","Effect","Either","constVoid","dual","identity","Option","pipeArguments","hasProperty","childExecutorDecision","ContinuationKImpl","upstreamPullStrategy","OpCodes","ChannelSymbolKey","ChannelTypeId","Symbol","for","channelVariance","_Env","_","_InErr","_InElem","_InDone","_OutErr","_OutElem","_OutDone","proto","pipe","arguments","isChannel","u","isEffect","acquireReleaseOut","self","release","op","Object","create","_tag","OP_BRACKET_OUT","acquire","finalizer","catchAllCause","f","OP_FOLD","channel","k","succeed","collectElements","suspend","builder","flatMap","pipeTo","collectElementsReader","value","sync","fromIterable","readWith","onInput","outElem","push","onFailure","fail","onDone","succeedNow","concatAll","channels","concatAllWith","g","OP_CONCAT_ALL","combineInners","combineAll","onPull","PullAfterNext","none","onEmit","Continue","concatMapWith","h","concatMapWithCustom","embedInput","input","OP_BRIDGE","ensuringWith","OP_ENSURING","error","failCause","failSync","evaluate","failCauseSync","cause","OP_FAIL","foldCauseChannel","options","onSuccess","fromEffect","effect","OP_FROM_EFFECT","that","OP_PIPE_TO","left","right","provideContext","env","OP_PROVIDE","context","inner","readOrFail","OP_READ","more","done","readWithCause","match","failureOrCause","onLeft","onRight","result","OP_SUCCEED_NOW","terminal","OP_SUSPEND","OP_SUCCEED","void_","void","write","out","OP_EMIT"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17269, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17275, "column": 0}, "map": {"version":3,"file":"handoff.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/handoff.ts"],"sourcesContent":["import * as Deferred from \"../../Deferred.js\"\nimport * as Effect from \"../../Effect.js\"\nimport { dual, pipe } from \"../../Function.js\"\nimport * as Option from \"../../Option.js\"\nimport * as Ref from \"../../Ref.js\"\n\n/** @internal */\nexport const HandoffTypeId = Symbol.for(\"effect/Stream/Handoff\")\n\n/** @internal */\nexport type HandoffTypeId = typeof HandoffTypeId\n\n/**\n * A synchronous queue-like abstraction that allows a producer to offer an\n * element and wait for it to be taken, and allows a consumer to wait for an\n * element to be available.\n *\n * @internal\n */\nexport interface Handoff<in out A> extends Handoff.Variance<A> {\n  readonly ref: Ref.Ref<Handoff.State<A>>\n}\n\n/** @internal */\nexport const OP_HANDOFF_STATE_EMPTY = \"Empty\" as const\n\n/** @internal */\nexport type OP_HANDOFF_STATE_EMPTY = typeof OP_HANDOFF_STATE_EMPTY\n\n/** @internal */\nexport const OP_HANDOFF_STATE_FULL = \"Full\" as const\n\n/** @internal */\nexport type OP_HANDOFF_STATE_FULL = typeof OP_HANDOFF_STATE_FULL\n\n/** @internal */\nexport declare namespace Handoff {\n  /** @internal */\n  export interface Variance<in out A> {\n    readonly [HandoffTypeId]: {\n      readonly _A: (_: A) => A\n    }\n  }\n\n  /** @internal */\n  export type State<A> = Empty | Full<A>\n\n  /** @internal */\n  export interface Empty {\n    readonly _tag: OP_HANDOFF_STATE_EMPTY\n    readonly notifyConsumer: Deferred.Deferred<void>\n  }\n\n  /** @internal */\n  export interface Full<out A> {\n    readonly _tag: OP_HANDOFF_STATE_FULL\n    readonly value: A\n    readonly notifyProducer: Deferred.Deferred<void>\n  }\n}\n\n/** @internal */\nconst handoffStateEmpty = <A>(notifyConsumer: Deferred.Deferred<void>): Handoff.State<A> => ({\n  _tag: OP_HANDOFF_STATE_EMPTY,\n  notifyConsumer\n})\n\n/** @internal */\nconst handoffStateFull = <A>(value: A, notifyProducer: Deferred.Deferred<void>): Handoff.State<A> => ({\n  _tag: OP_HANDOFF_STATE_FULL,\n  value,\n  notifyProducer\n})\n\n/** @internal */\nconst handoffStateMatch = <A, Z>(\n  onEmpty: (notifyConsumer: Deferred.Deferred<void>) => Z,\n  onFull: (value: A, notifyProducer: Deferred.Deferred<void>) => Z\n) => {\n  return (self: Handoff.State<A>): Z => {\n    switch (self._tag) {\n      case OP_HANDOFF_STATE_EMPTY: {\n        return onEmpty(self.notifyConsumer)\n      }\n      case OP_HANDOFF_STATE_FULL: {\n        return onFull(self.value, self.notifyProducer)\n      }\n    }\n  }\n}\n\nconst handoffVariance = {\n  /* c8 ignore next */\n  _A: (_: any) => _\n}\n\n/** @internal */\nexport const make = <A>(): Effect.Effect<Handoff<A>> =>\n  pipe(\n    Deferred.make<void>(),\n    Effect.flatMap((deferred) => Ref.make(handoffStateEmpty<A>(deferred))),\n    Effect.map((ref): Handoff<A> => ({\n      [HandoffTypeId]: handoffVariance,\n      ref\n    }))\n  )\n\n/** @internal */\nexport const offer = dual<\n  <A>(value: A) => (self: Handoff<A>) => Effect.Effect<void>,\n  <A>(self: Handoff<A>, value: A) => Effect.Effect<void>\n>(2, (self, value): Effect.Effect<void> => {\n  return Effect.flatMap(Deferred.make<void>(), (deferred) =>\n    Effect.flatten(\n      Ref.modify(self.ref, (state) =>\n        pipe(\n          state,\n          handoffStateMatch(\n            (notifyConsumer) => [\n              Effect.zipRight(\n                Deferred.succeed(notifyConsumer, void 0),\n                Deferred.await(deferred)\n              ),\n              handoffStateFull(value, deferred)\n            ],\n            (_, notifyProducer) => [\n              Effect.flatMap(\n                Deferred.await(notifyProducer),\n                () => pipe(self, offer(value))\n              ),\n              state\n            ]\n          )\n        ))\n    ))\n})\n\n/** @internal */\nexport const take = <A>(self: Handoff<A>): Effect.Effect<A> =>\n  Effect.flatMap(Deferred.make<void>(), (deferred) =>\n    Effect.flatten(\n      Ref.modify(self.ref, (state) =>\n        pipe(\n          state,\n          handoffStateMatch(\n            (notifyConsumer) =>\n              [\n                Effect.flatMap(\n                  Deferred.await(notifyConsumer),\n                  () => take(self)\n                ),\n                state\n              ] as const,\n            (value, notifyProducer) => [\n              Effect.as(\n                Deferred.succeed(notifyProducer, void 0),\n                value\n              ),\n              handoffStateEmpty<A>(deferred)\n            ]\n          )\n        ))\n    ))\n\n/** @internal */\nexport const poll = <A>(self: Handoff<A>): Effect.Effect<Option.Option<A>> =>\n  Effect.flatMap(Deferred.make<void>(), (deferred) =>\n    Effect.flatten(\n      Ref.modify(self.ref, (state) =>\n        pipe(\n          state,\n          handoffStateMatch(\n            () =>\n              [\n                Effect.succeed(Option.none<A>()),\n                state\n              ] as const,\n            (value, notifyProducer) => [\n              Effect.as(\n                Deferred.succeed(notifyProducer, void 0),\n                Option.some(value)\n              ),\n              handoffStateEmpty<A>(deferred)\n            ]\n          )\n        ))\n    ))\n"],"names":["Deferred","Effect","dual","pipe","Option","Ref","HandoffTypeId","Symbol","for","OP_HANDOFF_STATE_EMPTY","OP_HANDOFF_STATE_FULL","handoffStateEmpty","notifyConsumer","_tag","handoffStateFull","value","notifyProducer","handoffStateMatch","onEmpty","onFull","self","handoffVariance","_A","_","make","flatMap","deferred","map","ref","offer","flatten","modify","state","zipRight","succeed","await","take","as","poll","none","some"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17350, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17356, "column": 0}, "map": {"version":3,"file":"sinkEndReason.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/sinkEndReason.ts"],"sourcesContent":["/** @internal */\nexport type SinkEndReason = ScheduleEnd | UpstreamEnd\n\n/** @internal */\nexport const OP_SCHEDULE_END = \"ScheduleEnd\" as const\n\n/** @internal */\nexport type OP_SCHEDULE_END = typeof OP_SCHEDULE_END\n\n/** @internal */\nexport const OP_UPSTREAM_END = \"UpstreamEnd\" as const\n\n/** @internal */\nexport type OP_UPSTREAM_END = typeof OP_UPSTREAM_END\n\n/** @internal */\nexport interface ScheduleEnd {\n  readonly _tag: OP_SCHEDULE_END\n}\n\n/** @internal */\nexport interface UpstreamEnd {\n  readonly _tag: OP_UPSTREAM_END\n}\n\n/** @internal */\nexport const ScheduleEnd: SinkEndReason = { _tag: OP_SCHEDULE_END }\n\n/** @internal */\nexport const UpstreamEnd: SinkEndReason = { _tag: OP_UPSTREAM_END }\n"],"names":["OP_SCHEDULE_END","OP_UPSTREAM_END","ScheduleEnd","_tag","UpstreamEnd"],"mappings":"AAGA,cAAA;;;;;;AACO,MAAMA,eAAe,GAAG,aAAsB;AAM9C,MAAMC,eAAe,GAAG,aAAsB;AAgB9C,MAAMC,WAAW,GAAkB;IAAEC,IAAI,EAAEH;AAAe,CAAE;AAG5D,MAAMI,WAAW,GAAkB;IAAED,IAAI,EAAEF;AAAe,CAAE","ignoreList":[0]}},
    {"offset": {"line": 17370, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17376, "column": 0}, "map": {"version":3,"file":"handoffSignal.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/handoffSignal.ts"],"sourcesContent":["import type * as Cause from \"../../Cause.js\"\nimport type * as Chunk from \"../../Chunk.js\"\nimport type * as SinkEndReason from \"./sinkEndReason.js\"\n\n/** @internal */\nexport type HandoffSignal<A, E = never> = Emit<A> | Halt<E> | End\n\n/** @internal */\nexport const OP_EMIT = \"Emit\" as const\n\n/** @internal */\nexport type OP_EMIT = typeof OP_EMIT\n\n/** @internal */\nexport const OP_HALT = \"Halt\" as const\n\n/** @internal */\nexport type OP_HALT = typeof OP_HALT\n\n/** @internal */\nexport const OP_END = \"End\" as const\n\n/** @internal */\nexport type OP_END = typeof OP_END\n\nexport interface Emit<out A> {\n  readonly _tag: OP_EMIT\n  readonly elements: Chunk.Chunk<A>\n}\n\n/** @internal */\nexport interface Halt<out E> {\n  readonly _tag: OP_HALT\n  readonly cause: Cause.Cause<E>\n}\n\n/** @internal */\nexport interface End {\n  readonly _tag: OP_END\n  readonly reason: SinkEndReason.SinkEndReason\n}\n\n/** @internal */\nexport const emit = <A>(elements: Chunk.Chunk<A>): HandoffSignal<A> => ({\n  _tag: OP_EMIT,\n  elements\n})\n\n/** @internal */\nexport const halt = <E>(cause: Cause.Cause<E>): HandoffSignal<never, E> => ({\n  _tag: OP_HALT,\n  cause\n})\n\n/** @internal */\nexport const end = (reason: SinkEndReason.SinkEndReason): HandoffSignal<never> => ({\n  _tag: OP_END,\n  reason\n})\n"],"names":["OP_EMIT","OP_HALT","OP_END","emit","elements","_tag","halt","cause","end","reason"],"mappings":"AAOA,cAAA;;;;;;;;AACO,MAAMA,OAAO,GAAG,MAAe;AAM/B,MAAMC,OAAO,GAAG,MAAe;AAM/B,MAAMC,MAAM,GAAG,KAAc;AAuB7B,MAAMC,IAAI,IAAOC,QAAwB,GAAA,CAAwB;QACtEC,IAAI,EAAEL,OAAO;QACbI;KACD,CAAC;AAGK,MAAME,IAAI,IAAOC,KAAqB,GAAA,CAA+B;QAC1EF,IAAI,EAAEJ,OAAO;QACbM;KACD,CAAC;AAGK,MAAMC,GAAG,IAAIC,MAAmC,GAAA,CAA4B;QACjFJ,IAAI,EAAEH,MAAM;QACZO;KACD,CAAC","ignoreList":[0]}},
    {"offset": {"line": 17399, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17405, "column": 0}, "map": {"version":3,"file":"emit.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/emit.ts"],"sourcesContent":["import * as Cause from \"../../Cause.js\"\nimport * as Chunk from \"../../Chunk.js\"\nimport * as Effect from \"../../Effect.js\"\nimport * as Exit from \"../../Exit.js\"\nimport { pipe } from \"../../Function.js\"\nimport * as Option from \"../../Option.js\"\nimport type * as Queue from \"../../Queue.js\"\nimport type * as Scheduler from \"../../Scheduler.js\"\nimport type * as Emit from \"../../StreamEmit.js\"\n\n/** @internal */\nexport const make = <R, E, A, B>(\n  emit: (f: Effect.Effect<Chunk.Chunk<A>, Option.Option<E>, R>) => Promise<B>\n): Emit.Emit<R, E, A, B> => {\n  const ops: Emit.EmitOps<R, E, A, B> = {\n    chunk(this: Emit.Emit<R, E, A, B>, as: Chunk.Chunk<A>) {\n      return this(Effect.succeed(as))\n    },\n    die<Err>(this: Emit.Emit<R, E, A, B>, defect: Err) {\n      return this(Effect.die(defect))\n    },\n    dieMessage(this: Emit.Emit<R, E, A, B>, message: string) {\n      return this(Effect.dieMessage(message))\n    },\n    done(this: Emit.Emit<R, E, A, B>, exit: Exit.Exit<A, E>) {\n      return this(Effect.suspend(() => Exit.mapBoth(exit, { onFailure: Option.some, onSuccess: Chunk.of })))\n    },\n    end(this: Emit.Emit<R, E, A, B>) {\n      return this(Effect.fail(Option.none()))\n    },\n    fail(this: Emit.Emit<R, E, A, B>, e: E) {\n      return this(Effect.fail(Option.some(e)))\n    },\n    fromEffect(this: Emit.Emit<R, E, A, B>, effect: Effect.Effect<A, E, R>) {\n      return this(Effect.mapBoth(effect, { onFailure: Option.some, onSuccess: Chunk.of }))\n    },\n    fromEffectChunk(this: Emit.Emit<R, E, A, B>, effect: Effect.Effect<Chunk.Chunk<A>, E, R>) {\n      return this(pipe(effect, Effect.mapError(Option.some)))\n    },\n    halt(this: Emit.Emit<R, E, A, B>, cause: Cause.Cause<E>) {\n      return this(Effect.failCause(pipe(cause, Cause.map(Option.some))))\n    },\n    single(this: Emit.Emit<R, E, A, B>, value: A) {\n      return this(Effect.succeed(Chunk.of(value)))\n    }\n  }\n  return Object.assign(emit, ops)\n}\n\n/** @internal */\nexport const makePush = <E, A>(\n  queue: Queue.Queue<Array<A> | Exit.Exit<void, E>>,\n  scheduler: Scheduler.Scheduler\n): Emit.EmitOpsPush<E, A> => {\n  let finished = false\n  let buffer: Array<A> = []\n  let running = false\n  function array(items: ReadonlyArray<A>) {\n    if (finished) return false\n    if (items.length <= 50_000) {\n      buffer.push.apply(buffer, items as Array<A>)\n    } else {\n      for (let i = 0; i < items.length; i++) {\n        buffer.push(items[0])\n      }\n    }\n    if (!running) {\n      running = true\n      scheduler.scheduleTask(flush, 0)\n    }\n    return true\n  }\n  function flush() {\n    running = false\n    if (buffer.length > 0) {\n      queue.unsafeOffer(buffer)\n      buffer = []\n    }\n  }\n  function done(exit: Exit.Exit<A, E>) {\n    if (finished) return\n    finished = true\n    if (exit._tag === \"Success\") {\n      buffer.push(exit.value)\n    }\n    flush()\n    queue.unsafeOffer(exit._tag === \"Success\" ? Exit.void : exit)\n  }\n  return {\n    single(value: A) {\n      if (finished) return false\n      buffer.push(value)\n      if (!running) {\n        running = true\n        scheduler.scheduleTask(flush, 0)\n      }\n      return true\n    },\n    array,\n    chunk(chunk) {\n      return array(Chunk.toReadonlyArray(chunk))\n    },\n    done,\n    end() {\n      if (finished) return\n      finished = true\n      flush()\n      queue.unsafeOffer(Exit.void)\n    },\n    halt(cause: Cause.Cause<E>) {\n      return done(Exit.failCause(cause))\n    },\n    fail(error: E) {\n      return done(Exit.fail(error))\n    },\n    die<Err>(defect: Err): void {\n      return done(Exit.die(defect))\n    },\n    dieMessage(message: string): void {\n      return done(Exit.die(new Error(message)))\n    }\n  }\n}\n"],"names":["Cause","Chunk","Effect","Exit","pipe","Option","make","emit","ops","chunk","as","succeed","die","defect","dieMessage","message","done","exit","suspend","mapBoth","onFailure","some","onSuccess","of","end","fail","none","e","fromEffect","effect","fromEffectChunk","mapError","halt","cause","failCause","map","single","value","Object","assign","makePush","queue","scheduler","finished","buffer","running","array","items","length","push","apply","i","scheduleTask","flush","unsafeOffer","_tag","void","toReadonlyArray","error","Error"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 17532, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17538, "column": 0}, "map": {"version":3,"file":"pull.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/pull.ts"],"sourcesContent":["import type * as Cause from \"../../Cause.js\"\nimport * as Chunk from \"../../Chunk.js\"\nimport * as Effect from \"../../Effect.js\"\nimport * as Option from \"../../Option.js\"\nimport * as Queue from \"../../Queue.js\"\nimport type * as Take from \"../../Take.js\"\nimport * as take from \"../take.js\"\n\n/** @internal */\nexport interface Pull<out R, out E, out A> extends Effect.Effect<Chunk.Chunk<A>, Option.Option<E>, R> {}\n\n/** @internal */\nexport const emit = <A>(value: A): Effect.Effect<Chunk.Chunk<A>> => Effect.succeed(Chunk.of(value))\n\n/** @internal */\nexport const emitChunk = <A>(chunk: Chunk.Chunk<A>): Effect.Effect<Chunk.Chunk<A>> => Effect.succeed(chunk)\n\n/** @internal */\nexport const empty = <A>(): Effect.Effect<Chunk.Chunk<A>> => Effect.succeed(Chunk.empty<A>())\n\n/** @internal */\nexport const end = (): Effect.Effect<never, Option.Option<never>> => Effect.fail(Option.none())\n\n/** @internal */\nexport const fail = <E>(error: E): Effect.Effect<never, Option.Option<E>> => Effect.fail(Option.some(error))\n\n/** @internal */\nexport const failCause = <E>(cause: Cause.Cause<E>): Effect.Effect<never, Option.Option<E>> =>\n  Effect.mapError(Effect.failCause(cause), Option.some)\n\n/** @internal */\nexport const fromDequeue = <A, E>(\n  dequeue: Queue.Dequeue<Take.Take<A, E>>\n): Effect.Effect<Chunk.Chunk<A>, Option.Option<E>> => Effect.flatMap(Queue.take(dequeue), take.done)\n"],"names":["Chunk","Effect","Option","Queue","take","emit","value","succeed","of","emitChunk","chunk","empty","end","fail","none","error","some","failCause","cause","mapError","fromDequeue","dequeue","flatMap","done"],"mappings":";;;;;;;;;AAEA,OAAO,KAAKC,MAAM,MAAM,iBAAiB;AADzC,OAAO,KAAKD,KAAK,MAAM,gBAAgB;AAEvC,OAAO,KAAKE,MAAM,MAAM,iBAAiB;AACzC,OAAO,KAAKC,KAAK,MAAM,gBAAgB;AAEvC,OAAO,KAAKC,IAAI,MAAM,YAAY;;;;;;AAM3B,MAAMC,IAAI,IAAOC,KAAQ,GAAoCL,MAAM,4IAACM,OAAO,CAACP,KAAK,4IAACQ,EAAE,CAACF,KAAK,CAAC,CAAC;AAG5F,MAAMG,SAAS,IAAOC,KAAqB,GAAoCT,MAAM,4IAACM,OAAO,CAACG,KAAK,CAAC;AAGpG,MAAMC,KAAK,GAAGA,CAAA,GAAwCV,MAAM,4IAACM,OAAO,CAACP,KAAK,4IAACW,KAAK,EAAK,CAAC;AAGtF,MAAMC,GAAG,GAAGA,CAAA,GAAkDX,MAAM,4IAACY,IAAI,CAACX,MAAM,4IAACY,IAAI,EAAE,CAAC;AAGxF,MAAMD,IAAI,IAAOE,KAAQ,GAA6Cd,MAAM,4IAACY,IAAI,CAACX,MAAM,4IAACc,IAAI,CAACD,KAAK,CAAC,CAAC;AAGrG,MAAME,SAAS,IAAOC,KAAqB,GAChDjB,MAAM,4IAACkB,QAAQ,CAAClB,MAAM,4IAACgB,SAAS,CAACC,KAAK,CAAC,EAAEhB,MAAM,4IAACc,IAAI,CAAC;AAGhD,MAAMI,WAAW,IACtBC,OAAuC,GACapB,MAAM,4IAACqB,OAAO,CAACnB,KAAK,4IAACC,IAAI,CAACiB,OAAO,CAAC,EAAEjB,IAAI,wJAACmB,IAAI,CAAC","ignoreList":[0]}},
    {"offset": {"line": 17564, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17570, "column": 0}, "map": {"version":3,"file":"debounceState.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/debounceState.ts"],"sourcesContent":["import type * as Chunk from \"../../Chunk.js\"\nimport type * as Fiber from \"../../Fiber.js\"\nimport type * as HandoffSignal from \"./handoffSignal.js\"\n\n/** @internal */\nexport type DebounceState<A, E = never> = NotStarted | Previous<A> | Current<A, E>\n\n/** @internal */\nexport const OP_NOT_STARTED = \"NotStarted\" as const\n\n/** @internal */\nexport type OP_NOT_STARTED = typeof OP_NOT_STARTED\n\n/** @internal */\nexport const OP_PREVIOUS = \"Previous\" as const\n\n/** @internal */\nexport type OP_PREVIOUS = typeof OP_PREVIOUS\n\n/** @internal */\nexport const OP_CURRENT = \"Current\" as const\n\n/** @internal */\nexport type OP_CURRENT = typeof OP_CURRENT\n\nexport interface NotStarted {\n  readonly _tag: OP_NOT_STARTED\n}\n\n/** @internal */\nexport interface Previous<out A> {\n  readonly _tag: OP_PREVIOUS\n  readonly fiber: Fiber.Fiber<Chunk.Chunk<A>>\n}\n\n/** @internal */\nexport interface Current<out A, out E = never> {\n  readonly _tag: OP_CURRENT\n  readonly fiber: Fiber.Fiber<HandoffSignal.HandoffSignal<A, E>, E>\n}\n\n/** @internal */\nexport const notStarted: DebounceState<never> = {\n  _tag: OP_NOT_STARTED\n}\n\n/** @internal */\nexport const previous = <A>(fiber: Fiber.Fiber<Chunk.Chunk<A>>): DebounceState<A> => ({\n  _tag: OP_PREVIOUS,\n  fiber\n})\n\n/** @internal */\nexport const current = <A, E>(fiber: Fiber.Fiber<HandoffSignal.HandoffSignal<A, E>, E>): DebounceState<A, E> => ({\n  _tag: OP_CURRENT,\n  fiber\n})\n"],"names":["OP_NOT_STARTED","OP_PREVIOUS","OP_CURRENT","notStarted","_tag","previous","fiber","current"],"mappings":"AAOA,cAAA;;;;;;;;AACO,MAAMA,cAAc,GAAG,YAAqB;AAM5C,MAAMC,WAAW,GAAG,UAAmB;AAMvC,MAAMC,UAAU,GAAG,SAAkB;AAsBrC,MAAMC,UAAU,GAAyB;IAC9CC,IAAI,EAAEJ;CACP;AAGM,MAAMK,QAAQ,IAAOC,KAAkC,GAAA,CAAwB;QACpFF,IAAI,EAAEH,WAAW;QACjBK;KACD,CAAC;AAGK,MAAMC,OAAO,IAAUD,KAAwD,GAAA,CAA2B;QAC/GF,IAAI,EAAEF,UAAU;QAChBI;KACD,CAAC","ignoreList":[0]}},
    {"offset": {"line": 17592, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17598, "column": 0}, "map": {"version":3,"file":"haltStrategy.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/haltStrategy.ts"],"sourcesContent":["import { dual } from \"../../Function.js\"\nimport type * as HaltStrategy from \"../../StreamHaltStrategy.js\"\nimport * as OpCodes from \"../opCodes/streamHaltStrategy.js\"\n\n/** @internal */\nexport const Left: HaltStrategy.HaltStrategy = {\n  _tag: OpCodes.OP_LEFT\n}\n\n/** @internal */\nexport const Right: HaltStrategy.HaltStrategy = {\n  _tag: OpCodes.OP_RIGHT\n}\n\n/** @internal */\nexport const Both: HaltStrategy.HaltStrategy = {\n  _tag: OpCodes.OP_BOTH\n}\n\n/** @internal */\nexport const Either: HaltStrategy.HaltStrategy = {\n  _tag: OpCodes.OP_EITHER\n}\n\n/** @internal */\nexport const fromInput = (input: HaltStrategy.HaltStrategyInput): HaltStrategy.HaltStrategy => {\n  switch (input) {\n    case \"left\":\n      return Left\n    case \"right\":\n      return Right\n    case \"both\":\n      return Both\n    case \"either\":\n      return Either\n    default:\n      return input\n  }\n}\n\n/** @internal */\nexport const isLeft = (self: HaltStrategy.HaltStrategy): self is HaltStrategy.Left => self._tag === OpCodes.OP_LEFT\n\n/** @internal */\nexport const isRight = (self: HaltStrategy.HaltStrategy): self is HaltStrategy.Right => self._tag === OpCodes.OP_RIGHT\n\n/** @internal */\nexport const isBoth = (self: HaltStrategy.HaltStrategy): self is HaltStrategy.Both => self._tag === OpCodes.OP_BOTH\n\n/** @internal */\nexport const isEither = (self: HaltStrategy.HaltStrategy): self is HaltStrategy.Either =>\n  self._tag === OpCodes.OP_EITHER\n\n/** @internal */\nexport const match = dual<\n  <Z>(options: {\n    readonly onLeft: () => Z\n    readonly onRight: () => Z\n    readonly onBoth: () => Z\n    readonly onEither: () => Z\n  }) => (self: HaltStrategy.HaltStrategy) => Z,\n  <Z>(\n    self: HaltStrategy.HaltStrategy,\n    options: {\n      readonly onLeft: () => Z\n      readonly onRight: () => Z\n      readonly onBoth: () => Z\n      readonly onEither: () => Z\n    }\n  ) => Z\n>(2, <Z>(\n  self: HaltStrategy.HaltStrategy,\n  options: {\n    readonly onLeft: () => Z\n    readonly onRight: () => Z\n    readonly onBoth: () => Z\n    readonly onEither: () => Z\n  }\n): Z => {\n  switch (self._tag) {\n    case OpCodes.OP_LEFT: {\n      return options.onLeft()\n    }\n    case OpCodes.OP_RIGHT: {\n      return options.onRight()\n    }\n    case OpCodes.OP_BOTH: {\n      return options.onBoth()\n    }\n    case OpCodes.OP_EITHER: {\n      return options.onEither()\n    }\n  }\n})\n"],"names":["dual","OpCodes","Left","_tag","OP_LEFT","Right","OP_RIGHT","Both","OP_BOTH","Either","OP_EITHER","fromInput","input","isLeft","self","isRight","isBoth","isEither","match","options","onLeft","onRight","onBoth","onEither"],"mappings":";;;;;;;;;;;;AAEA,OAAO,KAAKC,OAAO,MAAM,kCAAkC;AAF3D,SAASD,IAAI,QAAQ,mBAAmB;;;AAKjC,MAAME,IAAI,GAA8B;IAC7CC,IAAI,EAAEF,OAAO,8KAACG,OAAAA;CACf;AAGM,MAAMC,KAAK,GAA8B;IAC9CF,IAAI,EAAEF,OAAO,8KAACK,QAAAA;CACf;AAGM,MAAMC,IAAI,GAA8B;IAC7CJ,IAAI,EAAEF,OAAO,8KAACO,OAAAA;CACf;AAGM,MAAMC,MAAM,GAA8B;IAC/CN,IAAI,EAAEF,OAAO,8KAACS,SAAAA;CACf;AAGM,MAAMC,SAAS,IAAIC,KAAqC,IAA+B;IAC5F,OAAQA,KAAK;QACX,KAAK,MAAM;YACT,OAAOV,IAAI;QACb,KAAK,OAAO;YACV,OAAOG,KAAK;QACd,KAAK,MAAM;YACT,OAAOE,IAAI;QACb,KAAK,QAAQ;YACX,OAAOE,MAAM;QACf;YACE,OAAOG,KAAK;IAChB;AACF,CAAC;AAGM,MAAMC,MAAM,IAAIC,IAA+B,GAAgCA,IAAI,CAACX,IAAI,KAAKF,OAAO,8KAACG,OAAO;AAG5G,MAAMW,OAAO,IAAID,IAA+B,GAAiCA,IAAI,CAACX,IAAI,KAAKF,OAAO,8KAACK,QAAQ;AAG/G,MAAMU,MAAM,IAAIF,IAA+B,GAAgCA,IAAI,CAACX,IAAI,KAAKF,OAAO,8KAACO,OAAO;AAG5G,MAAMS,QAAQ,IAAIH,IAA+B,GACtDA,IAAI,CAACX,IAAI,KAAKF,OAAO,8KAACS,SAAS;AAG1B,MAAMQ,KAAK,GAAA,WAAA,2JAAGlB,OAAAA,AAAI,EAgBvB,CAAC,EAAE,CACHc,IAA+B,EAC/BK,OAKC,KACI;IACL,OAAQL,IAAI,CAACX,IAAI;QACf,KAAKF,OAAO,8KAACG,OAAO;YAAE;gBACpB,OAAOe,OAAO,CAACC,MAAM,EAAE;YACzB;QACA,KAAKnB,OAAO,8KAACK,QAAQ;YAAE;gBACrB,OAAOa,OAAO,CAACE,OAAO,EAAE;YAC1B;QACA,KAAKpB,OAAO,8KAACO,OAAO;YAAE;gBACpB,OAAOW,OAAO,CAACG,MAAM,EAAE;YACzB;QACA,KAAKrB,OAAO,8KAACS,SAAS;YAAE;gBACtB,OAAOS,OAAO,CAACI,QAAQ,EAAE;YAC3B;IACF;AACF,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 17664, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17670, "column": 0}, "map": {"version":3,"file":"zipAllState.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/zipAllState.ts"],"sourcesContent":["import type * as Chunk from \"../../Chunk.js\"\n\n/** @internal */\nexport type ZipAllState<A, A2> = DrainLeft | DrainRight | PullBoth | PullLeft<A2> | PullRight<A>\n\n/** @internal */\nexport const OP_DRAIN_LEFT = \"DrainLeft\" as const\n\n/** @internal */\nexport type OP_DRAIN_LEFT = typeof OP_DRAIN_LEFT\n\n/** @internal */\nexport const OP_DRAIN_RIGHT = \"DrainRight\" as const\n\n/** @internal */\nexport type OP_DRAIN_RIGHT = typeof OP_DRAIN_RIGHT\n\n/** @internal */\nexport const OP_PULL_BOTH = \"PullBoth\" as const\n\n/** @internal */\nexport type OP_PULL_BOTH = typeof OP_PULL_BOTH\n\n/** @internal */\nexport const OP_PULL_LEFT = \"PullLeft\" as const\n\n/** @internal */\nexport type OP_PULL_LEFT = typeof OP_PULL_LEFT\n\n/** @internal */\nexport const OP_PULL_RIGHT = \"PullRight\" as const\n\n/** @internal */\nexport type OP_PULL_RIGHT = typeof OP_PULL_RIGHT\n\n/** @internal */\nexport interface DrainLeft {\n  readonly _tag: OP_DRAIN_LEFT\n}\n\n/** @internal */\nexport interface DrainRight {\n  readonly _tag: OP_DRAIN_RIGHT\n}\n\n/** @internal */\nexport interface PullBoth {\n  readonly _tag: OP_PULL_BOTH\n}\n\n/** @internal */\nexport interface PullLeft<A> {\n  readonly _tag: OP_PULL_LEFT\n  readonly rightChunk: Chunk.Chunk<A>\n}\n\n/** @internal */\nexport interface PullRight<A> {\n  readonly _tag: OP_PULL_RIGHT\n  readonly leftChunk: Chunk.Chunk<A>\n}\n\n/** @internal */\nexport const DrainLeft: ZipAllState<never, never> = {\n  _tag: OP_DRAIN_LEFT\n}\n\n/** @internal */\nexport const DrainRight: ZipAllState<never, never> = {\n  _tag: OP_DRAIN_RIGHT\n}\n\n/** @internal */\nexport const PullBoth: ZipAllState<never, never> = {\n  _tag: OP_PULL_BOTH\n}\n\n/** @internal */\nexport const PullLeft = <A>(rightChunk: Chunk.Chunk<A>): ZipAllState<never, A> => ({\n  _tag: OP_PULL_LEFT,\n  rightChunk\n})\n\n/** @internal */\nexport const PullRight = <A>(leftChunk: Chunk.Chunk<A>): ZipAllState<A, never> => ({\n  _tag: OP_PULL_RIGHT,\n  leftChunk\n})\n"],"names":["OP_DRAIN_LEFT","OP_DRAIN_RIGHT","OP_PULL_BOTH","OP_PULL_LEFT","OP_PULL_RIGHT","DrainLeft","_tag","DrainRight","PullBoth","PullLeft","rightChunk","PullRight","leftChunk"],"mappings":"AAKA,cAAA;;;;;;;;;;;;AACO,MAAMA,aAAa,GAAG,WAAoB;AAM1C,MAAMC,cAAc,GAAG,YAAqB;AAM5C,MAAMC,YAAY,GAAG,UAAmB;AAMxC,MAAMC,YAAY,GAAG,UAAmB;AAMxC,MAAMC,aAAa,GAAG,WAAoB;AAiC1C,MAAMC,SAAS,GAA8B;IAClDC,IAAI,EAAEN;CACP;AAGM,MAAMO,UAAU,GAA8B;IACnDD,IAAI,EAAEL;CACP;AAGM,MAAMO,QAAQ,GAA8B;IACjDF,IAAI,EAAEJ;CACP;AAGM,MAAMO,QAAQ,IAAOC,UAA0B,GAAA,CAA6B;QACjFJ,IAAI,EAAEH,YAAY;QAClBO;KACD,CAAC;AAGK,MAAMC,SAAS,IAAOC,SAAyB,GAAA,CAA6B;QACjFN,IAAI,EAAEF,aAAa;QACnBQ;KACD,CAAC","ignoreList":[0]}},
    {"offset": {"line": 17704, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17710, "column": 0}, "map": {"version":3,"file":"zipChunksState.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/stream/zipChunksState.ts"],"sourcesContent":["import type * as Chunk from \"../../Chunk.js\"\n\n/** @internal */\nexport type ZipChunksState<A, A2> = PullBoth | PullLeft<A2> | PullRight<A>\n\n/** @internal */\nexport const OP_PULL_BOTH = \"PullBoth\" as const\n\n/** @internal */\nexport type OP_PULL_BOTH = typeof OP_PULL_BOTH\n\n/** @internal */\nexport const OP_PULL_LEFT = \"PullLet\" as const\n\n/** @internal */\nexport type OP_PULL_LEFT = typeof OP_PULL_LEFT\n\n/** @internal */\nexport const OP_PULL_RIGHT = \"PullRight\" as const\n\n/** @internal */\nexport type OP_PULL_RIGHT = typeof OP_PULL_RIGHT\n\n/** @internal */\nexport interface PullBoth {\n  readonly _tag: OP_PULL_BOTH\n}\n\n/** @internal */\nexport interface PullLeft<A> {\n  readonly _tag: OP_PULL_LEFT\n  readonly rightChunk: Chunk.Chunk<A>\n}\n\n/** @internal */\nexport interface PullRight<A> {\n  readonly _tag: OP_PULL_RIGHT\n  readonly leftChunk: Chunk.Chunk<A>\n}\n\n/** @internal */\nexport const PullBoth: ZipChunksState<never, never> = {\n  _tag: OP_PULL_BOTH\n}\n\n/** @internal */\nexport const PullLeft = <A>(rightChunk: Chunk.Chunk<A>): ZipChunksState<never, A> => ({\n  _tag: OP_PULL_LEFT,\n  rightChunk\n})\n\n/** @internal */\nexport const PullRight = <A>(leftChunk: Chunk.Chunk<A>): ZipChunksState<A, never> => ({\n  _tag: OP_PULL_RIGHT,\n  leftChunk\n})\n"],"names":["OP_PULL_BOTH","OP_PULL_LEFT","OP_PULL_RIGHT","PullBoth","_tag","PullLeft","rightChunk","PullRight","leftChunk"],"mappings":"AAKA,cAAA;;;;;;;;AACO,MAAMA,YAAY,GAAG,UAAmB;AAMxC,MAAMC,YAAY,GAAG,SAAkB;AAMvC,MAAMC,aAAa,GAAG,WAAoB;AAuB1C,MAAMC,QAAQ,GAAiC;IACpDC,IAAI,EAAEJ;CACP;AAGM,MAAMK,QAAQ,IAAOC,UAA0B,GAAA,CAAgC;QACpFF,IAAI,EAAEH,YAAY;QAClBK;KACD,CAAC;AAGK,MAAMC,SAAS,IAAOC,SAAyB,GAAA,CAAgC;QACpFJ,IAAI,EAAEF,aAAa;QACnBM;KACD,CAAC","ignoreList":[0]}},
    {"offset": {"line": 17732, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 17738, "column": 0}, "map": {"version":3,"file":"queue.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/queue.ts"],"sourcesContent":["import * as Arr from \"../Array.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport type * as Deferred from \"../Deferred.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as MutableQueue from \"../MutableQueue.js\"\nimport * as MutableRef from \"../MutableRef.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Queue from \"../Queue.js\"\nimport * as core from \"./core.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\n\n/** @internal */\nconst EnqueueSymbolKey = \"effect/QueueEnqueue\"\n\n/** @internal */\nexport const EnqueueTypeId: Queue.EnqueueTypeId = Symbol.for(EnqueueSymbolKey) as Queue.EnqueueTypeId\n\n/** @internal */\nconst DequeueSymbolKey = \"effect/QueueDequeue\"\n\n/** @internal */\nexport const DequeueTypeId: Queue.DequeueTypeId = Symbol.for(DequeueSymbolKey) as Queue.DequeueTypeId\n\n/** @internal */\nconst QueueStrategySymbolKey = \"effect/QueueStrategy\"\n\n/** @internal */\nexport const QueueStrategyTypeId: Queue.QueueStrategyTypeId = Symbol.for(\n  QueueStrategySymbolKey\n) as Queue.QueueStrategyTypeId\n\n/** @internal */\nconst BackingQueueSymbolKey = \"effect/BackingQueue\"\n\n/** @internal */\nexport const BackingQueueTypeId: Queue.BackingQueueTypeId = Symbol.for(\n  BackingQueueSymbolKey\n) as Queue.BackingQueueTypeId\n\nconst queueStrategyVariance = {\n  /* c8 ignore next */\n  _A: (_: any) => _\n}\n\nconst backingQueueVariance = {\n  /* c8 ignore next */\n  _A: (_: any) => _\n}\n\n/** @internal */\nexport const enqueueVariance = {\n  /* c8 ignore next */\n  _In: (_: unknown) => _\n}\n\n/** @internal */\nexport const dequeueVariance = {\n  /* c8 ignore next */\n  _Out: (_: never) => _\n}\n\n/** @internal */\nclass QueueImpl<in out A> extends Effectable.Class<A> implements Queue.Queue<A> {\n  readonly [EnqueueTypeId] = enqueueVariance\n  readonly [DequeueTypeId] = dequeueVariance\n\n  constructor(\n    /** @internal */\n    readonly queue: Queue.BackingQueue<A>,\n    /** @internal */\n    readonly takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n    /** @internal */\n    readonly shutdownHook: Deferred.Deferred<void>,\n    /** @internal */\n    readonly shutdownFlag: MutableRef.MutableRef<boolean>,\n    /** @internal */\n    readonly strategy: Queue.Strategy<A>\n  ) {\n    super()\n  }\n\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n\n  commit() {\n    return this.take\n  }\n\n  capacity(): number {\n    return this.queue.capacity()\n  }\n\n  get size(): Effect.Effect<number> {\n    return core.suspend(() => core.catchAll(this.unsafeSize(), () => core.interrupt))\n  }\n\n  unsafeSize() {\n    if (MutableRef.get(this.shutdownFlag)) {\n      return Option.none<number>()\n    }\n    return Option.some(\n      this.queue.length() -\n        MutableQueue.length(this.takers) +\n        this.strategy.surplusSize()\n    )\n  }\n\n  get isEmpty(): Effect.Effect<boolean> {\n    return core.map(this.size, (size) => size <= 0)\n  }\n\n  get isFull(): Effect.Effect<boolean> {\n    return core.map(this.size, (size) => size >= this.capacity())\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return core.uninterruptible(\n      core.withFiberRuntime((state) => {\n        pipe(this.shutdownFlag, MutableRef.set(true))\n        return pipe(\n          fiberRuntime.forEachConcurrentDiscard(\n            unsafePollAll(this.takers),\n            (d) => core.deferredInterruptWith(d, state.id()),\n            false,\n            false\n          ),\n          core.zipRight(this.strategy.shutdown),\n          core.whenEffect(core.deferredSucceed(this.shutdownHook, void 0)),\n          core.asVoid\n        )\n      })\n    )\n  }\n\n  get isShutdown(): Effect.Effect<boolean> {\n    return core.sync(() => MutableRef.get(this.shutdownFlag))\n  }\n\n  get awaitShutdown(): Effect.Effect<void> {\n    return core.deferredAwait(this.shutdownHook)\n  }\n\n  isActive() {\n    return !MutableRef.get(this.shutdownFlag)\n  }\n\n  unsafeOffer(value: A): boolean {\n    if (MutableRef.get(this.shutdownFlag)) {\n      return false\n    }\n    let noRemaining: boolean\n    if (this.queue.length() === 0) {\n      const taker = pipe(\n        this.takers,\n        MutableQueue.poll(MutableQueue.EmptyMutableQueue)\n      )\n      if (taker !== MutableQueue.EmptyMutableQueue) {\n        unsafeCompleteDeferred(taker, value)\n        noRemaining = true\n      } else {\n        noRemaining = false\n      }\n    } else {\n      noRemaining = false\n    }\n    if (noRemaining) {\n      return true\n    }\n    // Not enough takers, offer to the queue\n    const succeeded = this.queue.offer(value)\n    unsafeCompleteTakers(this.strategy, this.queue, this.takers)\n    return succeeded\n  }\n\n  offer(value: A): Effect.Effect<boolean> {\n    return core.suspend(() => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      let noRemaining: boolean\n      if (this.queue.length() === 0) {\n        const taker = pipe(\n          this.takers,\n          MutableQueue.poll(MutableQueue.EmptyMutableQueue)\n        )\n        if (taker !== MutableQueue.EmptyMutableQueue) {\n          unsafeCompleteDeferred(taker, value)\n          noRemaining = true\n        } else {\n          noRemaining = false\n        }\n      } else {\n        noRemaining = false\n      }\n      if (noRemaining) {\n        return core.succeed(true)\n      }\n      // Not enough takers, offer to the queue\n      const succeeded = this.queue.offer(value)\n      unsafeCompleteTakers(this.strategy, this.queue, this.takers)\n      return succeeded\n        ? core.succeed(true)\n        : this.strategy.handleSurplus([value], this.queue, this.takers, this.shutdownFlag)\n    })\n  }\n\n  offerAll(iterable: Iterable<A>): Effect.Effect<boolean> {\n    return core.suspend(() => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      const values = Arr.fromIterable(iterable)\n      const pTakers = this.queue.length() === 0\n        ? Arr.fromIterable(unsafePollN(this.takers, values.length))\n        : Arr.empty\n      const [forTakers, remaining] = pipe(values, Arr.splitAt(pTakers.length))\n      for (let i = 0; i < pTakers.length; i++) {\n        const taker = (pTakers as any)[i]\n        const item = forTakers[i]\n        unsafeCompleteDeferred(taker, item)\n      }\n      if (remaining.length === 0) {\n        return core.succeed(true)\n      }\n      // Not enough takers, offer to the queue\n      const surplus = this.queue.offerAll(remaining)\n      unsafeCompleteTakers(this.strategy, this.queue, this.takers)\n      return Chunk.isEmpty(surplus)\n        ? core.succeed(true)\n        : this.strategy.handleSurplus(surplus, this.queue, this.takers, this.shutdownFlag)\n    })\n  }\n\n  get take(): Effect.Effect<A> {\n    return core.withFiberRuntime((state) => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      const item = this.queue.poll(MutableQueue.EmptyMutableQueue)\n      if (item !== MutableQueue.EmptyMutableQueue) {\n        this.strategy.unsafeOnQueueEmptySpace(this.queue, this.takers)\n        return core.succeed(item)\n      } else {\n        // Add the deferred to takers, then:\n        // - Try to take again in case a value was added since\n        // - Wait for the deferred to be completed\n        // - Clean up resources in case of interruption\n        const deferred = core.deferredUnsafeMake<A>(state.id())\n        return pipe(\n          core.suspend(() => {\n            pipe(this.takers, MutableQueue.offer(deferred))\n            unsafeCompleteTakers(this.strategy, this.queue, this.takers)\n            return MutableRef.get(this.shutdownFlag) ?\n              core.interrupt :\n              core.deferredAwait(deferred)\n          }),\n          core.onInterrupt(() => {\n            return core.sync(() => unsafeRemove(this.takers, deferred))\n          })\n        )\n      }\n    })\n  }\n\n  get takeAll(): Effect.Effect<Chunk.Chunk<A>> {\n    return core.suspend(() => {\n      return MutableRef.get(this.shutdownFlag)\n        ? core.interrupt\n        : core.sync(() => {\n          const values = this.queue.pollUpTo(Number.POSITIVE_INFINITY)\n          this.strategy.unsafeOnQueueEmptySpace(this.queue, this.takers)\n          return Chunk.fromIterable(values)\n        })\n    })\n  }\n\n  takeUpTo(max: number): Effect.Effect<Chunk.Chunk<A>> {\n    return core.suspend(() =>\n      MutableRef.get(this.shutdownFlag)\n        ? core.interrupt\n        : core.sync(() => {\n          const values = this.queue.pollUpTo(max)\n          this.strategy.unsafeOnQueueEmptySpace(this.queue, this.takers)\n          return Chunk.fromIterable(values)\n        })\n    )\n  }\n\n  takeBetween(min: number, max: number): Effect.Effect<Chunk.Chunk<A>> {\n    return core.suspend(() =>\n      takeRemainderLoop(\n        this,\n        min,\n        max,\n        Chunk.empty()\n      )\n    )\n  }\n}\n\n/** @internal */\nconst takeRemainderLoop = <A>(\n  self: Queue.Dequeue<A>,\n  min: number,\n  max: number,\n  acc: Chunk.Chunk<A>\n): Effect.Effect<Chunk.Chunk<A>> => {\n  if (max < min) {\n    return core.succeed(acc)\n  }\n  return pipe(\n    takeUpTo(self, max),\n    core.flatMap((bs) => {\n      const remaining = min - bs.length\n      if (remaining === 1) {\n        return pipe(\n          take(self),\n          core.map((b) => pipe(acc, Chunk.appendAll(bs), Chunk.append(b)))\n        )\n      }\n      if (remaining > 1) {\n        return pipe(\n          take(self),\n          core.flatMap((b) =>\n            takeRemainderLoop(\n              self,\n              remaining - 1,\n              max - bs.length - 1,\n              pipe(acc, Chunk.appendAll(bs), Chunk.append(b))\n            )\n          )\n        )\n      }\n      return core.succeed(pipe(acc, Chunk.appendAll(bs)))\n    })\n  )\n}\n\n/** @internal */\nexport const isQueue = (u: unknown): u is Queue.Queue<unknown> => isEnqueue(u) && isDequeue(u)\n\n/** @internal */\nexport const isEnqueue = (u: unknown): u is Queue.Enqueue<unknown> => hasProperty(u, EnqueueTypeId)\n\n/** @internal */\nexport const isDequeue = (u: unknown): u is Queue.Dequeue<unknown> => hasProperty(u, DequeueTypeId)\n\n/** @internal */\nexport const bounded = <A>(requestedCapacity: number): Effect.Effect<Queue.Queue<A>> =>\n  pipe(\n    core.sync(() => MutableQueue.bounded<A>(requestedCapacity)),\n    core.flatMap((queue) => make(backingQueueFromMutableQueue(queue), backPressureStrategy()))\n  )\n\n/** @internal */\nexport const dropping = <A>(requestedCapacity: number): Effect.Effect<Queue.Queue<A>> =>\n  pipe(\n    core.sync(() => MutableQueue.bounded<A>(requestedCapacity)),\n    core.flatMap((queue) => make(backingQueueFromMutableQueue(queue), droppingStrategy()))\n  )\n\n/** @internal */\nexport const sliding = <A>(requestedCapacity: number): Effect.Effect<Queue.Queue<A>> =>\n  pipe(\n    core.sync(() => MutableQueue.bounded<A>(requestedCapacity)),\n    core.flatMap((queue) => make(backingQueueFromMutableQueue(queue), slidingStrategy()))\n  )\n\n/** @internal */\nexport const unbounded = <A>(): Effect.Effect<Queue.Queue<A>> =>\n  pipe(\n    core.sync(() => MutableQueue.unbounded<A>()),\n    core.flatMap((queue) => make(backingQueueFromMutableQueue(queue), droppingStrategy()))\n  )\n\n/** @internal */\nconst unsafeMake = <A>(\n  queue: Queue.BackingQueue<A>,\n  takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n  shutdownHook: Deferred.Deferred<void>,\n  shutdownFlag: MutableRef.MutableRef<boolean>,\n  strategy: Queue.Strategy<A>\n): Queue.Queue<A> => {\n  return new QueueImpl(queue, takers, shutdownHook, shutdownFlag, strategy)\n}\n\n/** @internal */\nexport const make = <A>(\n  queue: Queue.BackingQueue<A>,\n  strategy: Queue.Strategy<A>\n): Effect.Effect<Queue.Queue<A>> =>\n  pipe(\n    core.deferredMake<void>(),\n    core.map((deferred) =>\n      unsafeMake(\n        queue,\n        MutableQueue.unbounded(),\n        deferred,\n        MutableRef.make(false),\n        strategy\n      )\n    )\n  )\n\n/** @internal */\nexport class BackingQueueFromMutableQueue<in out A> implements Queue.BackingQueue<A> {\n  readonly [BackingQueueTypeId] = backingQueueVariance\n  constructor(readonly mutable: MutableQueue.MutableQueue<A>) {}\n  poll<Def>(def: Def): A | Def {\n    return MutableQueue.poll(this.mutable, def)\n  }\n  pollUpTo(limit: number): Chunk.Chunk<A> {\n    return MutableQueue.pollUpTo(this.mutable, limit)\n  }\n  offerAll(elements: Iterable<A>): Chunk.Chunk<A> {\n    return MutableQueue.offerAll(this.mutable, elements)\n  }\n  offer(element: A): boolean {\n    return MutableQueue.offer(this.mutable, element)\n  }\n  capacity(): number {\n    return MutableQueue.capacity(this.mutable)\n  }\n  length(): number {\n    return MutableQueue.length(this.mutable)\n  }\n}\n\n/** @internal */\nexport const backingQueueFromMutableQueue = <A>(mutable: MutableQueue.MutableQueue<A>): Queue.BackingQueue<A> =>\n  new BackingQueueFromMutableQueue(mutable)\n\n/** @internal */\nexport const capacity = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): number => self.capacity()\n\n/** @internal */\nexport const size = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): Effect.Effect<number> => self.size\n\n/** @internal */\nexport const isFull = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): Effect.Effect<boolean> => self.isFull\n\n/** @internal */\nexport const isEmpty = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): Effect.Effect<boolean> => self.isEmpty\n\n/** @internal */\nexport const isShutdown = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): Effect.Effect<boolean> => self.isShutdown\n\n/** @internal */\nexport const awaitShutdown = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): Effect.Effect<void> => self.awaitShutdown\n\n/** @internal */\nexport const shutdown = <A>(self: Queue.Dequeue<A> | Queue.Enqueue<A>): Effect.Effect<void> => self.shutdown\n\n/** @internal */\nexport const offer = dual<\n  <A>(value: A) => (self: Queue.Enqueue<A>) => Effect.Effect<boolean>,\n  <A>(self: Queue.Enqueue<A>, value: A) => Effect.Effect<boolean>\n>(2, (self, value) => self.offer(value))\n\n/** @internal */\nexport const unsafeOffer = dual<\n  <A>(value: A) => (self: Queue.Enqueue<A>) => boolean,\n  <A>(self: Queue.Enqueue<A>, value: A) => boolean\n>(2, (self, value) => self.unsafeOffer(value))\n\n/** @internal */\nexport const offerAll = dual<\n  <A>(\n    iterable: Iterable<A>\n  ) => (self: Queue.Enqueue<A>) => Effect.Effect<boolean>,\n  <A>(\n    self: Queue.Enqueue<A>,\n    iterable: Iterable<A>\n  ) => Effect.Effect<boolean>\n>(2, (self, iterable) => self.offerAll(iterable))\n\n/** @internal */\nexport const poll = <A>(self: Queue.Dequeue<A>): Effect.Effect<Option.Option<A>> =>\n  core.map(self.takeUpTo(1), Chunk.head)\n\n/** @internal */\nexport const take = <A>(self: Queue.Dequeue<A>): Effect.Effect<A> => self.take\n\n/** @internal */\nexport const takeAll = <A>(self: Queue.Dequeue<A>): Effect.Effect<Chunk.Chunk<A>> => self.takeAll\n\n/** @internal */\nexport const takeUpTo = dual<\n  (max: number) => <A>(self: Queue.Dequeue<A>) => Effect.Effect<Chunk.Chunk<A>>,\n  <A>(self: Queue.Dequeue<A>, max: number) => Effect.Effect<Chunk.Chunk<A>>\n>(2, (self, max) => self.takeUpTo(max))\n\n/** @internal */\nexport const takeBetween = dual<\n  (min: number, max: number) => <A>(self: Queue.Dequeue<A>) => Effect.Effect<Chunk.Chunk<A>>,\n  <A>(self: Queue.Dequeue<A>, min: number, max: number) => Effect.Effect<Chunk.Chunk<A>>\n>(3, (self, min, max) => self.takeBetween(min, max))\n\n/** @internal */\nexport const takeN = dual<\n  (n: number) => <A>(self: Queue.Dequeue<A>) => Effect.Effect<Chunk.Chunk<A>>,\n  <A>(self: Queue.Dequeue<A>, n: number) => Effect.Effect<Chunk.Chunk<A>>\n>(2, (self, n) => self.takeBetween(n, n))\n\n// -----------------------------------------------------------------------------\n// Strategy\n// -----------------------------------------------------------------------------\n\n/** @internal */\nexport const backPressureStrategy = <A>(): Queue.Strategy<A> => new BackPressureStrategy()\n\n/** @internal */\nexport const droppingStrategy = <A>(): Queue.Strategy<A> => new DroppingStrategy()\n\n/** @internal */\nexport const slidingStrategy = <A>(): Queue.Strategy<A> => new SlidingStrategy()\n\n/** @internal */\nclass BackPressureStrategy<in out A> implements Queue.Strategy<A> {\n  readonly [QueueStrategyTypeId] = queueStrategyVariance\n\n  readonly putters = MutableQueue.unbounded<readonly [A, Deferred.Deferred<boolean>, boolean]>()\n\n  surplusSize(): number {\n    return MutableQueue.length(this.putters)\n  }\n\n  onCompleteTakersWithEmptyQueue(takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>): void {\n    while (!MutableQueue.isEmpty(this.putters) && !MutableQueue.isEmpty(takers)) {\n      const taker = MutableQueue.poll(takers, void 0)!\n      const putter = MutableQueue.poll(this.putters, void 0)!\n      if (putter[2]) {\n        unsafeCompleteDeferred(putter[1], true)\n      }\n      unsafeCompleteDeferred(taker, putter[0])\n    }\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return pipe(\n      core.fiberId,\n      core.flatMap((fiberId) =>\n        pipe(\n          core.sync(() => unsafePollAll(this.putters)),\n          core.flatMap((putters) =>\n            fiberRuntime.forEachConcurrentDiscard(\n              putters,\n              ([_, deferred, isLastItem]) =>\n                isLastItem ?\n                  pipe(\n                    core.deferredInterruptWith(deferred, fiberId),\n                    core.asVoid\n                  ) :\n                  core.void,\n              false,\n              false\n            )\n          )\n        )\n      )\n    )\n  }\n\n  handleSurplus(\n    iterable: Iterable<A>,\n    queue: Queue.BackingQueue<A>,\n    takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n    isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean> {\n    return core.withFiberRuntime((state) => {\n      const deferred = core.deferredUnsafeMake<boolean>(state.id())\n      return pipe(\n        core.suspend(() => {\n          this.unsafeOffer(iterable, deferred)\n          this.unsafeOnQueueEmptySpace(queue, takers)\n          unsafeCompleteTakers(this, queue, takers)\n          return MutableRef.get(isShutdown) ? core.interrupt : core.deferredAwait(deferred)\n        }),\n        core.onInterrupt(() => core.sync(() => this.unsafeRemove(deferred)))\n      )\n    })\n  }\n\n  unsafeOnQueueEmptySpace(\n    queue: Queue.BackingQueue<A>,\n    takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void {\n    let keepPolling = true\n    while (keepPolling && (queue.capacity() === Number.POSITIVE_INFINITY || queue.length() < queue.capacity())) {\n      const putter = pipe(this.putters, MutableQueue.poll(MutableQueue.EmptyMutableQueue))\n      if (putter === MutableQueue.EmptyMutableQueue) {\n        keepPolling = false\n      } else {\n        const offered = queue.offer(putter[0])\n        if (offered && putter[2]) {\n          unsafeCompleteDeferred(putter[1], true)\n        } else if (!offered) {\n          unsafeOfferAll(this.putters, pipe(unsafePollAll(this.putters), Chunk.prepend(putter)))\n        }\n        unsafeCompleteTakers(this, queue, takers)\n      }\n    }\n  }\n\n  unsafeOffer(iterable: Iterable<A>, deferred: Deferred.Deferred<boolean>): void {\n    const stuff = Arr.fromIterable(iterable)\n    for (let i = 0; i < stuff.length; i++) {\n      const value = stuff[i]\n      if (i === stuff.length - 1) {\n        pipe(this.putters, MutableQueue.offer([value, deferred, true as boolean] as const))\n      } else {\n        pipe(this.putters, MutableQueue.offer([value, deferred, false as boolean] as const))\n      }\n    }\n  }\n\n  unsafeRemove(deferred: Deferred.Deferred<boolean>): void {\n    unsafeOfferAll(\n      this.putters,\n      pipe(unsafePollAll(this.putters), Chunk.filter(([, _]) => _ !== deferred))\n    )\n  }\n}\n\n/** @internal */\nclass DroppingStrategy<in out A> implements Queue.Strategy<A> {\n  readonly [QueueStrategyTypeId] = queueStrategyVariance\n\n  surplusSize(): number {\n    return 0\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return core.void\n  }\n\n  onCompleteTakersWithEmptyQueue(): void {\n  }\n\n  handleSurplus(\n    _iterable: Iterable<A>,\n    _queue: Queue.BackingQueue<A>,\n    _takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n    _isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean> {\n    return core.succeed(false)\n  }\n\n  unsafeOnQueueEmptySpace(\n    _queue: Queue.BackingQueue<A>,\n    _takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void {\n    //\n  }\n}\n\n/** @internal */\nclass SlidingStrategy<in out A> implements Queue.Strategy<A> {\n  readonly [QueueStrategyTypeId] = queueStrategyVariance\n\n  surplusSize(): number {\n    return 0\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return core.void\n  }\n\n  onCompleteTakersWithEmptyQueue(): void {\n  }\n\n  handleSurplus(\n    iterable: Iterable<A>,\n    queue: Queue.BackingQueue<A>,\n    takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n    _isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean> {\n    return core.sync(() => {\n      this.unsafeOffer(queue, iterable)\n      unsafeCompleteTakers(this, queue, takers)\n      return true\n    })\n  }\n\n  unsafeOnQueueEmptySpace(\n    _queue: Queue.BackingQueue<A>,\n    _takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void {\n    //\n  }\n\n  unsafeOffer(queue: Queue.BackingQueue<A>, iterable: Iterable<A>): void {\n    const iterator = iterable[Symbol.iterator]()\n    let next: IteratorResult<A>\n    let offering = true\n    while (!(next = iterator.next()).done && offering) {\n      if (queue.capacity() === 0) {\n        return\n      }\n      // Poll 1 and retry\n      queue.poll(MutableQueue.EmptyMutableQueue)\n      offering = queue.offer(next.value)\n    }\n  }\n}\n\n/** @internal */\nconst unsafeCompleteDeferred = <A>(deferred: Deferred.Deferred<A>, a: A): void => {\n  return core.deferredUnsafeDone(deferred, core.succeed(a))\n}\n\n/** @internal */\nconst unsafeOfferAll = <A>(queue: MutableQueue.MutableQueue<A>, as: Iterable<A>): Chunk.Chunk<A> => {\n  return pipe(queue, MutableQueue.offerAll(as))\n}\n\n/** @internal */\nconst unsafePollAll = <A>(queue: MutableQueue.MutableQueue<A>): Chunk.Chunk<A> => {\n  return pipe(queue, MutableQueue.pollUpTo(Number.POSITIVE_INFINITY))\n}\n\n/** @internal */\nconst unsafePollN = <A>(queue: MutableQueue.MutableQueue<A>, max: number): Chunk.Chunk<A> => {\n  return pipe(queue, MutableQueue.pollUpTo(max))\n}\n\n/** @internal */\nexport const unsafeRemove = <A>(queue: MutableQueue.MutableQueue<A>, a: A): void => {\n  unsafeOfferAll(\n    queue,\n    pipe(unsafePollAll(queue), Chunk.filter((b) => a !== b))\n  )\n}\n\n/** @internal */\nexport const unsafeCompleteTakers = <A>(\n  strategy: Queue.Strategy<A>,\n  queue: Queue.BackingQueue<A>,\n  takers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n): void => {\n  // Check both a taker and an item are in the queue, starting with the taker\n  let keepPolling = true\n  while (keepPolling && queue.length() !== 0) {\n    const taker = pipe(takers, MutableQueue.poll(MutableQueue.EmptyMutableQueue))\n    if (taker !== MutableQueue.EmptyMutableQueue) {\n      const element = queue.poll(MutableQueue.EmptyMutableQueue)\n      if (element !== MutableQueue.EmptyMutableQueue) {\n        unsafeCompleteDeferred(taker, element)\n        strategy.unsafeOnQueueEmptySpace(queue, takers)\n      } else {\n        unsafeOfferAll(takers, pipe(unsafePollAll(takers), Chunk.prepend(taker)))\n      }\n      keepPolling = true\n    } else {\n      keepPolling = false\n    }\n  }\n  if (keepPolling && queue.length() === 0 && !MutableQueue.isEmpty(takers)) {\n    strategy.onCompleteTakersWithEmptyQueue(takers)\n  }\n}\n"],"names":["Arr","Chunk","Effectable","dual","pipe","MutableQueue","MutableRef","Option","pipeArguments","hasProperty","core","fiberRuntime","EnqueueSymbolKey","EnqueueTypeId","Symbol","for","DequeueSymbolKey","DequeueTypeId","QueueStrategySymbolKey","QueueStrategyTypeId","BackingQueueSymbolKey","BackingQueueTypeId","queueStrategyVariance","_A","_","backingQueueVariance","enqueueVariance","_In","dequeueVariance","_Out","QueueImpl","Class","queue","takers","shutdownHook","shutdownFlag","strategy","constructor","arguments","commit","take","capacity","size","suspend","catchAll","unsafeSize","interrupt","get","none","some","length","surplusSize","isEmpty","map","isFull","shutdown","uninterruptible","withFiberRuntime","state","set","forEachConcurrentDiscard","unsafePollAll","d","deferredInterruptWith","id","zipRight","whenEffect","deferredSucceed","asVoid","isShutdown","sync","awaitShutdown","deferredAwait","isActive","unsafeOffer","value","noRemaining","taker","poll","EmptyMutableQueue","unsafeCompleteDeferred","succeeded","offer","unsafeCompleteTakers","succeed","handleSurplus","offerAll","iterable","values","fromIterable","pTakers","unsafePollN","empty","forTakers","remaining","splitAt","i","item","surplus","unsafeOnQueueEmptySpace","deferred","deferredUnsafeMake","onInterrupt","unsafeRemove","takeAll","pollUpTo","Number","POSITIVE_INFINITY","takeUpTo","max","takeBetween","min","takeRemainderLoop","self","acc","flatMap","bs","b","appendAll","append","isQueue","u","isEnqueue","isDequeue","bounded","requestedCapacity","make","backingQueueFromMutableQueue","backPressureStrategy","dropping","droppingStrategy","sliding","slidingStrategy","unbounded","unsafeMake","deferredMake","BackingQueueFromMutableQueue","mutable","def","limit","elements","element","head","takeN","n","BackPressureStrategy","DroppingStrategy","SlidingStrategy","putters","onCompleteTakersWithEmptyQueue","putter","fiberId","isLastItem","void","keepPolling","offered","unsafeOfferAll","prepend","stuff","filter","_iterable","_queue","_takers","_isShutdown","iterator","next","offering","done","a","deferredUnsafeDone","as"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,SAASQ,aAAa,QAAQ,gBAAgB;AAG9C,OAAO,KAAKE,IAAI,MAAM,WAAW;AALjC,OAAO,KAAKJ,UAAU,MAAM,kBAAkB;AAC9C,OAAO,KAAKC,MAAM,MAAM,cAAc;AAFtC,OAAO,KAAKF,YAAY,MAAM,oBAAoB;AADlD,SAASF,IAAI,EAAEC,IAAI,QAAQ,gBAAgB;AAQ3C,OAAO,KAAKO,YAAY,MAAM,mBAAmB;AAbjD,OAAO,KAAKX,GAAG,MAAM,aAAa;AAClC,OAAO,KAAKC,KAAK,MAAM,aAAa;AAGpC,OAAO,KAAKC,UAAU,MAAM,kBAAkB;AAM9C,SAASO,WAAW,QAAQ,iBAAiB;;;;;;;;;;;;AAK7C,cAAA,GACA,MAAMG,gBAAgB,GAAG,qBAAqB;AAGvC,MAAMC,aAAa,GAAA,WAAA,GAAwBC,MAAM,CAACC,GAAG,CAACH,gBAAgB,CAAwB;AAErG,cAAA,GACA,MAAMI,gBAAgB,GAAG,qBAAqB;AAGvC,MAAMC,aAAa,GAAA,WAAA,GAAwBH,MAAM,CAACC,GAAG,CAACC,gBAAgB,CAAwB;AAErG,cAAA,GACA,MAAME,sBAAsB,GAAG,sBAAsB;AAG9C,MAAMC,mBAAmB,GAAA,WAAA,GAA8BL,MAAM,CAACC,GAAG,CACtEG,sBAAsB,CACM;AAE9B,cAAA,GACA,MAAME,qBAAqB,GAAG,qBAAqB;AAG5C,MAAMC,kBAAkB,GAAA,WAAA,GAA6BP,MAAM,CAACC,GAAG,CACpEK,qBAAqB,CACM;AAE7B,MAAME,qBAAqB,GAAG;IAC5B,kBAAA,GACAC,EAAE,GAAGC,CAAM,GAAKA;CACjB;AAED,MAAMC,oBAAoB,GAAG;IAC3B,kBAAA,GACAF,EAAE,GAAGC,CAAM,GAAKA;CACjB;AAGM,MAAME,eAAe,GAAG;IAC7B,kBAAA,GACAC,GAAG,GAAGH,CAAU,GAAKA;CACtB;AAGM,MAAMI,eAAe,GAAG;IAC7B,kBAAA,GACAC,IAAI,GAAGL,CAAQ,GAAKA;CACrB;AAED,cAAA,GACA,MAAMM,SAAoB,SAAQ5B,UAAU,4IAAC6B,KAAQ;IAMxCC,KAAA,CAAA;IAEAC,MAAA,CAAA;IAEAC,YAAA,CAAA;IAEAC,YAAA,CAAA;IAEAC,QAAA,CAAA;IAbF,CAACvB,aAAa,CAAA,GAAIa,eAAe,CAAA;IACjC,CAACT,aAAa,CAAA,GAAIW,eAAe,CAAA;IAE1CS,YAAA,AACE,cAAA,GACSL,KAA4B,EACrC,cAAA,GACSC,MAAuD,EAChE,cAAA,GACSC,YAAqC,EAC9C,cAAA,GACSC,YAA4C,EACrD,cAAA,GACSC,QAA2B,CAAA;QAEpC,KAAK,EAAE;QAVE,IAAA,CAAAJ,KAAK,GAALA,KAAK;QAEL,IAAA,CAAAC,MAAM,GAANA,MAAM;QAEN,IAAA,CAAAC,YAAY,GAAZA,YAAY;QAEZ,IAAA,CAAAC,YAAY,GAAZA,YAAY;QAEZ,IAAA,CAAAC,QAAQ,GAARA,QAAQ;IAGnB;IAEAhC,IAAIA,CAAA,EAAA;QACF,+JAAOI,gBAAAA,AAAa,EAAC,IAAI,EAAE8B,SAAS,CAAC;IACvC;IAEAC,MAAMA,CAAA,EAAA;QACJ,OAAO,IAAI,CAACC,IAAI;IAClB;IAEAC,QAAQA,CAAA,EAAA;QACN,OAAO,IAAI,CAACT,KAAK,CAACS,QAAQ,EAAE;IAC9B;IAEA,IAAIC,IAAIA,CAAA,EAAA;QACN,OAAOhC,IAAI,wJAACiC,OAAO,CAAC,IAAMjC,IAAI,wJAACkC,QAAQ,CAAC,IAAI,CAACC,UAAU,EAAE,EAAE,IAAMnC,IAAI,wJAACoC,SAAS,CAAC,CAAC;IACnF;IAEAD,UAAUA,CAAA,EAAA;QACR,IAAIvC,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;YACrC,OAAO5B,MAAM,4IAACyC,IAAI,EAAU;QAC9B;QACA,OAAOzC,MAAM,4IAAC0C,IAAI,CAChB,IAAI,CAACjB,KAAK,CAACkB,MAAM,EAAE,GACjB7C,YAAY,4IAAC6C,MAAM,CAAC,IAAI,CAACjB,MAAM,CAAC,GAChC,IAAI,CAACG,QAAQ,CAACe,WAAW,EAAE,CAC9B;IACH;IAEA,IAAIC,OAAOA,CAAA,EAAA;QACT,OAAO1C,IAAI,wJAAC2C,GAAG,CAAC,IAAI,CAACX,IAAI,EAAGA,IAAI,IAAKA,IAAI,IAAI,CAAC,CAAC;IACjD;IAEA,IAAIY,MAAMA,CAAA,EAAA;QACR,OAAO5C,IAAI,wJAAC2C,GAAG,CAAC,IAAI,CAACX,IAAI,GAAGA,IAAI,GAAKA,IAAI,IAAI,IAAI,CAACD,QAAQ,EAAE,CAAC;IAC/D;IAEA,IAAIc,QAAQA,CAAA,EAAA;QACV,OAAO7C,IAAI,wJAAC8C,eAAe,CACzB9C,IAAI,wJAAC+C,gBAAgB,EAAEC,KAAK,IAAI;oKAC9BtD,OAAAA,AAAI,EAAC,IAAI,CAAC+B,YAAY,EAAE7B,UAAU,4IAACqD,GAAG,CAAC,IAAI,CAAC,CAAC;YAC7C,QAAOvD,8JAAAA,AAAI,EACTO,YAAY,wJAACiD,wBAAwB,CACnCC,aAAa,CAAC,IAAI,CAAC5B,MAAM,CAAC,GACzB6B,CAAC,GAAKpD,IAAI,wJAACqD,qBAAqB,CAACD,CAAC,EAAEJ,KAAK,CAACM,EAAE,EAAE,CAAC,EAChD,KAAK,EACL,KAAK,CACN,EACDtD,IAAI,wJAACuD,QAAQ,CAAC,IAAI,CAAC7B,QAAQ,CAACmB,QAAQ,CAAC,EACrC7C,IAAI,wJAACwD,UAAU,CAACxD,IAAI,wJAACyD,eAAe,CAAC,IAAI,CAACjC,YAAY,EAAE,KAAK,CAAC,CAAC,CAAC,EAChExB,IAAI,wJAAC0D,MAAM,CACZ;QACH,CAAC,CAAC,CACH;IACH;IAEA,IAAIC,UAAUA,CAAA,EAAA;QACZ,OAAO3D,IAAI,wJAAC4D,IAAI,CAAC,IAAMhE,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,CAAC;IAC3D;IAEA,IAAIoC,aAAaA,CAAA,EAAA;QACf,OAAO7D,IAAI,wJAAC8D,aAAa,CAAC,IAAI,CAACtC,YAAY,CAAC;IAC9C;IAEAuC,QAAQA,CAAA,EAAA;QACN,OAAO,CAACnE,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC;IAC3C;IAEAuC,WAAWA,CAACC,KAAQ,EAAA;QAClB,IAAIrE,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;YACrC,OAAO,KAAK;QACd;QACA,IAAIyC,WAAoB;QACxB,IAAI,IAAI,CAAC5C,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,EAAE;YAC7B,MAAM2B,KAAK,GAAGzE,+JAAAA,AAAI,EAChB,IAAI,CAAC6B,MAAM,EACX5B,YAAY,4IAACyE,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC,CAClD;YACD,IAAIF,KAAK,KAAKxE,YAAY,4IAAC0E,iBAAiB,EAAE;gBAC5CC,sBAAsB,CAACH,KAAK,EAAEF,KAAK,CAAC;gBACpCC,WAAW,GAAG,IAAI;YACpB,CAAC,MAAM;gBACLA,WAAW,GAAG,KAAK;YACrB;QACF,CAAC,MAAM;YACLA,WAAW,GAAG,KAAK;QACrB;QACA,IAAIA,WAAW,EAAE;YACf,OAAO,IAAI;QACb;QACA,wCAAA;QACA,MAAMK,SAAS,GAAG,IAAI,CAACjD,KAAK,CAACkD,KAAK,CAACP,KAAK,CAAC;QACzCQ,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;QAC5D,OAAOgD,SAAS;IAClB;IAEAC,KAAKA,CAACP,KAAQ,EAAA;QACZ,OAAOjE,IAAI,wJAACiC,OAAO,CAAC,MAAK;YACvB,IAAIrC,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;gBACrC,OAAOzB,IAAI,wJAACoC,SAAS;YACvB;YACA,IAAI8B,WAAoB;YACxB,IAAI,IAAI,CAAC5C,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,EAAE;gBAC7B,MAAM2B,KAAK,2JAAGzE,OAAAA,AAAI,EAChB,IAAI,CAAC6B,MAAM,EACX5B,YAAY,4IAACyE,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC,CAClD;gBACD,IAAIF,KAAK,KAAKxE,YAAY,4IAAC0E,iBAAiB,EAAE;oBAC5CC,sBAAsB,CAACH,KAAK,EAAEF,KAAK,CAAC;oBACpCC,WAAW,GAAG,IAAI;gBACpB,CAAC,MAAM;oBACLA,WAAW,GAAG,KAAK;gBACrB;YACF,CAAC,MAAM;gBACLA,WAAW,GAAG,KAAK;YACrB;YACA,IAAIA,WAAW,EAAE;gBACf,OAAOlE,IAAI,wJAAC0E,OAAO,CAAC,IAAI,CAAC;YAC3B;YACA,wCAAA;YACA,MAAMH,SAAS,GAAG,IAAI,CAACjD,KAAK,CAACkD,KAAK,CAACP,KAAK,CAAC;YACzCQ,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;YAC5D,OAAOgD,SAAS,GACZvE,IAAI,wJAAC0E,OAAO,CAAC,IAAI,CAAC,GAClB,IAAI,CAAChD,QAAQ,CAACiD,aAAa,CAAC;gBAACV,KAAK;aAAC,EAAE,IAAI,CAAC3C,KAAK,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAACE,YAAY,CAAC;QACtF,CAAC,CAAC;IACJ;IAEAmD,QAAQA,CAACC,QAAqB,EAAA;QAC5B,OAAO7E,IAAI,wJAACiC,OAAO,CAAC,MAAK;YACvB,IAAIrC,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;gBACrC,OAAOzB,IAAI,wJAACoC,SAAS;YACvB;YACA,MAAM0C,MAAM,GAAGxF,GAAG,8IAACyF,YAAY,CAACF,QAAQ,CAAC;YACzC,MAAMG,OAAO,GAAG,IAAI,CAAC1D,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,GACrClD,GAAG,8IAACyF,YAAY,CAACE,WAAW,CAAC,IAAI,CAAC1D,MAAM,EAAEuD,MAAM,CAACtC,MAAM,CAAC,CAAC,GACzDlD,GAAG,8IAAC4F,KAAK;YACb,MAAM,CAACC,SAAS,EAAEC,SAAS,CAAC,2JAAG1F,OAAAA,AAAI,EAACoF,MAAM,EAAExF,GAAG,8IAAC+F,OAAO,CAACL,OAAO,CAACxC,MAAM,CAAC,CAAC;YACxE,IAAK,IAAI8C,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGN,OAAO,CAACxC,MAAM,EAAE8C,CAAC,EAAE,CAAE;gBACvC,MAAMnB,KAAK,GAAIa,OAAe,CAACM,CAAC,CAAC;gBACjC,MAAMC,IAAI,GAAGJ,SAAS,CAACG,CAAC,CAAC;gBACzBhB,sBAAsB,CAACH,KAAK,EAAEoB,IAAI,CAAC;YACrC;YACA,IAAIH,SAAS,CAAC5C,MAAM,KAAK,CAAC,EAAE;gBAC1B,OAAOxC,IAAI,wJAAC0E,OAAO,CAAC,IAAI,CAAC;YAC3B;YACA,wCAAA;YACA,MAAMc,OAAO,GAAG,IAAI,CAAClE,KAAK,CAACsD,QAAQ,CAACQ,SAAS,CAAC;YAC9CX,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;YAC5D,OAAOhC,KAAK,4IAACmD,OAAO,CAAC8C,OAAO,CAAC,GACzBxF,IAAI,wJAAC0E,OAAO,CAAC,IAAI,CAAC,GAClB,IAAI,CAAChD,QAAQ,CAACiD,aAAa,CAACa,OAAO,EAAE,IAAI,CAAClE,KAAK,EAAE,IAAI,CAACC,MAAM,EAAE,IAAI,CAACE,YAAY,CAAC;QACtF,CAAC,CAAC;IACJ;IAEA,IAAIK,IAAIA,CAAA,EAAA;QACN,OAAO9B,IAAI,wJAAC+C,gBAAgB,EAAEC,KAAK,IAAI;YACrC,IAAIpD,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,EAAE;gBACrC,OAAOzB,IAAI,wJAACoC,SAAS;YACvB;YACA,MAAMmD,IAAI,GAAG,IAAI,CAACjE,KAAK,CAAC8C,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC;YAC5D,IAAIkB,IAAI,KAAK5F,YAAY,4IAAC0E,iBAAiB,EAAE;gBAC3C,IAAI,CAAC3C,QAAQ,CAAC+D,uBAAuB,CAAC,IAAI,CAACnE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;gBAC9D,OAAOvB,IAAI,wJAAC0E,OAAO,CAACa,IAAI,CAAC;YAC3B,CAAC,MAAM;gBACL,oCAAA;gBACA,sDAAA;gBACA,0CAAA;gBACA,+CAAA;gBACA,MAAMG,QAAQ,GAAG1F,IAAI,wJAAC2F,kBAAkB,CAAI3C,KAAK,CAACM,EAAE,EAAE,CAAC;gBACvD,WAAO5D,2JAAAA,AAAI,EACTM,IAAI,wJAACiC,OAAO,CAAC,MAAK;4KAChBvC,OAAAA,AAAI,EAAC,IAAI,CAAC6B,MAAM,EAAE5B,YAAY,4IAAC6E,KAAK,CAACkB,QAAQ,CAAC,CAAC;oBAC/CjB,oBAAoB,CAAC,IAAI,CAAC/C,QAAQ,EAAE,IAAI,CAACJ,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;oBAC5D,OAAO3B,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,GACtCzB,IAAI,wJAACoC,SAAS,GACdpC,IAAI,wJAAC8D,aAAa,CAAC4B,QAAQ,CAAC;gBAChC,CAAC,CAAC,EACF1F,IAAI,wJAAC4F,WAAW,CAAC,MAAK;oBACpB,OAAO5F,IAAI,wJAAC4D,IAAI,CAAC,IAAMiC,YAAY,CAAC,IAAI,CAACtE,MAAM,EAAEmE,QAAQ,CAAC,CAAC;gBAC7D,CAAC,CAAC,CACH;YACH;QACF,CAAC,CAAC;IACJ;IAEA,IAAII,OAAOA,CAAA,EAAA;QACT,OAAO9F,IAAI,wJAACiC,OAAO,CAAC,MAAK;YACvB,OAAOrC,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,GACpCzB,IAAI,wJAACoC,SAAS,GACdpC,IAAI,wJAAC4D,IAAI,CAAC,MAAK;gBACf,MAAMkB,MAAM,GAAG,IAAI,CAACxD,KAAK,CAACyE,QAAQ,CAACC,MAAM,CAACC,iBAAiB,CAAC;gBAC5D,IAAI,CAACvE,QAAQ,CAAC+D,uBAAuB,CAAC,IAAI,CAACnE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;gBAC9D,OAAOhC,KAAK,4IAACwF,YAAY,CAACD,MAAM,CAAC;YACnC,CAAC,CAAC;QACN,CAAC,CAAC;IACJ;IAEAoB,QAAQA,CAACC,GAAW,EAAA;QAClB,OAAOnG,IAAI,wJAACiC,OAAO,CAAC,IAClBrC,UAAU,4IAACyC,GAAG,CAAC,IAAI,CAACZ,YAAY,CAAC,GAC7BzB,IAAI,wJAACoC,SAAS,GACdpC,IAAI,wJAAC4D,IAAI,CAAC,MAAK;gBACf,MAAMkB,MAAM,GAAG,IAAI,CAACxD,KAAK,CAACyE,QAAQ,CAACI,GAAG,CAAC;gBACvC,IAAI,CAACzE,QAAQ,CAAC+D,uBAAuB,CAAC,IAAI,CAACnE,KAAK,EAAE,IAAI,CAACC,MAAM,CAAC;gBAC9D,OAAOhC,KAAK,4IAACwF,YAAY,CAACD,MAAM,CAAC;YACnC,CAAC,CAAC,CACL;IACH;IAEAsB,WAAWA,CAACC,GAAW,EAAEF,GAAW,EAAA;QAClC,OAAOnG,IAAI,wJAACiC,OAAO,CAAC,IAClBqE,iBAAiB,CACf,IAAI,EACJD,GAAG,EACHF,GAAG,EACH5G,KAAK,4IAAC2F,KAAK,EAAE,CACd,CACF;IACH;;AAGF,cAAA,GACA,MAAMoB,iBAAiB,GAAGA,CACxBC,IAAsB,EACtBF,GAAW,EACXF,GAAW,EACXK,GAAmB,KACc;IACjC,IAAIL,GAAG,GAAGE,GAAG,EAAE;QACb,OAAOrG,IAAI,wJAAC0E,OAAO,CAAC8B,GAAG,CAAC;IAC1B;IACA,QAAO9G,8JAAI,AAAJA,EACLwG,QAAQ,CAACK,IAAI,EAAEJ,GAAG,CAAC,EACnBnG,IAAI,wJAACyG,OAAO,EAAEC,EAAE,IAAI;QAClB,MAAMtB,SAAS,GAAGiB,GAAG,GAAGK,EAAE,CAAClE,MAAM;QACjC,IAAI4C,SAAS,KAAK,CAAC,EAAE;YACnB,+JAAO1F,OAAAA,AAAI,EACToC,IAAI,CAACyE,IAAI,CAAC,EACVvG,IAAI,wJAAC2C,GAAG,EAAEgE,CAAC,GAAKjH,+JAAAA,AAAI,EAAC8G,GAAG,EAAEjH,KAAK,4IAACqH,SAAS,CAACF,EAAE,CAAC,EAAEnH,KAAK,4IAACsH,MAAM,CAACF,CAAC,CAAC,CAAC,CAAC,CACjE;QACH;QACA,IAAIvB,SAAS,GAAG,CAAC,EAAE;YACjB,+JAAO1F,OAAAA,AAAI,EACToC,IAAI,CAACyE,IAAI,CAAC,EACVvG,IAAI,wJAACyG,OAAO,CAAEE,CAAC,IACbL,iBAAiB,CACfC,IAAI,EACJnB,SAAS,GAAG,CAAC,EACbe,GAAG,GAAGO,EAAE,CAAClE,MAAM,GAAG,CAAC,0JACnB9C,OAAAA,AAAI,EAAC8G,GAAG,EAAEjH,KAAK,4IAACqH,SAAS,CAACF,EAAE,CAAC,EAAEnH,KAAK,4IAACsH,MAAM,CAACF,CAAC,CAAC,CAAC,CAChD,CACF,CACF;QACH;QACA,OAAO3G,IAAI,wJAAC0E,OAAO,yJAAChF,OAAAA,AAAI,EAAC8G,GAAG,EAAEjH,KAAK,4IAACqH,SAAS,CAACF,EAAE,CAAC,CAAC,CAAC;IACrD,CAAC,CAAC,CACH;AACH,CAAC;AAGM,MAAMI,OAAO,GAAIC,CAAU,IAAgCC,SAAS,CAACD,CAAC,CAAC,IAAIE,SAAS,CAACF,CAAC,CAAC;AAGvF,MAAMC,SAAS,IAAID,CAAU,4JAAkChH,cAAAA,AAAW,EAACgH,CAAC,EAAE5G,aAAa,CAAC;AAG5F,MAAM8G,SAAS,IAAIF,CAAU,4JAAkChH,cAAW,AAAXA,EAAYgH,CAAC,EAAExG,aAAa,CAAC;AAG5F,MAAM2G,OAAO,IAAOC,iBAAyB,OAClDzH,2JAAAA,AAAI,EACFM,IAAI,wJAAC4D,IAAI,CAAC,IAAMjE,YAAY,4IAACuH,OAAO,CAAIC,iBAAiB,CAAC,CAAC,EAC3DnH,IAAI,wJAACyG,OAAO,EAAEnF,KAAK,GAAK8F,IAAI,CAACC,4BAA4B,CAAC/F,KAAK,CAAC,EAAEgG,oBAAoB,EAAE,CAAC,CAAC,CAC3F;AAGI,MAAMC,QAAQ,IAAOJ,iBAAyB,2JACnDzH,OAAAA,AAAI,EACFM,IAAI,wJAAC4D,IAAI,CAAC,IAAMjE,YAAY,4IAACuH,OAAO,CAAIC,iBAAiB,CAAC,CAAC,EAC3DnH,IAAI,wJAACyG,OAAO,EAAEnF,KAAK,GAAK8F,IAAI,CAACC,4BAA4B,CAAC/F,KAAK,CAAC,EAAEkG,gBAAgB,EAAE,CAAC,CAAC,CACvF;AAGI,MAAMC,OAAO,IAAON,iBAAyB,2JAClDzH,OAAI,AAAJA,EACEM,IAAI,wJAAC4D,IAAI,CAAC,IAAMjE,YAAY,4IAACuH,OAAO,CAAIC,iBAAiB,CAAC,CAAC,EAC3DnH,IAAI,wJAACyG,OAAO,CAAEnF,KAAK,IAAK8F,IAAI,CAACC,4BAA4B,CAAC/F,KAAK,CAAC,EAAEoG,eAAe,EAAE,CAAC,CAAC,CACtF;AAGI,MAAMC,SAAS,GAAGA,CAAA,2JACvBjI,OAAAA,AAAI,EACFM,IAAI,wJAAC4D,IAAI,CAAC,IAAMjE,YAAY,4IAACgI,SAAS,EAAK,CAAC,EAC5C3H,IAAI,wJAACyG,OAAO,EAAEnF,KAAK,GAAK8F,IAAI,CAACC,4BAA4B,CAAC/F,KAAK,CAAC,EAAEkG,gBAAgB,EAAE,CAAC,CAAC,CACvF;AAEH,cAAA,GACA,MAAMI,UAAU,GAAGA,CACjBtG,KAA4B,EAC5BC,MAAuD,EACvDC,YAAqC,EACrCC,YAA4C,EAC5CC,QAA2B,KACT;IAClB,OAAO,IAAIN,SAAS,CAACE,KAAK,EAAEC,MAAM,EAAEC,YAAY,EAAEC,YAAY,EAAEC,QAAQ,CAAC;AAC3E,CAAC;AAGM,MAAM0F,IAAI,GAAGA,CAClB9F,KAA4B,EAC5BI,QAA2B,2JAE3BhC,OAAI,AAAJA,EACEM,IAAI,wJAAC6H,YAAY,EAAQ,EACzB7H,IAAI,wJAAC2C,GAAG,EAAE+C,QAAQ,GAChBkC,UAAU,CACRtG,KAAK,EACL3B,YAAY,4IAACgI,SAAS,EAAE,EACxBjC,QAAQ,EACR9F,UAAU,4IAACwH,IAAI,CAAC,KAAK,CAAC,EACtB1F,QAAQ,CACT,CACF,CACF;AAGG,MAAOoG,4BAA4B;IAElBC,OAAA,CAAA;IADZ,CAACpH,kBAAkB,CAAA,GAAII,oBAAoB,CAAA;IACpDY,YAAqBoG,OAAqC,CAAA;QAArC,IAAA,CAAAA,OAAO,GAAPA,OAAO;IAAiC;IAC7D3D,IAAIA,CAAM4D,GAAQ,EAAA;QAChB,OAAOrI,YAAY,4IAACyE,IAAI,CAAC,IAAI,CAAC2D,OAAO,EAAEC,GAAG,CAAC;IAC7C;IACAjC,QAAQA,CAACkC,KAAa,EAAA;QACpB,OAAOtI,YAAY,4IAACoG,QAAQ,CAAC,IAAI,CAACgC,OAAO,EAAEE,KAAK,CAAC;IACnD;IACArD,QAAQA,CAACsD,QAAqB,EAAA;QAC5B,OAAOvI,YAAY,4IAACiF,QAAQ,CAAC,IAAI,CAACmD,OAAO,EAAEG,QAAQ,CAAC;IACtD;IACA1D,KAAKA,CAAC2D,OAAU,EAAA;QACd,OAAOxI,YAAY,4IAAC6E,KAAK,CAAC,IAAI,CAACuD,OAAO,EAAEI,OAAO,CAAC;IAClD;IACApG,QAAQA,CAAA,EAAA;QACN,OAAOpC,YAAY,4IAACoC,QAAQ,CAAC,IAAI,CAACgG,OAAO,CAAC;IAC5C;IACAvF,MAAMA,CAAA,EAAA;QACJ,OAAO7C,YAAY,4IAAC6C,MAAM,CAAC,IAAI,CAACuF,OAAO,CAAC;IAC1C;;AAIK,MAAMV,4BAA4B,IAAOU,OAAqC,GACnF,IAAID,4BAA4B,CAACC,OAAO,CAAC;AAGpC,MAAMhG,QAAQ,IAAOwE,IAAyC,GAAaA,IAAI,CAACxE,QAAQ,EAAE;AAG1F,MAAMC,IAAI,IAAOuE,IAAyC,GAA4BA,IAAI,CAACvE,IAAI;AAG/F,MAAMY,MAAM,IAAO2D,IAAyC,GAA6BA,IAAI,CAAC3D,MAAM;AAGpG,MAAMF,OAAO,IAAO6D,IAAyC,GAA6BA,IAAI,CAAC7D,OAAO;AAGtG,MAAMiB,UAAU,IAAO4C,IAAyC,GAA6BA,IAAI,CAAC5C,UAAU;AAG5G,MAAME,aAAa,IAAO0C,IAAyC,GAA0BA,IAAI,CAAC1C,aAAa;AAG/G,MAAMhB,QAAQ,GAAO0D,IAAyC,IAA0BA,IAAI,CAAC1D,QAAQ;AAGrG,MAAM2B,KAAK,GAAA,WAAA,2JAAG/E,OAAAA,AAAI,EAGvB,CAAC,EAAE,CAAC8G,IAAI,EAAEtC,KAAK,GAAKsC,IAAI,CAAC/B,KAAK,CAACP,KAAK,CAAC,CAAC;AAGjC,MAAMD,WAAW,GAAA,WAAA,IAAGvE,8JAAAA,AAAI,EAG7B,CAAC,EAAE,CAAC8G,IAAI,EAAEtC,KAAK,GAAKsC,IAAI,CAACvC,WAAW,CAACC,KAAK,CAAC,CAAC;AAGvC,MAAMW,QAAQ,GAAA,WAAA,0JAAGnF,QAAI,AAAJA,EAQtB,CAAC,EAAE,CAAC8G,IAAI,EAAE1B,QAAQ,GAAK0B,IAAI,CAAC3B,QAAQ,CAACC,QAAQ,CAAC,CAAC;AAG1C,MAAMT,IAAI,IAAOmC,IAAsB,GAC5CvG,IAAI,wJAAC2C,GAAG,CAAC4D,IAAI,CAACL,QAAQ,CAAC,CAAC,CAAC,EAAE3G,KAAK,4IAAC6I,IAAI,CAAC;AAGjC,MAAMtG,IAAI,IAAOyE,IAAsB,GAAuBA,IAAI,CAACzE,IAAI;AAGvE,MAAMgE,OAAO,IAAOS,IAAsB,GAAoCA,IAAI,CAACT,OAAO;AAG1F,MAAMI,QAAQ,GAAA,WAAA,2JAAGzG,OAAAA,AAAI,EAG1B,CAAC,EAAE,CAAC8G,IAAI,EAAEJ,GAAG,GAAKI,IAAI,CAACL,QAAQ,CAACC,GAAG,CAAC,CAAC;AAGhC,MAAMC,WAAW,GAAA,WAAA,2JAAG3G,OAAAA,AAAI,EAG7B,CAAC,EAAE,CAAC8G,IAAI,EAAEF,GAAG,EAAEF,GAAG,GAAKI,IAAI,CAACH,WAAW,CAACC,GAAG,EAAEF,GAAG,CAAC,CAAC;AAG7C,MAAMkC,KAAK,GAAA,WAAA,0JAAG5I,QAAAA,AAAI,EAGvB,CAAC,EAAE,CAAC8G,IAAI,EAAE+B,CAAC,GAAK/B,IAAI,CAACH,WAAW,CAACkC,CAAC,EAAEA,CAAC,CAAC,CAAC;AAOlC,MAAMhB,oBAAoB,GAAGA,CAAA,GAA4B,IAAIiB,oBAAoB,EAAE;AAGnF,MAAMf,gBAAgB,GAAGA,CAAA,GAA4B,IAAIgB,gBAAgB,EAAE;AAG3E,MAAMd,eAAe,GAAGA,CAAA,GAA4B,IAAIe,eAAe,EAAE;AAEhF,cAAA,GACA,MAAMF,oBAAoB;IACf,CAAC9H,mBAAmB,CAAA,GAAIG,qBAAqB,CAAA;IAE7C8H,OAAO,GAAA,WAAA,GAAG/I,YAAY,4IAACgI,SAAS,EAAqD,CAAA;IAE9FlF,WAAWA,CAAA,EAAA;QACT,OAAO9C,YAAY,4IAAC6C,MAAM,CAAC,IAAI,CAACkG,OAAO,CAAC;IAC1C;IAEAC,8BAA8BA,CAACpH,MAAuD,EAAA;QACpF,MAAO,CAAC5B,YAAY,4IAAC+C,OAAO,CAAC,IAAI,CAACgG,OAAO,CAAC,IAAI,CAAC/I,YAAY,4IAAC+C,OAAO,CAACnB,MAAM,CAAC,CAAE;YAC3E,MAAM4C,KAAK,GAAGxE,YAAY,4IAACyE,IAAI,CAAC7C,MAAM,EAAE,KAAK,CAAC,CAAE;YAChD,MAAMqH,MAAM,GAAGjJ,YAAY,4IAACyE,IAAI,CAAC,IAAI,CAACsE,OAAO,EAAE,KAAK,CAAC,CAAE;YACvD,IAAIE,MAAM,CAAC,CAAC,CAAC,EAAE;gBACbtE,sBAAsB,CAACsE,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;YACzC;YACAtE,sBAAsB,CAACH,KAAK,EAAEyE,MAAM,CAAC,CAAC,CAAC,CAAC;QAC1C;IACF;IAEA,IAAI/F,QAAQA,CAAA,EAAA;QACV,+JAAOnD,OAAAA,AAAI,EACTM,IAAI,wJAAC6I,OAAO,EACZ7I,IAAI,wJAACyG,OAAO,EAAEoC,OAAO,2JACnBnJ,OAAAA,AAAI,EACFM,IAAI,wJAAC4D,IAAI,CAAC,IAAMT,aAAa,CAAC,IAAI,CAACuF,OAAO,CAAC,CAAC,EAC5C1I,IAAI,wJAACyG,OAAO,EAAEiC,OAAO,GACnBzI,YAAY,wJAACiD,wBAAwB,CACnCwF,OAAO,EACP,CAAC,CAAC5H,CAAC,EAAE4E,QAAQ,EAAEoD,UAAU,CAAC,GACxBA,UAAU,2JACRpJ,OAAAA,AAAI,EACFM,IAAI,wJAACqD,qBAAqB,CAACqC,QAAQ,EAAEmD,OAAO,CAAC,EAC7C7I,IAAI,wJAAC0D,MAAM,CACZ,GACD1D,IAAI,wJAAC+I,IAAI,EACb,KAAK,EACL,KAAK,CACN,CACF,CACF,CACF,CACF;IACH;IAEApE,aAAaA,CACXE,QAAqB,EACrBvD,KAA4B,EAC5BC,MAAuD,EACvDoC,UAA0C,EAAA;QAE1C,OAAO3D,IAAI,wJAAC+C,gBAAgB,CAAEC,KAAK,IAAI;YACrC,MAAM0C,QAAQ,GAAG1F,IAAI,wJAAC2F,kBAAkB,CAAU3C,KAAK,CAACM,EAAE,EAAE,CAAC;YAC7D,+JAAO5D,OAAAA,AAAI,EACTM,IAAI,wJAACiC,OAAO,CAAC,MAAK;gBAChB,IAAI,CAAC+B,WAAW,CAACa,QAAQ,EAAEa,QAAQ,CAAC;gBACpC,IAAI,CAACD,uBAAuB,CAACnE,KAAK,EAAEC,MAAM,CAAC;gBAC3CkD,oBAAoB,CAAC,IAAI,EAAEnD,KAAK,EAAEC,MAAM,CAAC;gBACzC,OAAO3B,UAAU,4IAACyC,GAAG,CAACsB,UAAU,CAAC,GAAG3D,IAAI,wJAACoC,SAAS,GAAGpC,IAAI,wJAAC8D,aAAa,CAAC4B,QAAQ,CAAC;YACnF,CAAC,CAAC,EACF1F,IAAI,wJAAC4F,WAAW,CAAC,IAAM5F,IAAI,wJAAC4D,IAAI,CAAC,IAAM,IAAI,CAACiC,YAAY,CAACH,QAAQ,CAAC,CAAC,CAAC,CACrE;QACH,CAAC,CAAC;IACJ;IAEAD,uBAAuBA,CACrBnE,KAA4B,EAC5BC,MAAuD,EAAA;QAEvD,IAAIyH,WAAW,GAAG,IAAI;QACtB,MAAOA,WAAW,IAAA,CAAK1H,KAAK,CAACS,QAAQ,EAAE,KAAKiE,MAAM,CAACC,iBAAiB,IAAI3E,KAAK,CAACkB,MAAM,EAAE,GAAGlB,KAAK,CAACS,QAAQ,EAAE,CAAC,CAAE;YAC1G,MAAM6G,MAAM,2JAAGlJ,OAAAA,AAAI,EAAC,IAAI,CAACgJ,OAAO,EAAE/I,YAAY,4IAACyE,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC,CAAC;YACpF,IAAIuE,MAAM,KAAKjJ,YAAY,4IAAC0E,iBAAiB,EAAE;gBAC7C2E,WAAW,GAAG,KAAK;YACrB,CAAC,MAAM;gBACL,MAAMC,OAAO,GAAG3H,KAAK,CAACkD,KAAK,CAACoE,MAAM,CAAC,CAAC,CAAC,CAAC;gBACtC,IAAIK,OAAO,IAAIL,MAAM,CAAC,CAAC,CAAC,EAAE;oBACxBtE,sBAAsB,CAACsE,MAAM,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;gBACzC,CAAC,MAAM,IAAI,CAACK,OAAO,EAAE;oBACnBC,cAAc,CAAC,IAAI,CAACR,OAAO,0JAAEhJ,OAAAA,AAAI,EAACyD,aAAa,CAAC,IAAI,CAACuF,OAAO,CAAC,EAAEnJ,KAAK,4IAAC4J,OAAO,CAACP,MAAM,CAAC,CAAC,CAAC;gBACxF;gBACAnE,oBAAoB,CAAC,IAAI,EAAEnD,KAAK,EAAEC,MAAM,CAAC;YAC3C;QACF;IACF;IAEAyC,WAAWA,CAACa,QAAqB,EAAEa,QAAoC,EAAA;QACrE,MAAM0D,KAAK,GAAG9J,GAAG,8IAACyF,YAAY,CAACF,QAAQ,CAAC;QACxC,IAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG8D,KAAK,CAAC5G,MAAM,EAAE8C,CAAC,EAAE,CAAE;YACrC,MAAMrB,KAAK,GAAGmF,KAAK,CAAC9D,CAAC,CAAC;YACtB,IAAIA,CAAC,KAAK8D,KAAK,CAAC5G,MAAM,GAAG,CAAC,EAAE;wKAC1B9C,OAAAA,AAAI,EAAC,IAAI,CAACgJ,OAAO,EAAE/I,YAAY,4IAAC6E,KAAK,CAAC;oBAACP,KAAK;oBAAEyB,QAAQ;oBAAE,IAAe;iBAAU,CAAC,CAAC;YACrF,CAAC,MAAM;uKACLhG,QAAAA,AAAI,EAAC,IAAI,CAACgJ,OAAO,EAAE/I,YAAY,4IAAC6E,KAAK,CAAC;oBAACP,KAAK;oBAAEyB,QAAQ;oBAAE,KAAgB;iBAAU,CAAC,CAAC;YACtF;QACF;IACF;IAEAG,YAAYA,CAACH,QAAoC,EAAA;QAC/CwD,cAAc,CACZ,IAAI,CAACR,OAAO,0JACZhJ,OAAAA,AAAI,EAACyD,aAAa,CAAC,IAAI,CAACuF,OAAO,CAAC,EAAEnJ,KAAK,4IAAC8J,MAAM,CAAC,CAAC,GAAGvI,CAAC,CAAC,GAAKA,CAAC,KAAK4E,QAAQ,CAAC,CAAC,CAC3E;IACH;;AAGF,cAAA,GACA,MAAM8C,gBAAgB;IACX,CAAC/H,mBAAmB,CAAA,GAAIG,qBAAqB,CAAA;IAEtD6B,WAAWA,CAAA,EAAA;QACT,OAAO,CAAC;IACV;IAEA,IAAII,QAAQA,CAAA,EAAA;QACV,OAAO7C,IAAI,wJAAC+I,IAAI;IAClB;IAEAJ,8BAA8BA,CAAA,EAAA,CAC9B;IAEAhE,aAAaA,CACX2E,SAAsB,EACtBC,MAA6B,EAC7BC,OAAwD,EACxDC,WAA2C,EAAA;QAE3C,OAAOzJ,IAAI,wJAAC0E,OAAO,CAAC,KAAK,CAAC;IAC5B;IAEAe,uBAAuBA,CACrB8D,MAA6B,EAC7BC,OAAwD,EAAA;IAExD,EAAA;IAAA;;AAIJ,cAAA,GACA,MAAMf,eAAe;IACV,CAAChI,mBAAmB,CAAA,GAAIG,qBAAqB,CAAA;IAEtD6B,WAAWA,CAAA,EAAA;QACT,OAAO,CAAC;IACV;IAEA,IAAII,QAAQA,CAAA,EAAA;QACV,OAAO7C,IAAI,wJAAC+I,IAAI;IAClB;IAEAJ,8BAA8BA,CAAA,EAAA,CAC9B;IAEAhE,aAAaA,CACXE,QAAqB,EACrBvD,KAA4B,EAC5BC,MAAuD,EACvDkI,WAA2C,EAAA;QAE3C,OAAOzJ,IAAI,wJAAC4D,IAAI,CAAC,MAAK;YACpB,IAAI,CAACI,WAAW,CAAC1C,KAAK,EAAEuD,QAAQ,CAAC;YACjCJ,oBAAoB,CAAC,IAAI,EAAEnD,KAAK,EAAEC,MAAM,CAAC;YACzC,OAAO,IAAI;QACb,CAAC,CAAC;IACJ;IAEAkE,uBAAuBA,CACrB8D,MAA6B,EAC7BC,OAAwD,EAAA;IAExD,EAAA;IAAA;IAGFxF,WAAWA,CAAC1C,KAA4B,EAAEuD,QAAqB,EAAA;QAC7D,MAAM6E,QAAQ,GAAG7E,QAAQ,CAACzE,MAAM,CAACsJ,QAAQ,CAAC,EAAE;QAC5C,IAAIC,IAAuB;QAC3B,IAAIC,QAAQ,GAAG,IAAI;QACnB,MAAO,CAAC,CAACD,IAAI,GAAGD,QAAQ,CAACC,IAAI,EAAE,EAAEE,IAAI,IAAID,QAAQ,CAAE;YACjD,IAAItI,KAAK,CAACS,QAAQ,EAAE,KAAK,CAAC,EAAE;gBAC1B;YACF;YACA,mBAAA;YACAT,KAAK,CAAC8C,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC;YAC1CuF,QAAQ,GAAGtI,KAAK,CAACkD,KAAK,CAACmF,IAAI,CAAC1F,KAAK,CAAC;QACpC;IACF;;AAGF,cAAA,GACA,MAAMK,sBAAsB,GAAGA,CAAIoB,QAA8B,EAAEoE,CAAI,KAAU;IAC/E,OAAO9J,IAAI,wJAAC+J,kBAAkB,CAACrE,QAAQ,EAAE1F,IAAI,wJAAC0E,OAAO,CAACoF,CAAC,CAAC,CAAC;AAC3D,CAAC;AAED,cAAA,GACA,MAAMZ,cAAc,GAAGA,CAAI5H,KAAmC,EAAE0I,EAAe,KAAoB;IACjG,WAAOtK,2JAAAA,AAAI,EAAC4B,KAAK,EAAE3B,YAAY,4IAACiF,QAAQ,CAACoF,EAAE,CAAC,CAAC;AAC/C,CAAC;AAED,cAAA,GACA,MAAM7G,aAAa,IAAO7B,KAAmC,IAAoB;IAC/E,QAAO5B,8JAAI,AAAJA,EAAK4B,KAAK,EAAE3B,YAAY,4IAACoG,QAAQ,CAACC,MAAM,CAACC,iBAAiB,CAAC,CAAC;AACrE,CAAC;AAED,cAAA,GACA,MAAMhB,WAAW,GAAGA,CAAI3D,KAAmC,EAAE6E,GAAW,KAAoB;IAC1F,+JAAOzG,OAAAA,AAAI,EAAC4B,KAAK,EAAE3B,YAAY,4IAACoG,QAAQ,CAACI,GAAG,CAAC,CAAC;AAChD,CAAC;AAGM,MAAMN,YAAY,GAAGA,CAAIvE,KAAmC,EAAEwI,CAAI,KAAU;IACjFZ,cAAc,CACZ5H,KAAK,0JACL5B,OAAAA,AAAI,EAACyD,aAAa,CAAC7B,KAAK,CAAC,EAAE/B,KAAK,4IAAC8J,MAAM,EAAE1C,CAAC,GAAKmD,CAAC,KAAKnD,CAAC,CAAC,CAAC,CACzD;AACH,CAAC;AAGM,MAAMlC,oBAAoB,GAAGA,CAClC/C,QAA2B,EAC3BJ,KAA4B,EAC5BC,MAAuD,KAC/C;IACR,2EAAA;IACA,IAAIyH,WAAW,GAAG,IAAI;IACtB,MAAOA,WAAW,IAAI1H,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,CAAE;QAC1C,MAAM2B,KAAK,2JAAGzE,OAAAA,AAAI,EAAC6B,MAAM,EAAE5B,YAAY,4IAACyE,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC,CAAC;QAC7E,IAAIF,KAAK,KAAKxE,YAAY,4IAAC0E,iBAAiB,EAAE;YAC5C,MAAM8D,OAAO,GAAG7G,KAAK,CAAC8C,IAAI,CAACzE,YAAY,4IAAC0E,iBAAiB,CAAC;YAC1D,IAAI8D,OAAO,KAAKxI,YAAY,4IAAC0E,iBAAiB,EAAE;gBAC9CC,sBAAsB,CAACH,KAAK,EAAEgE,OAAO,CAAC;gBACtCzG,QAAQ,CAAC+D,uBAAuB,CAACnE,KAAK,EAAEC,MAAM,CAAC;YACjD,CAAC,MAAM;gBACL2H,cAAc,CAAC3H,MAAM,0JAAE7B,OAAAA,AAAI,EAACyD,aAAa,CAAC5B,MAAM,CAAC,EAAEhC,KAAK,4IAAC4J,OAAO,CAAChF,KAAK,CAAC,CAAC,CAAC;YAC3E;YACA6E,WAAW,GAAG,IAAI;QACpB,CAAC,MAAM;YACLA,WAAW,GAAG,KAAK;QACrB;IACF;IACA,IAAIA,WAAW,IAAI1H,KAAK,CAACkB,MAAM,EAAE,KAAK,CAAC,IAAI,CAAC7C,YAAY,4IAAC+C,OAAO,CAACnB,MAAM,CAAC,EAAE;QACxEG,QAAQ,CAACiH,8BAA8B,CAACpH,MAAM,CAAC;IACjD;AACF,CAAC","ignoreList":[0]}},
    {"offset": {"line": 18220, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 18226, "column": 0}, "map": {"version":3,"file":"pubsub.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/pubsub.ts"],"sourcesContent":["import * as Chunk from \"../Chunk.js\"\nimport type * as Deferred from \"../Deferred.js\"\nimport type * as Effect from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport * as MutableQueue from \"../MutableQueue.js\"\nimport * as MutableRef from \"../MutableRef.js\"\nimport { nextPow2 } from \"../Number.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport type * as PubSub from \"../PubSub.js\"\nimport type * as Queue from \"../Queue.js\"\nimport type * as Scope from \"../Scope.js\"\nimport * as core from \"./core.js\"\nimport * as executionStrategy from \"./executionStrategy.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\nimport * as queue from \"./queue.js\"\n\nconst AbsentValue = Symbol.for(\"effect/PubSub/AbsentValue\")\ntype AbsentValue = typeof AbsentValue\n\n/** @internal */\nexport interface AtomicPubSub<in out A> {\n  readonly capacity: number\n  isEmpty(): boolean\n  isFull(): boolean\n  size(): number\n  publish(value: A): boolean\n  publishAll(elements: Iterable<A>): Chunk.Chunk<A>\n  slide(): void\n  subscribe(): Subscription<A>\n  replayWindow(): ReplayWindow<A>\n}\n\n/** @internal */\ninterface Subscription<out A> {\n  isEmpty(): boolean\n  size(): number\n  poll<D>(default_: D): A | D\n  pollUpTo(n: number): Chunk.Chunk<A>\n  unsubscribe(): void\n}\n\n/** @internal */\ntype Subscribers<A> = Map<\n  Subscription<A>,\n  Set<MutableQueue.MutableQueue<Deferred.Deferred<A>>>\n>\n\nconst addSubscribers = <A>(\n  subscription: Subscription<A>,\n  pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n) =>\n(subscribers: Subscribers<A>) => {\n  if (!subscribers.has(subscription)) {\n    subscribers.set(subscription, new Set())\n  }\n  const set = subscribers.get(subscription)!\n  set.add(pollers)\n}\n\nconst removeSubscribers = <A>(\n  subscription: Subscription<A>,\n  pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n) =>\n(subscribers: Subscribers<A>) => {\n  if (!subscribers.has(subscription)) {\n    return\n  }\n  const set = subscribers.get(subscription)!\n  set.delete(pollers)\n  if (set.size === 0) {\n    subscribers.delete(subscription)\n  }\n}\n\n/** @internal */\nexport const bounded = <A>(\n  capacity: number | {\n    readonly capacity: number\n    readonly replay?: number | undefined\n  }\n): Effect.Effect<PubSub.PubSub<A>> =>\n  core.suspend(() => {\n    const pubsub = makeBoundedPubSub<A>(capacity)\n    return makePubSub(pubsub, new BackPressureStrategy())\n  })\n\n/** @internal */\nexport const dropping = <A>(\n  capacity: number | {\n    readonly capacity: number\n    readonly replay?: number | undefined\n  }\n): Effect.Effect<PubSub.PubSub<A>> =>\n  core.suspend(() => {\n    const pubsub = makeBoundedPubSub<A>(capacity)\n    return makePubSub(pubsub, new DroppingStrategy())\n  })\n\n/** @internal */\nexport const sliding = <A>(\n  capacity: number | {\n    readonly capacity: number\n    readonly replay?: number | undefined\n  }\n): Effect.Effect<PubSub.PubSub<A>> =>\n  core.suspend(() => {\n    const pubsub = makeBoundedPubSub<A>(capacity)\n    return makePubSub(pubsub, new SlidingStrategy())\n  })\n\n/** @internal */\nexport const unbounded = <A>(options?: {\n  readonly replay?: number | undefined\n}): Effect.Effect<PubSub.PubSub<A>> =>\n  core.suspend(() => {\n    const pubsub = makeUnboundedPubSub<A>(options)\n    return makePubSub(pubsub, new DroppingStrategy())\n  })\n\n/** @internal */\nexport const capacity = <A>(self: PubSub.PubSub<A>): number => self.capacity()\n\n/** @internal */\nexport const size = <A>(self: PubSub.PubSub<A>): Effect.Effect<number> => self.size\n\n/** @internal */\nexport const isFull = <A>(self: PubSub.PubSub<A>): Effect.Effect<boolean> => self.isFull\n\n/** @internal */\nexport const isEmpty = <A>(self: PubSub.PubSub<A>): Effect.Effect<boolean> => self.isEmpty\n\n/** @internal */\nexport const shutdown = <A>(self: PubSub.PubSub<A>): Effect.Effect<void> => self.shutdown\n\n/** @internal */\nexport const isShutdown = <A>(self: PubSub.PubSub<A>): Effect.Effect<boolean> => self.isShutdown\n\n/** @internal */\nexport const awaitShutdown = <A>(self: PubSub.PubSub<A>): Effect.Effect<void> => self.awaitShutdown\n\n/** @internal */\nexport const publish = dual<\n  <A>(value: A) => (self: PubSub.PubSub<A>) => Effect.Effect<boolean>,\n  <A>(self: PubSub.PubSub<A>, value: A) => Effect.Effect<boolean>\n>(2, (self, value) => self.publish(value))\n\n/** @internal */\nexport const publishAll = dual<\n  <A>(elements: Iterable<A>) => (self: PubSub.PubSub<A>) => Effect.Effect<boolean>,\n  <A>(self: PubSub.PubSub<A>, elements: Iterable<A>) => Effect.Effect<boolean>\n>(2, (self, elements) => self.publishAll(elements))\n\n/** @internal */\nexport const subscribe = <A>(self: PubSub.PubSub<A>): Effect.Effect<Queue.Dequeue<A>, never, Scope.Scope> =>\n  self.subscribe\n\n/** @internal */\nconst makeBoundedPubSub = <A>(\n  capacity: number | {\n    readonly capacity: number\n    readonly replay?: number | undefined\n  }\n): AtomicPubSub<A> => {\n  const options = typeof capacity === \"number\" ? { capacity } : capacity\n  ensureCapacity(options.capacity)\n  const replayBuffer = options.replay && options.replay > 0 ? new ReplayBuffer<A>(Math.ceil(options.replay)) : undefined\n  if (options.capacity === 1) {\n    return new BoundedPubSubSingle(replayBuffer)\n  } else if (nextPow2(options.capacity) === options.capacity) {\n    return new BoundedPubSubPow2(options.capacity, replayBuffer)\n  } else {\n    return new BoundedPubSubArb(options.capacity, replayBuffer)\n  }\n}\n\n/** @internal */\nconst makeUnboundedPubSub = <A>(options?: {\n  readonly replay?: number | undefined\n}): AtomicPubSub<A> => new UnboundedPubSub(options?.replay ? new ReplayBuffer(options.replay) : undefined)\n\n/** @internal */\nconst makeSubscription = <A>(\n  pubsub: AtomicPubSub<A>,\n  subscribers: Subscribers<A>,\n  strategy: PubSubStrategy<A>\n): Effect.Effect<Queue.Dequeue<A>> =>\n  core.map(core.deferredMake<void>(), (deferred) =>\n    unsafeMakeSubscription(\n      pubsub,\n      subscribers,\n      pubsub.subscribe(),\n      MutableQueue.unbounded<Deferred.Deferred<A>>(),\n      deferred,\n      MutableRef.make(false),\n      strategy\n    ))\n\n/** @internal */\nexport const unsafeMakeSubscription = <A>(\n  pubsub: AtomicPubSub<A>,\n  subscribers: Subscribers<A>,\n  subscription: Subscription<A>,\n  pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n  shutdownHook: Deferred.Deferred<void>,\n  shutdownFlag: MutableRef.MutableRef<boolean>,\n  strategy: PubSubStrategy<A>\n): Queue.Dequeue<A> =>\n  new SubscriptionImpl(\n    pubsub,\n    subscribers,\n    subscription,\n    pollers,\n    shutdownHook,\n    shutdownFlag,\n    strategy,\n    pubsub.replayWindow()\n  )\n\n/** @internal */\nclass BoundedPubSubArb<in out A> implements AtomicPubSub<A> {\n  array: Array<A>\n  publisherIndex = 0\n  subscribers: Array<number>\n  subscriberCount = 0\n  subscribersIndex = 0\n\n  constructor(readonly capacity: number, readonly replayBuffer: ReplayBuffer<A> | undefined) {\n    this.array = Array.from({ length: capacity })\n    this.subscribers = Array.from({ length: capacity })\n  }\n\n  replayWindow(): ReplayWindow<A> {\n    return this.replayBuffer ? new ReplayWindowImpl(this.replayBuffer) : emptyReplayWindow\n  }\n\n  isEmpty(): boolean {\n    return this.publisherIndex === this.subscribersIndex\n  }\n\n  isFull(): boolean {\n    return this.publisherIndex === this.subscribersIndex + this.capacity\n  }\n\n  size(): number {\n    return this.publisherIndex - this.subscribersIndex\n  }\n\n  publish(value: A): boolean {\n    if (this.isFull()) {\n      return false\n    }\n    if (this.subscriberCount !== 0) {\n      const index = this.publisherIndex % this.capacity\n      this.array[index] = value\n      this.subscribers[index] = this.subscriberCount\n      this.publisherIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.offer(value)\n    }\n    return true\n  }\n\n  publishAll(elements: Iterable<A>): Chunk.Chunk<A> {\n    if (this.subscriberCount === 0) {\n      if (this.replayBuffer) {\n        this.replayBuffer.offerAll(elements)\n      }\n      return Chunk.empty()\n    }\n    const chunk = Chunk.fromIterable(elements)\n    const n = chunk.length\n    const size = this.publisherIndex - this.subscribersIndex\n    const available = this.capacity - size\n    const forPubSub = Math.min(n, available)\n    if (forPubSub === 0) {\n      return chunk\n    }\n    let iteratorIndex = 0\n    const publishAllIndex = this.publisherIndex + forPubSub\n    while (this.publisherIndex !== publishAllIndex) {\n      const a = Chunk.unsafeGet(chunk, iteratorIndex++)\n      const index = this.publisherIndex % this.capacity\n      this.array[index] = a\n      this.subscribers[index] = this.subscriberCount\n      this.publisherIndex += 1\n      if (this.replayBuffer) {\n        this.replayBuffer.offer(a)\n      }\n    }\n    return Chunk.drop(chunk, iteratorIndex)\n  }\n\n  slide(): void {\n    if (this.subscribersIndex !== this.publisherIndex) {\n      const index = this.subscribersIndex % this.capacity\n      this.array[index] = AbsentValue as unknown as A\n      this.subscribers[index] = 0\n      this.subscribersIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.slide()\n    }\n  }\n\n  subscribe(): Subscription<A> {\n    this.subscriberCount += 1\n    return new BoundedPubSubArbSubscription(this, this.publisherIndex, false)\n  }\n}\n\nclass BoundedPubSubArbSubscription<in out A> implements Subscription<A> {\n  constructor(\n    private self: BoundedPubSubArb<A>,\n    private subscriberIndex: number,\n    private unsubscribed: boolean\n  ) {\n  }\n\n  isEmpty(): boolean {\n    return (\n      this.unsubscribed ||\n      this.self.publisherIndex === this.subscriberIndex ||\n      this.self.publisherIndex === this.self.subscribersIndex\n    )\n  }\n\n  size() {\n    if (this.unsubscribed) {\n      return 0\n    }\n    return this.self.publisherIndex - Math.max(this.subscriberIndex, this.self.subscribersIndex)\n  }\n\n  poll<D>(default_: D): A | D {\n    if (this.unsubscribed) {\n      return default_\n    }\n    this.subscriberIndex = Math.max(this.subscriberIndex, this.self.subscribersIndex)\n    if (this.subscriberIndex !== this.self.publisherIndex) {\n      const index = this.subscriberIndex % this.self.capacity\n      const elem = this.self.array[index]!\n      this.self.subscribers[index] -= 1\n      if (this.self.subscribers[index] === 0) {\n        this.self.array[index] = AbsentValue as unknown as A\n        this.self.subscribersIndex += 1\n      }\n      this.subscriberIndex += 1\n      return elem\n    }\n    return default_\n  }\n\n  pollUpTo(n: number): Chunk.Chunk<A> {\n    if (this.unsubscribed) {\n      return Chunk.empty()\n    }\n    this.subscriberIndex = Math.max(this.subscriberIndex, this.self.subscribersIndex)\n    const size = this.self.publisherIndex - this.subscriberIndex\n    const toPoll = Math.min(n, size)\n    if (toPoll <= 0) {\n      return Chunk.empty()\n    }\n    const builder: Array<A> = []\n    const pollUpToIndex = this.subscriberIndex + toPoll\n    while (this.subscriberIndex !== pollUpToIndex) {\n      const index = this.subscriberIndex % this.self.capacity\n      const a = this.self.array[index] as A\n      this.self.subscribers[index] -= 1\n      if (this.self.subscribers[index] === 0) {\n        this.self.array[index] = AbsentValue as unknown as A\n        this.self.subscribersIndex += 1\n      }\n      builder.push(a)\n      this.subscriberIndex += 1\n    }\n\n    return Chunk.fromIterable(builder)\n  }\n\n  unsubscribe(): void {\n    if (!this.unsubscribed) {\n      this.unsubscribed = true\n      this.self.subscriberCount -= 1\n      this.subscriberIndex = Math.max(this.subscriberIndex, this.self.subscribersIndex)\n      while (this.subscriberIndex !== this.self.publisherIndex) {\n        const index = this.subscriberIndex % this.self.capacity\n        this.self.subscribers[index] -= 1\n        if (this.self.subscribers[index] === 0) {\n          this.self.array[index] = AbsentValue as unknown as A\n          this.self.subscribersIndex += 1\n        }\n        this.subscriberIndex += 1\n      }\n    }\n  }\n}\n\n/** @internal */\nclass BoundedPubSubPow2<in out A> implements AtomicPubSub<A> {\n  array: Array<A>\n  mask: number\n  publisherIndex = 0\n  subscribers: Array<number>\n  subscriberCount = 0\n  subscribersIndex = 0\n\n  constructor(readonly capacity: number, readonly replayBuffer: ReplayBuffer<A> | undefined) {\n    this.array = Array.from({ length: capacity })\n    this.mask = capacity - 1\n    this.subscribers = Array.from({ length: capacity })\n  }\n\n  replayWindow(): ReplayWindow<A> {\n    return this.replayBuffer ? new ReplayWindowImpl(this.replayBuffer) : emptyReplayWindow\n  }\n\n  isEmpty(): boolean {\n    return this.publisherIndex === this.subscribersIndex\n  }\n\n  isFull(): boolean {\n    return this.publisherIndex === this.subscribersIndex + this.capacity\n  }\n\n  size(): number {\n    return this.publisherIndex - this.subscribersIndex\n  }\n\n  publish(value: A): boolean {\n    if (this.isFull()) {\n      return false\n    }\n    if (this.subscriberCount !== 0) {\n      const index = this.publisherIndex & this.mask\n      this.array[index] = value\n      this.subscribers[index] = this.subscriberCount\n      this.publisherIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.offer(value)\n    }\n    return true\n  }\n\n  publishAll(elements: Iterable<A>): Chunk.Chunk<A> {\n    if (this.subscriberCount === 0) {\n      if (this.replayBuffer) {\n        this.replayBuffer.offerAll(elements)\n      }\n      return Chunk.empty()\n    }\n    const chunk = Chunk.fromIterable(elements)\n    const n = chunk.length\n    const size = this.publisherIndex - this.subscribersIndex\n    const available = this.capacity - size\n    const forPubSub = Math.min(n, available)\n    if (forPubSub === 0) {\n      return chunk\n    }\n    let iteratorIndex = 0\n    const publishAllIndex = this.publisherIndex + forPubSub\n    while (this.publisherIndex !== publishAllIndex) {\n      const elem = Chunk.unsafeGet(chunk, iteratorIndex++)\n      const index = this.publisherIndex & this.mask\n      this.array[index] = elem\n      this.subscribers[index] = this.subscriberCount\n      this.publisherIndex += 1\n      if (this.replayBuffer) {\n        this.replayBuffer.offer(elem)\n      }\n    }\n    return Chunk.drop(chunk, iteratorIndex)\n  }\n\n  slide(): void {\n    if (this.subscribersIndex !== this.publisherIndex) {\n      const index = this.subscribersIndex & this.mask\n      this.array[index] = AbsentValue as unknown as A\n      this.subscribers[index] = 0\n      this.subscribersIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.slide()\n    }\n  }\n\n  subscribe(): Subscription<A> {\n    this.subscriberCount += 1\n    return new BoundedPubSubPow2Subscription(this, this.publisherIndex, false)\n  }\n}\n\n/** @internal */\nclass BoundedPubSubPow2Subscription<in out A> implements Subscription<A> {\n  constructor(\n    private self: BoundedPubSubPow2<A>,\n    private subscriberIndex: number,\n    private unsubscribed: boolean\n  ) {\n  }\n\n  isEmpty(): boolean {\n    return (\n      this.unsubscribed ||\n      this.self.publisherIndex === this.subscriberIndex ||\n      this.self.publisherIndex === this.self.subscribersIndex\n    )\n  }\n\n  size() {\n    if (this.unsubscribed) {\n      return 0\n    }\n    return this.self.publisherIndex - Math.max(this.subscriberIndex, this.self.subscribersIndex)\n  }\n\n  poll<D>(default_: D): A | D {\n    if (this.unsubscribed) {\n      return default_\n    }\n    this.subscriberIndex = Math.max(this.subscriberIndex, this.self.subscribersIndex)\n    if (this.subscriberIndex !== this.self.publisherIndex) {\n      const index = this.subscriberIndex & this.self.mask\n      const elem = this.self.array[index]!\n      this.self.subscribers[index] -= 1\n      if (this.self.subscribers[index] === 0) {\n        this.self.array[index] = AbsentValue as unknown as A\n        this.self.subscribersIndex += 1\n      }\n      this.subscriberIndex += 1\n      return elem\n    }\n    return default_\n  }\n\n  pollUpTo(n: number): Chunk.Chunk<A> {\n    if (this.unsubscribed) {\n      return Chunk.empty()\n    }\n    this.subscriberIndex = Math.max(this.subscriberIndex, this.self.subscribersIndex)\n    const size = this.self.publisherIndex - this.subscriberIndex\n    const toPoll = Math.min(n, size)\n    if (toPoll <= 0) {\n      return Chunk.empty()\n    }\n    const builder: Array<A> = []\n    const pollUpToIndex = this.subscriberIndex + toPoll\n    while (this.subscriberIndex !== pollUpToIndex) {\n      const index = this.subscriberIndex & this.self.mask\n      const elem = this.self.array[index] as A\n      this.self.subscribers[index] -= 1\n      if (this.self.subscribers[index] === 0) {\n        this.self.array[index] = AbsentValue as unknown as A\n        this.self.subscribersIndex += 1\n      }\n      builder.push(elem)\n      this.subscriberIndex += 1\n    }\n    return Chunk.fromIterable(builder)\n  }\n\n  unsubscribe(): void {\n    if (!this.unsubscribed) {\n      this.unsubscribed = true\n      this.self.subscriberCount -= 1\n      this.subscriberIndex = Math.max(this.subscriberIndex, this.self.subscribersIndex)\n      while (this.subscriberIndex !== this.self.publisherIndex) {\n        const index = this.subscriberIndex & this.self.mask\n        this.self.subscribers[index] -= 1\n        if (this.self.subscribers[index] === 0) {\n          this.self.array[index] = AbsentValue as unknown as A\n          this.self.subscribersIndex += 1\n        }\n        this.subscriberIndex += 1\n      }\n    }\n  }\n}\n\n/** @internal */\nclass BoundedPubSubSingle<in out A> implements AtomicPubSub<A> {\n  publisherIndex = 0\n  subscriberCount = 0\n  subscribers = 0\n  value: A = AbsentValue as unknown as A\n\n  readonly capacity = 1\n  constructor(readonly replayBuffer: ReplayBuffer<A> | undefined) {}\n\n  replayWindow(): ReplayWindow<A> {\n    return this.replayBuffer ? new ReplayWindowImpl(this.replayBuffer) : emptyReplayWindow\n  }\n\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n\n  isEmpty(): boolean {\n    return this.subscribers === 0\n  }\n\n  isFull(): boolean {\n    return !this.isEmpty()\n  }\n\n  size(): number {\n    return this.isEmpty() ? 0 : 1\n  }\n\n  publish(value: A): boolean {\n    if (this.isFull()) {\n      return false\n    }\n    if (this.subscriberCount !== 0) {\n      this.value = value\n      this.subscribers = this.subscriberCount\n      this.publisherIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.offer(value)\n    }\n    return true\n  }\n\n  publishAll(elements: Iterable<A>): Chunk.Chunk<A> {\n    if (this.subscriberCount === 0) {\n      if (this.replayBuffer) {\n        this.replayBuffer.offerAll(elements)\n      }\n      return Chunk.empty()\n    }\n    const chunk = Chunk.fromIterable(elements)\n    if (Chunk.isEmpty(chunk)) {\n      return chunk\n    }\n    if (this.publish(Chunk.unsafeHead(chunk))) {\n      return Chunk.drop(chunk, 1)\n    } else {\n      return chunk\n    }\n  }\n\n  slide(): void {\n    if (this.isFull()) {\n      this.subscribers = 0\n      this.value = AbsentValue as unknown as A\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.slide()\n    }\n  }\n\n  subscribe(): Subscription<A> {\n    this.subscriberCount += 1\n    return new BoundedPubSubSingleSubscription(this, this.publisherIndex, false)\n  }\n}\n\n/** @internal */\nclass BoundedPubSubSingleSubscription<in out A> implements Subscription<A> {\n  constructor(\n    private self: BoundedPubSubSingle<A>,\n    private subscriberIndex: number,\n    private unsubscribed: boolean\n  ) {\n  }\n\n  isEmpty(): boolean {\n    return (\n      this.unsubscribed ||\n      this.self.subscribers === 0 ||\n      this.subscriberIndex === this.self.publisherIndex\n    )\n  }\n\n  size() {\n    return this.isEmpty() ? 0 : 1\n  }\n\n  poll<D>(default_: D): A | D {\n    if (this.isEmpty()) {\n      return default_\n    }\n    const elem = this.self.value\n    this.self.subscribers -= 1\n    if (this.self.subscribers === 0) {\n      this.self.value = AbsentValue as unknown as A\n    }\n    this.subscriberIndex += 1\n    return elem\n  }\n\n  pollUpTo(n: number): Chunk.Chunk<A> {\n    if (this.isEmpty() || n < 1) {\n      return Chunk.empty()\n    }\n    const a = this.self.value\n    this.self.subscribers -= 1\n    if (this.self.subscribers === 0) {\n      this.self.value = AbsentValue as unknown as A\n    }\n    this.subscriberIndex += 1\n    return Chunk.of(a)\n  }\n\n  unsubscribe(): void {\n    if (!this.unsubscribed) {\n      this.unsubscribed = true\n      this.self.subscriberCount -= 1\n      if (this.subscriberIndex !== this.self.publisherIndex) {\n        this.self.subscribers -= 1\n        if (this.self.subscribers === 0) {\n          this.self.value = AbsentValue as unknown as A\n        }\n      }\n    }\n  }\n}\n\n/** @internal */\ninterface Node<out A> {\n  value: A | AbsentValue\n  subscribers: number\n  next: Node<A> | null\n}\n\n/** @internal */\nclass UnboundedPubSub<in out A> implements AtomicPubSub<A> {\n  publisherHead: Node<A> = {\n    value: AbsentValue,\n    subscribers: 0,\n    next: null\n  }\n  publisherTail = this.publisherHead\n  publisherIndex = 0\n  subscribersIndex = 0\n\n  readonly capacity = Number.MAX_SAFE_INTEGER\n  constructor(readonly replayBuffer: ReplayBuffer<A> | undefined) {}\n\n  replayWindow(): ReplayWindow<A> {\n    return this.replayBuffer ? new ReplayWindowImpl(this.replayBuffer) : emptyReplayWindow\n  }\n\n  isEmpty(): boolean {\n    return this.publisherHead === this.publisherTail\n  }\n\n  isFull(): boolean {\n    return false\n  }\n\n  size(): number {\n    return this.publisherIndex - this.subscribersIndex\n  }\n\n  publish(value: A): boolean {\n    const subscribers = this.publisherTail.subscribers\n    if (subscribers !== 0) {\n      this.publisherTail.next = {\n        value,\n        subscribers,\n        next: null\n      }\n      this.publisherTail = this.publisherTail.next\n      this.publisherIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.offer(value)\n    }\n    return true\n  }\n\n  publishAll(elements: Iterable<A>): Chunk.Chunk<A> {\n    if (this.publisherTail.subscribers !== 0) {\n      for (const a of elements) {\n        this.publish(a)\n      }\n    } else if (this.replayBuffer) {\n      this.replayBuffer.offerAll(elements)\n    }\n    return Chunk.empty()\n  }\n\n  slide(): void {\n    if (this.publisherHead !== this.publisherTail) {\n      this.publisherHead = this.publisherHead.next!\n      this.publisherHead.value = AbsentValue\n      this.subscribersIndex += 1\n    }\n    if (this.replayBuffer) {\n      this.replayBuffer.slide()\n    }\n  }\n\n  subscribe(): Subscription<A> {\n    this.publisherTail.subscribers += 1\n    return new UnboundedPubSubSubscription(\n      this,\n      this.publisherTail,\n      this.publisherIndex,\n      false\n    )\n  }\n}\n\n/** @internal */\nclass UnboundedPubSubSubscription<in out A> implements Subscription<A> {\n  constructor(\n    private self: UnboundedPubSub<A>,\n    private subscriberHead: Node<A>,\n    private subscriberIndex: number,\n    private unsubscribed: boolean\n  ) {\n  }\n\n  isEmpty(): boolean {\n    if (this.unsubscribed) {\n      return true\n    }\n    let empty = true\n    let loop = true\n    while (loop) {\n      if (this.subscriberHead === this.self.publisherTail) {\n        loop = false\n      } else {\n        if (this.subscriberHead.next!.value !== AbsentValue) {\n          empty = false\n          loop = false\n        } else {\n          this.subscriberHead = this.subscriberHead.next!\n          this.subscriberIndex += 1\n        }\n      }\n    }\n    return empty\n  }\n\n  size() {\n    if (this.unsubscribed) {\n      return 0\n    }\n    return this.self.publisherIndex - Math.max(this.subscriberIndex, this.self.subscribersIndex)\n  }\n\n  poll<D>(default_: D): A | D {\n    if (this.unsubscribed) {\n      return default_\n    }\n    let loop = true\n    let polled: A | D = default_\n    while (loop) {\n      if (this.subscriberHead === this.self.publisherTail) {\n        loop = false\n      } else {\n        const elem = this.subscriberHead.next!.value\n        if (elem !== AbsentValue) {\n          polled = elem\n          this.subscriberHead.subscribers -= 1\n          if (this.subscriberHead.subscribers === 0) {\n            this.self.publisherHead = this.self.publisherHead.next!\n            this.self.publisherHead.value = AbsentValue\n            this.self.subscribersIndex += 1\n          }\n          loop = false\n        }\n        this.subscriberHead = this.subscriberHead.next!\n        this.subscriberIndex += 1\n      }\n    }\n    return polled\n  }\n\n  pollUpTo(n: number): Chunk.Chunk<A> {\n    const builder: Array<A> = []\n    const default_ = AbsentValue\n    let i = 0\n    while (i !== n) {\n      const a = this.poll(default_ as unknown as A)\n      if (a === default_) {\n        i = n\n      } else {\n        builder.push(a)\n        i += 1\n      }\n    }\n    return Chunk.fromIterable(builder)\n  }\n\n  unsubscribe(): void {\n    if (!this.unsubscribed) {\n      this.unsubscribed = true\n      this.self.publisherTail.subscribers -= 1\n      while (this.subscriberHead !== this.self.publisherTail) {\n        if (this.subscriberHead.next!.value !== AbsentValue) {\n          this.subscriberHead.subscribers -= 1\n          if (this.subscriberHead.subscribers === 0) {\n            this.self.publisherHead = this.self.publisherHead.next!\n            this.self.publisherHead.value = AbsentValue\n            this.self.subscribersIndex += 1\n          }\n        }\n        this.subscriberHead = this.subscriberHead.next!\n      }\n    }\n  }\n}\n\n/** @internal */\nclass SubscriptionImpl<in out A> extends Effectable.Class<A> implements Queue.Dequeue<A> {\n  [queue.DequeueTypeId] = queue.dequeueVariance\n\n  constructor(\n    readonly pubsub: AtomicPubSub<A>,\n    readonly subscribers: Subscribers<A>,\n    readonly subscription: Subscription<A>,\n    readonly pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>,\n    readonly shutdownHook: Deferred.Deferred<void>,\n    readonly shutdownFlag: MutableRef.MutableRef<boolean>,\n    readonly strategy: PubSubStrategy<A>,\n    readonly replayWindow: ReplayWindow<A>\n  ) {\n    super()\n  }\n\n  commit() {\n    return this.take\n  }\n\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n\n  capacity(): number {\n    return this.pubsub.capacity\n  }\n\n  isActive(): boolean {\n    return !MutableRef.get(this.shutdownFlag)\n  }\n\n  get size(): Effect.Effect<number> {\n    return core.suspend(() =>\n      MutableRef.get(this.shutdownFlag)\n        ? core.interrupt\n        : core.succeed(this.subscription.size() + this.replayWindow.remaining)\n    )\n  }\n\n  unsafeSize(): Option.Option<number> {\n    if (MutableRef.get(this.shutdownFlag)) {\n      return Option.none()\n    }\n    return Option.some(this.subscription.size() + this.replayWindow.remaining)\n  }\n\n  get isFull(): Effect.Effect<boolean> {\n    return core.suspend(() =>\n      MutableRef.get(this.shutdownFlag)\n        ? core.interrupt\n        : core.succeed(this.subscription.size() === this.capacity())\n    )\n  }\n\n  get isEmpty(): Effect.Effect<boolean> {\n    return core.map(this.size, (size) => size === 0)\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return core.uninterruptible(\n      core.withFiberRuntime<void>((state) => {\n        MutableRef.set(this.shutdownFlag, true)\n        return pipe(\n          fiberRuntime.forEachParUnbounded(\n            unsafePollAllQueue(this.pollers),\n            (d) => core.deferredInterruptWith(d, state.id()),\n            false\n          ),\n          core.zipRight(core.sync(() => {\n            this.subscribers.delete(this.subscription)\n            this.subscription.unsubscribe()\n            this.strategy.unsafeOnPubSubEmptySpace(this.pubsub, this.subscribers)\n          })),\n          core.whenEffect(core.deferredSucceed(this.shutdownHook, void 0)),\n          core.asVoid\n        )\n      })\n    )\n  }\n\n  get isShutdown(): Effect.Effect<boolean> {\n    return core.sync(() => MutableRef.get(this.shutdownFlag))\n  }\n\n  get awaitShutdown(): Effect.Effect<void> {\n    return core.deferredAwait(this.shutdownHook)\n  }\n\n  get take(): Effect.Effect<A> {\n    return core.withFiberRuntime((state) => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      if (this.replayWindow.remaining > 0) {\n        const message = this.replayWindow.take()!\n        return core.succeed(message)\n      }\n      const message = MutableQueue.isEmpty(this.pollers)\n        ? this.subscription.poll(MutableQueue.EmptyMutableQueue)\n        : MutableQueue.EmptyMutableQueue\n      if (message === MutableQueue.EmptyMutableQueue) {\n        const deferred = core.deferredUnsafeMake<A>(state.id())\n        return pipe(\n          core.suspend(() => {\n            pipe(this.pollers, MutableQueue.offer(deferred))\n            pipe(this.subscribers, addSubscribers(this.subscription, this.pollers))\n            this.strategy.unsafeCompletePollers(\n              this.pubsub,\n              this.subscribers,\n              this.subscription,\n              this.pollers\n            )\n            return MutableRef.get(this.shutdownFlag) ? core.interrupt : core.deferredAwait(deferred)\n          }),\n          core.onInterrupt(() => core.sync(() => unsafeRemove(this.pollers, deferred)))\n        )\n      } else {\n        this.strategy.unsafeOnPubSubEmptySpace(this.pubsub, this.subscribers)\n        return core.succeed(message)\n      }\n    })\n  }\n\n  get takeAll(): Effect.Effect<Chunk.Chunk<A>> {\n    return core.suspend(() => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      const as = MutableQueue.isEmpty(this.pollers)\n        ? unsafePollAllSubscription(this.subscription)\n        : Chunk.empty()\n      this.strategy.unsafeOnPubSubEmptySpace(this.pubsub, this.subscribers)\n      if (this.replayWindow.remaining > 0) {\n        return core.succeed(Chunk.appendAll(this.replayWindow.takeAll(), as))\n      }\n      return core.succeed(as)\n    })\n  }\n\n  takeUpTo(this: this, max: number): Effect.Effect<Chunk.Chunk<A>> {\n    return core.suspend(() => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      let replay: Chunk.Chunk<A> | undefined = undefined\n      if (this.replayWindow.remaining >= max) {\n        const as = this.replayWindow.takeN(max)\n        return core.succeed(as)\n      } else if (this.replayWindow.remaining > 0) {\n        replay = this.replayWindow.takeAll()\n        max = max - replay.length\n      }\n      const as = MutableQueue.isEmpty(this.pollers)\n        ? unsafePollN(this.subscription, max)\n        : Chunk.empty()\n      this.strategy.unsafeOnPubSubEmptySpace(this.pubsub, this.subscribers)\n      return replay ? core.succeed(Chunk.appendAll(replay, as)) : core.succeed(as)\n    })\n  }\n\n  takeBetween(min: number, max: number): Effect.Effect<Chunk.Chunk<A>> {\n    return core.suspend(() => takeRemainderLoop(this, min, max, Chunk.empty()))\n  }\n}\n\n/** @internal */\nconst takeRemainderLoop = <A>(\n  self: Queue.Dequeue<A>,\n  min: number,\n  max: number,\n  acc: Chunk.Chunk<A>\n): Effect.Effect<Chunk.Chunk<A>> => {\n  if (max < min) {\n    return core.succeed(acc)\n  }\n  return pipe(\n    self.takeUpTo(max),\n    core.flatMap((bs) => {\n      const remaining = min - bs.length\n      if (remaining === 1) {\n        return pipe(self.take, core.map((b) => pipe(acc, Chunk.appendAll(bs), Chunk.append(b))))\n      }\n      if (remaining > 1) {\n        return pipe(\n          self.take,\n          core.flatMap((b) =>\n            takeRemainderLoop(\n              self,\n              remaining - 1,\n              max - bs.length - 1,\n              pipe(acc, Chunk.appendAll(bs), Chunk.append(b))\n            )\n          )\n        )\n      }\n      return core.succeed(pipe(acc, Chunk.appendAll(bs)))\n    })\n  )\n}\n\n/** @internal */\nclass PubSubImpl<in out A> implements PubSub.PubSub<A> {\n  readonly [queue.EnqueueTypeId] = queue.enqueueVariance\n  readonly [queue.DequeueTypeId] = queue.dequeueVariance\n\n  constructor(\n    readonly pubsub: AtomicPubSub<A>,\n    readonly subscribers: Subscribers<A>,\n    readonly scope: Scope.Scope.Closeable,\n    readonly shutdownHook: Deferred.Deferred<void>,\n    readonly shutdownFlag: MutableRef.MutableRef<boolean>,\n    readonly strategy: PubSubStrategy<A>\n  ) {}\n\n  capacity(): number {\n    return this.pubsub.capacity\n  }\n\n  get size(): Effect.Effect<number> {\n    return core.suspend(() =>\n      MutableRef.get(this.shutdownFlag) ?\n        core.interrupt :\n        core.sync(() => this.pubsub.size())\n    )\n  }\n\n  unsafeSize(): Option.Option<number> {\n    if (MutableRef.get(this.shutdownFlag)) {\n      return Option.none()\n    }\n    return Option.some(this.pubsub.size())\n  }\n\n  get isFull(): Effect.Effect<boolean> {\n    return core.map(this.size, (size) => size === this.capacity())\n  }\n\n  get isEmpty(): Effect.Effect<boolean> {\n    return core.map(this.size, (size) => size === 0)\n  }\n\n  get awaitShutdown(): Effect.Effect<void> {\n    return core.deferredAwait(this.shutdownHook)\n  }\n\n  get isShutdown(): Effect.Effect<boolean> {\n    return core.sync(() => MutableRef.get(this.shutdownFlag))\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return core.uninterruptible(core.withFiberRuntime((state) => {\n      pipe(this.shutdownFlag, MutableRef.set(true))\n      return pipe(\n        this.scope.close(core.exitInterrupt(state.id())),\n        core.zipRight(this.strategy.shutdown),\n        core.whenEffect(core.deferredSucceed(this.shutdownHook, void 0)),\n        core.asVoid\n      )\n    }))\n  }\n\n  publish(value: A): Effect.Effect<boolean> {\n    return core.suspend(() => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n\n      if (this.pubsub.publish(value)) {\n        this.strategy.unsafeCompleteSubscribers(this.pubsub, this.subscribers)\n        return core.succeed(true)\n      }\n\n      return this.strategy.handleSurplus(\n        this.pubsub,\n        this.subscribers,\n        Chunk.of(value),\n        this.shutdownFlag\n      )\n    })\n  }\n\n  isActive(): boolean {\n    return !MutableRef.get(this.shutdownFlag)\n  }\n\n  unsafeOffer(value: A): boolean {\n    if (MutableRef.get(this.shutdownFlag)) {\n      return false\n    }\n\n    if ((this.pubsub as AtomicPubSub<unknown>).publish(value)) {\n      this.strategy.unsafeCompleteSubscribers(this.pubsub, this.subscribers)\n      return true\n    }\n\n    return false\n  }\n\n  publishAll(elements: Iterable<A>): Effect.Effect<boolean> {\n    return core.suspend(() => {\n      if (MutableRef.get(this.shutdownFlag)) {\n        return core.interrupt\n      }\n      const surplus = unsafePublishAll(this.pubsub, elements)\n      this.strategy.unsafeCompleteSubscribers(this.pubsub, this.subscribers)\n      if (Chunk.isEmpty(surplus)) {\n        return core.succeed(true)\n      }\n      return this.strategy.handleSurplus(\n        this.pubsub,\n        this.subscribers,\n        surplus,\n        this.shutdownFlag\n      )\n    })\n  }\n\n  get subscribe(): Effect.Effect<Queue.Dequeue<A>, never, Scope.Scope> {\n    const acquire = core.tap(\n      fiberRuntime.all([\n        this.scope.fork(executionStrategy.sequential),\n        makeSubscription(this.pubsub, this.subscribers, this.strategy)\n      ]),\n      (tuple) => tuple[0].addFinalizer(() => tuple[1].shutdown)\n    )\n    return core.map(\n      fiberRuntime.acquireRelease(acquire, (tuple, exit) => tuple[0].close(exit)),\n      (tuple) => tuple[1]\n    )\n  }\n\n  offer(value: A): Effect.Effect<boolean> {\n    return this.publish(value)\n  }\n\n  offerAll(elements: Iterable<A>): Effect.Effect<boolean> {\n    return this.publishAll(elements)\n  }\n\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const makePubSub = <A>(\n  pubsub: AtomicPubSub<A>,\n  strategy: PubSubStrategy<A>\n): Effect.Effect<PubSub.PubSub<A>> =>\n  core.flatMap(\n    fiberRuntime.scopeMake(),\n    (scope) =>\n      core.map(core.deferredMake<void>(), (deferred) =>\n        unsafeMakePubSub(\n          pubsub,\n          new Map(),\n          scope,\n          deferred,\n          MutableRef.make(false),\n          strategy\n        ))\n  )\n\n/** @internal */\nexport const unsafeMakePubSub = <A>(\n  pubsub: AtomicPubSub<A>,\n  subscribers: Subscribers<A>,\n  scope: Scope.Scope.Closeable,\n  shutdownHook: Deferred.Deferred<void>,\n  shutdownFlag: MutableRef.MutableRef<boolean>,\n  strategy: PubSubStrategy<A>\n): PubSub.PubSub<A> => new PubSubImpl(pubsub, subscribers, scope, shutdownHook, shutdownFlag, strategy)\n\n/** @internal */\nconst ensureCapacity = (capacity: number): void => {\n  if (capacity <= 0) {\n    throw new core.InvalidPubSubCapacityException(`Cannot construct PubSub with capacity of ${capacity}`)\n  }\n}\n\n/** @internal */\nconst unsafeCompleteDeferred = <A>(deferred: Deferred.Deferred<A>, a: A): void => {\n  core.deferredUnsafeDone(deferred, core.succeed(a))\n}\n\n/** @internal */\nconst unsafeOfferAll = <A>(queue: MutableQueue.MutableQueue<A>, as: Iterable<A>): Chunk.Chunk<A> => {\n  return pipe(queue, MutableQueue.offerAll(as))\n}\n\n/** @internal */\nconst unsafePollAllQueue = <A>(queue: MutableQueue.MutableQueue<A>): Chunk.Chunk<A> => {\n  return pipe(queue, MutableQueue.pollUpTo(Number.POSITIVE_INFINITY))\n}\n\n/** @internal */\nconst unsafePollAllSubscription = <A>(subscription: Subscription<A>): Chunk.Chunk<A> => {\n  return subscription.pollUpTo(Number.POSITIVE_INFINITY)\n}\n\n/** @internal */\nconst unsafePollN = <A>(subscription: Subscription<A>, max: number): Chunk.Chunk<A> => {\n  return subscription.pollUpTo(max)\n}\n\n/** @internal */\nconst unsafePublishAll = <A>(pubsub: AtomicPubSub<A>, as: Iterable<A>): Chunk.Chunk<A> => {\n  return pubsub.publishAll(as)\n}\n\n/** @internal */\nconst unsafeRemove = <A>(queue: MutableQueue.MutableQueue<A>, value: A): void => {\n  unsafeOfferAll(\n    queue,\n    pipe(unsafePollAllQueue(queue), Chunk.filter((elem) => elem !== value))\n  )\n}\n\n// -----------------------------------------------------------------------------\n// PubSub.Strategy\n// -----------------------------------------------------------------------------\n\n/**\n * A `PubSubStrategy<A>` describes the protocol for how publishers and subscribers\n * will communicate with each other through the `PubSub`.\n *\n * @internal\n */\nexport interface PubSubStrategy<in out A> {\n  /**\n   * Describes any finalization logic associated with this strategy.\n   */\n  readonly shutdown: Effect.Effect<void>\n\n  /**\n   * Describes how publishers should signal to subscribers that they are\n   * waiting for space to become available in the `PubSub`.\n   */\n  handleSurplus(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    elements: Iterable<A>,\n    isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean>\n\n  /**\n   * Describes how subscribers should signal to publishers waiting for space\n   * to become available in the `PubSub` that space may be available.\n   */\n  unsafeOnPubSubEmptySpace(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>\n  ): void\n\n  /**\n   * Describes how subscribers waiting for additional values from the `PubSub`\n   * should take those values and signal to publishers that they are no\n   * longer waiting for additional values.\n   */\n  unsafeCompletePollers(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    subscription: Subscription<A>,\n    pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void\n\n  /**\n   * Describes how publishers should signal to subscribers waiting for\n   * additional values from the `PubSub` that new values are available.\n   */\n  unsafeCompleteSubscribers(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>\n  ): void\n}\n\n/**\n * A strategy that applies back pressure to publishers when the `PubSub` is at\n * capacity. This guarantees that all subscribers will receive all messages\n * published to the `PubSub` while they are subscribed. However, it creates the\n * risk that a slow subscriber will slow down the rate at which messages\n * are published and received by other subscribers.\n *\n * @internal\n */\nclass BackPressureStrategy<in out A> implements PubSubStrategy<A> {\n  publishers: MutableQueue.MutableQueue<\n    readonly [A, Deferred.Deferred<boolean>, boolean]\n  > = MutableQueue.unbounded()\n\n  get shutdown(): Effect.Effect<void> {\n    return core.flatMap(core.fiberId, (fiberId) =>\n      core.flatMap(\n        core.sync(() => unsafePollAllQueue(this.publishers)),\n        (publishers) =>\n          fiberRuntime.forEachConcurrentDiscard(\n            publishers,\n            ([_, deferred, last]) =>\n              last ?\n                pipe(core.deferredInterruptWith(deferred, fiberId), core.asVoid) :\n                core.void,\n            false,\n            false\n          )\n      ))\n  }\n\n  handleSurplus(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    elements: Iterable<A>,\n    isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean> {\n    return core.withFiberRuntime((state) => {\n      const deferred = core.deferredUnsafeMake<boolean>(state.id())\n      return pipe(\n        core.suspend(() => {\n          this.unsafeOffer(elements, deferred)\n          this.unsafeOnPubSubEmptySpace(pubsub, subscribers)\n          this.unsafeCompleteSubscribers(pubsub, subscribers)\n          return MutableRef.get(isShutdown) ?\n            core.interrupt :\n            core.deferredAwait(deferred)\n        }),\n        core.onInterrupt(() => core.sync(() => this.unsafeRemove(deferred)))\n      )\n    })\n  }\n\n  unsafeOnPubSubEmptySpace(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>\n  ): void {\n    let keepPolling = true\n    while (keepPolling && !pubsub.isFull()) {\n      const publisher = pipe(this.publishers, MutableQueue.poll(MutableQueue.EmptyMutableQueue))\n      if (publisher === MutableQueue.EmptyMutableQueue) {\n        keepPolling = false\n      } else {\n        const published = pubsub.publish(publisher[0])\n        if (published && publisher[2]) {\n          unsafeCompleteDeferred(publisher[1], true)\n        } else if (!published) {\n          unsafeOfferAll(\n            this.publishers,\n            pipe(unsafePollAllQueue(this.publishers), Chunk.prepend(publisher))\n          )\n        }\n        this.unsafeCompleteSubscribers(pubsub, subscribers)\n      }\n    }\n  }\n\n  unsafeCompletePollers(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    subscription: Subscription<A>,\n    pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void {\n    return unsafeStrategyCompletePollers(this, pubsub, subscribers, subscription, pollers)\n  }\n\n  unsafeCompleteSubscribers(pubsub: AtomicPubSub<A>, subscribers: Subscribers<A>): void {\n    return unsafeStrategyCompleteSubscribers(this, pubsub, subscribers)\n  }\n\n  private unsafeOffer(elements: Iterable<A>, deferred: Deferred.Deferred<boolean>): void {\n    const iterator = elements[Symbol.iterator]()\n    let next: IteratorResult<A> = iterator.next()\n    if (!next.done) {\n      // eslint-disable-next-line no-constant-condition\n      while (1) {\n        const value = next.value\n        next = iterator.next()\n        if (next.done) {\n          pipe(\n            this.publishers,\n            MutableQueue.offer([value, deferred, true as boolean] as const)\n          )\n          break\n        }\n        pipe(\n          this.publishers,\n          MutableQueue.offer([value, deferred, false as boolean] as const)\n        )\n      }\n    }\n  }\n\n  unsafeRemove(deferred: Deferred.Deferred<boolean>): void {\n    unsafeOfferAll(\n      this.publishers,\n      pipe(unsafePollAllQueue(this.publishers), Chunk.filter(([_, a]) => a !== deferred))\n    )\n  }\n}\n\n/**\n * A strategy that drops new messages when the `PubSub` is at capacity. This\n * guarantees that a slow subscriber will not slow down the rate at which\n * messages are published. However, it creates the risk that a slow\n * subscriber will slow down the rate at which messages are received by\n * other subscribers and that subscribers may not receive all messages\n * published to the `PubSub` while they are subscribed.\n *\n * @internal\n */\nexport class DroppingStrategy<in out A> implements PubSubStrategy<A> {\n  get shutdown(): Effect.Effect<void> {\n    return core.void\n  }\n\n  handleSurplus(\n    _pubsub: AtomicPubSub<A>,\n    _subscribers: Subscribers<A>,\n    _elements: Iterable<A>,\n    _isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean> {\n    return core.succeed(false)\n  }\n\n  unsafeOnPubSubEmptySpace(\n    _pubsub: AtomicPubSub<A>,\n    _subscribers: Subscribers<A>\n  ): void {\n    //\n  }\n\n  unsafeCompletePollers(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    subscription: Subscription<A>,\n    pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void {\n    return unsafeStrategyCompletePollers(this, pubsub, subscribers, subscription, pollers)\n  }\n\n  unsafeCompleteSubscribers(pubsub: AtomicPubSub<A>, subscribers: Subscribers<A>): void {\n    return unsafeStrategyCompleteSubscribers(this, pubsub, subscribers)\n  }\n}\n\n/**\n * A strategy that adds new messages and drops old messages when the `PubSub` is\n * at capacity. This guarantees that a slow subscriber will not slow down\n * the rate at which messages are published and received by other\n * subscribers. However, it creates the risk that a slow subscriber will\n * not receive some messages published to the `PubSub` while it is subscribed.\n *\n * @internal\n */\nexport class SlidingStrategy<in out A> implements PubSubStrategy<A> {\n  get shutdown(): Effect.Effect<void> {\n    return core.void\n  }\n\n  handleSurplus(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    elements: Iterable<A>,\n    _isShutdown: MutableRef.MutableRef<boolean>\n  ): Effect.Effect<boolean> {\n    return core.sync(() => {\n      this.unsafeSlidingPublish(pubsub, elements)\n      this.unsafeCompleteSubscribers(pubsub, subscribers)\n      return true\n    })\n  }\n\n  unsafeOnPubSubEmptySpace(\n    _pubsub: AtomicPubSub<A>,\n    _subscribers: Subscribers<A>\n  ): void {\n    //\n  }\n\n  unsafeCompletePollers(\n    pubsub: AtomicPubSub<A>,\n    subscribers: Subscribers<A>,\n    subscription: Subscription<A>,\n    pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n  ): void {\n    return unsafeStrategyCompletePollers(this, pubsub, subscribers, subscription, pollers)\n  }\n\n  unsafeCompleteSubscribers(pubsub: AtomicPubSub<A>, subscribers: Subscribers<A>): void {\n    return unsafeStrategyCompleteSubscribers(this, pubsub, subscribers)\n  }\n\n  unsafeSlidingPublish(pubsub: AtomicPubSub<A>, elements: Iterable<A>): void {\n    const it = elements[Symbol.iterator]()\n    let next = it.next()\n    if (!next.done && pubsub.capacity > 0) {\n      let a = next.value\n      let loop = true\n      while (loop) {\n        pubsub.slide()\n        const pub = pubsub.publish(a)\n        if (pub && (next = it.next()) && !next.done) {\n          a = next.value\n        } else if (pub) {\n          loop = false\n        }\n      }\n    }\n  }\n}\n\n/** @internal */\nconst unsafeStrategyCompletePollers = <A>(\n  strategy: PubSubStrategy<A>,\n  pubsub: AtomicPubSub<A>,\n  subscribers: Subscribers<A>,\n  subscription: Subscription<A>,\n  pollers: MutableQueue.MutableQueue<Deferred.Deferred<A>>\n): void => {\n  let keepPolling = true\n  while (keepPolling && !subscription.isEmpty()) {\n    const poller = pipe(pollers, MutableQueue.poll(MutableQueue.EmptyMutableQueue))\n    if (poller === MutableQueue.EmptyMutableQueue) {\n      pipe(subscribers, removeSubscribers(subscription, pollers))\n      if (MutableQueue.isEmpty(pollers)) {\n        keepPolling = false\n      } else {\n        pipe(subscribers, addSubscribers(subscription, pollers))\n      }\n    } else {\n      const pollResult = subscription.poll(MutableQueue.EmptyMutableQueue)\n      if (pollResult === MutableQueue.EmptyMutableQueue) {\n        unsafeOfferAll(pollers, pipe(unsafePollAllQueue(pollers), Chunk.prepend(poller)))\n      } else {\n        unsafeCompleteDeferred(poller, pollResult)\n        strategy.unsafeOnPubSubEmptySpace(pubsub, subscribers)\n      }\n    }\n  }\n}\n\n/** @internal */\nconst unsafeStrategyCompleteSubscribers = <A>(\n  strategy: PubSubStrategy<A>,\n  pubsub: AtomicPubSub<A>,\n  subscribers: Subscribers<A>\n): void => {\n  for (\n    const [subscription, pollersSet] of subscribers\n  ) {\n    for (const pollers of pollersSet) {\n      strategy.unsafeCompletePollers(pubsub, subscribers, subscription, pollers)\n    }\n  }\n}\n\ninterface ReplayNode<A> {\n  value: A | AbsentValue\n  next: ReplayNode<A> | null\n}\n\nclass ReplayBuffer<A> {\n  constructor(readonly capacity: number) {}\n\n  head: ReplayNode<A> = { value: AbsentValue, next: null }\n  tail: ReplayNode<A> = this.head\n  size = 0\n  index = 0\n\n  slide() {\n    this.index++\n  }\n  offer(a: A): void {\n    this.tail.value = a\n    this.tail.next = {\n      value: AbsentValue,\n      next: null\n    }\n    this.tail = this.tail.next\n    if (this.size === this.capacity) {\n      this.head = this.head.next!\n    } else {\n      this.size += 1\n    }\n  }\n  offerAll(as: Iterable<A>): void {\n    for (const a of as) {\n      this.offer(a)\n    }\n  }\n}\n\ninterface ReplayWindow<A> {\n  take(): A | undefined\n  takeN(n: number): Chunk.Chunk<A>\n  takeAll(): Chunk.Chunk<A>\n  readonly remaining: number\n}\n\nclass ReplayWindowImpl<A> implements ReplayWindow<A> {\n  head: ReplayNode<A>\n  index: number\n  remaining: number\n  constructor(readonly buffer: ReplayBuffer<A>) {\n    this.index = buffer.index\n    this.remaining = buffer.size\n    this.head = buffer.head\n  }\n  fastForward() {\n    while (this.index < this.buffer.index) {\n      this.head = this.head.next!\n      this.index++\n    }\n  }\n  take(): A | undefined {\n    if (this.remaining === 0) {\n      return undefined\n    } else if (this.index < this.buffer.index) {\n      this.fastForward()\n    }\n    this.remaining--\n    const value = this.head.value\n    this.head = this.head.next!\n    return value as A\n  }\n  takeN(n: number): Chunk.Chunk<A> {\n    if (this.remaining === 0) {\n      return Chunk.empty()\n    } else if (this.index < this.buffer.index) {\n      this.fastForward()\n    }\n    const len = Math.min(n, this.remaining)\n    const items = new Array(len)\n    for (let i = 0; i < len; i++) {\n      const value = this.head.value as A\n      this.head = this.head.next!\n      items[i] = value\n    }\n    this.remaining -= len\n    return Chunk.unsafeFromArray(items)\n  }\n  takeAll(): Chunk.Chunk<A> {\n    return this.takeN(this.remaining)\n  }\n}\n\nconst emptyReplayWindow: ReplayWindow<never> = {\n  remaining: 0,\n  take: () => undefined,\n  takeN: () => Chunk.empty(),\n  takeAll: () => Chunk.empty()\n}\n"],"names":["Chunk","Effectable","dual","pipe","MutableQueue","MutableRef","nextPow2","Option","pipeArguments","core","executionStrategy","fiberRuntime","queue","AbsentValue","Symbol","for","addSubscribers","subscription","pollers","subscribers","has","set","Set","get","add","removeSubscribers","delete","size","bounded","capacity","suspend","pubsub","makeBoundedPubSub","makePubSub","BackPressureStrategy","dropping","DroppingStrategy","sliding","SlidingStrategy","unbounded","options","makeUnboundedPubSub","self","isFull","isEmpty","shutdown","isShutdown","awaitShutdown","publish","value","publishAll","elements","subscribe","ensureCapacity","replayBuffer","replay","ReplayBuffer","Math","ceil","undefined","BoundedPubSubSingle","BoundedPubSubPow2","BoundedPubSubArb","UnboundedPubSub","makeSubscription","strategy","map","deferredMake","deferred","unsafeMakeSubscription","make","shutdownHook","shutdownFlag","SubscriptionImpl","replayWindow","array","publisherIndex","subscriberCount","subscribersIndex","constructor","Array","from","length","ReplayWindowImpl","emptyReplayWindow","index","offer","offerAll","empty","chunk","fromIterable","n","available","forPubSub","min","iteratorIndex","publishAllIndex","a","unsafeGet","drop","slide","BoundedPubSubArbSubscription","subscriberIndex","unsubscribed","max","poll","default_","elem","pollUpTo","toPoll","builder","pollUpToIndex","push","unsubscribe","mask","BoundedPubSubPow2Subscription","arguments","unsafeHead","BoundedPubSubSingleSubscription","of","publisherHead","next","publisherTail","Number","MAX_SAFE_INTEGER","UnboundedPubSubSubscription","subscriberHead","loop","polled","i","Class","DequeueTypeId","dequeueVariance","commit","take","isActive","interrupt","succeed","remaining","unsafeSize","none","some","uninterruptible","withFiberRuntime","state","forEachParUnbounded","unsafePollAllQueue","d","deferredInterruptWith","id","zipRight","sync","unsafeOnPubSubEmptySpace","whenEffect","deferredSucceed","asVoid","deferredAwait","message","EmptyMutableQueue","deferredUnsafeMake","unsafeCompletePollers","onInterrupt","unsafeRemove","takeAll","as","unsafePollAllSubscription","appendAll","takeUpTo","takeN","unsafePollN","takeBetween","takeRemainderLoop","acc","flatMap","bs","b","append","PubSubImpl","scope","EnqueueTypeId","enqueueVariance","close","exitInterrupt","unsafeCompleteSubscribers","handleSurplus","unsafeOffer","surplus","unsafePublishAll","acquire","tap","all","fork","sequential","tuple","addFinalizer","acquireRelease","exit","scopeMake","unsafeMakePubSub","Map","InvalidPubSubCapacityException","unsafeCompleteDeferred","deferredUnsafeDone","unsafeOfferAll","POSITIVE_INFINITY","filter","publishers","fiberId","forEachConcurrentDiscard","_","last","void","keepPolling","publisher","published","prepend","unsafeStrategyCompletePollers","unsafeStrategyCompleteSubscribers","iterator","done","_pubsub","_subscribers","_elements","_isShutdown","unsafeSlidingPublish","it","pub","poller","pollResult","pollersSet","head","tail","buffer","fastForward","len","items","unsafeFromArray"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19472, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19478, "column": 0}, "map": {"version":3,"file":"take.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/take.ts"],"sourcesContent":["import * as Cause from \"../Cause.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport * as Effect from \"../Effect.js\"\nimport * as Exit from \"../Exit.js\"\nimport { constFalse, constTrue, dual, pipe } from \"../Function.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport type * as Take from \"../Take.js\"\n\n/** @internal */\nconst TakeSymbolKey = \"effect/Take\"\n\n/** @internal */\nexport const TakeTypeId: Take.TakeTypeId = Symbol.for(\n  TakeSymbolKey\n) as Take.TakeTypeId\n\nconst takeVariance = {\n  /* c8 ignore next */\n  _A: (_: never) => _,\n  /* c8 ignore next */\n  _E: (_: never) => _\n}\n\n/** @internal */\nexport class TakeImpl<out A, out E = never> implements Take.Take<A, E> {\n  readonly [TakeTypeId] = takeVariance\n  constructor(readonly exit: Exit.Exit<Chunk.Chunk<A>, Option.Option<E>>) {\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\n/** @internal */\nexport const chunk = <A>(chunk: Chunk.Chunk<A>): Take.Take<A> => new TakeImpl(Exit.succeed(chunk))\n\n/** @internal */\nexport const die = (defect: unknown): Take.Take<never> => new TakeImpl(Exit.die(defect))\n\n/** @internal */\nexport const dieMessage = (message: string): Take.Take<never> =>\n  new TakeImpl(Exit.die(new Cause.RuntimeException(message)))\n\n/** @internal */\nexport const done = <A, E>(self: Take.Take<A, E>): Effect.Effect<Chunk.Chunk<A>, Option.Option<E>> =>\n  Effect.suspend(() => self.exit)\n\n/** @internal */\nexport const end: Take.Take<never> = new TakeImpl(Exit.fail(Option.none()))\n\n/** @internal */\nexport const fail = <E>(error: E): Take.Take<never, E> => new TakeImpl(Exit.fail(Option.some(error)))\n\n/** @internal */\nexport const failCause = <E>(cause: Cause.Cause<E>): Take.Take<never, E> =>\n  new TakeImpl(Exit.failCause(pipe(cause, Cause.map(Option.some))))\n\n/** @internal */\nexport const fromEffect = <A, E, R>(effect: Effect.Effect<A, E, R>): Effect.Effect<Take.Take<A, E>, never, R> =>\n  Effect.matchCause(effect, { onFailure: failCause, onSuccess: of })\n\n/** @internal */\nexport const fromExit = <A, E>(exit: Exit.Exit<A, E>): Take.Take<A, E> =>\n  new TakeImpl(pipe(exit, Exit.mapBoth({ onFailure: Option.some, onSuccess: Chunk.of })))\n\n/** @internal */\nexport const fromPull = <A, E, R>(\n  pull: Effect.Effect<Chunk.Chunk<A>, Option.Option<E>, R>\n): Effect.Effect<Take.Take<A, E>, never, R> =>\n  Effect.matchCause(pull, {\n    onFailure: (cause) =>\n      Option.match(Cause.flipCauseOption(cause), {\n        onNone: () => end,\n        onSome: failCause\n      }),\n    onSuccess: chunk\n  })\n\n/** @internal */\nexport const isDone = <A, E>(self: Take.Take<A, E>): boolean =>\n  Exit.match(self.exit, {\n    onFailure: (cause) => Option.isNone(Cause.flipCauseOption(cause)),\n    onSuccess: constFalse\n  })\n\n/** @internal */\nexport const isFailure = <A, E>(self: Take.Take<A, E>): boolean =>\n  Exit.match(self.exit, {\n    onFailure: (cause) => Option.isSome(Cause.flipCauseOption(cause)),\n    onSuccess: constFalse\n  })\n\n/** @internal */\nexport const isSuccess = <A, E>(self: Take.Take<A, E>): boolean =>\n  Exit.match(self.exit, {\n    onFailure: constFalse,\n    onSuccess: constTrue\n  })\n\n/** @internal */\nexport const make = <A, E>(\n  exit: Exit.Exit<Chunk.Chunk<A>, Option.Option<E>>\n): Take.Take<A, E> => new TakeImpl(exit)\n\n/** @internal */\nexport const match = dual<\n  <Z, E, Z2, A, Z3>(\n    options: {\n      readonly onEnd: () => Z\n      readonly onFailure: (cause: Cause.Cause<E>) => Z2\n      readonly onSuccess: (chunk: Chunk.Chunk<A>) => Z3\n    }\n  ) => (self: Take.Take<A, E>) => Z | Z2 | Z3,\n  <A, E, Z, Z2, Z3>(\n    self: Take.Take<A, E>,\n    options: {\n      readonly onEnd: () => Z\n      readonly onFailure: (cause: Cause.Cause<E>) => Z2\n      readonly onSuccess: (chunk: Chunk.Chunk<A>) => Z3\n    }\n  ) => Z | Z2 | Z3\n>(2, <A, E, Z, Z2, Z3>(\n  self: Take.Take<A, E>,\n  { onEnd, onFailure, onSuccess }: {\n    readonly onEnd: () => Z\n    readonly onFailure: (cause: Cause.Cause<E>) => Z2\n    readonly onSuccess: (chunk: Chunk.Chunk<A>) => Z3\n  }\n): Z | Z2 | Z3 =>\n  Exit.match(self.exit, {\n    onFailure: (cause) =>\n      Option.match(Cause.flipCauseOption(cause), {\n        onNone: onEnd,\n        onSome: onFailure\n      }),\n    onSuccess\n  }))\n\n/** @internal */\nexport const matchEffect = dual<\n  <Z, E2, R, E, Z2, R2, A, Z3, E3, R3>(\n    options: {\n      readonly onEnd: Effect.Effect<Z, E2, R>\n      readonly onFailure: (cause: Cause.Cause<E>) => Effect.Effect<Z2, E2, R2>\n      readonly onSuccess: (chunk: Chunk.Chunk<A>) => Effect.Effect<Z3, E3, R3>\n    }\n  ) => (self: Take.Take<A, E>) => Effect.Effect<Z | Z2 | Z3, E2 | E | E3, R | R2 | R3>,\n  <A, E, Z, E2, R, Z2, R2, Z3, E3, R3>(\n    self: Take.Take<A, E>,\n    options: {\n      readonly onEnd: Effect.Effect<Z, E2, R>\n      readonly onFailure: (cause: Cause.Cause<E>) => Effect.Effect<Z2, E2, R2>\n      readonly onSuccess: (chunk: Chunk.Chunk<A>) => Effect.Effect<Z3, E3, R3>\n    }\n  ) => Effect.Effect<Z | Z2 | Z3, E2 | E | E3, R | R2 | R3>\n>(2, <A, E, Z, E2, R, Z2, R2, Z3, E3, R3>(\n  self: Take.Take<A, E>,\n  { onEnd, onFailure, onSuccess }: {\n    readonly onEnd: Effect.Effect<Z, E2, R>\n    readonly onFailure: (cause: Cause.Cause<E>) => Effect.Effect<Z2, E2, R2>\n    readonly onSuccess: (chunk: Chunk.Chunk<A>) => Effect.Effect<Z3, E3, R3>\n  }\n): Effect.Effect<Z | Z2 | Z3, E2 | E | E3, R | R2 | R3> =>\n  Exit.matchEffect(self.exit, {\n    onFailure: (cause) =>\n      Option.match<Cause.Cause<E>, Effect.Effect<Z | Z2, E2 | E, R | R2>>(Cause.flipCauseOption(cause), {\n        onNone: () => onEnd,\n        onSome: onFailure\n      }),\n    onSuccess\n  }))\n\n/** @internal */\nexport const map = dual<\n  <A, B>(f: (a: A) => B) => <E>(self: Take.Take<A, E>) => Take.Take<B, E>,\n  <A, E, B>(self: Take.Take<A, E>, f: (a: A) => B) => Take.Take<B, E>\n>(\n  2,\n  <A, E, B>(self: Take.Take<A, E>, f: (a: A) => B): Take.Take<B, E> =>\n    new TakeImpl(pipe(self.exit, Exit.map(Chunk.map(f))))\n)\n\n/** @internal */\nexport const of = <A>(value: A): Take.Take<A> => new TakeImpl(Exit.succeed(Chunk.of(value)))\n\n/** @internal */\nexport const tap = dual<\n  <A, X, E2, R>(\n    f: (chunk: Chunk.Chunk<A>) => Effect.Effect<X, E2, R>\n  ) => <E>(self: Take.Take<A, E>) => Effect.Effect<void, E2 | E, R>,\n  <A, E, X, E2, R>(\n    self: Take.Take<A, E>,\n    f: (chunk: Chunk.Chunk<A>) => Effect.Effect<X, E2, R>\n  ) => Effect.Effect<void, E2 | E, R>\n>(2, <A, E, X, E2, R>(\n  self: Take.Take<A, E>,\n  f: (chunk: Chunk.Chunk<A>) => Effect.Effect<X, E2, R>\n): Effect.Effect<void, E2 | E, R> => pipe(self.exit, Exit.forEachEffect(f), Effect.asVoid))\n"],"names":["Cause","Chunk","Effect","Exit","constFalse","constTrue","dual","pipe","Option","pipeArguments","TakeSymbolKey","TakeTypeId","Symbol","for","takeVariance","_A","_","_E","TakeImpl","exit","constructor","arguments","chunk","succeed","die","defect","dieMessage","message","RuntimeException","done","self","suspend","end","fail","none","error","some","failCause","cause","map","fromEffect","effect","matchCause","onFailure","onSuccess","of","fromExit","mapBoth","fromPull","pull","match","flipCauseOption","onNone","onSome","isDone","isNone","isFailure","isSome","isSuccess","make","onEnd","matchEffect","f","value","tap","forEachEffect","asVoid"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19583, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19589, "column": 0}, "map": {"version":3,"file":"rcRef.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/rcRef.ts"],"sourcesContent":["import * as Context from \"../Context.js\"\nimport * as Duration from \"../Duration.js\"\nimport type { Effect } from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport type { RuntimeFiber } from \"../Fiber.js\"\nimport { identity } from \"../Function.js\"\nimport type * as RcRef from \"../RcRef.js\"\nimport * as Readable from \"../Readable.js\"\nimport type * as Scope from \"../Scope.js\"\nimport * as coreEffect from \"./core-effect.js\"\nimport * as core from \"./core.js\"\nimport * as circular from \"./effect/circular.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\n\n/** @internal */\nexport const TypeId: RcRef.TypeId = Symbol.for(\"effect/RcRef\") as RcRef.TypeId\n\ntype State<A> = State.Empty | State.Acquired<A> | State.Closed\n\ndeclare namespace State {\n  interface Empty {\n    readonly _tag: \"Empty\"\n  }\n\n  interface Acquired<A> {\n    readonly _tag: \"Acquired\"\n    readonly value: A\n    readonly scope: Scope.CloseableScope\n    fiber: RuntimeFiber<void, never> | undefined\n    refCount: number\n  }\n\n  interface Closed {\n    readonly _tag: \"Closed\"\n  }\n}\n\nconst stateEmpty: State<never> = { _tag: \"Empty\" }\nconst stateClosed: State<never> = { _tag: \"Closed\" }\n\nconst variance: RcRef.RcRef.Variance<any, any> = {\n  _A: identity,\n  _E: identity\n}\n\nclass RcRefImpl<A, E> extends Effectable.Class<A, E, Scope.Scope> implements RcRef.RcRef<A, E> {\n  readonly [TypeId]: RcRef.RcRef.Variance<A, E> = variance\n  readonly [Readable.TypeId]: Readable.TypeId = Readable.TypeId\n\n  state: State<A> = stateEmpty\n  readonly semaphore = circular.unsafeMakeSemaphore(1)\n\n  constructor(\n    readonly acquire: Effect<A, E, Scope.Scope>,\n    readonly context: Context.Context<never>,\n    readonly scope: Scope.Scope,\n    readonly idleTimeToLive: Duration.Duration | undefined\n  ) {\n    super()\n    this.get = get(this)\n  }\n  readonly get: Effect<A, E, Scope.Scope>\n\n  commit() {\n    return this.get\n  }\n}\n\n/** @internal */\nexport const make = <A, E, R>(options: {\n  readonly acquire: Effect<A, E, R>\n  readonly idleTimeToLive?: Duration.DurationInput | undefined\n}) =>\n  core.withFiberRuntime<RcRef.RcRef<A, E>, never, R | Scope.Scope>((fiber) => {\n    const context = fiber.getFiberRef(core.currentContext) as Context.Context<R | Scope.Scope>\n    const scope = Context.get(context, fiberRuntime.scopeTag)\n    const ref = new RcRefImpl<A, E>(\n      options.acquire as Effect<A, E, Scope.Scope>,\n      context,\n      scope,\n      options.idleTimeToLive ? Duration.decode(options.idleTimeToLive) : undefined\n    )\n    return core.as(\n      scope.addFinalizer(() =>\n        ref.semaphore.withPermits(1)(core.suspend(() => {\n          const close = ref.state._tag === \"Acquired\"\n            ? core.scopeClose(ref.state.scope, core.exitVoid)\n            : core.void\n          ref.state = stateClosed\n          return close\n        }))\n      ),\n      ref\n    )\n  })\n\n/** @internal */\nexport const get = <A, E>(\n  self_: RcRef.RcRef<A, E>\n): Effect<A, E, Scope.Scope> => {\n  const self = self_ as RcRefImpl<A, E>\n  return core.uninterruptibleMask((restore) =>\n    core.suspend(() => {\n      switch (self.state._tag) {\n        case \"Closed\": {\n          return core.interrupt\n        }\n        case \"Acquired\": {\n          self.state.refCount++\n          return self.state.fiber\n            ? core.as(core.interruptFiber(self.state.fiber), self.state)\n            : core.succeed(self.state)\n        }\n        case \"Empty\": {\n          return fiberRuntime.scopeMake().pipe(\n            coreEffect.bindTo(\"scope\"),\n            coreEffect.bind(\"value\", ({ scope }) =>\n              restore(core.fiberRefLocally(\n                self.acquire as Effect<A, E>,\n                core.currentContext,\n                Context.add(self.context, fiberRuntime.scopeTag, scope)\n              ))),\n            core.map(({ scope, value }) => {\n              const state: State.Acquired<A> = {\n                _tag: \"Acquired\",\n                value,\n                scope,\n                fiber: undefined,\n                refCount: 1\n              }\n              self.state = state\n              return state\n            })\n          )\n        }\n      }\n    })\n  ).pipe(\n    self.semaphore.withPermits(1),\n    coreEffect.bindTo(\"state\"),\n    coreEffect.bind(\"scope\", () => fiberRuntime.scopeTag),\n    core.tap(({ scope, state }) =>\n      scope.addFinalizer(() =>\n        core.suspend(() => {\n          state.refCount--\n          if (state.refCount > 0) {\n            return core.void\n          }\n          if (self.idleTimeToLive === undefined) {\n            self.state = stateEmpty\n            return core.scopeClose(state.scope, core.exitVoid)\n          }\n          return coreEffect.sleep(self.idleTimeToLive).pipe(\n            core.interruptible,\n            core.zipRight(core.suspend(() => {\n              if (self.state._tag === \"Acquired\" && self.state.refCount === 0) {\n                self.state = stateEmpty\n                return core.scopeClose(state.scope, core.exitVoid)\n              }\n              return core.void\n            })),\n            fiberRuntime.ensuring(core.sync(() => {\n              state.fiber = undefined\n            })),\n            circular.forkIn(self.scope),\n            core.tap((fiber) => {\n              state.fiber = fiber\n            }),\n            self.semaphore.withPermits(1)\n          )\n        })\n      )\n    ),\n    core.map(({ state }) => state.value)\n  )\n}\n"],"names":["Context","Duration","Effectable","identity","Readable","coreEffect","core","circular","fiberRuntime","TypeId","Symbol","for","stateEmpty","_tag","stateClosed","variance","_A","_E","RcRefImpl","Class","acquire","context","scope","idleTimeToLive","state","semaphore","unsafeMakeSemaphore","constructor","get","commit","make","options","withFiberRuntime","fiber","getFiberRef","currentContext","scopeTag","ref","decode","undefined","as","addFinalizer","withPermits","suspend","close","scopeClose","exitVoid","void","self_","self","uninterruptibleMask","restore","interrupt","refCount","interruptFiber","succeed","scopeMake","pipe","bindTo","bind","fiberRefLocally","add","map","value","tap","sleep","interruptible","zipRight","ensuring","sync","forkIn"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 19705, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19711, "column": 0}, "map": {"version":3,"file":"ringBuffer.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/ringBuffer.ts"],"sourcesContent":["import * as Chunk from \"../Chunk.js\"\nimport { constUndefined } from \"../Function.js\"\nimport * as Option from \"../Option.js\"\n\n/** @internal */\nexport class RingBuffer<out A> {\n  private array: Array<A | undefined>\n  private size = 0\n  private current = 0\n\n  constructor(public readonly capacity: number) {\n    this.array = Array.from({ length: capacity }, constUndefined)\n  }\n\n  head(): Option.Option<A> {\n    return Option.fromNullable(this.array[this.current])\n  }\n\n  lastOrNull(): A | undefined {\n    if (this.size === 0) {\n      return undefined\n    }\n\n    const index = this.current === 0 ? this.array.length - 1 : this.current - 1\n\n    return this.array[index] ?? undefined\n  }\n\n  put(value: A): void {\n    this.array[this.current] = value\n    this.increment()\n  }\n\n  dropLast(): void {\n    if (this.size > 0) {\n      this.decrement()\n      this.array[this.current] = undefined\n    }\n  }\n\n  toChunk(): Chunk.Chunk<A> {\n    const begin = this.current - this.size\n    const newArray = begin < 0\n      ? [\n        ...this.array.slice(this.capacity + begin, this.capacity),\n        ...this.array.slice(0, this.current)\n      ]\n      : this.array.slice(begin, this.current)\n\n    return Chunk.fromIterable(newArray) as Chunk.Chunk<A>\n  }\n\n  private increment(): void {\n    if (this.size < this.capacity) {\n      this.size += 1\n    }\n    this.current = (this.current + 1) % this.capacity\n  }\n\n  private decrement(): void {\n    this.size -= 1\n    if (this.current > 0) {\n      this.current -= 1\n    } else {\n      this.current = this.capacity - 1\n    }\n  }\n}\n"],"names":["Chunk","constUndefined","Option","RingBuffer","capacity","array","size","current","constructor","Array","from","length","head","fromNullable","lastOrNull","undefined","index","put","value","increment","dropLast","decrement","toChunk","begin","newArray","slice","fromIterable"],"mappings":";;;AACA,SAASC,cAAc,QAAQ,gBAAgB;AAC/C,OAAO,KAAKC,MAAM,MAAM,cAAc;AAFtC,OAAO,KAAKF,KAAK,MAAM,aAAa;;;;AAK9B,MAAOG,UAAU;IAKOC,QAAA,CAAA;IAJpBC,KAAK,CAAA;IACLC,IAAI,GAAG,CAAC,CAAA;IACRC,OAAO,GAAG,CAAC,CAAA;IAEnBC,YAA4BJ,QAAgB,CAAA;QAAhB,IAAA,CAAAA,QAAQ,GAARA,QAAQ;QAClC,IAAI,CAACC,KAAK,GAAGI,KAAK,CAACC,IAAI,CAAC;YAAEC,MAAM,EAAEP;QAAQ,CAAE,sJAAEH,iBAAc,CAAC;IAC/D;IAEAW,IAAIA,CAAA,EAAA;QACF,OAAOV,MAAM,4IAACW,YAAY,CAAC,IAAI,CAACR,KAAK,CAAC,IAAI,CAACE,OAAO,CAAC,CAAC;IACtD;IAEAO,UAAUA,CAAA,EAAA;QACR,IAAI,IAAI,CAACR,IAAI,KAAK,CAAC,EAAE;YACnB,OAAOS,SAAS;QAClB;QAEA,MAAMC,KAAK,GAAG,IAAI,CAACT,OAAO,KAAK,CAAC,GAAG,IAAI,CAACF,KAAK,CAACM,MAAM,GAAG,CAAC,GAAG,IAAI,CAACJ,OAAO,GAAG,CAAC;QAE3E,OAAO,IAAI,CAACF,KAAK,CAACW,KAAK,CAAC,IAAID,SAAS;IACvC;IAEAE,GAAGA,CAACC,KAAQ,EAAA;QACV,IAAI,CAACb,KAAK,CAAC,IAAI,CAACE,OAAO,CAAC,GAAGW,KAAK;QAChC,IAAI,CAACC,SAAS,EAAE;IAClB;IAEAC,QAAQA,CAAA,EAAA;QACN,IAAI,IAAI,CAACd,IAAI,GAAG,CAAC,EAAE;YACjB,IAAI,CAACe,SAAS,EAAE;YAChB,IAAI,CAAChB,KAAK,CAAC,IAAI,CAACE,OAAO,CAAC,GAAGQ,SAAS;QACtC;IACF;IAEAO,OAAOA,CAAA,EAAA;QACL,MAAMC,KAAK,GAAG,IAAI,CAAChB,OAAO,GAAG,IAAI,CAACD,IAAI;QACtC,MAAMkB,QAAQ,GAAGD,KAAK,GAAG,CAAC,GACtB,CACA;eAAG,IAAI,CAAClB,KAAK,CAACoB,KAAK,CAAC,IAAI,CAACrB,QAAQ,GAAGmB,KAAK,EAAE,IAAI,CAACnB,QAAQ,CAAC,EACzD;eAAG,IAAI,CAACC,KAAK,CAACoB,KAAK,CAAC,CAAC,EAAE,IAAI,CAAClB,OAAO,CAAC;SACrC,GACC,IAAI,CAACF,KAAK,CAACoB,KAAK,CAACF,KAAK,EAAE,IAAI,CAAChB,OAAO,CAAC;QAEzC,OAAOP,KAAK,4IAAC0B,YAAY,CAACF,QAAQ,CAAmB;IACvD;IAEQL,SAASA,CAAA,EAAA;QACf,IAAI,IAAI,CAACb,IAAI,GAAG,IAAI,CAACF,QAAQ,EAAE;YAC7B,IAAI,CAACE,IAAI,IAAI,CAAC;QAChB;QACA,IAAI,CAACC,OAAO,GAAG,CAAC,IAAI,CAACA,OAAO,GAAG,CAAC,IAAI,IAAI,CAACH,QAAQ;IACnD;IAEQiB,SAASA,CAAA,EAAA;QACf,IAAI,CAACf,IAAI,IAAI,CAAC;QACd,IAAI,IAAI,CAACC,OAAO,GAAG,CAAC,EAAE;YACpB,IAAI,CAACA,OAAO,IAAI,CAAC;QACnB,CAAC,MAAM;YACL,IAAI,CAACA,OAAO,GAAG,IAAI,CAACH,QAAQ,GAAG,CAAC;QAClC;IACF","ignoreList":[0]}},
    {"offset": {"line": 19774, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 19780, "column": 0}, "map": {"version":3,"file":"groupBy.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/groupBy.ts"],"sourcesContent":["import * as Cause from \"../Cause.js\"\nimport type * as Channel from \"../Channel.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport * as Deferred from \"../Deferred.js\"\nimport * as Effect from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport * as Exit from \"../Exit.js\"\nimport { dual, pipe } from \"../Function.js\"\nimport type * as GroupBy from \"../GroupBy.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty, type Predicate } from \"../Predicate.js\"\nimport * as Queue from \"../Queue.js\"\nimport * as Ref from \"../Ref.js\"\nimport * as Scope from \"../Scope.js\"\nimport type * as Stream from \"../Stream.js\"\nimport type * as Take from \"../Take.js\"\nimport type { NoInfer } from \"../Types.js\"\nimport * as channel from \"./channel.js\"\nimport * as channelExecutor from \"./channel/channelExecutor.js\"\nimport * as core from \"./core-stream.js\"\nimport * as stream from \"./stream.js\"\nimport * as take from \"./take.js\"\n\n/** @internal */\nconst GroupBySymbolKey = \"effect/GroupBy\"\n\n/** @internal */\nexport const GroupByTypeId: GroupBy.GroupByTypeId = Symbol.for(\n  GroupBySymbolKey\n) as GroupBy.GroupByTypeId\n\nconst groupByVariance = {\n  /* c8 ignore next */\n  _R: (_: never) => _,\n  /* c8 ignore next */\n  _E: (_: never) => _,\n  /* c8 ignore next */\n  _K: (_: never) => _,\n  /* c8 ignore next */\n  _V: (_: never) => _\n}\n\n/** @internal */\nexport const isGroupBy = (u: unknown): u is GroupBy.GroupBy<unknown, unknown, unknown, unknown> =>\n  hasProperty(u, GroupByTypeId)\n\n/** @internal */\nexport const evaluate = dual<\n  <K, V, E, A, E2, R2>(\n    f: (key: K, stream: Stream.Stream<V, E>) => Stream.Stream<A, E2, R2>,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ) => <R>(self: GroupBy.GroupBy<K, V, E, R>) => Stream.Stream<A, E | E2, R2 | R>,\n  <K, V, E, R, A, E2, R2>(\n    self: GroupBy.GroupBy<K, V, E, R>,\n    f: (key: K, stream: Stream.Stream<V, E>) => Stream.Stream<A, E2, R2>,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ) => Stream.Stream<A, E | E2, R2 | R>\n>(\n  (args) => isGroupBy(args[0]),\n  <K, V, E, R, A, E2, R2>(\n    self: GroupBy.GroupBy<K, V, E, R>,\n    f: (key: K, stream: Stream.Stream<V, E>) => Stream.Stream<A, E2, R2>,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ): Stream.Stream<A, E | E2, R2 | R> =>\n    stream.flatMap(\n      self.grouped,\n      ([key, queue]) => f(key, stream.flattenTake(stream.fromQueue(queue, { shutdown: true }))),\n      { concurrency: \"unbounded\", bufferSize: options?.bufferSize ?? 16 }\n    )\n)\n\n/** @internal */\nexport const filter = dual<\n  <K>(predicate: Predicate<NoInfer<K>>) => <V, E, R>(self: GroupBy.GroupBy<K, V, E, R>) => GroupBy.GroupBy<K, V, E, R>,\n  <K, V, E, R>(self: GroupBy.GroupBy<K, V, E, R>, predicate: Predicate<K>) => GroupBy.GroupBy<K, V, E, R>\n>(2, <K, V, E, R>(self: GroupBy.GroupBy<K, V, E, R>, predicate: Predicate<K>): GroupBy.GroupBy<K, V, E, R> =>\n  make(\n    pipe(\n      self.grouped,\n      stream.filterEffect((tuple) => {\n        if (predicate(tuple[0])) {\n          return pipe(Effect.succeed(tuple), Effect.as(true))\n        }\n        return pipe(Queue.shutdown(tuple[1]), Effect.as(false))\n      })\n    )\n  ))\n\n/** @internal */\nexport const first = dual<\n  (n: number) => <K, V, E, R>(self: GroupBy.GroupBy<K, V, E, R>) => GroupBy.GroupBy<K, V, E, R>,\n  <K, V, E, R>(self: GroupBy.GroupBy<K, V, E, R>, n: number) => GroupBy.GroupBy<K, V, E, R>\n>(2, <K, V, E, R>(self: GroupBy.GroupBy<K, V, E, R>, n: number): GroupBy.GroupBy<K, V, E, R> =>\n  make(\n    pipe(\n      stream.zipWithIndex(self.grouped),\n      stream.filterEffect((tuple) => {\n        const index = tuple[1]\n        const queue = tuple[0][1]\n        if (index < n) {\n          return pipe(Effect.succeed(tuple), Effect.as(true))\n        }\n        return pipe(Queue.shutdown(queue), Effect.as(false))\n      }),\n      stream.map((tuple) => tuple[0])\n    )\n  ))\n\n/** @internal */\nexport const make = <K, V, E, R>(\n  grouped: Stream.Stream<readonly [K, Queue.Dequeue<Take.Take<V, E>>], E, R>\n): GroupBy.GroupBy<K, V, E, R> => ({\n  [GroupByTypeId]: groupByVariance,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  grouped\n})\n\n// Circular with Stream\n\n/** @internal */\nexport const groupBy = dual<\n  <A, K, V, E2, R2>(\n    f: (a: A) => Effect.Effect<readonly [K, V], E2, R2>,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ) => <E, R>(self: Stream.Stream<A, E, R>) => GroupBy.GroupBy<K, V, E2 | E, R2 | R>,\n  <A, E, R, K, V, E2, R2>(\n    self: Stream.Stream<A, E, R>,\n    f: (a: A) => Effect.Effect<readonly [K, V], E2, R2>,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ) => GroupBy.GroupBy<K, V, E2 | E, R2 | R>\n>(\n  (args) => stream.isStream(args[0]),\n  <A, E, R, K, V, E2, R2>(\n    self: Stream.Stream<A, E, R>,\n    f: (a: A) => Effect.Effect<readonly [K, V], E2, R2>,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ): GroupBy.GroupBy<K, V, E | E2, R | R2> =>\n    make(\n      stream.unwrapScoped(\n        Effect.gen(function*($) {\n          const decider = yield* $(\n            Deferred.make<(key: K, value: V) => Effect.Effect<Predicate<number>>>()\n          )\n          const output = yield* $(Effect.acquireRelease(\n            Queue.bounded<Exit.Exit<readonly [K, Queue.Dequeue<Take.Take<V, E | E2>>], Option.Option<E | E2>>>(\n              options?.bufferSize ?? 16\n            ),\n            (queue) => Queue.shutdown(queue)\n          ))\n          const ref = yield* $(Ref.make<Map<K, number>>(new Map()))\n          const add = yield* $(\n            stream.mapEffectSequential(self, f),\n            stream.distributedWithDynamicCallback(\n              options?.bufferSize ?? 16,\n              ([key, value]) => Effect.flatMap(Deferred.await(decider), (f) => f(key, value)),\n              (exit) => Queue.offer(output, exit)\n            )\n          )\n          yield* $(\n            Deferred.succeed(decider, (key, _) =>\n              pipe(\n                Ref.get(ref),\n                Effect.map((map) => Option.fromNullable(map.get(key))),\n                Effect.flatMap(Option.match({\n                  onNone: () =>\n                    Effect.flatMap(add, ([index, queue]) =>\n                      Effect.zipRight(\n                        Ref.update(ref, (map) => map.set(key, index)),\n                        pipe(\n                          Queue.offer(\n                            output,\n                            Exit.succeed(\n                              [\n                                key,\n                                mapDequeue(queue, (exit) =>\n                                  new take.TakeImpl(pipe(\n                                    exit,\n                                    Exit.map((tuple) => Chunk.of(tuple[1]))\n                                  )))\n                              ] as const\n                            )\n                          ),\n                          Effect.as<Predicate<number>>((n: number) => n === index)\n                        )\n                      )),\n                  onSome: (index) => Effect.succeed<Predicate<number>>((n: number) => n === index)\n                }))\n              ))\n          )\n          return stream.flattenExitOption(stream.fromQueue(output, { shutdown: true }))\n        })\n      )\n    )\n)\n\n/** @internal */\nexport const mapEffectOptions = dual<\n  {\n    <A, A2, E2, R2>(\n      f: (a: A) => Effect.Effect<A2, E2, R2>,\n      options?: {\n        readonly concurrency?: number | \"unbounded\" | undefined\n        readonly unordered?: boolean | undefined\n      }\n    ): <E, R>(self: Stream.Stream<A, E, R>) => Stream.Stream<A2, E2 | E, R2 | R>\n    <A, A2, E2, R2, K>(\n      f: (a: A) => Effect.Effect<A2, E2, R2>,\n      options: {\n        readonly key: (a: A) => K\n        readonly bufferSize?: number | undefined\n      }\n    ): <E, R>(self: Stream.Stream<A, E, R>) => Stream.Stream<A2, E2 | E, R2 | R>\n  },\n  {\n    <A, E, R, A2, E2, R2>(\n      self: Stream.Stream<A, E, R>,\n      f: (a: A) => Effect.Effect<A2, E2, R2>,\n      options?: {\n        readonly concurrency?: number | \"unbounded\" | undefined\n        readonly unordered?: boolean | undefined\n      }\n    ): Stream.Stream<A2, E2 | E, R2 | R>\n    <A, E, R, A2, E2, R2, K>(\n      self: Stream.Stream<A, E, R>,\n      f: (a: A) => Effect.Effect<A2, E2, R2>,\n      options: {\n        readonly key: (a: A) => K\n        readonly bufferSize?: number | undefined\n      }\n    ): Stream.Stream<A2, E2 | E, R2 | R>\n  }\n>(\n  (args) => typeof args[0] !== \"function\",\n  (<A, E, R, A2, E2, R2, K>(\n    self: Stream.Stream<A, E, R>,\n    f: (a: A) => Effect.Effect<A2, E2, R2>,\n    options?: {\n      readonly key?: ((a: A) => K) | undefined\n      readonly concurrency?: number | \"unbounded\" | undefined\n      readonly unordered?: boolean | undefined\n      readonly bufferSize?: number | undefined\n    }\n  ): Stream.Stream<A2, E2 | E, R2 | R> => {\n    if (options?.key) {\n      return evaluate(\n        groupByKey(self, options.key, { bufferSize: options.bufferSize }),\n        (_, s) => stream.mapEffectSequential(s, f)\n      )\n    }\n\n    return stream.matchConcurrency(\n      options?.concurrency,\n      () => stream.mapEffectSequential(self, f),\n      (n) =>\n        options?.unordered ?\n          stream.flatMap(self, (a) => stream.fromEffect(f(a)), { concurrency: n }) :\n          stream.mapEffectPar(self, n, f)\n    )\n  }) as any\n)\n\n/** @internal */\nexport const bindEffect = dual<\n  <N extends string, A, B, E2, R2>(\n    tag: Exclude<N, keyof A>,\n    f: (_: NoInfer<A>) => Effect.Effect<B, E2, R2>,\n    options?: {\n      readonly concurrency?: number | \"unbounded\" | undefined\n      readonly bufferSize?: number | undefined\n    }\n  ) => <E, R>(self: Stream.Stream<A, E, R>) => Stream.Stream<\n    { [K in keyof A | N]: K extends keyof A ? A[K] : B },\n    E | E2,\n    R | R2\n  >,\n  <A, E, R, N extends string, B, E2, R2>(\n    self: Stream.Stream<A, E, R>,\n    tag: Exclude<N, keyof A>,\n    f: (_: NoInfer<A>) => Effect.Effect<B, E2, R2>,\n    options?: {\n      readonly concurrency?: number | \"unbounded\" | undefined\n      readonly unordered?: boolean | undefined\n    }\n  ) => Stream.Stream<\n    { [K in keyof A | N]: K extends keyof A ? A[K] : B },\n    E | E2,\n    R | R2\n  >\n>((args) => typeof args[0] !== \"string\", <A, E, R, N extends string, B, E2, R2>(\n  self: Stream.Stream<A, E, R>,\n  tag: Exclude<N, keyof A>,\n  f: (_: A) => Effect.Effect<B, E2, R2>,\n  options?: {\n    readonly concurrency?: number | \"unbounded\" | undefined\n    readonly unordered?: boolean | undefined\n  }\n) =>\n  mapEffectOptions(self, (k) =>\n    Effect.map(\n      f(k),\n      (a) => ({ ...k, [tag]: a } as { [K in keyof A | N]: K extends keyof A ? A[K] : B })\n    ), options))\n\nconst mapDequeue = <A, B>(dequeue: Queue.Dequeue<A>, f: (a: A) => B): Queue.Dequeue<B> => new MapDequeue(dequeue, f)\n\nclass MapDequeue<in out A, out B> extends Effectable.Class<B> implements Queue.Dequeue<B> {\n  readonly [Queue.DequeueTypeId] = {\n    _Out: (_: never) => _\n  }\n\n  constructor(\n    readonly dequeue: Queue.Dequeue<A>,\n    readonly f: (a: A) => B\n  ) {\n    super()\n  }\n\n  capacity(): number {\n    return Queue.capacity(this.dequeue)\n  }\n\n  get size(): Effect.Effect<number> {\n    return Queue.size(this.dequeue)\n  }\n\n  unsafeSize(): Option.Option<number> {\n    return this.dequeue.unsafeSize()\n  }\n\n  get awaitShutdown(): Effect.Effect<void> {\n    return Queue.awaitShutdown(this.dequeue)\n  }\n\n  isActive(): boolean {\n    return this.dequeue.isActive()\n  }\n\n  get isShutdown(): Effect.Effect<boolean> {\n    return Queue.isShutdown(this.dequeue)\n  }\n\n  get shutdown(): Effect.Effect<void> {\n    return Queue.shutdown(this.dequeue)\n  }\n\n  get isFull(): Effect.Effect<boolean> {\n    return Queue.isFull(this.dequeue)\n  }\n\n  get isEmpty(): Effect.Effect<boolean> {\n    return Queue.isEmpty(this.dequeue)\n  }\n\n  get take(): Effect.Effect<B> {\n    return pipe(Queue.take(this.dequeue), Effect.map((a) => this.f(a)))\n  }\n\n  get takeAll(): Effect.Effect<Chunk.Chunk<B>> {\n    return pipe(Queue.takeAll(this.dequeue), Effect.map(Chunk.map((a) => this.f(a))))\n  }\n\n  takeUpTo(max: number): Effect.Effect<Chunk.Chunk<B>> {\n    return pipe(Queue.takeUpTo(this.dequeue, max), Effect.map(Chunk.map((a) => this.f(a))))\n  }\n\n  takeBetween(min: number, max: number): Effect.Effect<Chunk.Chunk<B>> {\n    return pipe(Queue.takeBetween(this.dequeue, min, max), Effect.map(Chunk.map((a) => this.f(a))))\n  }\n\n  takeN(n: number): Effect.Effect<Chunk.Chunk<B>> {\n    return pipe(Queue.takeN(this.dequeue, n), Effect.map(Chunk.map((a) => this.f(a))))\n  }\n\n  poll(): Effect.Effect<Option.Option<B>> {\n    return pipe(Queue.poll(this.dequeue), Effect.map(Option.map((a) => this.f(a))))\n  }\n\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n\n  commit() {\n    return this.take\n  }\n}\n\n/** @internal */\nexport const groupByKey = dual<\n  <A, K>(\n    f: (a: A) => K,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ) => <E, R>(self: Stream.Stream<A, E, R>) => GroupBy.GroupBy<K, A, E, R>,\n  <A, E, R, K>(\n    self: Stream.Stream<A, E, R>,\n    f: (a: A) => K,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ) => GroupBy.GroupBy<K, A, E, R>\n>(\n  (args) => typeof args[0] !== \"function\",\n  <A, E, R, K>(\n    self: Stream.Stream<A, E, R>,\n    f: (a: A) => K,\n    options?: {\n      readonly bufferSize?: number | undefined\n    }\n  ): GroupBy.GroupBy<K, A, E, R> => {\n    const loop = (\n      map: Map<K, Queue.Queue<Take.Take<A, E>>>,\n      outerQueue: Queue.Queue<Take.Take<readonly [K, Queue.Queue<Take.Take<A, E>>], E>>\n    ): Channel.Channel<never, Chunk.Chunk<A>, E, E, unknown, unknown, R> =>\n      core.readWithCause({\n        onInput: (input: Chunk.Chunk<A>) =>\n          core.flatMap(\n            core.fromEffect(\n              Effect.forEach(groupByIterable(input, f), ([key, values]) => {\n                const innerQueue = map.get(key)\n                if (innerQueue === undefined) {\n                  return pipe(\n                    Queue.bounded<Take.Take<A, E>>(options?.bufferSize ?? 16),\n                    Effect.flatMap((innerQueue) =>\n                      pipe(\n                        Effect.sync(() => {\n                          map.set(key, innerQueue)\n                        }),\n                        Effect.zipRight(\n                          Queue.offer(outerQueue, take.of([key, innerQueue] as const))\n                        ),\n                        Effect.zipRight(\n                          pipe(\n                            Queue.offer(innerQueue, take.chunk(values)),\n                            Effect.catchSomeCause((cause) =>\n                              Cause.isInterruptedOnly(cause) ?\n                                Option.some(Effect.void) :\n                                Option.none()\n                            )\n                          )\n                        )\n                      )\n                    )\n                  )\n                }\n                return Effect.catchSomeCause(\n                  Queue.offer(innerQueue, take.chunk(values)),\n                  (cause) =>\n                    Cause.isInterruptedOnly(cause) ?\n                      Option.some(Effect.void) :\n                      Option.none()\n                )\n              }, { discard: true })\n            ),\n            () => loop(map, outerQueue)\n          ),\n        onFailure: (cause) => core.fromEffect(Queue.offer(outerQueue, take.failCause(cause))),\n        onDone: () =>\n          pipe(\n            core.fromEffect(\n              pipe(\n                Effect.forEach(map.entries(), ([_, innerQueue]) =>\n                  pipe(\n                    Queue.offer(innerQueue, take.end),\n                    Effect.catchSomeCause((cause) =>\n                      Cause.isInterruptedOnly(cause) ?\n                        Option.some(Effect.void) :\n                        Option.none()\n                    )\n                  ), { discard: true }),\n                Effect.zipRight(Queue.offer(outerQueue, take.end))\n              )\n            )\n          )\n      })\n    return make(stream.unwrapScopedWith((scope) =>\n      Effect.gen(function*() {\n        const map = new Map<K, Queue.Queue<Take.Take<A, E>>>()\n        const queue = yield* Queue.unbounded<Take.Take<readonly [K, Queue.Queue<Take.Take<A, E>>], E>>()\n        yield* Scope.addFinalizer(scope, Queue.shutdown(queue))\n        return yield* stream.toChannel(self).pipe(\n          core.pipeTo(loop(map, queue)),\n          channel.drain,\n          channelExecutor.runIn(scope),\n          Effect.forkIn(scope),\n          Effect.as(stream.flattenTake(stream.fromQueue(queue, { shutdown: true })))\n        )\n      })\n    ))\n  }\n)\n\n/**\n * A variant of `groupBy` that retains the insertion order of keys.\n *\n * @internal\n */\nconst groupByIterable = dual<\n  <V, K>(f: (value: V) => K) => (iterable: Iterable<V>) => Chunk.Chunk<[K, Chunk.Chunk<V>]>,\n  <V, K>(iterable: Iterable<V>, f: (value: V) => K) => Chunk.Chunk<[K, Chunk.Chunk<V>]>\n>(2, <V, K>(iterable: Iterable<V>, f: (value: V) => K): Chunk.Chunk<[K, Chunk.Chunk<V>]> => {\n  const builder: Array<[K, Array<V>]> = []\n  const iterator = iterable[Symbol.iterator]()\n  const map = new Map<K, Array<V>>()\n  let next: IteratorResult<V, any>\n  while ((next = iterator.next()) && !next.done) {\n    const value = next.value\n    const key = f(value)\n    if (map.has(key)) {\n      const innerBuilder = map.get(key)!\n      innerBuilder.push(value)\n    } else {\n      const innerBuilder: Array<V> = [value]\n      builder.push([key, innerBuilder])\n      map.set(key, innerBuilder)\n    }\n  }\n  return Chunk.unsafeFromArray(\n    builder.map((tuple) => [tuple[0], Chunk.unsafeFromArray(tuple[1])])\n  )\n})\n"],"names":["Cause","Chunk","Deferred","Effect","Effectable","Exit","dual","pipe","Option","pipeArguments","hasProperty","Queue","Ref","Scope","channel","channelExecutor","core","stream","take","GroupBySymbolKey","GroupByTypeId","Symbol","for","groupByVariance","_R","_","_E","_K","_V","isGroupBy","u","evaluate","args","self","f","options","flatMap","grouped","key","queue","flattenTake","fromQueue","shutdown","concurrency","bufferSize","filter","predicate","make","filterEffect","tuple","succeed","as","first","n","zipWithIndex","index","map","arguments","groupBy","isStream","unwrapScoped","gen","$","decider","output","acquireRelease","bounded","ref","Map","add","mapEffectSequential","distributedWithDynamicCallback","value","await","exit","offer","get","fromNullable","match","onNone","zipRight","update","set","mapDequeue","TakeImpl","of","onSome","flattenExitOption","mapEffectOptions","groupByKey","s","matchConcurrency","unordered","a","fromEffect","mapEffectPar","bindEffect","tag","k","dequeue","MapDequeue","Class","DequeueTypeId","_Out","constructor","capacity","size","unsafeSize","awaitShutdown","isActive","isShutdown","isFull","isEmpty","takeAll","takeUpTo","max","takeBetween","min","takeN","poll","commit","loop","outerQueue","readWithCause","onInput","input","forEach","groupByIterable","values","innerQueue","undefined","sync","chunk","catchSomeCause","cause","isInterruptedOnly","some","void","none","discard","onFailure","failCause","onDone","entries","end","unwrapScopedWith","scope","unbounded","addFinalizer","toChannel","pipeTo","drain","runIn","forkIn","iterable","builder","iterator","next","done","has","innerBuilder","push","unsafeFromArray"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20019, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 20025, "column": 0}, "map": {"version":3,"file":"logger-circular.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/logger-circular.ts"],"sourcesContent":["import * as Cause from \"../Cause.js\"\nimport { dual } from \"../Function.js\"\nimport * as HashMap from \"../HashMap.js\"\nimport * as List from \"../List.js\"\nimport type * as Logger from \"../Logger.js\"\nimport * as core from \"./core.js\"\nimport * as _fiberId from \"./fiberId.js\"\nimport * as fiberRefs from \"./fiberRefs.js\"\n\n/** @internal */\nexport const test = dual<\n  <Message>(input: Message) => <Output>(self: Logger.Logger<Message, Output>) => Output,\n  <Message, Output>(self: Logger.Logger<Message, Output>, input: Message) => Output\n>(2, (self, input) =>\n  self.log({\n    fiberId: _fiberId.none,\n    logLevel: core.logLevelInfo,\n    message: input,\n    cause: Cause.empty,\n    context: fiberRefs.empty(),\n    spans: List.empty(),\n    annotations: HashMap.empty(),\n    date: new Date()\n  }))\n"],"names":["Cause","dual","HashMap","List","core","_fiberId","fiberRefs","test","self","input","log","fiberId","none","logLevel","logLevelInfo","message","cause","empty","context","spans","annotations","date","Date"],"mappings":";;;AACA,SAASC,IAAI,QAAQ,gBAAgB;AAKrC,OAAO,KAAKI,QAAQ,MAAM,cAAc;AADxC,OAAO,KAAKD,IAAI,MAAM,WAAW;AALjC,OAAO,KAAKJ,KAAK,MAAM,aAAa;AAOpC,OAAO,KAAKM,SAAS,MAAM,gBAAgB;AAJ3C,OAAO,KAAKH,IAAI,MAAM,YAAY;AADlC,OAAO,KAAKD,OAAO,MAAM,eAAe;;;;;;;;AAQjC,MAAMK,IAAI,GAAA,WAAA,2JAAGN,OAAAA,AAAI,EAGtB,CAAC,EAAE,CAACO,IAAI,EAAEC,KAAK,GACfD,IAAI,CAACE,GAAG,CAAC;QACPC,OAAO,EAAEN,QAAQ,uJAACO,IAAI;QACtBC,QAAQ,EAAET,IAAI,wJAACU,YAAY;QAC3BC,OAAO,EAAEN,KAAK;QACdO,KAAK,EAAEhB,KAAK,4IAACiB,KAAK;QAClBC,OAAO,EAAEZ,SAAS,wJAACW,KAAK,EAAE;QAC1BE,KAAK,EAAEhB,IAAI,4IAACc,KAAK,EAAE;QACnBG,WAAW,EAAElB,OAAO,4IAACe,KAAK,EAAE;QAC5BI,IAAI,EAAE,IAAIC,IAAI;KACf,CAAC,CAAC","ignoreList":[0]}},
    {"offset": {"line": 20052, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 20058, "column": 0}, "map": {"version":3,"file":"managedRuntime.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/managedRuntime.ts"],"sourcesContent":["import type * as Effect from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport type { Exit } from \"../Exit.js\"\nimport type * as Fiber from \"../Fiber.js\"\nimport type * as Layer from \"../Layer.js\"\nimport type * as M from \"../ManagedRuntime.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type * as Runtime from \"../Runtime.js\"\nimport * as Scope from \"../Scope.js\"\nimport type { Mutable } from \"../Types.js\"\nimport * as core from \"./core.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\nimport * as internalLayer from \"./layer.js\"\nimport * as circular from \"./managedRuntime/circular.js\"\nimport * as internalRuntime from \"./runtime.js\"\n\ninterface ManagedRuntimeImpl<R, E> extends M.ManagedRuntime<R, E> {\n  readonly scope: Scope.CloseableScope\n  cachedRuntime: Runtime.Runtime<R> | undefined\n}\n\n/** @internal */\nexport const isManagedRuntime = (u: unknown): u is M.ManagedRuntime<unknown, unknown> => hasProperty(u, circular.TypeId)\n\nfunction provide<R, ER, A, E>(\n  managed: ManagedRuntimeImpl<R, ER>,\n  effect: Effect.Effect<A, E, R>\n): Effect.Effect<A, E | ER> {\n  return core.flatMap(\n    managed.runtimeEffect,\n    (rt) =>\n      core.withFiberRuntime((fiber) => {\n        fiber.setFiberRefs(rt.fiberRefs)\n        fiber.currentRuntimeFlags = rt.runtimeFlags\n        return core.provideContext(effect, rt.context)\n      })\n  )\n}\n\nconst ManagedRuntimeProto = {\n  ...Effectable.CommitPrototype,\n  [circular.TypeId]: circular.TypeId,\n  pipe() {\n    return pipeArguments(this, arguments)\n  },\n  commit(this: ManagedRuntimeImpl<unknown, unknown>) {\n    return this.runtimeEffect\n  }\n}\n\n/** @internal */\nexport const make = <R, ER>(\n  layer: Layer.Layer<R, ER, never>,\n  memoMap?: Layer.MemoMap\n): M.ManagedRuntime<R, ER> => {\n  memoMap = memoMap ?? internalLayer.unsafeMakeMemoMap()\n  const scope = internalRuntime.unsafeRunSyncEffect(fiberRuntime.scopeMake())\n  let buildFiber: Fiber.RuntimeFiber<Runtime.Runtime<R>, ER> | undefined\n  const runtimeEffect = core.withFiberRuntime<Runtime.Runtime<R>, ER>((fiber) => {\n    if (!buildFiber) {\n      buildFiber = internalRuntime.unsafeForkEffect(\n        core.tap(\n          Scope.extend(\n            internalLayer.toRuntimeWithMemoMap(layer, memoMap),\n            scope\n          ),\n          (rt) => {\n            self.cachedRuntime = rt\n          }\n        ),\n        { scope, scheduler: fiber.currentScheduler }\n      )\n    }\n    return core.flatten(buildFiber.await)\n  })\n  const self: ManagedRuntimeImpl<R, ER> = Object.assign(Object.create(ManagedRuntimeProto), {\n    memoMap,\n    scope,\n    runtimeEffect,\n    cachedRuntime: undefined,\n    runtime() {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeRunPromiseEffect(self.runtimeEffect) :\n        Promise.resolve(self.cachedRuntime)\n    },\n    dispose(): Promise<void> {\n      return internalRuntime.unsafeRunPromiseEffect(self.disposeEffect)\n    },\n    disposeEffect: core.suspend(() => {\n      ;(self as Mutable<ManagedRuntimeImpl<R, ER>>).runtimeEffect = core.die(\"ManagedRuntime disposed\")\n      self.cachedRuntime = undefined\n      return Scope.close(self.scope, core.exitVoid)\n    }),\n    runFork<A, E>(effect: Effect.Effect<A, E, R>, options?: Runtime.RunForkOptions): Fiber.RuntimeFiber<A, E | ER> {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeForkEffect(provide(self, effect), options) :\n        internalRuntime.unsafeFork(self.cachedRuntime)(effect, options)\n    },\n    runSyncExit<A, E>(effect: Effect.Effect<A, E, R>): Exit<A, E | ER> {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeRunSyncExitEffect(provide(self, effect)) :\n        internalRuntime.unsafeRunSyncExit(self.cachedRuntime)(effect)\n    },\n    runSync<A, E>(effect: Effect.Effect<A, E, R>): A {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeRunSyncEffect(provide(self, effect)) :\n        internalRuntime.unsafeRunSync(self.cachedRuntime)(effect)\n    },\n    runPromiseExit<A, E>(effect: Effect.Effect<A, E, R>, options?: {\n      readonly signal?: AbortSignal | undefined\n    }): Promise<Exit<A, E | ER>> {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeRunPromiseExitEffect(provide(self, effect), options) :\n        internalRuntime.unsafeRunPromiseExit(self.cachedRuntime)(effect, options)\n    },\n    runCallback<A, E>(\n      effect: Effect.Effect<A, E, R>,\n      options?: Runtime.RunCallbackOptions<A, E | ER> | undefined\n    ): Runtime.Cancel<A, E | ER> {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeRunCallback(internalRuntime.defaultRuntime)(provide(self, effect), options) :\n        internalRuntime.unsafeRunCallback(self.cachedRuntime)(effect, options)\n    },\n    runPromise<A, E>(effect: Effect.Effect<A, E, R>, options?: {\n      readonly signal?: AbortSignal | undefined\n    }): Promise<A> {\n      return self.cachedRuntime === undefined ?\n        internalRuntime.unsafeRunPromiseEffect(provide(self, effect), options) :\n        internalRuntime.unsafeRunPromise(self.cachedRuntime)(effect, options)\n    }\n  })\n  return self\n}\n"],"names":["Effectable","pipeArguments","hasProperty","Scope","core","fiberRuntime","internalLayer","circular","internalRuntime","isManagedRuntime","u","TypeId","provide","managed","effect","flatMap","runtimeEffect","rt","withFiberRuntime","fiber","setFiberRefs","fiberRefs","currentRuntimeFlags","runtimeFlags","provideContext","context","ManagedRuntimeProto","CommitPrototype","pipe","arguments","commit","make","layer","memoMap","unsafeMakeMemoMap","scope","unsafeRunSyncEffect","scopeMake","buildFiber","unsafeForkEffect","tap","extend","toRuntimeWithMemoMap","self","cachedRuntime","scheduler","currentScheduler","flatten","await","Object","assign","create","undefined","runtime","unsafeRunPromiseEffect","Promise","resolve","dispose","disposeEffect","suspend","die","close","exitVoid","runFork","options","unsafeFork","runSyncExit","unsafeRunSyncExitEffect","unsafeRunSyncExit","runSync","unsafeRunSync","runPromiseExit","unsafeRunPromiseExitEffect","unsafeRunPromiseExit","runCallback","unsafeRunCallback","defaultRuntime","runPromise","unsafeRunPromise"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20151, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 20157, "column": 0}, "map": {"version":3,"file":"mailbox.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/mailbox.ts"],"sourcesContent":["import type { Scope } from \"effect/Scope\"\nimport * as Arr from \"../Array.js\"\nimport type { Cause } from \"../Cause.js\"\nimport { NoSuchElementException } from \"../Cause.js\"\nimport type { Channel } from \"../Channel.js\"\nimport * as Chunk from \"../Chunk.js\"\nimport type { Effect } from \"../Effect.js\"\nimport * as Effectable from \"../Effectable.js\"\nimport type { Exit } from \"../Exit.js\"\nimport { dual } from \"../Function.js\"\nimport * as Inspectable from \"../Inspectable.js\"\nimport * as Iterable from \"../Iterable.js\"\nimport type * as Api from \"../Mailbox.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport { hasProperty } from \"../Predicate.js\"\nimport type { Scheduler } from \"../Scheduler.js\"\nimport type { Stream } from \"../Stream.js\"\nimport * as channel from \"./channel.js\"\nimport * as channelExecutor from \"./channel/channelExecutor.js\"\nimport * as coreChannel from \"./core-stream.js\"\nimport * as core from \"./core.js\"\nimport * as circular from \"./effect/circular.js\"\nimport * as fiberRuntime from \"./fiberRuntime.js\"\nimport * as stream from \"./stream.js\"\n\n/** @internal */\nexport const TypeId: Api.TypeId = Symbol.for(\"effect/Mailbox\") as Api.TypeId\n\n/** @internal */\nexport const ReadonlyTypeId: Api.ReadonlyTypeId = Symbol.for(\"effect/Mailbox/ReadonlyMailbox\") as Api.ReadonlyTypeId\n\n/** @internal */\nexport const isMailbox = (u: unknown): u is Api.Mailbox<unknown, unknown> => hasProperty(u, TypeId)\n\n/** @internal */\nexport const isReadonlyMailbox = (u: unknown): u is Api.ReadonlyMailbox<unknown, unknown> =>\n  hasProperty(u, ReadonlyTypeId)\n\ntype MailboxState<A, E> = {\n  readonly _tag: \"Open\"\n  readonly takers: Set<(_: Effect<void, E>) => void>\n  readonly offers: Set<OfferEntry<A>>\n  readonly awaiters: Set<(_: Effect<void, E>) => void>\n} | {\n  readonly _tag: \"Closing\"\n  readonly takers: Set<(_: Effect<void, E>) => void>\n  readonly offers: Set<OfferEntry<A>>\n  readonly awaiters: Set<(_: Effect<void, E>) => void>\n  readonly exit: Exit<void, E>\n} | {\n  readonly _tag: \"Done\"\n  readonly exit: Exit<void, E>\n}\n\ntype OfferEntry<A> = {\n  readonly _tag: \"Array\"\n  readonly remaining: Array<A>\n  offset: number\n  readonly resume: (_: Effect<Chunk.Chunk<A>>) => void\n} | {\n  readonly _tag: \"Single\"\n  readonly message: A\n  readonly resume: (_: Effect<boolean>) => void\n}\n\nconst empty = Chunk.empty()\nconst exitEmpty = core.exitSucceed(empty)\nconst exitFalse = core.exitSucceed(false)\nconst exitTrue = core.exitSucceed(true)\nconst constDone = [empty, true] as const\n\nclass MailboxImpl<A, E> extends Effectable.Class<readonly [messages: Chunk.Chunk<A>, done: boolean], E>\n  implements Api.Mailbox<A, E>\n{\n  readonly [TypeId]: Api.TypeId = TypeId\n  readonly [ReadonlyTypeId]: Api.ReadonlyTypeId = ReadonlyTypeId\n  private state: MailboxState<A, E> = {\n    _tag: \"Open\",\n    takers: new Set(),\n    offers: new Set(),\n    awaiters: new Set()\n  }\n  private messages: Array<A> = []\n  private messagesChunk = Chunk.empty<A>()\n  constructor(\n    readonly scheduler: Scheduler,\n    private capacity: number,\n    readonly strategy: \"suspend\" | \"dropping\" | \"sliding\"\n  ) {\n    super()\n  }\n\n  offer(message: A): Effect<boolean> {\n    return core.suspend(() => {\n      if (this.state._tag !== \"Open\") {\n        return exitFalse\n      } else if (this.messages.length + this.messagesChunk.length >= this.capacity) {\n        switch (this.strategy) {\n          case \"dropping\":\n            return exitFalse\n          case \"suspend\":\n            if (this.capacity <= 0 && this.state.takers.size > 0) {\n              this.messages.push(message)\n              this.releaseTaker()\n              return exitTrue\n            }\n            return this.offerRemainingSingle(message)\n          case \"sliding\":\n            this.unsafeTake()\n            this.messages.push(message)\n            return exitTrue\n        }\n      }\n      this.messages.push(message)\n      this.scheduleReleaseTaker()\n      return exitTrue\n    })\n  }\n  unsafeOffer(message: A): boolean {\n    if (this.state._tag !== \"Open\") {\n      return false\n    } else if (this.messages.length + this.messagesChunk.length >= this.capacity) {\n      if (this.strategy === \"sliding\") {\n        this.unsafeTake()\n        this.messages.push(message)\n        return true\n      } else if (this.capacity <= 0 && this.state.takers.size > 0) {\n        this.messages.push(message)\n        this.releaseTaker()\n        return true\n      }\n      return false\n    }\n    this.messages.push(message)\n    this.scheduleReleaseTaker()\n    return true\n  }\n  offerAll(messages: Iterable<A>): Effect<Chunk.Chunk<A>> {\n    return core.suspend(() => {\n      if (this.state._tag !== \"Open\") {\n        return core.succeed(Chunk.fromIterable(messages))\n      }\n      const remaining = this.unsafeOfferAllArray(messages)\n      if (remaining.length === 0) {\n        return exitEmpty\n      } else if (this.strategy === \"dropping\") {\n        return core.succeed(Chunk.unsafeFromArray(remaining))\n      }\n      return this.offerRemainingArray(remaining)\n    })\n  }\n  unsafeOfferAll(messages: Iterable<A>): Chunk.Chunk<A> {\n    return Chunk.unsafeFromArray(this.unsafeOfferAllArray(messages))\n  }\n  unsafeOfferAllArray(messages: Iterable<A>): Array<A> {\n    if (this.state._tag !== \"Open\") {\n      return Arr.fromIterable(messages)\n    } else if (this.capacity === Number.POSITIVE_INFINITY || this.strategy === \"sliding\") {\n      if (this.messages.length > 0) {\n        this.messagesChunk = Chunk.appendAll(this.messagesChunk, Chunk.unsafeFromArray(this.messages))\n      }\n      if (this.strategy === \"sliding\") {\n        this.messagesChunk = this.messagesChunk.pipe(\n          Chunk.appendAll(Chunk.fromIterable(messages)),\n          Chunk.takeRight(this.capacity)\n        )\n      } else if (Chunk.isChunk(messages)) {\n        this.messagesChunk = Chunk.appendAll(this.messagesChunk, messages)\n      } else {\n        this.messages = Arr.fromIterable(messages)\n      }\n      this.scheduleReleaseTaker()\n      return []\n    }\n    const free = this.capacity <= 0\n      ? this.state.takers.size\n      : this.capacity - this.messages.length - this.messagesChunk.length\n    if (free === 0) {\n      return Arr.fromIterable(messages)\n    }\n    const remaining: Array<A> = []\n    let i = 0\n    for (const message of messages) {\n      if (i < free) {\n        this.messages.push(message)\n      } else {\n        remaining.push(message)\n      }\n      i++\n    }\n    this.scheduleReleaseTaker()\n    return remaining\n  }\n  fail(error: E) {\n    return this.done(core.exitFail(error))\n  }\n  failCause(cause: Cause<E>) {\n    return this.done(core.exitFailCause(cause))\n  }\n  unsafeDone(exit: Exit<void, E>): boolean {\n    if (this.state._tag !== \"Open\") {\n      return false\n    } else if (this.state.offers.size === 0 && this.messages.length === 0 && this.messagesChunk.length === 0) {\n      this.finalize(exit)\n      return true\n    }\n    this.state = { ...this.state, _tag: \"Closing\", exit }\n    return true\n  }\n  shutdown: Effect<boolean> = core.sync(() => {\n    if (this.state._tag === \"Done\") {\n      return true\n    }\n    this.messages = []\n    this.messagesChunk = empty\n    const offers = this.state.offers\n    this.finalize(this.state._tag === \"Open\" ? core.exitVoid : this.state.exit)\n    if (offers.size > 0) {\n      for (const entry of offers) {\n        if (entry._tag === \"Single\") {\n          entry.resume(exitFalse)\n        } else {\n          entry.resume(core.exitSucceed(Chunk.unsafeFromArray(entry.remaining.slice(entry.offset))))\n        }\n      }\n      offers.clear()\n    }\n    return true\n  })\n  done(exit: Exit<void, E>) {\n    return core.sync(() => this.unsafeDone(exit))\n  }\n  end = this.done(core.exitVoid)\n  clear: Effect<Chunk.Chunk<A>, E> = core.suspend(() => {\n    if (this.state._tag === \"Done\") {\n      return core.exitAs(this.state.exit, empty)\n    }\n    const messages = this.unsafeTakeAll()\n    this.releaseCapacity()\n    return core.succeed(messages)\n  })\n  takeAll: Effect<readonly [messages: Chunk.Chunk<A>, done: boolean], E> = core.suspend(() => {\n    if (this.state._tag === \"Done\") {\n      return core.exitAs(this.state.exit, constDone)\n    }\n    const messages = this.unsafeTakeAll()\n    if (messages.length === 0) {\n      return core.zipRight(this.awaitTake, this.takeAll)\n    }\n    return core.succeed([messages, this.releaseCapacity()])\n  })\n  takeN(n: number): Effect<readonly [messages: Chunk.Chunk<A>, done: boolean], E> {\n    return core.suspend(() => {\n      if (this.state._tag === \"Done\") {\n        return core.exitAs(this.state.exit, constDone)\n      } else if (n <= 0) {\n        return core.succeed([empty, false])\n      }\n      n = Math.min(n, this.capacity)\n      let messages: Chunk.Chunk<A>\n      if (n <= this.messagesChunk.length) {\n        messages = Chunk.take(this.messagesChunk, n)\n        this.messagesChunk = Chunk.drop(this.messagesChunk, n)\n      } else if (n <= this.messages.length + this.messagesChunk.length) {\n        this.messagesChunk = Chunk.appendAll(this.messagesChunk, Chunk.unsafeFromArray(this.messages))\n        this.messages = []\n        messages = Chunk.take(this.messagesChunk, n)\n        this.messagesChunk = Chunk.drop(this.messagesChunk, n)\n      } else {\n        return core.zipRight(this.awaitTake, this.takeN(n))\n      }\n      return core.succeed([messages, this.releaseCapacity()])\n    })\n  }\n  unsafeTake(): Exit<A, E | NoSuchElementException> | undefined {\n    if (this.state._tag === \"Done\") {\n      return core.exitZipRight(this.state.exit, core.exitFail(new NoSuchElementException()))\n    }\n    let message: A\n    if (this.messagesChunk.length > 0) {\n      message = Chunk.unsafeHead(this.messagesChunk)\n      this.messagesChunk = Chunk.drop(this.messagesChunk, 1)\n    } else if (this.messages.length > 0) {\n      message = this.messages[0]\n      this.messagesChunk = Chunk.drop(Chunk.unsafeFromArray(this.messages), 1)\n      this.messages = []\n    } else if (this.capacity <= 0 && this.state.offers.size > 0) {\n      this.capacity = 1\n      this.releaseCapacity()\n      this.capacity = 0\n      return this.messages.length > 0 ? core.exitSucceed(this.messages.pop()!) : undefined\n    } else {\n      return undefined\n    }\n    this.releaseCapacity()\n    return core.exitSucceed(message)\n  }\n  take: Effect<A, E | NoSuchElementException> = core.suspend(() =>\n    this.unsafeTake() ?? core.zipRight(this.awaitTake, this.take)\n  )\n  await: Effect<void, E> = core.asyncInterrupt<void, E>((resume) => {\n    if (this.state._tag === \"Done\") {\n      return resume(this.state.exit)\n    }\n    this.state.awaiters.add(resume)\n    return core.sync(() => {\n      if (this.state._tag !== \"Done\") {\n        this.state.awaiters.delete(resume)\n      }\n    })\n  })\n  unsafeSize(): Option.Option<number> {\n    const size = this.messages.length + this.messagesChunk.length\n    return this.state._tag === \"Done\" ? Option.none() : Option.some(size)\n  }\n  size = core.sync(() => this.unsafeSize())\n\n  commit() {\n    return this.takeAll\n  }\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n  toJSON() {\n    return {\n      _id: \"effect/Mailbox\",\n      state: this.state._tag,\n      size: this.unsafeSize().toJSON()\n    }\n  }\n  toString(): string {\n    return Inspectable.format(this)\n  }\n  [Inspectable.NodeInspectSymbol]() {\n    return Inspectable.format(this)\n  }\n\n  private offerRemainingSingle(message: A) {\n    return core.asyncInterrupt<boolean>((resume) => {\n      if (this.state._tag !== \"Open\") {\n        return resume(exitFalse)\n      }\n      const entry: OfferEntry<A> = { _tag: \"Single\", message, resume }\n      this.state.offers.add(entry)\n      return core.sync(() => {\n        if (this.state._tag === \"Open\") {\n          this.state.offers.delete(entry)\n        }\n      })\n    })\n  }\n  private offerRemainingArray(remaining: Array<A>) {\n    return core.asyncInterrupt<Chunk.Chunk<A>>((resume) => {\n      if (this.state._tag !== \"Open\") {\n        return resume(core.exitSucceed(Chunk.unsafeFromArray(remaining)))\n      }\n      const entry: OfferEntry<A> = { _tag: \"Array\", remaining, offset: 0, resume }\n      this.state.offers.add(entry)\n      return core.sync(() => {\n        if (this.state._tag === \"Open\") {\n          this.state.offers.delete(entry)\n        }\n      })\n    })\n  }\n  private releaseCapacity(): boolean {\n    if (this.state._tag === \"Done\") {\n      return this.state.exit._tag === \"Success\"\n    } else if (this.state.offers.size === 0) {\n      if (this.state._tag === \"Closing\" && this.messages.length === 0 && this.messagesChunk.length === 0) {\n        this.finalize(this.state.exit)\n        return this.state.exit._tag === \"Success\"\n      }\n      return false\n    }\n    let n = this.capacity - this.messages.length - this.messagesChunk.length\n    for (const entry of this.state.offers) {\n      if (n === 0) return false\n      else if (entry._tag === \"Single\") {\n        this.messages.push(entry.message)\n        n--\n        entry.resume(exitTrue)\n        this.state.offers.delete(entry)\n      } else {\n        for (; entry.offset < entry.remaining.length; entry.offset++) {\n          if (n === 0) return false\n          this.messages.push(entry.remaining[entry.offset])\n          n--\n        }\n        entry.resume(exitEmpty)\n        this.state.offers.delete(entry)\n      }\n    }\n    return false\n  }\n  private awaitTake = core.asyncInterrupt<void, E>((resume) => {\n    if (this.state._tag === \"Done\") {\n      return resume(this.state.exit)\n    }\n    this.state.takers.add(resume)\n    return core.sync(() => {\n      if (this.state._tag !== \"Done\") {\n        this.state.takers.delete(resume)\n      }\n    })\n  })\n\n  private scheduleRunning = false\n  private scheduleReleaseTaker() {\n    if (this.scheduleRunning) {\n      return\n    }\n    this.scheduleRunning = true\n    this.scheduler.scheduleTask(this.releaseTaker, 0)\n  }\n  private releaseTaker = () => {\n    this.scheduleRunning = false\n    if (this.state._tag === \"Done\") {\n      return\n    } else if (this.state.takers.size === 0) {\n      return\n    }\n    const taker = Iterable.unsafeHead(this.state.takers)\n    this.state.takers.delete(taker)\n    taker(core.exitVoid)\n  }\n\n  private unsafeTakeAll() {\n    if (this.messagesChunk.length > 0) {\n      const messages = this.messages.length > 0 ?\n        Chunk.appendAll(this.messagesChunk, Chunk.unsafeFromArray(this.messages)) :\n        this.messagesChunk\n      this.messagesChunk = empty\n      this.messages = []\n      return messages\n    } else if (this.messages.length > 0) {\n      const messages = Chunk.unsafeFromArray(this.messages)\n      this.messages = []\n      return messages\n    } else if (this.state._tag !== \"Done\" && this.state.offers.size > 0) {\n      this.capacity = 1\n      this.releaseCapacity()\n      this.capacity = 0\n      return Chunk.of(this.messages.pop()!)\n    }\n    return empty\n  }\n\n  private finalize(exit: Exit<void, E>) {\n    if (this.state._tag === \"Done\") {\n      return\n    }\n    const openState = this.state\n    this.state = { _tag: \"Done\", exit }\n    for (const taker of openState.takers) {\n      taker(exit)\n    }\n    openState.takers.clear()\n    for (const awaiter of openState.awaiters) {\n      awaiter(exit)\n    }\n    openState.awaiters.clear()\n  }\n}\n\n/** @internal */\nexport const make = <A, E = never>(\n  capacity?: number | {\n    readonly capacity?: number | undefined\n    readonly strategy?: \"suspend\" | \"dropping\" | \"sliding\" | undefined\n  } | undefined\n): Effect<Api.Mailbox<A, E>> =>\n  core.withFiberRuntime((fiber) =>\n    core.succeed(\n      new MailboxImpl<A, E>(\n        fiber.currentScheduler,\n        typeof capacity === \"number\" ? capacity : capacity?.capacity ?? Number.POSITIVE_INFINITY,\n        typeof capacity === \"number\" ? \"suspend\" : capacity?.strategy ?? \"suspend\"\n      )\n    )\n  )\n\n/** @internal */\nexport const into: {\n  <A, E>(\n    self: Api.Mailbox<A, E>\n  ): <AX, EX extends E, RX>(effect: Effect<AX, EX, RX>) => Effect<boolean, never, RX>\n  <AX, E, EX extends E, RX, A>(\n    effect: Effect<AX, EX, RX>,\n    self: Api.Mailbox<A, E>\n  ): Effect<boolean, never, RX>\n} = dual(\n  2,\n  <AX, E, EX extends E, RX, A>(\n    effect: Effect<AX, EX, RX>,\n    self: Api.Mailbox<A, E>\n  ): Effect<boolean, never, RX> =>\n    core.uninterruptibleMask((restore) =>\n      core.matchCauseEffect(restore(effect), {\n        onFailure: (cause) => self.failCause(cause),\n        onSuccess: (_) => self.end\n      })\n    )\n)\n\n/** @internal */\nexport const toChannel = <A, E>(self: Api.ReadonlyMailbox<A, E>): Channel<Chunk.Chunk<A>, unknown, E> => {\n  const loop: Channel<Chunk.Chunk<A>, unknown, E> = coreChannel.flatMap(self.takeAll, ([messages, done]) =>\n    done\n      ? messages.length === 0 ? coreChannel.void : coreChannel.write(messages)\n      : channel.zipRight(coreChannel.write(messages), loop))\n  return loop\n}\n\n/** @internal */\nexport const toStream = <A, E>(self: Api.ReadonlyMailbox<A, E>): Stream<A, E> => stream.fromChannel(toChannel(self))\n\n/** @internal */\nexport const fromStream: {\n  (options?: {\n    readonly capacity?: number | undefined\n    readonly strategy?: \"suspend\" | \"dropping\" | \"sliding\" | undefined\n  }): <A, E, R>(self: Stream<A, E, R>) => Effect<Api.ReadonlyMailbox<A, E>, never, R | Scope>\n  <A, E, R>(\n    self: Stream<A, E, R>,\n    options?: {\n      readonly capacity?: number | undefined\n      readonly strategy?: \"suspend\" | \"dropping\" | \"sliding\" | undefined\n    }\n  ): Effect<Api.ReadonlyMailbox<A, E>, never, R | Scope>\n} = dual((args) => stream.isStream(args[0]), <A, E, R>(\n  self: Stream<A, E, R>,\n  options?: {\n    readonly capacity?: number | undefined\n    readonly strategy?: \"suspend\" | \"dropping\" | \"sliding\" | undefined\n  }\n): Effect<Api.ReadonlyMailbox<A, E>, never, R | Scope> =>\n  core.tap(\n    fiberRuntime.acquireRelease(\n      make<A, E>(options),\n      (mailbox) => mailbox.shutdown\n    ),\n    (mailbox) => {\n      const writer: Channel<never, Chunk.Chunk<A>, never, E> = coreChannel.readWithCause({\n        onInput: (input: Chunk.Chunk<A>) => coreChannel.flatMap(mailbox.offerAll(input), () => writer),\n        onFailure: (cause: Cause<E>) => mailbox.failCause(cause),\n        onDone: () => mailbox.end\n      })\n      return channel.unwrapScopedWith((scope) =>\n        stream.toChannel(self).pipe(\n          coreChannel.pipeTo(writer),\n          channelExecutor.runIn(scope),\n          circular.forkIn(scope)\n        )\n      )\n    }\n  ))\n"],"names":["Arr","NoSuchElementException","Chunk","Effectable","dual","Inspectable","Iterable","Option","pipeArguments","hasProperty","channel","channelExecutor","coreChannel","core","circular","fiberRuntime","stream","TypeId","Symbol","for","ReadonlyTypeId","isMailbox","u","isReadonlyMailbox","empty","exitEmpty","exitSucceed","exitFalse","exitTrue","constDone","MailboxImpl","Class","scheduler","capacity","strategy","state","_tag","takers","Set","offers","awaiters","messages","messagesChunk","constructor","offer","message","suspend","length","size","push","releaseTaker","offerRemainingSingle","unsafeTake","scheduleReleaseTaker","unsafeOffer","offerAll","succeed","fromIterable","remaining","unsafeOfferAllArray","unsafeFromArray","offerRemainingArray","unsafeOfferAll","Number","POSITIVE_INFINITY","appendAll","pipe","takeRight","isChunk","free","i","fail","error","done","exitFail","failCause","cause","exitFailCause","unsafeDone","exit","finalize","shutdown","sync","exitVoid","entry","resume","slice","offset","clear","end","exitAs","unsafeTakeAll","releaseCapacity","takeAll","zipRight","awaitTake","takeN","n","Math","min","take","drop","exitZipRight","unsafeHead","pop","undefined","await","asyncInterrupt","add","delete","unsafeSize","none","some","commit","arguments","toJSON","_id","toString","format","NodeInspectSymbol","scheduleRunning","scheduleTask","taker","of","openState","awaiter","make","withFiberRuntime","fiber","currentScheduler","into","effect","self","uninterruptibleMask","restore","matchCauseEffect","onFailure","onSuccess","_","toChannel","loop","flatMap","void","write","toStream","fromChannel","fromStream","args","isStream","options","tap","acquireRelease","mailbox","writer","readWithCause","onInput","input","onDone","unwrapScopedWith","scope","pipeTo","runIn","forkIn"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20635, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 20641, "column": 0}, "map": {"version":3,"file":"matcher.js","sources":["file:///home/yurtur/projects/candle-constructor/node_modules/effect/src/internal/matcher.ts"],"sourcesContent":["import * as Either from \"../Either.js\"\nimport { identity } from \"../Function.js\"\nimport type {\n  Case,\n  Matcher,\n  MatcherTypeId,\n  Not,\n  SafeRefinement,\n  TypeMatcher,\n  Types,\n  ValueMatcher,\n  When\n} from \"../Match.js\"\nimport * as Option from \"../Option.js\"\nimport { pipeArguments } from \"../Pipeable.js\"\nimport type * as Predicate from \"../Predicate.js\"\nimport type { Unify } from \"../Unify.js\"\n\n/** @internal */\nexport const TypeId: MatcherTypeId = Symbol.for(\n  \"@effect/matcher/Matcher\"\n) as MatcherTypeId\n\nconst TypeMatcherProto: Omit<TypeMatcher<any, any, any, any>, \"cases\"> = {\n  [TypeId]: {\n    _input: identity,\n    _filters: identity,\n    _remaining: identity,\n    _result: identity,\n    _return: identity\n  },\n  _tag: \"TypeMatcher\",\n  add<I, R, RA, A>(\n    this: TypeMatcher<any, any, any, any>,\n    _case: Case\n  ): TypeMatcher<I, R, RA, A> {\n    return makeTypeMatcher([...this.cases, _case])\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nfunction makeTypeMatcher<I, R, RA, A>(\n  cases: ReadonlyArray<Case>\n): TypeMatcher<I, R, RA, A> {\n  const matcher = Object.create(TypeMatcherProto)\n  matcher.cases = cases\n  return matcher\n}\n\nconst ValueMatcherProto: Omit<\n  ValueMatcher<any, any, any, any, any>,\n  \"provided\" | \"value\"\n> = {\n  [TypeId]: {\n    _input: identity,\n    _filters: identity,\n    _result: identity,\n    _return: identity\n  },\n  _tag: \"ValueMatcher\",\n  add<I, R, RA, A, Pr>(\n    this: ValueMatcher<any, any, any, any, any>,\n    _case: Case\n  ): ValueMatcher<I, R, RA, A, Pr> {\n    if (this.value._tag === \"Right\") {\n      return this\n    }\n\n    if (_case._tag === \"When\" && _case.guard(this.provided) === true) {\n      return makeValueMatcher(\n        this.provided,\n        Either.right(_case.evaluate(this.provided))\n      )\n    } else if (_case._tag === \"Not\" && _case.guard(this.provided) === false) {\n      return makeValueMatcher(\n        this.provided,\n        Either.right(_case.evaluate(this.provided))\n      )\n    }\n\n    return this\n  },\n  pipe() {\n    return pipeArguments(this, arguments)\n  }\n}\n\nfunction makeValueMatcher<I, R, RA, A, Pr>(\n  provided: Pr,\n  value: Either.Either<Pr, RA>\n): ValueMatcher<I, R, RA, A, Pr> {\n  const matcher = Object.create(ValueMatcherProto)\n  matcher.provided = provided\n  matcher.value = value\n  return matcher\n}\n\nconst makeWhen = (\n  guard: (u: unknown) => boolean,\n  evaluate: (input: unknown) => any\n): When => ({\n  _tag: \"When\",\n  guard,\n  evaluate\n})\n\nconst makeNot = (\n  guard: (u: unknown) => boolean,\n  evaluate: (input: unknown) => any\n): Not => ({\n  _tag: \"Not\",\n  guard,\n  evaluate\n})\n\nconst makePredicate = (pattern: unknown): Predicate.Predicate<unknown> => {\n  if (typeof pattern === \"function\") {\n    return pattern as Predicate.Predicate<unknown>\n  } else if (Array.isArray(pattern)) {\n    const predicates = pattern.map(makePredicate)\n    const len = predicates.length\n\n    return (u: unknown) => {\n      if (!Array.isArray(u)) {\n        return false\n      }\n\n      for (let i = 0; i < len; i++) {\n        if (predicates[i](u[i]) === false) {\n          return false\n        }\n      }\n\n      return true\n    }\n  } else if (pattern !== null && typeof pattern === \"object\") {\n    const keysAndPredicates = Object.entries(pattern).map(\n      ([k, p]) => [k, makePredicate(p)] as const\n    )\n    const len = keysAndPredicates.length\n\n    return (u: unknown) => {\n      if (typeof u !== \"object\" || u === null) {\n        return false\n      }\n\n      for (let i = 0; i < len; i++) {\n        const [key, predicate] = keysAndPredicates[i]\n        if (!(key in u) || predicate((u as any)[key]) === false) {\n          return false\n        }\n      }\n\n      return true\n    }\n  }\n\n  return (u: unknown) => u === pattern\n}\n\nconst makeOrPredicate = (\n  patterns: ReadonlyArray<unknown>\n): Predicate.Predicate<unknown> => {\n  const predicates = patterns.map(makePredicate)\n  const len = predicates.length\n\n  return (u: unknown) => {\n    for (let i = 0; i < len; i++) {\n      if (predicates[i](u) === true) {\n        return true\n      }\n    }\n\n    return false\n  }\n}\n\nconst makeAndPredicate = (\n  patterns: ReadonlyArray<unknown>\n): Predicate.Predicate<unknown> => {\n  const predicates = patterns.map(makePredicate)\n  const len = predicates.length\n\n  return (u: unknown) => {\n    for (let i = 0; i < len; i++) {\n      if (predicates[i](u) === false) {\n        return false\n      }\n    }\n\n    return true\n  }\n}\n\n/** @internal */\nexport const type = <I>(): Matcher<\n  I,\n  Types.Without<never>,\n  I,\n  never,\n  never\n> => makeTypeMatcher([])\n\n/** @internal */\nexport const value = <const I>(\n  i: I\n): Matcher<I, Types.Without<never>, I, never, I> => makeValueMatcher(i, Either.left(i))\n\n/** @internal */\nexport const valueTags = <\n  const I,\n  P extends {\n    readonly [Tag in Types.Tags<\"_tag\", I> & string]: (\n      _: Extract<I, { readonly _tag: Tag }>\n    ) => any\n  }\n>(\n  fields: P\n) => {\n  const match: any = tagsExhaustive(fields as any)(makeTypeMatcher([]))\n  return (input: I): Unify<ReturnType<P[keyof P]>> => match(input)\n}\n\n/** @internal */\nexport const typeTags = <I>() =>\n<\n  P extends {\n    readonly [Tag in Types.Tags<\"_tag\", I> & string]: (\n      _: Extract<I, { readonly _tag: Tag }>\n    ) => any\n  }\n>(\n  fields: P\n) => {\n  const match: any = tagsExhaustive(fields as any)(makeTypeMatcher([]))\n  return (input: I): Unify<ReturnType<P[keyof P]>> => match(input)\n}\n\n/** @internal */\nexport const withReturnType = <Ret>() =>\n<I, F, R, A, Pr, _>(self: Matcher<I, F, R, A, Pr, _>): [Ret] extends [\n  [A] extends [never] ? any : A\n] ? Matcher<I, F, R, A, Pr, Ret>\n  : \"withReturnType constraint does not extend Result type\" => self as any\n\n/** @internal */\nexport const when = <\n  R,\n  const P extends Types.PatternPrimitive<R> | Types.PatternBase<R>,\n  Ret,\n  Fn extends (_: Types.WhenMatch<R, P>) => Ret\n>(\n  pattern: P,\n  f: Fn\n) =>\n<I, F, A, Pr>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n): Matcher<\n  I,\n  Types.AddWithout<F, Types.PForExclude<P>>,\n  Types.ApplyFilters<I, Types.AddWithout<F, Types.PForExclude<P>>>,\n  A | ReturnType<Fn>,\n  Pr,\n  Ret\n> => (self as any).add(makeWhen(makePredicate(pattern), f as any))\n\n/** @internal */\nexport const whenOr = <\n  R,\n  const P extends ReadonlyArray<\n    Types.PatternPrimitive<R> | Types.PatternBase<R>\n  >,\n  Ret,\n  Fn extends (_: Types.WhenMatch<R, P[number]>) => Ret\n>(\n  ...args: [...patterns: P, f: Fn]\n) =>\n<I, F, A, Pr>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n): Matcher<\n  I,\n  Types.AddWithout<F, Types.PForExclude<P[number]>>,\n  Types.ApplyFilters<I, Types.AddWithout<F, Types.PForExclude<P[number]>>>,\n  A | ReturnType<Fn>,\n  Pr,\n  Ret\n> => {\n  const onMatch = args[args.length - 1] as any\n  const patterns = args.slice(0, -1) as unknown as P\n  return (self as any).add(makeWhen(makeOrPredicate(patterns), onMatch))\n}\n\n/** @internal */\nexport const whenAnd = <\n  R,\n  const P extends ReadonlyArray<\n    Types.PatternPrimitive<R> | Types.PatternBase<R>\n  >,\n  Ret,\n  Fn extends (_: Types.WhenMatch<R, Types.ArrayToIntersection<P>>) => Ret\n>(\n  ...args: [...patterns: P, f: Fn]\n) =>\n<I, F, A, Pr>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n): Matcher<\n  I,\n  Types.AddWithout<F, Types.PForExclude<Types.ArrayToIntersection<P>>>,\n  Types.ApplyFilters<\n    I,\n    Types.AddWithout<F, Types.PForExclude<Types.ArrayToIntersection<P>>>\n  >,\n  A | ReturnType<Fn>,\n  Pr\n> => {\n  const onMatch = args[args.length - 1] as any\n  const patterns = args.slice(0, -1) as unknown as P\n  return (self as any).add(makeWhen(makeAndPredicate(patterns), onMatch))\n}\n\n/** @internal */\nexport const discriminator =\n  <D extends string>(field: D) =>\n  <R, P extends Types.Tags<D, R> & string, Ret, B extends Ret>(\n    ...pattern: [\n      first: P,\n      ...values: Array<P>,\n      f: (_: Extract<R, Record<D, P>>) => B\n    ]\n  ) => {\n    const f = pattern[pattern.length - 1]\n    const values: Array<P> = pattern.slice(0, -1) as any\n    const pred = values.length === 1\n      ? (_: any) => _[field] === values[0]\n      : (_: any) => values.includes(_[field])\n\n    return <I, F, A, Pr>(\n      self: Matcher<I, F, R, A, Pr, Ret>\n    ): Matcher<\n      I,\n      Types.AddWithout<F, Extract<R, Record<D, P>>>,\n      Types.ApplyFilters<I, Types.AddWithout<F, Extract<R, Record<D, P>>>>,\n      A | B,\n      Pr,\n      Ret\n    > => (self as any).add(makeWhen(pred, f as any)) as any\n  }\n\n/** @internal */\nexport const discriminatorStartsWith = <D extends string>(field: D) =>\n<R, P extends string, Ret, B extends Ret>(\n  pattern: P,\n  f: (_: Extract<R, Record<D, `${P}${string}`>>) => B\n) => {\n  const pred = (_: any) => typeof _[field] === \"string\" && _[field].startsWith(pattern)\n\n  return <I, F, A, Pr>(\n    self: Matcher<I, F, R, A, Pr, Ret>\n  ): Matcher<\n    I,\n    Types.AddWithout<F, Extract<R, Record<D, `${P}${string}`>>>,\n    Types.ApplyFilters<\n      I,\n      Types.AddWithout<F, Extract<R, Record<D, `${P}${string}`>>>\n    >,\n    A | B,\n    Pr,\n    Ret\n  > => (self as any).add(makeWhen(pred, f as any)) as any\n}\n\n/** @internal */\nexport const discriminators = <D extends string>(field: D) =>\n<\n  R,\n  Ret,\n  P extends\n    & {\n      readonly [Tag in Types.Tags<D, R> & string]?:\n        | ((_: Extract<R, Record<D, Tag>>) => Ret)\n        | undefined\n    }\n    & { readonly [Tag in Exclude<keyof P, Types.Tags<D, R>>]: never }\n>(\n  fields: P\n) => {\n  const predicate = makeWhen(\n    (_: any) => _[field] in fields,\n    (data: any) => (fields as any)[data[field]](data)\n  )\n\n  return <I, F, A, Pr>(\n    self: Matcher<I, F, R, A, Pr, Ret>\n  ): Matcher<\n    I,\n    Types.AddWithout<F, Extract<R, Record<D, keyof P>>>,\n    Types.ApplyFilters<I, Types.AddWithout<F, Extract<R, Record<D, keyof P>>>>,\n    A | ReturnType<P[keyof P] & {}>,\n    Pr,\n    Ret\n  > => (self as any).add(predicate)\n}\n\n/** @internal */\nexport const discriminatorsExhaustive: <D extends string>(\n  field: D\n) => <\n  R,\n  Ret,\n  P extends\n    & {\n      readonly [Tag in Types.Tags<D, R> & string]: (\n        _: Extract<R, Record<D, Tag>>\n      ) => Ret\n    }\n    & { readonly [Tag in Exclude<keyof P, Types.Tags<D, R>>]: never }\n>(\n  fields: P\n) => <I, F, A, Pr>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n) => [Pr] extends [never] ? (u: I) => Unify<A | ReturnType<P[keyof P]>>\n  : Unify<A | ReturnType<P[keyof P]>> = (field: string) => (fields: object) => {\n    const addCases = discriminators(field)(fields)\n    return (matcher: any) => exhaustive(addCases(matcher))\n  }\n\n/** @internal */\nexport const tag: <R, P extends Types.Tags<\"_tag\", R> & string, Ret, B extends Ret>(\n  ...pattern: [\n    first: P,\n    ...values: Array<P>,\n    f: (_: Extract<R, Record<\"_tag\", P>>) => B\n  ]\n) => <I, F, A, Pr>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n) => Matcher<\n  I,\n  Types.AddWithout<F, Extract<R, Record<\"_tag\", P>>>,\n  Types.ApplyFilters<I, Types.AddWithout<F, Extract<R, Record<\"_tag\", P>>>>,\n  B | A,\n  Pr,\n  Ret\n> = discriminator(\"_tag\")\n\n/** @internal */\nexport const tagStartsWith = discriminatorStartsWith(\"_tag\")\n\n/** @internal */\nexport const tags = discriminators(\"_tag\")\n\n/** @internal */\nexport const tagsExhaustive = discriminatorsExhaustive(\"_tag\")\n\n/** @internal */\nexport const not = <\n  R,\n  const P extends Types.PatternPrimitive<R> | Types.PatternBase<R>,\n  Ret,\n  Fn extends (_: Types.NotMatch<R, P>) => Ret\n>(\n  pattern: P,\n  f: Fn\n) =>\n<I, F, A, Pr>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n): Matcher<\n  I,\n  Types.AddOnly<F, Types.WhenMatch<R, P>>,\n  Types.ApplyFilters<I, Types.AddOnly<F, Types.WhenMatch<R, P>>>,\n  A | ReturnType<Fn>,\n  Pr,\n  Ret\n> => (self as any).add(makeNot(makePredicate(pattern), f as any))\n\n/** @internal */\nexport const nonEmptyString: SafeRefinement<string, never> =\n  ((u: unknown) => typeof u === \"string\" && u.length > 0) as any\n\n/** @internal */\nexport const is: <\n  Literals extends ReadonlyArray<string | number | boolean | null | bigint>\n>(\n  ...literals: Literals\n) => Predicate.Refinement<unknown, Literals[number]> = (...literals): any => {\n  const len = literals.length\n  return (u: unknown) => {\n    for (let i = 0; i < len; i++) {\n      if (u === literals[i]) {\n        return true\n      }\n    }\n    return false\n  }\n}\n\n/** @internal */\nexport const any: SafeRefinement<unknown, any> = (() => true) as any\n\n/** @internal */\nexport const defined = <A>(u: A): u is A & {} => (u !== undefined && u !== null) as any\n\n/** @internal */\nexport const instanceOf = <A extends abstract new(...args: any) => any>(\n  constructor: A\n): SafeRefinement<InstanceType<A>, never> => ((u: unknown) => u instanceof constructor) as any\n\n/** @internal */\nexport const instanceOfUnsafe: <A extends abstract new(...args: any) => any>(\n  constructor: A\n) => SafeRefinement<InstanceType<A>, InstanceType<A>> = instanceOf\n\n/** @internal */\nexport const orElse =\n  <RA, Ret, F extends (_: RA) => Ret>(f: F) =>\n  <I, R, A, Pr>(self: Matcher<I, R, RA, A, Pr, Ret>): [Pr] extends [never] ? (input: I) => Unify<ReturnType<F> | A>\n    : Unify<ReturnType<F> | A> =>\n  {\n    const result = either(self)\n\n    if (Either.isEither(result)) {\n      // @ts-expect-error\n      return result._tag === \"Right\" ? result.right : f(result.left)\n    }\n\n    // @ts-expect-error\n    return (input: I) => {\n      const a = result(input)\n      return a._tag === \"Right\" ? a.right : f(a.left)\n    }\n  }\n\n/** @internal */\nexport const orElseAbsurd = <I, R, RA, A, Pr, Ret>(\n  self: Matcher<I, R, RA, A, Pr, Ret>\n): [Pr] extends [never] ? (input: I) => Unify<A> : Unify<A> =>\n  orElse(() => {\n    throw new Error(\"effect/Match/orElseAbsurd: absurd\")\n  })(self)\n\n/** @internal */\nexport const either: <I, F, R, A, Pr, Ret>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n) => [Pr] extends [never] ? (input: I) => Either.Either<Unify<A>, R>\n  : Either.Either<Unify<A>, R> = (<I, R, RA, A>(self: Matcher<I, R, RA, A, I>) => {\n    if (self._tag === \"ValueMatcher\") {\n      return self.value\n    }\n\n    const len = self.cases.length\n    if (len === 1) {\n      const _case = self.cases[0]\n      return (input: I): Either.Either<A, RA> => {\n        if (_case._tag === \"When\" && _case.guard(input) === true) {\n          return Either.right(_case.evaluate(input))\n        } else if (_case._tag === \"Not\" && _case.guard(input) === false) {\n          return Either.right(_case.evaluate(input))\n        }\n        return Either.left(input as any)\n      }\n    }\n    return (input: I): Either.Either<A, RA> => {\n      for (let i = 0; i < len; i++) {\n        const _case = self.cases[i]\n        if (_case._tag === \"When\" && _case.guard(input) === true) {\n          return Either.right(_case.evaluate(input))\n        } else if (_case._tag === \"Not\" && _case.guard(input) === false) {\n          return Either.right(_case.evaluate(input))\n        }\n      }\n\n      return Either.left(input as any)\n    }\n  }) as any\n\n/** @internal */\nexport const option: <I, F, R, A, Pr, Ret>(\n  self: Matcher<I, F, R, A, Pr, Ret>\n) => [Pr] extends [never] ? (input: I) => Option.Option<Unify<A>>\n  : Option.Option<Unify<A>> = (<I, A>(self: Matcher<I, any, any, A, I>) => {\n    const toEither = either(self)\n    if (Either.isEither(toEither)) {\n      return Either.match(toEither, {\n        onLeft: () => Option.none(),\n        onRight: Option.some\n      })\n    }\n    return (input: I): Option.Option<A> =>\n      Either.match((toEither as any)(input), {\n        onLeft: () => Option.none(),\n        onRight: Option.some as any\n      })\n  }) as any\n\nconst getExhaustiveAbsurdErrorMessage = \"effect/Match/exhaustive: absurd\"\n\n/** @internal */\nexport const exhaustive: <I, F, A, Pr, Ret>(\n  self: Matcher<I, F, never, A, Pr, Ret>\n) => [Pr] extends [never] ? (u: I) => Unify<A> : Unify<A> = (<I, F, A>(\n  self: Matcher<I, F, never, A, I>\n) => {\n  const toEither = either(self as any)\n\n  if (Either.isEither(toEither)) {\n    if (toEither._tag === \"Right\") {\n      return toEither.right\n    }\n\n    throw new Error(getExhaustiveAbsurdErrorMessage)\n  }\n\n  return (u: I): A => {\n    // @ts-expect-error\n    const result = toEither(u)\n\n    if (result._tag === \"Right\") {\n      return result.right as any\n    }\n\n    throw new Error(getExhaustiveAbsurdErrorMessage)\n  }\n}) as any\n"],"names":["Either","identity","Option","pipeArguments","TypeId","Symbol","for","TypeMatcherProto","_input","_filters","_remaining","_result","_return","_tag","add","_case","makeTypeMatcher","cases","pipe","arguments","matcher","Object","create","ValueMatcherProto","value","guard","provided","makeValueMatcher","right","evaluate","makeWhen","makeNot","makePredicate","pattern","Array","isArray","predicates","map","len","length","u","i","keysAndPredicates","entries","k","p","key","predicate","makeOrPredicate","patterns","makeAndPredicate","type","left","valueTags","fields","match","tagsExhaustive","input","typeTags","withReturnType","self","when","f","whenOr","args","onMatch","slice","whenAnd","discriminator","field","values","pred","_","includes","discriminatorStartsWith","startsWith","discriminators","data","discriminatorsExhaustive","addCases","exhaustive","tag","tagStartsWith","tags","not","nonEmptyString","is","literals","any","defined","undefined","instanceOf","constructor","instanceOfUnsafe","orElse","result","either","isEither","a","orElseAbsurd","Error","option","toEither","onLeft","none","onRight","some","getExhaustiveAbsurdErrorMessage"],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20941, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}